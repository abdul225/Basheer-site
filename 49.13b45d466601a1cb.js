(self.webpackChunkbasheer_site=self.webpackChunkbasheer_site||[]).push([[49],{49:(Z,q,N)=>{"use strict";N.r(q),N.d(q,{LivestreamModule:()=>F});var x=N(9808),O=N(6774),_=N(5e3),w=N(8293);class o{constructor(G){this.config=G,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=o.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(G,X=!0,Q,ve){return this.client=this.AgoraRTC.createClient(G),X&&this.init(this.config.AppID,Q,ve),this.client}createStream(G){if(!G.microphoneId&&this.audioDevices&&this.audioDevices.length&&(G.microphoneId=this.audioDevices[0].deviceId),!G.cameraId&&this.videoDevices&&this.videoDevices.length){const X=this.videoDevices[0].deviceId;G.cameraId=G.cameraId||X}return this.AgoraRTC.createStream(G)}init(G,X,Q){this.client.init(G,X,Q)}collectDevices(){this.AgoraRTC.getDevices(G=>{const X=G.filter(ve=>"audioinput"===ve.kind&&"default"!==ve.deviceId),Q=G.filter(ve=>"videoinput"===ve.kind&&"default"!==ve.deviceId);this.audioDevices=X,this.videoDevices=Q})}}o.\u0275fac=function(G){return new(G||o)(_.LFG("config"))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o.AgoraRTC=w,o.ngInjectableDef=(0,_.Yz7)({factory:function(){return new o((0,_.LFG)("config"))},token:o,providedIn:"root"});let y=(()=>{class B{static forRoot(X){return{ngModule:B,providers:[o,{provide:"config",useValue:X}]}}}return B.\u0275fac=function(X){return new(X||B)},B.\u0275mod=_.oAB({type:B}),B.\u0275inj=_.cJS({}),B})();const de={RELAY_OK:0,SERVER_ERROR_RESPONSE:1,SERVER_NO_RESPONSE:2,NO_RESOURCE_AVAILABLE:3,FAILED_JOIN_SRC:4,FAILED_JOIN_DEST:5,FAILED_PACKET_RECEIVED_FROM_SRC:6,FAILED_PACKET_SENT_TO_DEST:7,SERVER_CONNECTION_LOST:8,INTERNAL_ERROR:9,SRC_TOKEN_EXPIRED:10,DEST_TOKEN_EXPIRED:11,RELAY_ALREADY_START:12,RELAY_NOT_START:13};de[de.RELAY_OK]="RELAY_OK",de[de.SERVER_ERROR_RESPONSE]="SERVER_ERROR_RESPONSE",de[de.SERVER_NO_RESPONSE]="SERVER_NO_RESPONSE",de[de.NO_RESOURCE_AVAILABLE]="NO_RESOURCE_AVAILABLE",de[de.FAILED_JOIN_SRC]="FAILED_JOIN_SRC",de[de.FAILED_JOIN_DEST]="FAILED_JOIN_DEST",de[de.FAILED_PACKET_RECEIVED_FROM_SRC]="FAILED_PACKET_RECEIVED_FROM_SRC",de[de.FAILED_PACKET_SENT_TO_DEST]="FAILED_PACKET_SENT_TO_DEST",de[de.SERVER_CONNECTION_LOST]="SERVER_CONNECTION_LOST",de[de.INTERNAL_ERROR]="INTERNAL_ERROR",de[de.SRC_TOKEN_EXPIRED]="SRC_TOKEN_EXPIRED",de[de.DEST_TOKEN_EXPIRED]="DEST_TOKEN_EXPIRED",de[de.RELAY_ALREADY_START]="RELAY_ALREADY_START",de[de.RELAY_NOT_START]="RELAY_NOT_START";const j={Debug:0,Info:1,Warning:2,Error:3,None:4};j[j.Debug]="Debug",j[j.Info]="Info",j[j.Warning]="Warning",j[j.Error]="Error",j[j.None]="None";var pe=N(7725),me=N(3075);function Be(B,G){if(1&B&&_._UZ(0,"div",8),2&B){const X=_.oxw();_.Q6J("id",X.localCallId)}}function re(B,G){1&B&&_._UZ(0,"div",11),2&B&&_.Q6J("id",G.$implicit)}function D(B,G){if(1&B&&(_.TgZ(0,"div",9),_.YNc(1,re,1,1,"div",10),_.qZA()),2&B){const X=_.oxw();_.Q6J("id",X.remoteCallId),_.xp6(1),_.Q6J("ngForOf",X.remoteCalls)}}const ie=[{path:"",component:(()=>{class B{constructor(X){this.ngxAgoraService=X,this.title="agora-video",this.localCallId="agora_local",this.remoteCallId="agora_remote",this.remoteCalls=[],this.currentTime=Math.floor(Date.now()/1e3),this.privilegeExpireTime=this.currentTime+8400,this.role="subscriber",this.showLocal=!1,this.showRemote=!1}ngOnInit(){}remotejoin(X,Q){this.client.join(this.tokenA,"demo",this.uid,X,Q)}startStream(){this.uid=Math.floor(100*Math.random()),console.log("Token With Integer Number Uid: ",this.tokenA),this.client=this.ngxAgoraService.createClient({mode:"live",codec:"vp8"}),this.assignClientHandlers(),"publisher"==this.role?(console.log("the token from the token service is pulbiasher!!!!!!!!!",this.tokenA,this.role),this.tokenA=pe.RtcTokenBuilder.buildTokenWithUid("9e17cc4e397e4d288d27abc2824354ae","2883fd5d6b24492593d5d126ed17ea36","demo",this.uid,pe.RtcRole.PUBLISHER,this.privilegeExpireTime),this.localStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.initLocalStream(()=>this.join(X=>this.publish(),X=>console.error(X)))):(this.tokenA=pe.RtcTokenBuilder.buildTokenWithUid("9e17cc4e397e4d288d27abc2824354ae","2883fd5d6b24492593d5d126ed17ea36","demo",this.uid,pe.RtcRole.SUBSCRIBER,this.privilegeExpireTime),console.log("the token from the token service is subscriber !!!!!!!!!",this.tokenA,this.role),this.remotejoin(()=>this.join(X=>console.log("joined successfully"),X=>console.error(X)))),console.log("called start stream")}join(X,Q){console.log("the token id in the join method is",this.tokenA),this.client.join(this.tokenA,"demo",this.uid,X,Q)}publish(){this.client.publish(this.localStream,X=>console.log("Publish local stream error: "+X))}assignClientHandlers(){this.client.on("stream-published",X=>{console.log("Publish local stream successfully")}),this.client.on("error",X=>{console.log("Got error msg:",X.reason),"DYNAMIC_KEY_TIMEOUT"===X.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),Q=>console.error("Renew channel key failed: ",Q))}),this.client.on("stream-added",X=>{const Q=X.stream;Q.hasVideo()&&this.client.subscribe(Q,{audio:!0,video:!0},ve=>{console.log("Subscribe stream failed",ve)})}),this.client.on("stream-subscribed",X=>{this.showRemote=!0;const Q=X.stream;this.globalStream=Q;const ve=this.getRemoteId(Q);!this.remoteCalls.length&&this.globalStream.isPlaying&&(this.remoteCalls.push(ve),setTimeout(()=>Q.play(ve),1e3))}),this.client.on("stream-removed",X=>{const Q=X.stream;Q&&(Q.stop(),this.remoteCalls=[],console.log(`Remote stream is removed ${Q.getId()}`))}),this.client.on("peer-leave",X=>{const Q=X.stream;Q&&(Q.stop(),this.remoteCalls=this.remoteCalls.filter(ve=>ve!==`${this.getRemoteId(Q)}`),console.log(`${X.uid} left from this channel`))})}assignLocalStreamHandlers(){this.localStream.on("accessAllowed",()=>{console.log("accessAllowed")}),this.localStream.on("accessDenied",()=>{console.log("accessDenied")})}initLocalStream(X){this.showLocal=!0,this.localStream.init(()=>{this.localStream.play(this.localCallId),X&&X()},Q=>console.error("getUserMedia failed",Q))}getRemoteId(X){return`agora_remote-${X.getId()}`}leave(){this.showLocal=!1,this.showRemote=!1,this.globalStream?(this.globalStream.close(),this.remoteCalls=[],console.log(`Remote stream is removed ${this.globalStream.getId()}`)):this.localStream.close()}}return B.\u0275fac=function(X){return new(X||B)(_.Y36(o))},B.\u0275cmp=_.Xpm({type:B,selectors:[["app-livestream"]],decls:13,vars:3,consts:[[1,"live-div"],[3,"click"],[3,"ngModel","ngModelChange"],["select",""],["value","subscriber"],["value","publisher"],["class","local",3,"id",4,"ngIf"],[3,"id",4,"ngIf"],[1,"local",3,"id"],[3,"id"],["class","remote",3,"id",4,"ngFor","ngForOf"],[1,"remote",3,"id"]],template:function(X,Q){1&X&&(_.TgZ(0,"div",0),_.TgZ(1,"button",1),_.NdJ("click",function(){return Q.startStream()}),_._uU(2,"start Streaming "),_.qZA(),_.TgZ(3,"select",2,3),_.NdJ("ngModelChange",function(ce){return Q.role=ce}),_.TgZ(5,"option",4),_._uU(6,"viewer"),_.qZA(),_.TgZ(7,"option",5),_._uU(8,"host"),_.qZA(),_.qZA(),_.YNc(9,Be,1,1,"div",6),_.YNc(10,D,2,2,"div",7),_.TgZ(11,"button",1),_.NdJ("click",function(){return Q.leave()}),_._uU(12,"leave"),_.qZA(),_.qZA()),2&X&&(_.xp6(3),_.Q6J("ngModel",Q.role),_.xp6(6),_.Q6J("ngIf",Q.showLocal),_.xp6(1),_.Q6J("ngIf",Q.showRemote))},directives:[me.EJ,me.JJ,me.On,me.YN,me.Kr,x.O5,x.sg],styles:[".local[_ngcontent-%COMP%]{right:1rem;width:40vw;height:60vh;border-radius:5px;overflow:hidden;z-index:1;margin:auto}.remote[_ngcontent-%COMP%]{top:0;left:0;width:640px;height:480px;margin:auto}.live-div[_ngcontent-%COMP%]{margin-top:100px}"]}),B})()}];let ae=(()=>{class B{}return B.\u0275fac=function(X){return new(X||B)},B.\u0275mod=_.oAB({type:B}),B.\u0275inj=_.cJS({imports:[[O.Bz.forChild(ie)],O.Bz]}),B})();var he=N(2340);let F=(()=>{class B{}return B.\u0275fac=function(X){return new(X||B)},B.\u0275mod=_.oAB({type:B}),B.\u0275inj=_.cJS({imports:[[x.ez,ae,me.u5,y.forRoot({AppID:he.N.agora.appId})]]}),B})()},7725:(Z,q,N)=>{Z.exports={RtcTokenBuilder:N(6362).H,RtcRole:N(6362).u,RtmTokenBuilder:N(7917).p,RtmRole:N(7917).u}},6405:(Z,q,N)=>{var O=N(1348),_=N(4626),w=N(5418).UINT32,p=Math.floor(4294967295*Math.random());Z.exports.JO=function(k,I,U,V){let W=this;this.appID=k,this.appCertificate=I,this.channelName=U,this.messages={},this.salt=p,this.ts=Math.floor(new Date/1e3)+86400,this.uid=0===V?"":`${V}`,this.build=function(){var J=E({salt:W.salt,ts:W.ts,messages:W.messages}).pack(),K=Buffer.concat([Buffer.from(W.appID,"utf8"),Buffer.from(W.channelName,"utf8"),Buffer.from(W.uid,"utf8"),J]),P=d(W.appCertificate,K),S=w(_.str(W.channelName)).and(w(4294967295)).toNumber(),z=w(_.str(W.uid)).and(w(4294967295)).toNumber(),u=g({signature:P,crc_channel:S,crc_uid:z,m:J}).pack();return"006"+W.appID+u.toString("base64")},this.addPriviledge=function(J,K){W.messages[J]=K},this.fromString=function(J){try{if(originVersion=J.substr(0,3),"006"!=originVersion)return!1;J.substr(3,35);var P=J.substr(35),S=Buffer.from(P,"base64"),z=R(S);this.signature=z.signature,this.crc_channel_name=z.crc_channel_name,this.crc_uid=z.crc_uid,this.m=z.m;var u=T(this.m);this.salt=u.salt,this.ts=u.ts,this.messages=u.messages}catch(t){return console.log(t),!1}return!0}},Z.exports.hW={kJoinChannel:1,kPublishAudioStream:2,kPublishVideoStream:3,kPublishDataStream:4,kPublishAudiocdn:5,kPublishVideoCdn:6,kRequestPublishAudioStream:7,kRequestPublishVideoStream:8,kRequestPublishDataStream:9,kInvitePublishAudioStream:10,kInvitePublishVideoStream:11,kInvitePublishDataStream:12,kAdministrateChannel:101,kRtmLogin:1e3};var d=function(k,I){return O.createHmac("sha256",k).update(I).digest()},m=function(){var k={buffer:Buffer.alloc(1024),position:0};return k.buffer.fill(0),k.pack=function(){var I=Buffer.alloc(k.position);return k.buffer.copy(I,0,0,I.length),I},k.putUint16=function(I){return k.buffer.writeUInt16LE(I,k.position),k.position+=2,k},k.putUint32=function(I){return k.buffer.writeUInt32LE(I,k.position),k.position+=4,k},k.putBytes=function(I){return k.putUint16(I.length),I.copy(k.buffer,k.position),k.position+=I.length,k},k.putString=function(I){return k.putBytes(Buffer.from(I))},k.putTreeMap=function(I){if(!I)return k.putUint16(0),k;for(var U in k.putUint16(Object.keys(I).length),I)k.putUint16(U),k.putString(I[U]);return k},k.putTreeMapUInt32=function(I){if(!I)return k.putUint16(0),k;for(var U in k.putUint16(Object.keys(I).length),I)k.putUint16(U),k.putUint32(I[U]);return k},k},M=function(k){var I={buffer:k,position:0,getUint16:function(){var U=I.buffer.readUInt16LE(I.position);return I.position+=2,U},getUint32:function(){var U=I.buffer.readUInt32LE(I.position);return I.position+=4,U},getString:function(){var U=I.getUint16(),V=Buffer.alloc(U);return I.buffer.copy(V,0,I.position,I.position+U),I.position+=U,V},getTreeMapUInt32:function(){for(var U={},V=I.getUint16(),W=0;W<V;W++){var J=I.getUint16(),K=I.getUint32();U[J]=K}return U}};return I},g=function(k){return k.pack=function(){return(new m).putString(k.signature).putUint32(k.crc_channel).putUint32(k.crc_uid).putString(k.m).pack()},k},E=function(k){return k.pack=function(){return(new m).putUint32(k.salt).putUint32(k.ts).putTreeMapUInt32(k.messages).pack()},k},R=function(k){var I=new M(k);return g({signature:I.getString(),crc_channel_name:I.getUint32(),crc_uid:I.getUint32(),m:I.getString()})},T=function(k){var I=new M(k);return E({salt:I.getUint32(),ts:I.getUint32(),messages:I.getTreeMapUInt32()})}},6362:(Z,q,N)=>{const x=N(6405).JO,O=N(6405).hW,_={ATTENDEE:0,PUBLISHER:1,SUBSCRIBER:2,ADMIN:101};Z.exports.H=class w{static buildTokenWithUid(p,y,v,h,d,m){return this.buildTokenWithAccount(p,y,v,h,d,m)}static buildTokenWithAccount(p,y,v,h,d,m){return this.key=new x(p,y,v,h),this.key.addPriviledge(O.kJoinChannel,m),(d==_.ATTENDEE||d==_.PUBLISHER||d==_.ADMIN)&&(this.key.addPriviledge(O.kPublishAudioStream,m),this.key.addPriviledge(O.kPublishVideoStream,m),this.key.addPriviledge(O.kPublishDataStream,m)),this.key.build()}},Z.exports.u=_},7917:(Z,q,N)=>{const x=N(6405).JO,O=N(6405).hW;Z.exports.p=class w{static buildToken(p,y,v,h,d){const m=new x(p,y,v,"");return m.addPriviledge(O.kRtmLogin,d),m.build()}},Z.exports.u={Rtm_User:1}},8293:module=>{var q;window,q=function(){return function(Z){var q={};function N(x){if(q[x])return q[x].exports;var O=q[x]={i:x,l:!1,exports:{}};return Z[x].call(O.exports,O,O.exports,N),O.l=!0,O.exports}return N.m=Z,N.c=q,N.d=function(x,O,_){N.o(x,O)||Object.defineProperty(x,O,{enumerable:!0,get:_})},N.r=function(x){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},N.t=function(x,O){if(1&O&&(x=N(x)),8&O||4&O&&"object"==typeof x&&x&&x.__esModule)return x;var _=Object.create(null);if(N.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:x}),2&O&&"string"!=typeof x)for(var w in x)N.d(_,w,function(o){return x[o]}.bind(null,w));return _},N.n=function(x){var O=x&&x.__esModule?function(){return x.default}:function(){return x};return N.d(O,"a",O),O},N.o=function(x,O){return Object.prototype.hasOwnProperty.call(x,O)},N.p="",N(N.s=96)}([function(Z,q,N){"use strict";N.r(q);var x,O=N(11),_=N.n(O),w=function(){var f=new Date;return f.toTimeString().split(" ")[0]+":"+f.getMilliseconds()},o=N(14),p=N(2),y=N(1),v=N(48),h=N.n(v),d=N(49),m=N.n(d),M=new Array(32).fill(void 0);function g(f){return M[f]}M.push(void 0,null,!0,!1);var E=M.length;function R(f){var C,L=g(f);return(C=f)<36||(M[C]=E,E=C),L}var T=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});T.decode();var k=null;function I(){return null!==k&&k.buffer===x.memory.buffer||(k=new Uint8Array(x.memory.buffer)),k}function U(f,L){return T.decode(I().subarray(f,f+L))}function V(f){E===M.length&&M.push(M.length+1);var L=E;return E=M[L],M[L]=f,L}var W=0,J=new TextEncoder("utf-8"),K="function"==typeof J.encodeInto?function(f,L){return J.encodeInto(f,L)}:function(f,L){var C=J.encode(f);return L.set(C),{read:f.length,written:C.length}},P=null;function S(){return null!==P&&P.buffer===x.memory.buffer||(P=new Int32Array(x.memory.buffer)),P}var n,z=function(){function f(){h()(this,f)}return m()(f,[{key:"free",value:function(){var L=this.ptr;this.ptr=0,x.__wbg_signmanager_free(L)}},{key:"get_digest",value:function(L){return R(x.signmanager_get_digest(this.ptr,V(L)))}}],[{key:"__wrap",value:function(L){var C=Object.create(f.prototype);return C.ptr=L,C}},{key:"new",value:function(){var L=x.signmanager_new();return f.__wrap(L)}}]),f}(),u=!1,t=null,a=0,i="free",s=[],l=[],b=0;(t?Promise.resolve(t):new Promise(function(f){u||x||function L(){var C={wbg:{}};C.wbg.__wbindgen_object_drop_ref=function($){R($)},C.wbg.__wbindgen_string_new=function($,j){return V(U($,j))},C.wbg.__wbindgen_string_get=function($,j){var ue=g(j),Pe="string"==typeof ue?ue:void 0,pe=null==Pe?0:function(Be,re,D){if(void 0===D){var se=J.encode(Be),ie=re(se.length);return I().subarray(ie,ie+se.length).set(se),W=se.length,ie}for(var ae=Be.length,he=(ie=re(ae),I()),F=0;F<ae;F++){var B=Be.charCodeAt(F);if(B>127)break;he[ie+F]=B}if(F!==ae){0!==F&&(Be=Be.slice(F)),ie=D(ie,ae,ae=F+3*Be.length);var G=I().subarray(ie+F,ie+ae);F+=K(Be,G).written}return W=F,ie}(Pe,x.__wbindgen_malloc,x.__wbindgen_realloc),me=W;S()[$/4+1]=me,S()[$/4+0]=pe},C.wbg.__wbindgen_throw=function($,j){throw new Error(U($,j))};for(var H=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),function($){return $.charCodeAt(0)}),Y=new Uint8Array([177,156,215,89,13,111,230,1]),ee=new Uint8Array(H.length),ne=new Uint8Array(256),fe=0;fe<256;fe++)ne[fe]=fe;var oe=0;for(fe=0;fe<256;fe++){var le=[ne[oe=(oe+ne[fe]+Y[fe%Y.length])%256],ne[fe]];ne[fe]=le[0],ne[oe]=le[1]}fe=0,oe=0;for(var de=0;de<0+H.length;de++){var A=[ne[oe=(oe+ne[fe=(fe+1)%256])%256],ne[fe]];ne[fe]=A[0],ne[oe]=A[1],de>=0&&(ee[de-0]=H[de-0]^ne[(ne[fe]+ne[oe])%256])}return u=!0,new Promise(function($){var j,ue;(j=ee.buffer,ue=C,WebAssembly.instantiate(j,ue)).then(function(j){u=!1,x=j.instance.exports,L.__wbindgen_wasm_module=j.module,$()})})}().then(function(){t=z.new(),f(t)})})).then(function(f){n=f});var c=!0;setInterval(function(){Object(p.getParameter)("UPLOAD_LOG")&&r.info("console log upload")},9e5);var r=function(){var f,L,C,H,Y,ee,ne=null,fe=["DEBUG","INFO","WARNING","ERROR","NONE"],te=0,le=function(A,$){if(Object(p.getParameter)("UPLOAD_LOG"))try{$=Array.prototype.slice.call($);var j="";if($.forEach(function(ue){"object"===_()(ue)&&(ue=JSON.stringify(ue)),j=j+ue+" "}),s.push({payload:j,log_level:A}),c)return;"free"===i&&function ue(Pe){i="uploading",setTimeout(function(){!function(A,$,j){var ue={};Array.isArray(A)||(A=[A]),A=A.map(function(me){return{log_item_id:a++,log_level:me.log_level,payload_str:me.payload}}),ue={timestamp:Date.now(),sdk_version:p.VERSION,process_id:Object(y.getProcessId)(),payload:JSON.stringify(A)},n?ue.hash=n.get_digest("".concat(ue.payload).concat(ue.process_id).concat(ue.timestamp)):j&&j();try{var Pe=ne,pe=ne||"https://".concat(Object(p.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(o.post)(pe,ue,function(me){"OK"===me?$&&$():j&&j()},function(me){j&&j()},Pe?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(me){j&&j()}}(Pe,function(){b=0,0!==s.length?(l=s.splice(0,s.length<10?s.length:10),ue(l)):i="free"},function(){setTimeout(function(){ue(l)},b++<2?200:1e4)})},3e3)}(l=s.splice(0,s.length<10?s.length:10))}catch(ue){}};L=function(){for(var A=[0],$=0;$<arguments.length;$++)A.push(arguments[$]);f.apply(this,A)},C=function(){for(var A=[1],$=0;$<arguments.length;$++)A.push(arguments[$]);f.apply(this,A)},H=function(){for(var A=[2],$=0;$<arguments.length;$++)A.push(arguments[$]);f.apply(this,A)},Y=function(){for(var A=[3],$=0;$<arguments.length;$++)A.push(arguments[$]);f.apply(this,A)};var de={};return ee=function(A){de[A]||(H.apply(void 0,arguments),de[A]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){c=!1},enableLogUpload:function(){Object(p.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(p.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(A){ne=A?"https://".concat(A,"/ls/?h=").concat(Object(p.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(p.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(A){A>4?A=4:A<0&&(A=0),te=A},log:f=function(){var A=arguments[0],$=arguments;if($[0]=w()+" Agora-SDK ["+(fe[A]||"DEFAULT")+"]:",le(A,$),!(A<te))switch(A){case 0:case 1:case 3:console.log.apply(console,$);break;case 2:console.warn.apply(console,$);break;default:return void console.log.apply(console,$)}},debug:L,info:C,warning:H,deprecate:ee,error:Y}}();q.default=r},function(Z,q,N){"use strict";N.r(q),N.d(q,"report",function(){return P}),N.d(q,"SESSION_INIT",function(){return R}),N.d(q,"JOIN_CHOOSE_SERVER",function(){return T}),N.d(q,"JOIN_GATEWAY",function(){return k}),N.d(q,"PUBLISH",function(){return I}),N.d(q,"SUBSCRIBE",function(){return U}),N.d(q,"getProcessId",function(){return K});var x=N(46),O=N.n(x),_=N(7),w=N.n(_),o=N(2),p=N(0),y=N(14),v=N(28),h=N.n(v),d=N(47);function m(S,z){var u=Object.keys(S);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(S);z&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(S,n).enumerable})),u.push.apply(u,t)}return u}function M(S){for(var z=1;z<arguments.length;z++){var u=null!=arguments[z]?arguments[z]:{};z%2?m(Object(u),!0).forEach(function(t){O()(S,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(u)):m(Object(u)).forEach(function(t){Object.defineProperty(S,t,Object.getOwnPropertyDescriptor(u,t))})}return S}var g,E,R="session_init",T="join_choose_server",k="join_gateway",I="publish",U="subscribe",V=new(N.n(d).a),W={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},J=null,K=function(){return J||(J="process-"+h()(),p.default.info("processId: "+J)),J},P=(E=0,(g={list:{},setProxyServer:function(S){V.setProxy(S),g.proxyServerURL=S},getUrl:function(){return g.proxyServerURL?"https://".concat(g.proxyServerURL,"/rs/?h=").concat(Object(o.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(o.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return g.proxyServerURL?"https://".concat(g.proxyServerURL,"/rs/?h=").concat(Object(o.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(o.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(S){return g.list[S]?g.list[S].startTime:(p.default.DEBUG("[getSessionStartTime]: session ".concat(S," no exit")),0)},sessionInit:function(S,z){var u=w()({},W);u.startTime=+new Date,u.sid=S,u.cname=z.cname,g.list[S]=u;var t=w()({},{willUploadConsoleLog:Object(o.getParameter)("UPLOAD_LOG"),areaVersion:"global"},z.extend),n=w()({},u);n.eventType=R,n.appid=z.appid,n.browser=navigator.userAgent,n.build=o.BUILD,n.lts=+new Date,n.elapse=n.lts-n.startTime,n.extend=JSON.stringify(t),n.mode=z.mode,n.process=K(),n.success=z.succ,n.version=o.VERSION,delete n.startTime,g.send({type:"Session",data:n}),g._flushInvokeReport(S)},joinChooseServer2:function(S,z,u){if(g.list[S]){g.list[S].uid||(z.uid&&(g.list[S].uid=parseInt(z.uid)),z.cid&&(g.list[S].cid=parseInt(z.cid)),z.vid&&(g.list[S].vid=parseInt(z.vid)));var t=w()({},g.list[S]);t.eventType=T;var n=z.lts;t.lts=Date.now(),t.eventElapse=t.lts-n,t.chooseServerAddr=z.csAddr,t.errorCode=z.ec,t.elapse=t.lts-t.startTime,t.success=z.succ,t.chooseServerIp=z.chooseServerIp||"",t.chooseServerAddrList=JSON.stringify(z.serverList),delete t.startTime,g.send({type:"JoinChooseServer",data:t})}},joinChooseServer:function(S,z,u){if(g.list[S]){u&&(z.uid&&(g.list[S].uid=parseInt(z.uid)),z.cid&&(g.list[S].cid=parseInt(z.cid)),z.vid&&(g.list[S].vid=parseInt(z.vid)));var t=w()({},g.list[S]);t.eventType=T;var n=z.lts;t.lts=Date.now(),t.eventElapse=t.lts-n,t.chooseServerAddr=z.csAddr,t.errorCode=z.ec,t.elapse=t.lts-t.startTime,t.success=z.succ,t.chooseServerIp=z.chooseServerIp||"",t.chooseServerAddrList=JSON.stringify(z.serverList),delete t.startTime,g.send({type:"JoinChooseServer",data:t})}},reqUserAccount:function(S,z){z.vid&&(g.list[S].vid=parseInt(z.vid));var u=w()({},g.list[S]),t=z.lts;u.eventType="req_user_account",u.lts=Date.now(),u.success=z.success,u.serverAddress=z.serverAddress,u.stringUid=z.stringUid,u.uid=z.uid,u.errorCode=z.errorCode,u.elapse=u.lts-u.startTime,u.eventElapse=u.lts-t,u.extend="string"==typeof z.extend?z.extend:JSON.stringify(z.extend),delete u.startTime,g.send({type:"ReqUserAccount",data:u})},joinGateway:function(S,z){z.vid&&(g.list[S].vid=parseInt(z.vid)),z.uid&&(g.list[S].uid=parseInt(z.uid));var u=w()({},g.list[S]),t=z.lts;u.eventType=k,u.firstSuccess=z.firstSuccess,u.lts=Date.now(),u.gatewayAddr=z.addr,u.success=z.succ,u.errorCode=z.ec,u.elapse=u.lts-u.startTime,u.eventElapse=u.lts-t,delete u.startTime,g.send({type:"JoinGateway",data:u})},publish:function(S,z){var u=w()({},g.list[S]);u.eventType=I;var t=z.lts;u.lts=Date.now(),u.eventElapse=u.lts-t,u.elapse=u.lts-u.startTime,u.success=z.succ,u.errorCode=z.ec,u.audio=z.audio,u.video=z.video,u.screenshare=z.screenshare,u.publishRequestid=z.publishRequestid,u.p2pid=z.p2pid,z.videoName&&(u.videoName=z.videoName),z.audioName&&(u.audioName=z.audioName),z.screenName&&(u.screenName=z.screenName),delete u.startTime,g.send({type:"Publish",data:u}),g._flushInvokeReport(S)},subscribe:function(S,z){var u=w()({},g.list[S]);u.eventType=U;var t=z.lts;u.lts=Date.now(),u.eventElapse=u.lts-t,u.elapse=u.lts-u.startTime,u.errorCode=z.ec,u.success=z.succ,u.subscribeRequestid=z.subscribeRequestid,u.p2pid=z.p2pid,isFinite(z.peerid)?u.peer=z.peerid:u.peerSuid=""+z.peerid,"boolean"==typeof z.video&&(u.video=z.video),"boolean"==typeof z.audio&&(u.audio=z.audio),delete u.startTime,g.send({type:"Subscribe",data:u}),g._flushInvokeReport(S)},firstRemoteFrame:function(S,z){var u=w()({},g.list[S]);u.eventType="first_remote_frame";var t=z.lts;u.lts=Date.now(),u.eventElapse=u.lts-t,u.elapse=u.lts-u.startTime,u.width=z.width,u.height=z.height,u.success=z.succ,u.errorCode=z.ec,isFinite(z.peerid)?u.peer=z.peerid:u.peerSuid=""+z.peerid,delete u.startTime,g.send({type:"FirstFrame",data:u})},firstVideoReceived:function(S,z){var u=w()({},g.list[S]);u.eventType="first_video_received",u.lts=Date.now(),u.peer=z.peerid,u.uid=z.uid,u.elapse=z.elapse,u.subscribeElapse=z.subscribeElapse,u.subscribeRequestid=z.subscribeRequestid,u.p2pid=z.p2pid,g.send({type:"FirstVideoReceived",data:u})},firstAudioReceived:function(S,z){var u=w()({},g.list[S]);u.eventType="first_audio_received",u.lts=Date.now(),u.peer=z.peerid,u.uid=z.uid,u.elapse=z.elapse,u.subscribeElapse=z.subscribeElapse,u.subscribeRequestid=z.subscribeRequestid,u.p2pid=z.p2pid,g.send({type:"FirstAudioReceived",data:u})},firstVideoDecode:function(S,z){var u=w()({},g.list[S]);u.eventType="first_video_decode",u.lts=Date.now(),u.peer=z.peerid,u.uid=z.uid,u.elapse=z.elapse,u.videowidth=z.width,u.videoheight=z.height,u.subscribeElapse=z.subscribeElapse,u.subscribeRequestid=z.subscribeRequestid,u.p2pid=z.p2pid,g.send({type:"FirstVideoDecode",data:u})},firstAudioDecode:function(S,z){var u=w()({},g.list[S]);u.eventType="first_audio_decode",u.lts=Date.now(),u.uid=z.uid,u.peer=z.peerid,u.elapse=z.elapse,u.subscribeElapse=z.subscribeElapse,u.subscribeRequestid=z.subscribeRequestid,u.p2pid=z.p2pid,g.send({type:"FirstAudioDecode",data:u})},onAddAudioStream:function(S,z){var u=w()({},g.list[S]);u.eventType="on_add_audio_stream",u.lts=Date.now(),u.uid=z.uid,u.peer=z.peerid,g.send({type:"OnAddAudioStream",data:u})},onAddVideoStream:function(S,z){var u=w()({},g.list[S]);u.eventType="on_add_video_stream",u.lts=Date.now(),u.uid=z.uid,u.peer=z.peerid,g.send({type:"OnAddVideoStream",data:u})},onUpdateStream:function(S,z){var u=w()({},g.list[S]);u.eventType="on_update_stream",u.lts=Date.now(),u.uid=z.uid,u.peer=z.peerid,u.audio=z.audio,u.video=z.video,g.send({type:"OnUpdateStream",data:u})},onRemoveStream:function(S,z){var u=w()({},g.list[S]);u.eventType="on_remove_stream",u.lts=Date.now(),u.uid=z.uid,u.peer=z.peerid,g.send({type:"OnRemoveStream",data:u})},streamSwitch:function(S,z){var u=w()({},g.list[S]);u.eventType="stream_switch",u.lts=Date.now(),u.isDual=z.isdual,u.elapse=u.lts-u.startTime,u.success=u.succ,delete u.startTime,g.send({type:"StreamSwitch",data:u})},audioSendingStopped:function(S,z){var u=w()({},g.list[S]);u.eventType="audio_sending_stopped",u.lts=Date.now(),u.elapse=u.lts-u.startTime,u.reason=z.reason,u.success=z.succ,delete u.startTime,g.send({type:"AudioSendingStopped",data:u})},videoSendingStopped:function(S,z){var u=w()({},g.list[S]);u.eventType="video_sending_stopped",u.lts=Date.now(),u.elapse=u.lts-u.startTime,u.reson=z.reason,u.success=z.succ,delete u.startTime,g.send({type:"VideoSendingStopped",data:u})},requestProxyAppCenter:function(S,z){var u=w()({},g.list[S]),t=z.lts;u.eventType="request_proxy_appcenter",u.lts=Date.now(),u.eventElapse=u.lts-t,u.elapse=u.lts-u.startTime,u.extend=z.extend+"",u.APAddr=z.APAddr,u.workerManagerList=z.workerManagerList,u.response=z.response,u.errorCode=z.ec,u.success=z.succ,delete u.startTime,g.send({type:"RequestProxyAppCenter",data:u})},requestProxyWorkerManager:function(S,z){var u=w()({},g.list[S]),t=z.lts;u.eventType="request_proxy_worker_manager",u.lts=Date.now(),u.eventElapse=u.lts-t,u.elapse=u.lts-u.startTime,u.extend=z.extend,u.workerManagerAddr=z.workerManagerAddr,u.response=z.response,u.errorCode=z.ec,u.success=z.succ,delete u.startTime,g.send({type:"RequestProxyWorkerManager",data:u})},requestWorkerEvent:function(S,z){var u=w()({},g.list[S]),t=u.startTime,n=Date.now();delete(u=M({},u,{},z,{elapse:n-t,lts:n,productType:"WebRTC"})).startTime,g.send({type:"WorkerEvent",data:u})},requestApWorkerEvent:function(S,z){var u=w()({},g.list[S]),t=u.startTime,n=Date.now();u=M({},u,{},z,{elapse:n-t,lts:n}),g.send({type:"APWorkerEvent",data:u})},sendCustomReportMessage:function(S,z,u){var t={type:"UserAnalytics",data:M({sid:S},z)},n=g.getUrl(),a=!!g.proxyServerURL;Object(y.post)(n,t,function(i){u&&u()},function(i){var s=g.getBackUrl();Object(y.post)(s,t,function(l){u&&u()},function(l){u&&u("Failed")},a?{timeout:Object(o.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(o.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},a?{timeout:Object(o.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(o.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(S){g.send({type:"JoinChannelTimeout",data:M({},S)})},peerPublishStatus:function(S){g.send({type:"PeerPublishStatus",data:M({},S)})},joinWebProxyAP:function(S){g.send({type:"JoinWebProxyAP",data:M({},S)})},webSocketQuit:function(S){g.send({type:"WebSocketQuit",data:M({},S)})}}).reportApiInvoke=function(S,z){var u=z.tag,t=z.name,n=z.getStates,a=z.options,i=z.timeout,s=void 0===i?6e4:i,l=z.callback,b=z.reportResult,c=void 0===b||b,r=Date.now(),f=0,L=E++,C=function(){return M({tag:u,invokeId:L,sid:S,name:t,apiInvokeTime:r,options:a},n&&{states:(ee=n(),Object.keys(ee).reduce(function(ne,fe){var te=ne;return null!=ee[fe]&&(te[fe]=ee[fe]),te},{}))});var ee},H=!!Object(o.getParameter)("SHOW_REPORT_INVOKER_LOG");H&&p.default.info("".concat(t," start"));var Y=setTimeout(function(){P._sendApiInvoke(M({},C(),{error:"API_INVOKE_TIMEOUT",success:!1}))},s);return function(ee,ne){if(clearTimeout(Y),++f>1&&(ee="EXECUTOR_INVOKE_".concat(f)),ee)return P._sendApiInvoke(M({},C(),{success:!1,error:ee},n&&{states:n()})),H&&p.default.info("".concat(t," onFailure"),ee),l&&l(ee);P._sendApiInvoke(M({},C(),{success:!0},c&&{result:ne},{},n&&{states:n()})),H&&p.default.info("".concat(t," onSuccess")),l&&l(null,ne)}},g._cachedItems=[],g._cacheInvokeReport=function(S){S.lts||(S.lts=Date.now()),g._cachedItems.push(S),g._cachedItems.length>50&&g._cachedItems.shift()},g._flushInvokeReport=function(S){if(g._cachedItems.length){var z=g._cachedItems;g._cachedItems=[],p.default.debug("Flush cached event reporting:",z.length),z.forEach(function(u,t){u.sid=S,setTimeout(function(){g._sendApiInvoke(u)},5e3+500*t)})}},g._sendApiInvoke=function(S){var z=S.tag,u=S.invokeId,t=S.sid,n=S.name,a=S.result,i=S.states,s=S.options,l=S.error,b=S.success,c=S.apiInvokeTime,r=S.lts,f=Object(o.getParameter)("NOT_REPORT_EVENT");if(!(z&&f instanceof Array&&-1!==f.indexOf(z)))if(g.list[t]){var L=g.list[t],C=L.startTime,H=L.cname,Y=L.uid,ee=L.cid,ne=(r=r||Date.now())-C,fe=r-c,te="";if(s)try{te=JSON.stringify(s)}catch(le){te=s.toString()}var oe=M({invokeId:u,sid:t,cname:H,cid:ee,lts:r,uid:Y,success:b,elapse:ne,apiName:n,execElapse:fe},void 0!==s&&{options:te},{},void 0!==i&&{execStates:JSON.stringify(i)},{},void 0!==l&&{errorCode:JSON.stringify(l)},{},void 0!==a&&{execResult:JSON.stringify(a)});g.send({type:"ApiInvoke",data:oe})}else g._cacheInvokeReport(arguments[0])},g.sendCache=[],g.sendTimer=null,g.send=function(S){if(S.data){var z=S.data;g._lastLts&&g._lastLts>=z.lts&&(z.lts=g._lastLts+1),g._lastLts=z.lts}if(g.sendCache.push(S),null===g.sendTimer)return function u(){g.sendTimer=setTimeout(function(){if(0!==g.sendCache.length){var t=g.sendCache.splice(0,g.sendCache.length<10?g.sendCache.length:10);return V.sendReportList(t,g.list[t[0].data.sid].vid),u()}g.sendTimer=null},Object(o.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},g)},function(Z,q,N){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.BUILD="v3.6.9-0-g3107120",q.VERSION="3.6.9";var x=0*Date.now()+11499+86604+5615+6547+846;q.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},q.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var O={AREA_SETTING:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"web-2.statscollector.sd-rtn.com",EVENT_REPORT_BACKUP_DOMAIN:"web-3.statscollector.sd-rtn.com",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:x.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.sd-rtn.com",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};q.setParameter=function(_,w){return void 0!==O[_]&&(O[_]=w,!0)},q.getParameter=function(_){return void 0!==O[_]?O[_]:null}},function(Z,q,N){"use strict";N.r(q),N.d(q,"checkValidObject",function(){return p}),N.d(q,"checkValidString",function(){return y}),N.d(q,"checkValidNumber",function(){return v}),N.d(q,"checkValidArray",function(){return h}),N.d(q,"checkValidFloatNumber",function(){return d}),N.d(q,"checkValidBoolean",function(){return m}),N.d(q,"checkValidEnum",function(){return o}),N.d(q,"checkValidUID",function(){return M}),N.d(q,"isValidString",function(){return g}),N.d(q,"isValidNumber",function(){return E}),N.d(q,"isValidBoolean",function(){return T}),N.d(q,"isASCII",function(){return U}),N.d(q,"isInteger",function(){return V}),N.d(q,"isNumber",function(){return W}),N.d(q,"isString",function(){return J}),N.d(q,"isArray",function(){return K}),N.d(q,"isEmpty",function(){return P}),N.d(q,"isValidToken",function(){return k}),N.d(q,"isValidChannelName",function(){return I});var x=N(11),O=N.n(x),_=N(10),w=N(0),o=function(S,z,u){for(var t=0;t<u.length;t++)if(S===u[t])return!0;throw new Error("".concat(z," can only be set as ").concat(JSON.stringify(u)))},p=function(S,z){if(!S)throw new Error("Invalid param: ".concat(z||"param"," cannot be empty"));if("object"!==O()(S))throw new Error("".concat(z||"This paramter"," is of the object type"));return!0},y=function(S,z,u,t,n){if(P(u)&&(u=1),t=t||255,P(n)&&(n=!0),P(S))throw new Error("".concat(z||"param"," cannot be empty"));if(!g(S,u,t,n))throw new Error("Invalid ".concat(z||"string param",": Length of the string: [").concat(u,",").concat(t,"].").concat(n?" ASCII characters only.":""))},v=function(S,z,u,t){if(P(u)&&(u=1),t=t||1e4,P(S))throw new Error("".concat(z||"param"," cannot be empty"));if(!E(S,u,t))throw new Error("Invalid ".concat(z||"number param",": The value range is [").concat(u,",").concat(t,"]. integer only"))},h=function(S,z){if(!Array.isArray(S))throw new Error("".concat(z," should be an array"))},d=function(S,z,u,t){if(null==S)throw new Error("".concat(z||"param"," cannot be null"));if(P(u)&&(u=0),t=t||1e4,P(S))throw new Error("".concat(z||"param"," cannot be empty"));if(!R(S,u,t))throw new Error("Invalid ".concat(z||"number param",": The value range is [").concat(u,",").concat(t,"]."))},m=function(S,z){if(P(S))throw new Error("".concat(z||"param"," cannot be empty"));if(!T(S))throw new Error("Invalid ".concat(z||"boolean param",": The value is of the boolean type."))},M=function(S){if(!Object(_.is32Uint)(S)&&!g(S,1,255))throw w.default.error("Invalid UID ".concat(S," ").concat(O()(S))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},g=function(S,z,u,t){return z||(z=0),u||(u=Number.MAX_SAFE_INTEGER),P(t)&&(t=!0),J(S)&&(!t||U(S))&&S.length>=z&&S.length<=u},E=function(S,z,u){return V(S)&&S>=z&&S<=u},R=function(S,z,u){return W(S)&&S>=z&&S<=u},T=function(S){return"boolean"==typeof S},k=function(S){return g(S,1,2047)},I=function(S){return J(S)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(S)},U=function(S){if("string"==typeof S){for(var z=0;z<S.length;z++){var u=S.charCodeAt(z);if(u<0||u>255)return!1}return!0}},V=function(S){return"number"==typeof S&&S%1==0},W=function(S){return"number"==typeof S},J=function(S){return"string"==typeof S},K=function(S){return S instanceof Array},P=function(S){return null==S}},function(Z,q,N){"use strict";N.r(q),N.d(q,"APErrorCode",function(){return x}),N.d(q,"GatewayErrorCode",function(){return O}),N.d(q,"StringUidErrorCode",function(){return _}),N.d(q,"JOIN_GS_TRYNEXT_LIST",function(){return w}),N.d(q,"JOIN_CS_RETRY_LIST",function(){return o}),N.d(q,"JOIN_PROXY_RETRY_LIST",function(){return p}),N.d(q,"INJECT_STREAM_STATUS",function(){return y}),N.d(q,"WEBSOCKET_CLOSE_REASON",function(){return v});var x={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},O={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},_={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},w=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],o=["NO_SERVICE_AVAILABLE"],p=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],y={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},v={WS_DISCONNECT:"WS_DISCONNECT"};q.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(Z,q,N){"use strict";N.r(q),N.d(q,"getBrowserInfo",function(){return T}),N.d(q,"getBrowserVersion",function(){return d}),N.d(q,"getBrowserOS",function(){return m}),N.d(q,"isChrome",function(){return x}),N.d(q,"isSafari",function(){return O}),N.d(q,"isFireFox",function(){return w}),N.d(q,"isOpera",function(){return o}),N.d(q,"isEdge",function(){return _}),N.d(q,"isQQBrowser",function(){return p}),N.d(q,"isWeChatBrowser",function(){return y}),N.d(q,"isLegacyChrome",function(){return g}),N.d(q,"isSupportedPC",function(){return v}),N.d(q,"isSupportedMobile",function(){return h}),N.d(q,"getChromeKernelVersion",function(){return R}),N.d(q,"isChromeKernel",function(){return M});var x=function(){var k=T();return k.name&&"Chrome"===k.name},O=function(){var k=T();return k.name&&"Safari"===k.name},_=function(){var k=T();return k.name&&"Edge"===k.name},w=function(){var k=T();return k.name&&"Firefox"===k.name},o=function(){var k=T();return k.name&&"OPR"===k.name},p=function(){var k=T();return k.name&&"QQBrowser"===k.name},y=function(){var k=T();return k.name&&"MicroMessenger"===k.name},v=function(){var k=m();return"Linux"===k||"Mac OS X"===k||"Mac OS"===k||-1!==k.indexOf("Windows")},h=function(){var k=m();return"Android"===k||"iOS"===k},d=function(){return T().version},m=function(){return T().os},M=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function g(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var E,R=function(){var k=navigator.userAgent.match(/chrome\/[\d]+/i);return k&&k[0]&&k[0].split("/")[1]},T=(E=function(){var k,I=navigator.userAgent,U=I.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===U[1]&&null!=(k=I.match(/(OPR(?=\/))\/?(\d+)/i))&&(U=k),"Safari"===U[1]&&null!=(k=I.match(/version\/(\d+)/i))&&(U[2]=k[1]),~I.toLowerCase().indexOf("qqbrowser")&&null!=(k=I.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(U=k),~I.toLowerCase().indexOf("micromessenger")&&null!=(k=I.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(U=k),~I.toLowerCase().indexOf("edge")&&null!=(k=I.match(/(edge(?=\/))\/?(\d+)/i))&&(U=k),~I.toLowerCase().indexOf("trident")&&null!=(k=/\brv[ :]+(\d+)/g.exec(I)||[])&&(U=[null,"IE",k[1]]);var V=void 0,W=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var J in W){var K=W[J];if(K.r.test(navigator.userAgent)){V=K.s;break}}return{name:U[1],version:U[2],os:V}}(),function(){return E})},function(Z,q,N){"use strict";N.d(q,"b",function(){return x}),N.d(q,"a",function(){return O}),N.d(q,"c",function(){return _}),N(0);var x=function(w,o,p){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(o)>-1&&("string"==typeof p||isFinite(p)))return w[o]=""+p},O=function(w){var o={};return w.forEach(function(p){p.id&&p.type&&(-1===p.id.indexOf("send")&&-1===p.type.toLowerCase().indexOf("outbound")&&-1===p.id.indexOf("outbound_rtp")&&-1===p.id.indexOf("OutboundRTP")||("audio"===p.mediaType?(x(o,"audioSendBytes",p.bytesSent),x(o,"audioSendPackets",p.packetsSent),x(o,"audioSendPacketsLost",p.packetsLost)):(x(o,"videoSendBytes",p.bytesSent),x(o,"videoSendPackets",p.packetsSent),x(o,"videoSendPacketsLost",p.packetsLost),x(o,"videoSendFrameRate",p.googFrameRateSent),x(o,"videoSendResolutionWidth",p.googFrameWidthSent),x(o,"videoSendResolutionHeight",p.googFrameHeightSent))))}),o},_=function(w){var o={};return w.forEach(function(p){p.id&&p.type&&(-1===p.id.indexOf("recv")&&-1===p.type.toLowerCase().indexOf("inbound")&&-1===p.id.indexOf("inbound_rtp")&&-1===p.id.indexOf("inbound-rtp")&&-1===p.id.indexOf("InboundRTP")||("audio"===p.mediaType?(x(o,"audioReceiveBytes",p.bytesReceived),x(o,"audioReceivePackets",p.packetsReceived),x(o,"audioReceivePacketsLost",p.packetsLost)):(x(o,"videoReceiveBytes",p.bytesReceived),x(o,"videoReceivePacketsLost",p.packetsLost),x(o,"videoReceivePackets",p.packetsReceived),x(o,"videoReceiveFrameRate",p.googFrameRateReceived),x(o,"videoReceiveDecodeFrameRate",p.googFrameRateDecoded),x(o,"videoReceiveResolutionWidth",p.googFrameWidthReceived),x(o,"videoReceiveResolutionHeight",p.googFrameHeightReceived))))}),o}},function(Z,q){function N(){return Z.exports=N=Object.assign||function(x){for(var O=1;O<arguments.length;O++){var _=arguments[O];for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(x[w]=_[w])}return x},N.apply(this,arguments)}Z.exports=N},function(Z,q,N){"use strict";N.d(q,"b",function(){return O}),N.d(q,"e",function(){return w}),N.d(q,"a",function(){return o}),N.d(q,"d",function(){return p}),N.d(q,"c",function(){return y});var x=N(0),O=function(){var v={dispatcher:{}};return v.dispatcher.eventListeners={},v.addEventListener=function(h,d){void 0===v.dispatcher.eventListeners[h]&&(v.dispatcher.eventListeners[h]=[]),v.dispatcher.eventListeners[h].push(d)},v.hasListeners=function(h){return!(!v.dispatcher.eventListeners[h]||!v.dispatcher.eventListeners[h].length)},v.on=v.addEventListener,v.removeEventListener=function(h,d){var m;v.dispatcher.eventListeners[h]&&-1!==(m=v.dispatcher.eventListeners[h].indexOf(d))&&v.dispatcher.eventListeners[h].splice(m,1)},v.dispatchEvent=function(h){var d;for(d in v.dispatcher.eventListeners[h.type])if(v.dispatcher.eventListeners[h.type]&&v.dispatcher.eventListeners[h.type].hasOwnProperty(d)&&"function"==typeof v.dispatcher.eventListeners[h.type][d])try{v.dispatcher.eventListeners[h.type][d](h)}catch(m){x.default.debug("[".concat(v.clientId,"] Error in ").concat(h.type," event"),m)}},v.dispatchSocketEvent=function(h){var d;for(d in v.dispatcher.eventListeners[h.type])v.dispatcher.eventListeners[h.type]&&v.dispatcher.eventListeners[h.type].hasOwnProperty(d)&&"function"==typeof v.dispatcher.eventListeners[h.type][d]&&v.dispatcher.eventListeners[h.type][d](h.msg)},v},_=function(v){var h={};return h.type=v.type,h},w=function(v){var h=_(v);return h.stream=v.stream,h.reason=v.reason,h.msg=v.msg,h},o=function(v){var h=_(v);return h.uid=v.uid,h.attr=v.attr,h.stream=v.stream,h},p=function(v){var h=_(v);return h.msg=v.msg,h},y=function(v){var h=_(v);return h.url=v.url,h.uid=v.uid,h.status=v.status,h.reason=v.reason,h}},function(Z,q,N){"use strict";var x,O=this&&this.__extends||(x=function(W,J){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,P){K.__proto__=P}||function(K,P){for(var S in P)P.hasOwnProperty(S)&&(K[S]=P[S])})(W,J)},function(W,J){function K(){this.constructor=W}x(W,J),W.prototype=null===J?Object.create(J):(K.prototype=J.prototype,new K)}),_=this&&this.__awaiter||function(W,J,K,P){return new(K||(K=Promise))(function(S,z){function u(a){try{n(P.next(a))}catch(i){z(i)}}function t(a){try{n(P.throw(a))}catch(i){z(i)}}function n(a){var i;a.done?S(a.value):(i=a.value,i instanceof K?i:new K(function(s){s(i)})).then(u,t)}n((P=P.apply(W,J||[])).next())})},w=this&&this.__generator||function(W,J){var K,P,S,z,u={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return z={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z;function t(n){return function(a){return function(i){if(K)throw new TypeError("Generator is already executing.");for(;u;)try{if(K=1,P&&(S=2&i[0]?P.return:i[0]?P.throw||((S=P.return)&&S.call(P),0):P.next)&&!(S=S.call(P,i[1])).done)return S;switch(P=0,S&&(i=[2&i[0],S.value]),i[0]){case 0:case 1:S=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,P=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((S=(S=u.trys).length>0&&S[S.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!S||i[1]>S[0]&&i[1]<S[3])){u.label=i[1];break}if(6===i[0]&&u.label<S[1]){u.label=S[1],S=i;break}if(S&&u.label<S[2]){u.label=S[2],u.ops.push(i);break}S[2]&&u.ops.pop(),u.trys.pop();continue}i=J.call(W,u)}catch(s){i=[6,s],P=0}finally{K=S=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([n,a])}}},o=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(q,"__esModule",{value:!0});var p=o(N(69)),y=N(2),v=o(N(0)),h=N(3),d=N(14),m=N(10),M=function(W){function J(K,P){var S=W.call(this)||this;return S._state=k.RELAY_STATE_IDLE,S._onStatus=function(z){v.default.debug("["+S.clientId+"] ChannelMediaStatus: "+JSON.stringify(z)),z&&z.command&&("onAudioPacketReceived"===z.command&&S.emit("event",T.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===z.command&&S.emit("event",T.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===z.command&&(S._state=k.RELAY_STATE_FAILURE,S.emit("state",k.RELAY_STATE_FAILURE,I.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===z.command&&(S._state=k.RELAY_STATE_FAILURE,S.emit("state",k.RELAY_STATE_FAILURE,I.DEST_TOKEN_EXPIRED,z.channelName?{came:z.channelName}:null)))},S._onClose=function(){return _(S,void 0,void 0,function(){var z;return w(this,function(u){switch(u.label){case 0:if(v.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",T.NETWORK_DISCONNECTED),this.state=k.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return u.sent(),[3,4];case 3:return(z=u.sent())instanceof V&&(z.message===E.WS_ABORT||z.message===E.AP_REQUEST_ABORT)?[2]:(this.emit("state",k.RELAY_STATE_FAILURE,I.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},S.token=K.appId,S.appId=K.appId,S.cname=K.cname,S.uid=K.uid,S.sid=K.sid,S.clientId=P,S}return O(J,W),Object.defineProperty(J.prototype,"state",{get:function(){return this._state},set:function(K){var P=this._state;this._state=K,P!==K&&this.emit("state",K)},enumerable:!0,configurable:!0}),J.prototype.startChannelMediaRelay=function(K){return _(this,void 0,void 0,function(){return w(this,function(P){switch(P.label){case 0:if(this.state!==k.RELAY_STATE_IDLE)throw new V(E.BAD_STATE);return this.state=k.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return P.sent(),v.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(K)];case 2:return P.sent(),this._prevChannelMediaConfig=K,[2]}})})},J.prototype.updateChannelMediaRelay=function(K){return _(this,void 0,void 0,function(){return w(this,function(P){switch(P.label){case 0:if(this.state!==k.RELAY_STATE_RUNNING)throw new V(E.BAD_STATE);return[4,this._sendUpdateMessage(K)];case 1:return P.sent(),this._prevChannelMediaConfig=K,[2]}})})},J.prototype.stopChannelMediaRelay=function(){return _(this,void 0,void 0,function(){return w(this,function(K){switch(K.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return K.sent(),v.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=k.RELAY_STATE_IDLE,this.dispose(),[2]}})})},J.prototype.dispose=function(){v.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=k.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},J.prototype._requestOneAP=function(K){var P=this;return new Promise(function(S,z){var u={command:"convergeAllocateEdge",sid:P.sid,appId:P.appId,token:"",ts:+new Date,version:y.VERSION,cname:P.cname,uid:P.uid+"",seq:1,requestId:1},t={service_name:"tele_channel",json_body:JSON.stringify(u)};d.post("https://"+K,t,function(a){var i=null,s=null;try{i=JSON.parse(a)}catch(l){z(new V(E.AP_JSON_PARSE_ERROR,l))}0!==i.code&&z(new V(E.AP_REQUEST_ERROR,i));try{s=JSON.parse(i.json_body)}catch(l){z(new V(E.AP_JSON_PARSE_ERROR,l))}200!==s.code&&z(new V(E.AP_REQUEST_ERROR,s)),s.servers?S(s.servers):z(new V(E.AP_JSON_PARSE_ERROR,s))},function(a){return z(a)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},J.prototype._requestAP=function(){var K=this,P=y.getParameter("UAP_AP");return new Promise(function(S,z){setTimeout(function(){z(new V(E.AP_REQUEST_TIMEOUT))},5e3),K.on("dispose",function(){z(new V(E.AP_REQUEST_ABORT))}),P.forEach(function(u){K._requestOneAP(u+="/api/v1").then(function(t){v.default.debug("["+K.clientId+"] startChannelMediaRelay request AP "+u+" success: "+JSON.stringify(t));var n=t[0],a="wss://"+n.address.replace(/\./g,"-")+".edge.agora.io:"+n.wss;S(a)}).catch(function(t){v.default.debug("["+K.clientId+"] startChannelMediaRelay request AP "+u+" failed: "+JSON.stringify(t))})})})},J.prototype._connectWebsocket=function(K){return this._signal=new U(this.appId,this.cname,this.uid,this.sid),this._signal.connect(K)},J.prototype._connect=function(){return _(this,void 0,void 0,function(){var K;return w(this,function(P){switch(P.label){case 0:return[4,this._requestAP()];case 1:return K=P.sent(),[4,this._connectWebsocket(K)];case 2:return P.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",T.NETWORK_CONNECTED),[2]}})})},J.prototype._sendStartRelayMessage=function(K){return _(this,void 0,void 0,function(){var P,S,z,u,t,n;return w(this,function(a){switch(a.label){case 0:return this._checkSignal(),P=this._genMessage(R.StopPacketTransfer),[4,this._signal.request(P)];case 1:return a.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return a.sent(),v.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),S=this._genMessage(R.SetSdkProfile,K),[4,this._signal.request(S)];case 3:return a.sent(),v.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),z=this._genMessage(R.SetSourceChannel,K),[4,this._signal.request(z)];case 4:return a.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return a.sent(),this.emit("event",T.PACKET_JOINED_SRC_CHANNEL),v.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),u=this._genMessage(R.SetSourceUserId,K),[4,this._signal.request(u)];case 6:return a.sent(),v.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),t=this._genMessage(R.SetDestChannel,K),[4,this._signal.request(t)];case 7:return a.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return a.sent(),this.emit("event",T.PACKET_JOINED_DEST_CHANNEL),v.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),n=this._genMessage(R.StartPacketTransfer,K),[4,this._signal.request(n)];case 9:return a.sent(),this.emit("event",T.PACKET_SENT_TO_DEST_CHANNEL),this.state=k.RELAY_STATE_RUNNING,v.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},J.prototype._sendReconnectMessage=function(K){return _(this,void 0,void 0,function(){var P;return w(this,function(S){switch(S.label){case 0:return this._checkSignal(),P=this._genMessage(R.Reconnect,K),[4,this._signal.request(P)];case 1:return S.sent(),[2]}})})},J.prototype._sendUpdateMessage=function(K){return _(this,void 0,void 0,function(){var P;return w(this,function(S){switch(S.label){case 0:return this._checkSignal(),P=this._genMessage(R.UpdateDestChannel,K),[4,this._signal.request(P)];case 1:return S.sent(),this.emit("event",T.PACKET_UPDATE_DEST_CHANNEL),v.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},J.prototype._sendStopRelayMessage=function(){return _(this,void 0,void 0,function(){var K;return w(this,function(P){switch(P.label){case 0:return this._checkSignal(),K=this._genMessage(R.StopPacketTransfer),[4,this._signal.request(K)];case 1:return P.sent(),v.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},J.prototype._genMessage=function(K,P){var S=this,z=[],u=[],t=[],n={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:y.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},a=null;switch(K){case R.SetSdkProfile:return n.clientRequest={command:"SetSdkProfile",type:"multi_channel"},n;case R.SetSourceChannel:return a=P.getSrcChannelMediaInfo(),n.clientRequest={command:"SetSourceChannel",uid:a.uid+"",channelName:a.channelName,token:a.token||this.appId},n;case R.SetSourceUserId:return a=P.getSrcChannelMediaInfo(),n.clientRequest={command:"SetSourceUserId",uid:this.uid+""},n;case R.SetDestChannel:return P.getDestChannelMediaInfos().forEach(function(i){z.push(i.channelName),u.push(i.uid+""),t.push(i.token||S.appId)}),n.clientRequest={command:"SetDestChannel",channelName:z,uid:u,token:t},n;case R.StartPacketTransfer:return n.clientRequest={command:"StartPacketTransfer"},n;case R.Reconnect:return n.clientRequest={command:"Reconnect"},n;case R.StopPacketTransfer:return n.clientRequest={command:"StopPacketTransfer"},n;case R.UpdateDestChannel:return P.getDestChannelMediaInfos().forEach(function(i){z.push(i.channelName),u.push(i.uid+""),t.push(i.token||S.appId)}),n.clientRequest={command:"UpdateDestChannel",channelName:z,uid:u,token:t},n}},J.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new V(E.WS_DISCONNECTED)},J}(p.default);q.default=M;var g=function(){function W(){this.destChannelMediaInfos=new Map}return W.prototype.setSrcChannelInfo=function(J){h.checkValidObject(J,"srcInfo");var K=J.uid,P=J.channelName,S=J.token;if(S&&!h.isValidToken(S))throw new Error("Invalid token in SrcChannelInfo");if(!h.isValidChannelName(P))throw new Error("Invalid channelName in SrcChannelInfo");if(!m.is32Uint(K))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=J},W.prototype.setDestChannelInfo=function(J,K){if(!h.isValidChannelName(J))throw new Error("Invalid channelName in DestChannelInfo");h.checkValidObject(K,"destInfo");var P=K.uid,S=K.token,z=K.channelName;if(S&&!h.isValidToken(S))throw new Error("Invalid token in DestChannelInfo");if(!h.isValidChannelName(z))throw new Error("Invalid channelName in DestChannelInfo");if(!m.is32Uint(P))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(J,K)},W.prototype.removeDestChannelInfo=function(J){if(!h.isValidChannelName(J))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(J)},W.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},W.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},W}();q.ChannelMediaRelayConfiguration=g;var E,R,T,k,I,W,U=function(W){function J(K,P,S,z){var u=W.call(this)||this;return u._onOpen=function(){u.emit("open")},u._onClose=function(t){u.emit("close"),u.dispose()},u._onMessage=function(t){var n=JSON.parse(t.data);if(!n||"serverResponse"!==n.command||!n.requestId)return n&&"serverStatus"===n.command&&n.serverStatus&&n.serverStatus.command?(u.emit("status",n.serverStatus),void u.emit(n.serverStatus.command,n.serverStatus)):void 0;u.emit("req_"+n.requestId,n)},u._requestId=1,u.appId=K,u.cname=P,u.uid=S,u.sid=z,u}return O(J,W),J.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},J.prototype.sendMessage=function(K){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new V(E.WS_DISCONNECTED);var P=this._requestId++;return K.requestId=P,K.seq=P,this._ws.send(JSON.stringify(K)),P},J.prototype.waitStatus=function(K){var P=this;return new Promise(function(S,z){var u=window.setTimeout(function(){z(new V(E.WAIT_STATUS_TIMEOUT,K))},5e3);P.once(K,function(t){clearTimeout(u),t.state&&0!==t.state?z(new V(E.WAIT_STATUS_ERROR,K)):S()}),P.once("dispose",function(){clearTimeout(u),z(new V(E.WS_ABORT))})})},J.prototype.request=function(K){var P=this;return new Promise(function(S,z){var u=P.sendMessage(K),t=window.setTimeout(function(){P.removeAllListeners("req_"+u),z(new V(E.REQUEST_TIMEOUT))},3e3);P.once("req_"+u,function(n){clearTimeout(t),n&&200===n.code?S(n):z(new V(E.REQUEST_FAILED,n))}),P.once("dispose",function(){clearTimeout(t),z(new V(E.WS_ABORT))})})},J.prototype.connect=function(K){var P=this;return new Promise(function(S,z){P._ws=new WebSocket(K),P._ws.onopen=function(){P._onOpen(),P._prvUrl=K,P._ws.onmessage=P._onMessage,P._ws.onclose=P._onClose,P._startHeartBeatCheck(),S()},P._ws.onclose=function(u){P._ws=null,z(new V(E.CONNECT_FAILED,"websocket error code: "+u.code))},setTimeout(function(){P._ws&&P._ws.readyState!==WebSocket.OPEN&&(P._ws.onopen=null,P._ws.onclose=null,P._ws.close(),P._ws=null,z(new V(E.CONNECT_TIMEOUT)))},5e3),P.once("dispose",function(){z(new V(E.WS_ABORT))})})},J.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},J.prototype._sendPing=function(K){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new V(E.WS_DISCONNECTED);var P=this._requestId++;return K.requestId=P,this._ws.send(JSON.stringify(K)),P},J.prototype._startHeartBeatCheck=function(){var K=this;this._heartBeatTimer=window.setInterval(function(){K._sendPing({command:"ping",appId:K.appId,cname:K.cname,uid:K.uid+"",sid:K.sid,ts:+new Date,requestId:0})},3e3)},J.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},J}(p.default),V=function(W,J,K){void 0===W&&(W=""),this.code=K,this.data=J,this.message=W};q.ChannelMediaError=V,(W=E=q.CHANNEL_MEDIA_ERROR||(q.CHANNEL_MEDIA_ERROR={})).CONNECT_FAILED="connect failed",W.CONNECT_TIMEOUT="connect timeout",W.WS_DISCONNECTED="websocket disconnected",W.REQUEST_TIMEOUT="request timeout",W.REQUEST_FAILED="request failed",W.WAIT_STATUS_TIMEOUT="wait status timeout",W.WAIT_STATUS_ERROR="wait status error",W.BAD_STATE="bad state",W.WS_ABORT="ws abort",W.AP_REQUEST_TIMEOUT="AP request timeout",W.AP_JSON_PARSE_ERROR="AP json parse error",W.AP_REQUEST_ERROR="AP request error",W.AP_REQUEST_ABORT="AP request abort",function(W){W[W.SetSdkProfile=0]="SetSdkProfile",W[W.SetSourceChannel=1]="SetSourceChannel",W[W.SetSourceUserId=2]="SetSourceUserId",W[W.SetDestChannel=3]="SetDestChannel",W[W.StartPacketTransfer=4]="StartPacketTransfer",W[W.StopPacketTransfer=5]="StopPacketTransfer",W[W.UpdateDestChannel=6]="UpdateDestChannel",W[W.Reconnect=7]="Reconnect",W[W.SetVideoProfile=8]="SetVideoProfile"}(R||(R={})),function(W){W[W.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",W[W.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",W[W.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",W[W.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",W[W.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",W[W.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",W[W.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",W[W.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",W[W.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",W[W.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(T=q.CHANNEL_MEDIA_RELAY_EVENT||(q.CHANNEL_MEDIA_RELAY_EVENT={})),function(W){W[W.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",W[W.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",W[W.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",W[W.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(k=q.CHANNEL_MEDIA_RELAY_STATE||(q.CHANNEL_MEDIA_RELAY_STATE={})),function(W){W[W.RELAY_OK=0]="RELAY_OK",W[W.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",W[W.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",W[W.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",W[W.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",W[W.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",W[W.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",W[W.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",W[W.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",W[W.INTERNAL_ERROR=9]="INTERNAL_ERROR",W[W.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",W[W.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",W[W.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",W[W.RELAY_NOT_START=13]="RELAY_NOT_START",W[W.OPERATION_ABORT=14]="OPERATION_ABORT"}(I=q.CHANNEL_MEDIA_RELAY_ERROR||(q.CHANNEL_MEDIA_RELAY_ERROR={}))},function(Z,q,N){"use strict";N.r(q),N.d(q,"isLiveTranscodingValid",function(){return I}),N.d(q,"generateSessionId",function(){return R}),N.d(q,"audioLevelHelper",function(){return M}),N.d(q,"vsResHack",function(){return T}),N.d(q,"is32Uint",function(){return k}),N.d(q,"safeCall",function(){return h}),N.d(q,"random",function(){return V}),N.d(q,"popBanTip",function(){return K}),N.d(q,"lengthInUtf8Bytes",function(){return W}),N.d(q,"audioTimerLoop",function(){return J}),N.d(q,"generateId",function(){return E}),N.d(q,"uint8ArrayToBase64",function(){return d}),N.d(q,"base64ToUint8Array",function(){return m});var x=N(11),O=N.n(x),_=N(5),w=N(0),o=N(28),p=N.n(o),y=N(25),v=N(15),h=function(){var P=arguments[0];if("function"==typeof P){var S=Array.prototype.slice.call(arguments,1);P.apply(null,S)}},d=function(P){for(var S="",z=0;z<P.length;z+=1)S+=String.fromCharCode(P[z]);return window.btoa(S)},m=function(P){for(var S=window.atob(P),z=new Uint8Array(new ArrayBuffer(S.length)),u=0;u<S.length;u+=1)z[u]=S.charCodeAt(u);return z},M=function(P){return this.audioContext=Object(y.a)(),this.sourceNode=P.otWebkitAudioSource||this.audioContext.createMediaStreamSource(P),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var S=0,z=0;z<this.timeDomainData.length;z++)S=Math.max(S,Math.abs(this.timeDomainData[z]-128));return S/128}return w.default.warning("can't find analyser in audioLevelHelper"),0},this},g=1e4;function E(){return++g}function R(){return p()().replace(/-/g,"").toUpperCase()}var T=function(P,S,z){try{w.default.debug("start vsResHack",P);var u=document.createElement("video");u.setAttribute("autoplay",""),u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(u);var t=!1;u.addEventListener("playing",function(n){_.isFireFox()?u.videoWidth&&(t=!0,w.default.debug("[vsResHack] get stream resolution: ","".concat(u.videoWidth," x ").concat(u.videoHeight),P),S(u.videoWidth,u.videoHeight),u.srcObject=null,u.remove()):(t=!0,w.default.debug("[vsResHack] get stream resolution: ","".concat(u.videoWidth," x ").concat(u.videoHeight),P),S(u.videoWidth,u.videoHeight),u.srcObject=null,u.remove())}),Object(v.setSrcObject)(u,P),u.play().catch(function(){}),setTimeout(function(){!t&&u&&(S(u.videoWidth,u.videoHeight),u.srcObject=null,u.remove())},4e3)}catch(n){z(n)}},k=function(P){return"number"==typeof P&&0<=P&&P<=4294967295},I=function(P){var S=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var z in P)if("lowLatency"===z&&"boolean"!=typeof P[z]||"userConfigExtraInfo"===z&&"object"!==O()(P[z])||"transcodingUsers"===z&&!U(P[z])||!~S.indexOf(z)&&"number"!=typeof P[z])throw new Error("Param ["+z+"] is inValid");return!0},U=function(P){for(var S=0;S<P.length;S++)for(var z in P[S])if("number"!=typeof P[S][z])throw new Error("Param user["+S+"] - ["+z+"] is inValid");return!0},V=function(P){isNaN(P)&&(P=1e3);var S=+new Date,z=(S=(9301*S+49297)%233280)/233280;return Math.ceil(z*P)},W=function(P){var S=encodeURIComponent(P).match(/%[89ABab]/g);return P.length+(S?S.length:0)},J=function(P,S){var z=1/S,u=Object(y.a)(),t=u.createGain();t.gain.value=0,t.connect(u.destination);var n=!1;return function a(){var i=u.createOscillator();i.onended=a,i.connect(t),i.start(0),i.stop(u.currentTime+z),P(u.currentTime),n&&(i.onended=function(){})}(),function(){n=!0}},K=function(){if(!document.getElementById("agora-ban-tip")){var P=document.createElement("div");P.id="agora-ban-tip",P.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(P);var S=document.createElement("div");S.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",P.append(S);var z=document.createElement("div");z.style="height: 76px; display: flex; justify-content: center; align-items: center;";var u=document.createElement("span");u.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",u.innerText="!";var t=document.createElement("span");t.innerText="This browser does not support webRTC",z.append(u),z.append(t);var n=document.createElement("div");n.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",n.innerText="OK",S.append(z),S.append(n),n.onclick=function(){var a=document.getElementById("agora-ban-tip");a.parentNode.removeChild(a)}}}},function(Z,q){function N(x){return Z.exports=N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},N(x)}Z.exports=N},function(Z,q,N){Z.exports=N(64)},function(Z,q,N){"use strict";var x=N(12),O=N.n(x),_=N(17),w=N.n(_),o=N(11),p=N.n(o),y=N(32),v=N.n(y),h=N(7),d=N.n(h),m=N(22),M=N(8),g=function(f){f&&f.apply(this,[].slice.call(arguments,1))},E=N(0),R=N(1),T=N(10),k=N(14),I=N(2),U=function(f){var L=Object(M.b)(f);L.needReconnect=!0,L.isTimeout=!1,L.isInit=!0,L.sendbytes=0,L.recvbytes=0,L.startTime=Date.now(),L.lastMsgTime=null,L.clientId=f.clientId,L.hostIndex=0,L.requestID=0,L.host=f.host instanceof Array?f.host:[f.host],L.getSendBytes=function(){return L.sendbytes},L.getRecvBytes=function(){return L.recvbytes},L.getDuration=function(){return Math.ceil((Date.now()-L.startTime)/1e3)},L.getURL=function(){return L.connection.url},L.reconnect=function(){L.isInit=!0,L.creatConnection()},L.connectNext=function(){L.isInit=!0,++L.hostIndex,E.default.debug("["+L.clientId+"] Gateway length:"+L.host.length+" current index:"+L.hostIndex),L.hostIndex>=L.host.length?L.dispatchEvent(Object(M.d)({type:"recover"})):L.creatConnection()},L.replaceHost=function(Y){L.host=Y||L.host,L.hostIndex=0,L.creatConnection()},L.creatConnection=function(){L.needReconnect=!0,L.lts=(new Date).getTime(),L.connection=new WebSocket("wss://"+L.host[L.hostIndex]),L.connection.binaryType="arraybuffer",L.turnConfig={};var Y=f.proxyServerType;if(L.connection.url&&3!==Y&&4!==Y&&5!==Y){var ee=L.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),ne=L.host[L.hostIndex].split(":"),fe=L.connection.url.match(/h=([^:]+)&p=(\d+)/);ee?(L.turnConfig.url=ee[1],Object(I.getParameter)("TURN_ENABLE_TCP")&&(L.turnConfig.tcpport=parseInt(ee[2])+30),Object(I.getParameter)("TURN_ENABLE_UDP")&&(L.turnConfig.udpport=parseInt(ee[2])+30)):fe?(L.turnConfig.url=fe[1],Object(I.getParameter)("TURN_ENABLE_TCP")&&(L.turnConfig.tcpport=parseInt(fe[2])+30),Object(I.getParameter)("TURN_ENABLE_UDP")&&(L.turnConfig.udpport=parseInt(fe[2])+30)):ne&&(L.turnConfig.url=ne[0],Object(I.getParameter)("TURN_ENABLE_TCP")&&(L.turnConfig.tcpport=parseInt(ne[1])+30),Object(I.getParameter)("TURN_ENABLE_UDP")&&(L.turnConfig.udpport=parseInt(ne[1])+30))}L.connection.onopen=function(te){L.needReconnect=!0,L.isTimeout=!1,L.isInit=!1,L.sendbytes=0,L.recvbytes=0,L.startTime=Date.now(),Object(k.resetHTTPByetsCount)(),clearTimeout(L.timeoutCheck),L.dispatchEvent(Object(M.d)({type:"onopen",event:te,socket:L}))},L.connection.onmessage=function(te){if(te.data instanceof ArrayBuffer)L.dispatchEvent({type:"onBinaryData",data:te.data});else{L.recvbytes+=Object(T.lengthInUtf8Bytes)(te.data);var oe=JSON.parse(te.data);L.lastMsgTime=Date.now(),oe.hasOwnProperty("_id")?L.dispatchEvent(Object(M.d)({type:oe._id,msg:oe})):oe.hasOwnProperty("_type")&&L.dispatchSocketEvent(Object(M.d)({type:oe._type,msg:oe._message}))}},L.connection.onclose=function(te){L.needReconnect?L.isTimeout||L.isInit?(E.default.debug("["+L.clientId+"] websockect connect timeout"),R.report.joinGateway(f.sid,{lts:L.lts,succ:!1,ec:"timeout",addr:L.connection.url}),L.connectNext()):(L.dispatchEvent(Object(M.d)({type:"disconnect",event:te})),L.requests&&L.requests instanceof Array&&(L.requests.map(function(oe){oe.callback("REQUEST_ABORT")}),L.requests=[])):(E.default.debug("["+L.clientId+"] websockect closeed"),g(f.onFailure,te),clearTimeout(L.timeoutCheck),L.dispatchEvent(Object(M.d)({type:"close",event:te})),L.connection.onopen=void 0,L.connection.onclose=void 0,L.connection.onerror=void 0,L.connection.onmessage=void 0,L.connection=void 0)},L.connection.onerror=function(te){},setTimeout(function(){L.connection&&L.connection.readyState!=WebSocket.OPEN&&(L.isTimeout=!0,L.connection.close())},5e3)},L.creatConnection(),L.sendMessage=function(Y,ee){if(L.connection&&L.connection.readyState==WebSocket.OPEN){var ne=JSON.stringify(Y);L.sendbytes+=Object(T.lengthInUtf8Bytes)(ne),L.connection.send(ne)}else ee({error:"Gateway not connected"})},L.disconnect=function(){L.needReconnect=!0,L.connection.close()},L.close=function(){L.needReconnect=!1,L.connection.onclose=void 0,L.connection.close(),clearInterval(L.requestTimer),L.requests&&L.requests instanceof Array&&(L.requests.map(function(Y){Y.callback("REQUEST_ABORT")}),L.requests=[])},L.sendSignalCommand=function(Y,ee){Y._id="_request_"+L.requestID,L.requestID+=1,"publish_stats"!==Y._type&&"subscribe_stats"!==Y._type&&"publish_stats_low"!==Y._type&&L.on(Y._id,function(ne){ne.msg&&ee&&ee(ne.msg._result,ne.msg.message),delete L.dispatcher.eventListeners[Y._id]}),L.sendMessage(Y,function(ne){ne.reason="NOT_CONNECTED",ee&&ee(ne.reason,ne)})},L.requests=[];var C=function(Y){var ee=L.requests.findIndex(function(fe){return fe.id===Y.type});if(ee>=0)var ne=L.requests.splice(ee,1)[0];ne&&L.dispatcher.eventListeners[Y.type]?(delete L.dispatcher.eventListeners[Y.type],Y.msg&&ne.callback&&ne.callback(Y.msg._result,Y.msg._message)):E.default.warning("Detached Response",Y.type,Y.msg)},H=function(Y){var ee=this,ne=L.requests.findIndex(function(fe){return fe.id===ee.id});ne>=0&&(ee=L.requests.splice(ne,1)[0]),ee&&L.dispatcher.eventListeners[Y.type]?(delete L.dispatcher.eventListeners[Y.type],Y.reason="NOT_CONNECTED",ee.callback&&ee.callback(Y.reason,Y)):E.default.warning("handleSendError",ee)};return L.sendRequest=function(Y,ee){Y=d()({_id:"_request_"+L.requestID},Y),L.requestID+=1;var ne={id:Y._id,timeoutCounter:0,stalledAt:Date.now(),message:Y,callback:ee};L.requests.push(ne),L.addEventListener(Y._id,C),L.sendMessage(Y,H.bind(ne))},L.checkRequestTimeout=function(){for(var Y=Math.ceil(Object(I.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(I.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),ee=L.requests.length-1;ee>=0;ee--){var ne=L.requests[ee];ne.timeoutCounter>=Y?(L.requests.splice(ee,1),E.default.error("Request Timeout",ne.timeoutCounter,ne.message),ne.callback&&ne.callback("TIMEOUT")):ne.timeoutCounter++}},clearInterval(L.requestTimer),L.requestTimer=setInterval(L.checkRequestTimeout,Object(I.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),L.sendReport=function(Y){L.sendMessage(Y,function(){})},L},W=N(23),J=N(4),K=N(20),P=N(5),S={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},z={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},u={};for(var t in z){var n=z[t];u[n]&&E.default.error("Key Conflict: ".concat(n,": ").concat(z[n],"| ").concat(t)),u[n]=t}var a=function(f){return z[f]||f},i=function(f){return u[f]||f},s=N(9),l=N.n(s),b=N(54),c=function f(L){var D,se,C=!1,H=function(D){return{_type:"control",_message:D}},Y=function(D,se){var ie={};return Object.keys(se).forEach(function(ae){Object(I.getParameter)("STATS_FILTER")[ae]||(ie[a(ae)]=se[ae])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:D,stats:ie}}},ee=function(D){return{_type:"publish",_message:D}},ne=function(D,se){var ie={};return Object.keys(se).forEach(function(ae){Object(I.getParameter)("STATS_FILTER")[ae]||(ie[a(ae)]=se[ae])}),{_type:"subscribe_stats",_message:{stream_id:D,stats:ie}}},fe=f.DISCONNECTED,te=f.CONNECTING,oe=f.CONNECTED,le=f.DISCONNECTING,de=fe,A=Object(M.b)(L);Object.defineProperty(A,"state",{set:function(D){var se=de;de=D,Object(K._setClientConnectionStateRecord)(A.clientId,D),D!==f.CONNECTED&&D!==f.DISCONNECTING&&(A.hasJoined=!1),se!==D&&A.dispatchEvent({type:"connection-state-change",prevState:f.connetionStateMap[se],curState:f.connetionStateMap[D]})},get:function(){return de}}),A.socket=void 0,A.state=fe,A.mode=L.mode,A.role=L.role,A.codec=L.codec,A.config={},A.timers={},A.timer_counter={},A.localStreams={},A.remoteStreams={},A.remoteMuteState={},A.attemps=1,A.p2p_attemps=1,A.audioLevel={},A.activeSpeaker=void 0,A.reconnectMode="tryNext",A.rejoinAttempt=0,A.hasChangeBGPAddress=!1,A.traffic_stats={},A.clientId=L.clientId,A.pingpongCounter=0,A.hasInvokeLeave=!1,A.p2ps=new Map,A.liveStreams=new Map,A.injectLiveStreams=new Map,A.remoteStreamsInChannel=new Set,A.subscribeRequestId=new Map,A.publishRequestId=0,A.hasJoined=!1,A.isFirstSuccess=!0,A.peerPublishDurationMap=new Map,se=g,(D=A).makeRequest=function(ie,ae,he){if(void 0===D.socket)return E.default.debug("[".concat(D.clientId,"] No socket available")),void se(he,J.default.INVALID_OPERATION);try{D.socket.emitRequest(ie,function(F,B){var G;"success"===F?"function"==typeof ae&&ae(B):"function"==typeof he&&(G=B&&B.error_code&&J.GatewayErrorCode[B.error_code]?J.GatewayErrorCode[B.error_code]:B&&B.error_str?B.error_str:B&&B.error_code?"UNKNOW_ERROR_".concat(B.error_code):F,he(G,B))})}catch(F){E.default.debug("[".concat(D.clientId,"] Socket emit message failed ").concat(JSON.stringify(ie))),E.default.debug("[".concat(D.clientId,"] "),F),se(he,J.default.SOCKET_ERROR)}},D.makeReport=function(ie){void 0===D.socket&&E.default.debug("[".concat(D.clientId,"] No socket available"));try{D.socket.emitReport(ie)}catch(ae){E.default.debug("[".concat(D.clientId,"] Socket emit report failed ").concat(JSON.stringify(ie)))}},A.inChannelInfo={joinAt:null,duration:0},A._sendMessage=function(D,se){switch(D){case"SubscribeStats":A.makeReport(ne.apply(void 0,v()(se)));break;case"SubscribeRelatedStats":A.makeReport(Y.apply(void 0,v()(se)))}};var $=g;A.p2pCounter=Object(T.random)(1e5),A.generateP2PId=function(){return++A.p2pCounter},A.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},A.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},A.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},A.configPublisher=function(D){A.config=D},A.getGatewayInfo=function(D,se){A.makeRequest({_type:"gateway_info"},D,se)},A.setClientRole=function(D,se){E.default.debug("[".concat(A.clientId,"] setClientRole to ").concat(D));var ie=R.report.reportApiInvoke(A.joinInfo.sid,{name:"_setClientRole",callback:se});A.makeRequest({_type:"set_client_role",_message:{role:D}},function(){A.role=D,A.dispatchEvent({type:"client-role-changed",role:D}),ie&&ie(null,{role:D})},function(ae,he){if(he&&he.code&&(ae=J.GatewayErrorCode[he.code]||"UNKNOW_ERROR_"+he.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===ae)return ie&&ie(null);E.default.error("set Client role error to "+D+": "+ae),ie&&ie(ae)})},A.join=function(D,se,ie,ae){A.hasInvokeLeave=!1,D.useProxyServer&&(A.hasChangeBGPAddress=!0);var he=(new Date).getTime(),F=D.uid;if(A.inChannelInfo.joinAt&&(A.inChannelInfo.duration+=he-A.inChannelInfo.joinAt),A.inChannelInfo.joinAt=he,A.state!==te)return E.default.error("[".concat(A.clientId,"] GatewayClient.join Failed: state "),A.state),ae&&ae(J.default.INVALID_OPERATION),void R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:J.default.INVALID_OPERATION,addr:null});if(null!=F&&parseInt(F)!==F)return E.default.error("[".concat(A.clientId,"] Input uid is invalid")),A.state=fe,ae&&ae(J.default.INVALID_PARAMETER),void R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:J.default.INVALID_PARAMETER,addr:null});var B=r.register(A,{uid:F,cname:D&&D.cname});if(B)return A.state=fe,ae&&ae(B),void R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:B,addr:null});A.joinInfo=d()({},D),A.uid=F,A.key=se,A.pingpongCounter=0,pe(D,function(G){if(D.useLocalAccessPoint)try{var X=A.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(I.setParameter)("EVENT_REPORT_DOMAIN",X),Object(I.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",X),Object(I.setParameter)("LOG_UPLOAD_SERVER","".concat(X,":6444"))}catch(Q){E.default.debug("[".concat(A.clientId,"] LocalAccessPoint error: ").concat(Q))}if(A.state===le||A.state===fe)return ae&&ae("LEAVE_BEFORE_JOIN_SUCCESS");A.state=oe,E.default.debug("[".concat(A.clientId,"] Connected to gateway server")),clearInterval(A.pingTimer),A.pingTimer=setInterval(function(){var Q=Object(I.getParameter)("PING_PONG_TIME_OUT");if(++A.pingpongCounter>=Q){var ve=Date.now();A.socket&&E.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(ve-A.socket.getLastMsgTime(),"ms")),A.socket&&A.socket.getLastMsgTime()&&ve-A.socket.getLastMsgTime()>Object(I.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(A.pingpongCounter=0,A.socket.close(),A.socket.dispatchEvent(Object(M.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var ce=Date.now();A.makeRequest({_type:"ping"},function(){A.pingpongCounter=0;var ge=Date.now()-ce;Object(I.getParameter)("REPORT_STATS")&&A.makeRequest({_type:"ping_back",_message:{pingpongElapse:ge}})},function(ge,Fe){"TIMEOUT"!==ge&&(E.default.error("Ping Error ".concat(ge," ").concat(JSON.stringify(Fe))),Fe&&Fe.error_code&&A.socket&&A.socket.signal&&A.socket.signal.connection&&A.socket.signal.connection.readyState===WebSocket.OPEN&&(E.default.info("Disconnecting websocket connection"),A.socket.signal.connection.close()))})},3e3),function(Q,ve){var ce=Q.role,ge=d()({},A.joinInfo.apResponse),Fe={session_id:A.joinInfo.sid,app_id:L.appId,channel_key:A.key,channel_name:A.joinInfo.cname,sdk_version:I.VERSION,browser:navigator.userAgent,process_id:Object(R.getProcessId)(),mode:A.mode,codec:A.codec,role:ce,has_changed_gateway:Object(I.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||A.hasChangeBGPAddress,ap_response:ge,optionalInfo:A.joinInfo.optionalInfo,extend:Object(I.getParameter)("JOIN_EXTEND"),details:{}};if(A.joinInfo.hasOwnProperty("stringUid")&&(Fe.string_uid=A.joinInfo.stringUid),A.socket&&A.socket.signal&&A.socket.signal&&(ge.addresses&&ge.addresses[A.socket.signal.hostIndex]&&(Fe.ap_response.ticket=ge.addresses[A.socket.signal.hostIndex].ticket,delete ge.addresses),Object(I.getParameter)("SET_DEFAULT_TURNSERVER")&&A.socket.signal.turnConfig)){var ye={username:A.joinInfo.uid.toString(),credential:A.joinInfo.token,forceturn:Object(I.getParameter)("FORCE_TURN")};ye.url=A.socket.signal.turnConfig.url,A.socket.signal.turnConfig.tcpport&&(ye.tcpport=""+A.socket.signal.turnConfig.tcpport),A.socket.signal.turnConfig.udpport&&(ye.udpport=""+A.socket.signal.turnConfig.udpport),A.joinInfo.turnServers.find(function(be){if(be.url===ye.url)return!0})||A.joinInfo.turnServers.push(ye)}3===A.joinInfo.proxyServerType&&(Fe.plugin="web_cloud_proxy",Fe.details.cservice_map="1"),A.joinInfo.aesmode&&A.joinInfo.aespassword?(Fe.aes_mode=A.joinInfo.aesmode,Fe.aes_encrypt=!0,A.joinInfo.aes_salt&&(Fe.aes_salt=A.joinInfo.aes_salt),Object(b.encryptRSA)(A.joinInfo.aespassword).then(function(be){Fe.aes_secret=be,A.dispatchEvent({type:"join-message-hook",joinMessage:Fe}),ve(null,{_type:"join",_message:Fe})}).catch(function(be){E.default.error("[".concat(A.clientId,"] encrypt password failed "),be),ve("ENCRYPT_PASSWORD_FAILED")})):(A.dispatchEvent({type:"join-message-hook",joinMessage:Fe}),ve(null,{_type:"join",_message:Fe}))}({role:A.role},function(Q,ve){if(Q)return ae&&ae(Q);A.makeRequest(ve,function(ce){if(R.report.joinGateway(D.sid,{lts:he,succ:!0,ec:null,vid:D.vid,uid:D.uid,addr:A.socket.getURL(),firstSuccess:A.isFirstSuccess}),A.joinSuccessLts=Date.now(),A.isFirstSuccess=!1,A.rejoinAttempt=0,A.hasJoined=!0,ie&&ie(ce.uid),!0===ce.return_vosip||!0===Object(I.getParameter)("ENABLE_LIVE_SERVER_LIST")){var ge=null;try{ge=A.socket.signal.connection.url}catch(Fe){E.default.debug("[".concat(A.clientId,"] Can not get gateway ip: ").concat(Fe))}ge?Object(I.setParameter)("LIVE_SERVER_LIST",[ge]):Object(I.setParameter)("LIVE_SERVER_LIST",[])}A.dispatchEvent({type:"join"}),clearInterval(A.timers.trafficStats),A.timers.trafficStats=setInterval(function(){A.makeRequest({_type:"traffic_stats"},function(Fe){var ye={};for(var be in Fe)ye[i(be)]=Fe[be];if(ye.peer_delay&&ye.peer_delay.length){var Ue=[];ye.peer_delay.forEach(function(He){var Se={};for(var we in He)Se[i(we)]=He[we];Ue.push(Se)}),ye.peer_delay=Ue}A.traffic_stats=ye,A.traffic_stats.timestamp=Date.now();var Ee=A.localStreams[F]||A.localStreams[A.joinInfo.stringUid];Ee&&(Ee.traffic_stats={access_delay:ye.access_delay}),ye.peer_delay&&ye.peer_delay.forEach(function(He){var Se=A.remoteStreams[He.peer_uid];Se&&(Se.traffic_stats={access_delay:ye.access_delay,e2e_delay:He.e2e_delay,audio_delay:He.audio_delay,video_delay:He.video_delay})}),A.dispatchEvent({type:"after-getTrafficStats",trafficStats:ye})})},3e3)},function(ce,ge){if(E.default.error("[".concat(A.clientId,"] User join failed [").concat(ce,"]")),"ERR_JOIN_BY_MULTI_IP"===ce){try{R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:A.socket.getURL()})}catch(Fe){}return A.dispatchEvent({type:"onMultiIP",option:ge.option})}S[ce]&&A.rejoinAttempt<4?A._doWithAction(S[ce],ie,ae):ae&&ae(ce),R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:ce,addr:A.socket&&A.socket.getURL()})})})},function(G){E.default.error("[".concat(A.clientId,"] User join failed [").concat(G,"]")),ae&&ae(G),R.report.joinGateway(D.sid,{lts:he,succ:!1,ec:G,addr:A.socket.getURL()})}),this.remoteMuteState={},A.resetAudioVolumeIndication()},A.leave=function(D,se){var ie=r.unregister(A);switch(ie&&E.default.debug("[".concat(A.clientId,"] "),ie),A.p2ps.clear(),A.state){case fe:return E.default.debug("[".concat(A.clientId,"] Client Already in DISCONNECTED status")),void $(D);case le:return E.default.debug("[".concat(A.clientId,"] Client Already in DISCONNECTING status")),void $(se,J.default.INVALID_OPERATION);case te:return A.socket&&A.socket.close(),A.socket=void 0,E.default.info("[".concat(A.clientId,"] Client connecting, Leave channel success")),A.state=fe,D&&D()}for(var ae in A.state=le,A.channelMediaConfig&&(A.channelMediaRelayController&&A.channelMediaRelayController.dispose(),A.channelMediaRelayController=null),clearInterval(A.pingTimer),A.timers)A.timers.hasOwnProperty(ae)&&clearInterval(A.timers[ae]);for(var ae in A.inChannelInfo.joinAt&&(A.inChannelInfo.duration+=Date.now()-A.inChannelInfo.joinAt,A.inChannelInfo.joinAt=null),A.hasJoined?A.makeRequest({_type:"leave"},function(B){A.socket.close(),A.socket=void 0,E.default.info("[".concat(A.clientId,"] Leave channel success")),A.state=fe,D&&D(B)},function(B){"TIMEOUT"!==B&&"REQUEST_ABORT"!==B&&(E.default.error("[".concat(A.clientId,"] Leave Channel Failed"),B),A.state=oe,se&&se(B))}):(A.socket&&(A.socket.close(),A.socket=void 0),E.default.info("[".concat(A.clientId,"] Leave channel before joined")),A.state=fe,D&&D()),A.localStreams)if(A.localStreams.hasOwnProperty(ae)){var he=A.localStreams[ae];delete A.localStreams[ae],void 0!==he.pc&&(he.pc.close(),he.pc=void 0)}re()},A.publish=function(D,se,ie,ae){var he=(new Date).getTime(),F=!1;if(D.publishLTS=he,"object"!==p()(D)||null===D)return E.default.error("[".concat(A.clientId,"] Invalid local stream")),ae&&ae(J.default.INVALID_LOCAL_STREAM),void R.report.publish(A.joinInfo.sid,{lts:he,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:J.default.INVALID_LOCAL_STREAM});if(!D.stream&&void 0===D.url)return E.default.error("[".concat(A.clientId,"] Invalid local media stream")),ae&&ae(J.default.INVALID_LOCAL_STREAM),void R.report.publish(A.joinInfo.sid,{lts:he,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:J.default.INVALID_LOCAL_STREAM});if(A.state!==oe)return E.default.error("[".concat(A.clientId,"] User is not in the session")),ae&&ae(J.default.INVALID_OPERATION),void R.report.publish(A.joinInfo.sid,{lts:he,succ:!1,audio:D.hasAudio(),video:D.hasVideo(),screenshare:D.hasScreen(),audioName:D.hasAudio()&&D.audioName,videoName:D.hasVideo()&&D.videoName,screenName:D.hasScreen()&&D.screenName,ec:J.default.INVALID_OPERATION});var B=D.getAttributes()||{};if(D.local&&void 0===A.localStreams[D.getId()]&&(D.hasAudio()||D.hasVideo()||D.hasScreen())){var G=A.generateP2PId();if(A.p2ps.set(G,D),D.p2pId=G,void 0!==D.url)me(ee({state:"url",audio:D.hasAudio(),video:D.hasVideo(),attributes:D.getAttributes()}),function(Q,ve){"success"===Q?(D.getUserId()!==ve&&D.setUserId(ve),A.localStreams[ve]=D,D.onClose=function(){A.unpublish(D)}):E.default.error("[".concat(A.clientId,"] Publish local stream failed"),Q)});else{A.localStreams[D.getId()]=D,D.connectionSpec={callback:function(Q){Q||ae&&ae("CANNOT_GET_OFFER"),"motion"===D.optimizationMode&&D.pc.setRtpSenderParameters("maintain-framerate"),"detail"===D.optimizationMode&&D.pc.setRtpSenderParameters("maintain-resolution"),A.makeRequest(ee({state:"offer",stream_type:1==se.streamType?"low":"high",p2p_id:G,sdp:Q,audio:D.audio||D.screenAudio,video:D.screen||D.video,screen:D.screen,attributes:D.getAttributes(),dtx:D.DTX,hq:D.highQuality,lq:D.lowQuality,stereo:D.stereo,speech:D.speech,codec:A.codec,extend:Object(I.getParameter)("PUB_EXTEND")}),function(ve){D.getUserId()!==ve.uid&&D.setUserId(ve.uid),E.default.info("[".concat(A.clientId,"] Local stream published with uid"),ve.uid),D.onClose=function(){A.unpublish(D)},D._onAudioUnmute=function(){A.makeReport(H({action:"unmute_local_audio",stream_id:D.getId()}))},D._onVideoUnmute=function(){A.makeReport(H({action:"unmute_local_video",stream_id:D.getId()}))},D._onAudioMute=function(){A.makeReport(H({action:"mute_local_audio",stream_id:D.getId()}))},D._onVideoMute=function(){A.makeReport(H({action:"mute_local_video",stream_id:D.getId()}))},D.getId()===D.getUserId()&&(D.isAudioOn()||D.hasAudio()&&(E.default.debug("[".concat(A.clientId,"] local stream audio mute")),D._onAudioMute()),D.isVideoOn()||(D.hasVideo()||D.hasScreen())&&(E.default.debug("[".concat(A.clientId,"] local stream video mute")),D._onVideoMute())),D.pc.oniceconnectionstatechange=function(ce){if("failed"===ce){if(null!=A.timers[D.getId()]&&(clearInterval(A.timers[D.getId()]),clearInterval(A.timers[D.getId()]+"_RelatedStats")),E.default.error("[".concat(A.clientId,"] Publisher connection is lost -- streamId: ").concat(D.getId(),", p2pId: ").concat(G)),A.p2ps.delete(G),E.default.debug("[".concat(A.clientId,"] publish p2p failed: "),A.p2ps),!F)return F=!0,R.report.publish(A.joinInfo.sid,{lts:he,succ:!1,audio:D.hasAudio(),video:D.hasVideo(),screenshare:D.hasScreen(),audioName:D.hasAudio()&&D.audioName,videoName:D.hasVideo()&&D.videoName,screenName:D.hasScreen()&&D.screenName,ec:J.default.PEERCONNECTION_FAILED,publishRequestid:A.publishRequestId||0,p2pid:G}),A.dispatchEvent(Object(M.a)({type:"pubP2PLost",stream:D})),ae&&ae(J.default.PEERCONNECTION_FAILED);A.dispatchEvent(Object(M.a)({type:"pubP2PLost",stream:D}))}else if("connected"===ce&&(E.default.debug("[".concat(A.clientId,"] publish p2p connected: "),A.p2ps),D.getId()===D.getUserId()&&(D._isAudioMuted()?A.makeReport(H({action:"mute_local_audio",stream_id:D.getId()})):A.makeReport(H({action:"unmute_local_audio",stream_id:D.getId()})),D._isVideoMuted()?A.makeReport(H({action:"mute_local_video",stream_id:D.getId()})):A.makeReport(H({action:"unmute_local_video",stream_id:D.getId()}))),!F))return F=!0,R.report.publish(A.joinInfo.sid,{lts:he,succ:!0,audio:D.hasAudio(),video:D.hasVideo(),screenshare:D.hasScreen(),audioName:D.hasAudio()&&D.audioName,videoName:D.hasVideo()&&D.videoName,screenName:D.hasScreen()&&D.screenName,ec:null,publishRequestid:A.publishRequestId||0,p2pid:G}),ie&&ie()},D.pc.processSignalingMessage(ve.sdp)},function(ve,ce){E.default.error("Publish Failed: ".concat(ve)),R.report.publish(A.joinInfo.sid,{lts:he,succ:!1,audio:D.hasAudio(),video:D.hasVideo(),screenshare:D.hasScreen(),audioName:D.hasAudio()&&D.audioName,videoName:D.hasVideo()&&D.videoName,screenName:D.hasScreen()&&D.screenName,ec:ve,publishRequestid:A.publishRequestId||0,p2pid:G}),"TIMEOUT"!=ve&&(A.processPublishFailure(D),ae&&ae(ve))})},audio:D.hasAudio(),video:D.hasVideo(),screen:D.hasScreen(),optimizationMode:D.optimizationMode,isSubscriber:!1,stunServerUrl:A.stunServerUrl,turnServers:A.joinInfo.turnServers,maxAudioBW:B.maxAudioBW,minVideoBW:B.minVideoBW,maxVideoBW:B.maxVideoBW,mode:A.mode,codec:A.codec,isVideoMute:D.userMuteVideo||D.peerMuteVideo,isAudioMute:D.userMuteAudio||D.peerMuteAudio,maxFrameRate:D.attributes.maxFrameRate,agoraStream:D,clientId:A.clientId,isCloudProxy3:3===A.joinInfo.proxyServerType,onNoIceCandidate:function(){A.dispatchEvent({type:"no_ice_candidate",stream:D})}},D.pc=Object(W.a)(D.connectionSpec),D.pc.addStream(D.stream),E.default.debug("[".concat(A.clientId,"] PeerConnection add stream :"),D.stream),D.pc.onnegotiationneeded=function(Q){"motion"===D.optimizationMode&&D.pc.setRtpSenderParameters("maintain-framerate"),"detail"===D.optimizationMode&&D.pc.setRtpSenderParameters("maintain-resolution");var ve={state:"negotiation",stream_type:1===se.streamType?"low":"high",p2p_id:G,sdp:Q};A.makeRequest(ee(ve),function(ce){E.default.debug("Negotating Stream ".concat(D.getId())),D.pc.processSignalingMessage(ce.sdp)},function(ce,ge){E.default.error("Negotiation failed ".concat(ce),ge,ve)})},clearInterval(A.timers[D.getId()]),A.timers[D.getId()]=setInterval(function(){if(Object(I.getParameter)("REPORT_STATS")){var Q=0;D&&D.pc&&D.pc.getStats&&D.pc.getStatsRate(function(ve){ve.forEach(function(ce){if(ce&&ce.id&&!(/_recv$/.test(ce.id)||/^time$/.test(ce.id)||~ce.type.toLowerCase().indexOf("inbound"))&&D.getUserId()){if(-1===ce.id.indexOf("outbound_rtp")&&-1===ce.id.indexOf("OutboundRTP")&&-1===ce.type.toLowerCase().indexOf("outbound")||"video"!==ce.mediaType||(ce.googFrameWidthSent=D.videoWidth+"",ce.googFrameHeightSent=D.videoHeight+""),"video"===ce.mediaType)try{var ge=D.stream.getVideoTracks()[0];ce.A_vstd=ge.enabled?"0":"1"}catch(be){}if("audio"===ce.mediaType)try{var Fe=D.stream.getAudioTracks()[0];ce.A_astd=Fe.enabled?"0":"1"}catch(be){}if(D.getId()==D.getUserId()){var ye=200*Q;Q++,setTimeout(function(){var Ue,_e,be=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();be>Object(I.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(be)):A.makeReport((Ue=ce,_e={},Object.keys(Ue).forEach(function(Ee){Object(I.getParameter)("STATS_FILTER")[Ee]||(_e[a(Ee)]=Ue[Ee])}),{_type:"publish_stats",_message:{stream_type:"high",stats:_e}}))},ye)}else ye=200*Q,Q++,setTimeout(function(){var Ue,_e,be=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();be>Object(I.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(be)):A.makeReport((Ue=ce,_e={},Object.keys(Ue).forEach(function(Ee){Object(I.getParameter)("STATS_FILTER")[Ee]||(_e[a(Ee)]=Ue[Ee])}),{_type:"publish_stats",_message:{stream_type:"low",stats:_e}}))},ye)}})})}},3e3);var X=function(){Object(I.getParameter)("REPORT_STATS")&&D&&D.pc&&D.pc.getVideoRelatedStats&&D.pc.getVideoRelatedStats(function(Q){var ve,ce,Fe,ye,ge=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();ge>Object(I.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(ge)):D.getId()===D.getUserId()?A.makeReport((ve=Q,ce={},Object.keys(ve).forEach(function(Fe){Object(I.getParameter)("STATS_FILTER")[Fe]||(ce[a(Fe)]=ve[Fe])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:ce}})):A.makeReport((Fe=Q,ye={},Object.keys(Fe).forEach(function(be){Object(I.getParameter)("STATS_FILTER")[be]||(ye[a(be)]=Fe[be])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:ye}}))})};X(),clearInterval(A.timers[D.getId()+"_RelatedStats"]),A.timers[D.getId()+"_RelatedStats"]=setInterval(X,1e3)}}},A.unpublish=function(D,se,ie,ae){if("object"!==p()(D)||null===D)return E.default.error("[".concat(A.clientId,"] Invalid local stream")),void $(ae,J.default.INVALID_LOCAL_STREAM);if(A.state!==oe)return E.default.error("[".concat(A.clientId,"] User not in the session")),void $(ae,J.default.INVALID_OPERATION);if(null!=A.timers[D.getId()]&&(clearInterval(A.timers[D.getId()]),clearInterval(A.timers[D.getId()+"_RelatedStats"])),void 0!==A.socket)if(D.local&&void 0!==A.localStreams[D.getId()]){delete A.localStreams[D.getId()];var he={stream_id:D.getUserId(),stream_type:1===se.streamType?"low":"high"};A.makeRequest({_type:"unpublish",_message:he}),(D.hasAudio()||D.hasVideo()||D.hasScreen())&&void 0===D.url&&void 0!==D.pc&&(D.pc.close(),D.pc=void 0),D.onClose=void 0,D._onAudioMute=void 0,D._onAudioUnute=void 0,D._onVideoMute=void 0,D._onVideoUnmute=void 0,A.p2ps.delete(D.p2pId),ie&&ie()}else E.default.error("[".concat(A.clientId,"] Invalid local stream")),$(ae,J.default.INVALID_LOCAL_STREAM);else E.default.error("[".concat(A.clientId,"] User not in the session")),$(ae,J.default.INVALID_OPERATION)},A.subscribe=function(D,se,ie){var ae=(new Date).getTime();D.subscribeLTS=ae;var he=!1;if(E.default.info("[".concat(A.clientId,"] Gatewayclient ").concat(A.uid," Subscribe ").concat(D.getId(),": ").concat(JSON.stringify(D.subscribeOptions))),"object"!==p()(D)||null===D)return E.default.error("[".concat(A.clientId,"] Invalid remote stream")),ie&&ie(J.default.INVALID_REMOTE_STREAM),void R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:J.default.INVALID_REMOTE_STREAM});if(A.state!==oe&&(E.default.error("[".concat(A.clientId,"] User is not in the session")),!he))return he=!0,R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:J.default.INVALID_OPERATION}),ie&&ie(J.default.INVALID_OPERATION);if(!D.local&&A.remoteStreams.hasOwnProperty(D.getId()))if(D.hasAudio()||D.hasVideo()||D.hasScreen()){var F=A.generateP2PId();A.p2ps.set(F,D),D.p2pId=F,D.pc=Object(W.a)({callback:function(B){B||ie&&ie("CANNOT_GET_OFFER");var G={stream_id:D.getId(),audio:!D.subscribeOptions||D.subscribeOptions.audio,video:!D.subscribeOptions||D.subscribeOptions.video,codec:A.codec,p2p_id:F,sdp:B,tcc:Object(I.getParameter)("SUBSCRIBE_TCC"),extend:Object(I.getParameter)("SUB_EXTEND")};A.makeRequest({_type:"subscribe",_message:G},function(X){D.pc.processSignalingMessage(X.sdp)},function(X,Q){E.default.error("[".concat(A.clientId,"] Subscribe remote stream Failed: ").concat(X,", closing stream "),D.getId(),Q),R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:X}),"TIMEOUT"!=X&&(A.processSubscribeFailure(D),ie&&ie(X))})},nop2p:!0,audio:!0,video:!0,screen:D.hasScreen(),isSubscriber:!0,stunServerUrl:A.stunServerUrl,turnServers:A.joinInfo.turnServers,isVideoMute:D.userMuteVideo,isAudioMute:D.userMuteAudio,uid:D.getId(),agoraStream:D,clientId:A.clientId}),D.pc.onaddstream=function(B,G){if(D._onAudioUnmute=function(){A.makeReport(H({action:"unmute_remote_audio",stream_id:D.getId()}),function(){},function(){})},D._onAudioMute=function(){A.makeReport(H({action:"mute_remote_audio",stream_id:D.getId()}),function(){},function(){})},D._onVideoUnmute=function(){A.makeReport(H({action:"unmute_remote_video",stream_id:D.getId()}),function(){},function(){})},D._onVideoMute=function(){A.makeReport(H({action:"mute_remote_video",stream_id:D.getId()}),function(){},function(){})},"ontrack"===G&&"video"===B.track.kind||"onaddstream"===G){E.default.info("[".concat(A.clientId,"] Remote stream subscribed with uid "),D.getId());var X=A.remoteStreams[D.getId()];if(A.remoteStreams[D.getId()].stream="onaddstream"===G?B.stream:B.streams[0],A.remoteStreams[D.getId()].hasVideo()){if(Object(P.isFireFox)()||Object(P.isSafari)()){var Q=A.remoteStreams[D.getId()].stream;Object(T.vsResHack)(Q,function(ge,Fe){D.videoWidth=ge,D.videoHeight=Fe},function(ge){return E.default.warning("[".concat(A.clientId,"] vsResHack failed: ")+ge)})}}else{var ve=A.remoteStreams[D.getId()];ve.peerMuteVideo=!0,A._adjustPCMuteStatus(ve)}X&&X.isPlaying()&&X.elementID&&(E.default.debug("[".concat(A.clientId,"] Reload Player ").concat(X.elementID," StreamId ").concat(X.getId())),D.audioOutput=X.audioOutput,X.stop(),D.play(X.elementID,X.playOptions)),delete D.audioLevelHelper;var ce=Object(M.e)({type:"stream-subscribed",stream:A.remoteStreams[D.getId()]});A.dispatchEvent(ce)}},clearInterval(A.timers[D.getId()]),A.timers[D.getId()]=setInterval(function(){if(Object(I.getParameter)("REPORT_STATS")){var B=0;D&&D.pc&&D.pc.getStats&&D.pc.getStatsRate(function(G){G.forEach(function(X){if(X&&X.id){if(/_send$/.test(X.id)||/^time$/.test(X.id)||/^bweforvideo$/.test(X.id))return;-1===X.id.indexOf("inbound_rtp")&&-1===X.id.indexOf("inbound-rtp")&&-1===X.type.toLowerCase().indexOf("inbound")||"video"!==X.mediaType||(X.googFrameWidthReceived=D.videoWidth+"",X.googFrameHeightReceived=D.videoHeight+"");var Q=200*B;B++;var ve=D.getId();setTimeout(function(){var ce=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();if(ce>Object(I.getParameter)("REPORT_STATS_TIMEOUT"))E.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(ce));else{if("video"===X.mediaType)try{var ge=D.stream.getVideoTracks()[0];X.A_vrtd=ge.enabled?"0":"1",D.player&&D.player.freezeTimeCounterList.length>0&&(X.A_vrft=D.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(ye){}if("audio"===X.mediaType)try{var Fe=D.stream.getAudioTracks()[0];X.A_artd=Fe.enabled?"0":"1"}catch(ye){}A.makeReport(ne(ve,X))}},Q)}})})}},3e3),clearInterval(A.timers[D.getId()+"_RelatedStats"]),A.timers[D.getId()+"_RelatedStats"]=setInterval(function(){if(Object(I.getParameter)("REPORT_STATS")&&D&&D.pc){var B=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();if(B>Object(I.getParameter)("REPORT_STATS_TIMEOUT"))return void E.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(B));D.pc.getVideoRelatedStats&&D.pc.getVideoRelatedStats(function(G){D.player&&(D.hasVideo()&&!D.peerMuteVideo&&(G.isFreeze=D.player.freezeCount>D.player.lastFreezeCount),D.player.lastFreezeCount=D.player.freezeCount),A.makeReport(Y(D.getId(),G))}),D.pc.getAudioRelatedStats&&D.pc.getAudioRelatedStats(function(G){A.makeReport(Y(D.getId(),G))})}},1e3),A.audioLevel[D.getId()]=0,clearInterval(A.timers[D.getId()+"audio"]),A.timers[D.getId()+"audio"]=setInterval(function(){A.hasListeners("active-speaker")&&D&&D.pc&&"established"===D.pc.state&&D.pc.getStats&&D.pc.getStats(function(B){B.forEach(function(G){if("audio"===G.mediaType){if(G.audioOutputLevel>5e3)for(var X in A.audioLevel[D.getId()]<20&&(A.audioLevel[D.getId()]+=1),A.audioLevel)X!==""+D.getId()&&A.audioLevel[X]>0&&(A.audioLevel[X]-=1);var Q=Object.keys(A.audioLevel).sort(function(ce,ge){return A.audioLevel[ge]-A.audioLevel[ce]});if(A.activeSpeaker!==Q[0]){var ve=Object(M.a)({type:"active-speaker",uid:Q[0]});A.dispatchEvent(ve),A.activeSpeaker=Q[0],E.default.debug("[".concat(A.clientId,"] Update active speaker: ").concat(A.activeSpeaker))}}})},50)},50),D.pc.oniceconnectionstatechange=function(B){if("failed"===B)null!=A.timers[D.getId()]&&(clearInterval(A.timers[D.getId()]),clearInterval(A.timers[D.getId()]+"audio")),E.default.error("[".concat(A.clientId,"] Subscriber connection is lost -- streamId: ").concat(D.getId(),", p2pId: ").concat(F)),E.default.debug("[".concat(A.clientId,"] subscribe p2p failed: "),A.p2ps),he||(he=!0,ie&&ie(J.default.PEERCONNECTION_FAILED),R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:J.default.PEERCONNECTION_FAILED,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F})),A.remoteStreams[D.getId()]&&A.p2ps.has(F)&&(A.p2ps.delete(F),A.dispatchEvent(Object(M.a)({type:"subP2PLost",stream:D})));else if("connected"===B&&(E.default.debug("[".concat(A.clientId,"] subscribe p2p connected: "),A.p2ps),!he)){he=!0,R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!0,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:null,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F}),A._adjustPCMuteStatus(D);var G=!1,X=!1,Q=!1,ve=setInterval(function(){G&&X||(D.pc?D.pc.getStats(function(be){be.forEach(function(Ue){if((-1!==Ue.id.indexOf("recv")||Ue.type&&-1!==Ue.type.toLowerCase().indexOf("inbound")||-1!==Ue.id.indexOf("inbound_rtp")||-1!==Ue.id.indexOf("inbound-rtp")||-1!==Ue.id.indexOf("InboundRTP"))&&"audio"===Ue.mediaType){if((Ue.googDecodingNormal>0||Ue.audioOutputLevel>0)&&!G){G=!0,A.dispatchEvent({type:"first-audio-frame-decode",stream:D}),G&&X&&clearInterval(ve);var _e=Date.now(),Ee=R.report.getSessionStartTime(A.joinInfo.sid);R.report.firstAudioDecode(A.joinInfo.sid,{peerid:D.uintId,uid:A.uid,elapse:_e-Ee,subscribeElapse:_e-D.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F})}parseInt(Ue.packetsReceived)>0&&!X&&(X=!0,A.dispatchEvent({type:"first-audio-packet-received",stream:D}),G&&X&&clearInterval(ve),_e=Date.now(),Ee=R.report.getSessionStartTime(A.joinInfo.sid),R.report.firstAudioReceived(A.joinInfo.sid,{peerid:D.uintId,uid:A.uid,elapse:_e-Ee,subscribeElapse:_e-D.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F}))}})},100):clearInterval(ve))},100),ce=!1,ge=!1,Fe=setInterval(function(){ce&&ge||(D.pc?D.pc.getStats(function(be){be.forEach(function(Ue){if((-1!==Ue.id.indexOf("recv")||Ue.type&&-1!==Ue.type.toLowerCase().indexOf("inbound")||-1!==Ue.id.indexOf("inbound_rtp")||-1!==Ue.id.indexOf("inbound-rtp")||-1!==Ue.id.indexOf("InboundRTP"))&&"video"===Ue.mediaType){if((Ue.framesDecoded>0||Ue.googFramesDecoded>0)&&!ce){ce=!0,A.dispatchEvent({type:"first-video-frame-decode",stream:D}),ce&&ge&&clearInterval(Fe);var _e=Date.now(),Ee=R.report.getSessionStartTime(A.joinInfo.sid);D.firstFrameTime=(new Date).getTime()-D.subscribeLTS,R.report.firstVideoDecode(A.joinInfo.sid,{peerid:D.uintId,width:parseInt(Ue.googFrameWidthReceived)||0,height:parseInt(Ue.googFrameHeightReceived)||0,uid:A.uid,elapse:_e-Ee,subscribeElapse:_e-D.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F})}Ue.packetsReceived>0&&!ge&&(ge=!0,A.dispatchEvent({type:"first-video-packet-received",stream:D}),ce&&ge&&clearInterval(Fe),_e=Date.now(),Ee=R.report.getSessionStartTime(A.joinInfo.sid),R.report.firstVideoReceived(A.joinInfo.sid,{peerid:D.uintId,uid:A.uid,elapse:_e-Ee,subscribeElapse:_e-D.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:F}))}})},100):clearInterval(Fe))},100),ye=setInterval(function(){if(!Q){var be=D.getId(),Ue=A.traffic_stats;if(Ue&&Ue.peer_delay){var _e=Ue.peer_delay.find(function(Me){return Me.peer_uid==be});if(_e){if(Q=!0,A.peerPublishDurationMap.get(D.getId()))return void clearInterval(ye);var Ee=_e.peer_publish_audio_duration,He=_e.peer_publish_video_duration;if(void 0===Ee||void 0===He)return;A.peerPublishDurationMap.set(D.getId(),!0);var Se=R.report.getSessionStartTime(A.joinInfo.sid),we=(Ee||He)+(Date.now()-Ue.timestamp),ot=Date.now();R.report.peerPublishStatus({audiotag:Ee?1:-1,videotag:He?1:-1,lts:ot,sid:A.joinInfo.sid,cname:A.joinInfo.cname,cid:A.joinInfo.cid,uid:A.joinInfo.uid,elapse:ot-Se,peer:D.uintId,peerPublishDuration:we,joinChannelSuccessElapse:ot-A.joinSuccessLts,subscribeElapse:ot-D.subscribeLTS}),clearInterval(ye)}}}},1e3);return D.sid=A.joinInfo.sid,se&&se()}}}else E.default.error("[".concat(A.clientId,"] Invalid remote stream")),he||(he=!0,ie&&ie(J.default.INVALID_REMOTE_STREAM),R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:J.default.INVALID_REMOTE_STREAM}));else E.default.error("[".concat(A.clientId,"] No such remote stream")),he||(he=!0,ie&&ie(J.default.NO_SUCH_REMOTE_STREAM),R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!1,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:J.default.NO_SUCH_REMOTE_STREAM}))},A.subscribeChange=function(D,se,ie){var ae=Date.now();E.default.info("[".concat(A.clientId,"] Gatewayclient ").concat(A.uid," SubscribeChange ").concat(D.getId(),": ").concat(JSON.stringify(D.subscribeOptions))),A._adjustPCMuteStatus(D);var he={stream_id:D.getId(),audio:D.subscribeOptions.audio,video:D.subscribeOptions.video};A.makeRequest({_type:"subscribe_change",_message:he},function(F){var B=Object(M.e)({type:"stream-subscribe-changed",stream:A.remoteStreams[D.getId()]});R.report.subscribe(A.joinInfo.sid,{lts:ae,succ:!0,video:D.subscribeOptions&&D.subscribeOptions.video,audio:D.subscribeOptions&&D.subscribeOptions.audio,peerid:D.getId(),ec:null,subscribeRequestid:A.subscribeRequestId.get(D.getId())||0,p2pid:A.p2ps.get(D.getId())}),A.dispatchEvent(B),se&&se()},function(F,B){E.default.error("[".concat(A.clientId,"] Subscribe Change Failed ").concat(D.getId()),F,B),ie&&ie(F,B)})},A.processPublishFailure=function(D){D.publishLTS=null,D.p2pId&&A.p2ps.get(D.p2pId)===D&&A.p2ps.delete(D.p2pId),A.localStreams[D.getUserId()]===D&&delete A.localStreams[D.getUserId()],A.localStreams[D.getId()]===D&&delete A.localStreams[D.getId()],D.pc&&(D.pc.processSignalingMessage=function(){},D.pc.oniceconnectionstatechange=function(){},D.pc.close(),delete D.pc),delete D.onClose,delete D._onAudioUnmute,delete D._onVideoUnmute,delete D._onAudioMute,delete D._onVideoMute,delete D._onAudioUnmute},A.processSubscribeFailure=function(D){D.p2pId&&A.p2ps.get(D.p2pId)===D&&A.p2ps.delete(D.p2pId),D.pc&&(D.pc.onaddstream=function(){},D.pc.processSignalingMessage=function(){},D.pc.oniceconnectionstatechange=function(){},D.pc.close(),delete D.pc),delete D.onClose,delete D._onAudioUnmute,delete D._onVideoUnmute,delete D._onAudioMute,delete D._onVideoMute,delete D._onAudioUnmute},A._adjustPCMuteStatus=function(D){E.default.debug("[".concat(A.clientId,"]: use _adjustPCMuteStatus: ").concat(D.getId())),E.default.debug("[".concat(A.clientId,"]: video: ").concat(D.video,", audio: ").concat(D.audio,", suboption: ").concat(JSON.stringify(D.subscribeOptions),",userMuteVideo: ").concat(D.userMuteVideo,", peerMuteVideo: ").concat(D.peerMuteVideo,", userMuteAudio: ").concat(D.userMuteAudio,", peerMuteAudio: ").concat(D.peerMuteAudio)),!D.local&&D.pc&&D.pc.peerConnection.getReceivers&&D.pc.peerConnection.getReceivers().forEach(function(se){if(se&&se.track&&"audio"===se.track.kind){var ie=!D.userMuteAudio&&!D.peerMuteAudio;D.subscribeOptions&&!D.subscribeOptions.audio&&(ie=!1),E.default.debug("[".concat(A.clientId,"]: set receiver audio track: ").concat(ie)),se.track.enabled=!!ie}else if(se&&se.track&&"video"===se.track.kind){var ae=!D.userMuteVideo&&!D.peerMuteVideo;D.subscribeOptions&&!D.subscribeOptions.video&&(ae=!1),E.default.debug("[".concat(A.clientId,"]: set receiver video track: ").concat(ae)),se.track.enabled=!!ae}})},A.unsubscribe=function(D,se,ie){if("object"!==p()(D)||null===D)return E.default.error("[".concat(A.clientId,"] Invalid remote stream")),void $(ie,J.default.INVALID_REMOTE_STREAM);if(A.state!==oe)return E.default.error("[".concat(A.clientId,"] User is not in the session")),void $(ie,J.default.INVALID_OPERATION);if(null!=A.timers[D.getId()]&&(clearInterval(A.timers[D.getId()]),clearInterval(A.timers[D.getId()]+"audio")),null!=A.audioLevel[D.getId()]&&delete A.audioLevel[D.getId()],null!=A.timer_counter[D.getId()]&&delete A.timer_counter[D.getId()],A.remoteStreams.hasOwnProperty(D.getId())){if(!A.socket)return E.default.error("[".concat(A.clientId,"] User is not in the session")),void $(ie,J.default.INVALID_OPERATION);if(D.local)return E.default.error("[".concat(A.clientId,"] Invalid remote stream")),void $(ie,J.default.INVALID_REMOTE_STREAM);D.close(),D.stop();var ae={stream_id:D.getId()};A.makeRequest({_type:"unsubscribe",_message:ae}),void 0!==D.pc&&(D.pc.close(),D.pc=void 0),D.onClose=void 0,D._onAudioMute=void 0,D._onAudioUnute=void 0,D._onVideoMute=void 0,D._onVideoUnmute=void 0,delete D.subscribeOptions,A.p2ps.delete(D.p2pId),E.default.info("[".concat(A.clientId,"] Unsubscribe stream success")),se&&se()}else $(ie,J.default.NO_SUCH_REMOTE_STREAM)},A.setRemoteVideoStreamType=function(D,se){if(E.default.debug("[".concat(A.clientId,"] Switching remote video stream ").concat(D.getId()," to ").concat(se)),"object"===p()(D)&&null!==D)if(A.state===oe){if(!D.local){switch(se){case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var ie={stream_id:D.getId(),stream_type:se};A.makeRequest({_type:"switch_video_stream",_message:ie},function(){E.default.debug("SwitchVideoStream Success ".concat(ie.stream_id," ").concat(ie.stream_type))},function(ae,he){E.default.error("SwitchVideoStream Error ".concat(ae," ").concat(ie.stream_id," ").concat(ie.stream_type),he)})}}else E.default.error("[".concat(A.clientId,"] User is not in the session"));else E.default.error("[".concat(A.clientId,"] Invalid remote stream"))},A.renewToken=function(D,se,ie){D?A.key?A.state!==oe?(E.default.debug("[".concat(A.clientId,"] Client is not connected. Trying to rejoin")),A.key=D,A.rejoin(),se&&se()):(E.default.debug("[".concat(A.clientId,"] renewToken from ").concat(A.key," to ").concat(D)),A.key=D,A.makeRequest({_type:"renew_token",_message:{token:D}},se,ie)):(E.default.error("[".concat(A.clientId,"] Client is previously joined without token")),ie&&ie(J.default.INVALID_PARAMETER)):(E.default.error("[".concat(A.clientId,"] Invalid Token ").concat(D)),ie&&ie(J.default.INVALID_PARAMETER))},A.setStreamFallbackOption=function(D,se){if(E.default.debug("[".concat(A.clientId,"] Set stream fallback option ").concat(D.getId()," to ").concat(se)),"object"===p()(D)&&null!==D)if(A.state===oe){if(!D.local){switch(se){case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var ie={stream_id:D.getId(),fallback_type:se};A.makeRequest({_type:"set_fallback_option",_message:ie},function(){E.default.debug("SetStreamFallbackOption success ".concat(ie.stream_id," ").concat(se))},function(ae,he){E.default.error("Failed to SetStreamFallbackOption ".concat(ie.stream_id," ").concat(se," ").concat(ae),he)})}}else E.default.error("[".concat(A.clientId,"] User is not in the session"));else E.default.error("[".concat(A.clientId,"] Invalid remote stream"))},A.enableAudioVolumeIndicator=function(D,se){A.audioVolumeIndication.enabled=!0,A.audioVolumeIndication.interval=D,A.audioVolumeIndication.smooth=se,A.resetAudioVolumeIndication()},A.resetAudioVolumeIndication=function(){if(clearInterval(A.timers.audioVolumeIndication),clearInterval(A.timers.audioVolumeSampling),A.audioVolumeIndication.enabled&&A.audioVolumeIndication.interval){var D=Math.floor(1e3*A.audioVolumeIndication.smooth/100);clearInterval(A.timers.audioVolumeSampling),A.timers.audioVolumeSampling=setInterval(function(){A.audioVolumeSampling||(A.audioVolumeSampling={});var se={};for(var ie in A.remoteStreams){var ae=A.remoteStreams[ie];if(ae.stream&&ae.hasAudio()){var he=ae.getAudioLevel();he>0&&he<1&&(he*=100);var F=A.audioVolumeSampling[ie]||[];for(F.push(he);F.length>D;)F.shift();se[ie]=F}}A.audioVolumeSampling=se},100),clearInterval(A.timers.audioVolumeIndication),A.timers.audioVolumeIndication=setInterval(function(){if(A.socket&&A.socket.signal&&A.socket.signal.connection&&A.socket.signal.connection.readyState===WebSocket.OPEN){var se=[];for(var ie in A.remoteStreams)if(A.audioVolumeSampling&&A.audioVolumeSampling[ie]){var ae=A.audioVolumeSampling[ie],he=0;ae.forEach(function(X){he+=X});var F={uid:ie,level:Math.floor(he/ae.length)};F.level&&se.push(F)}var B=se.sort(function(X,Q){return X.level-Q.level});E.default.debug("[".concat(A.clientId,"] volume-indicator "),JSON.stringify(B)),A.audioVolumeIndication.sortedAudioVolumes=B;var G=Object(M.a)({type:"volume-indicator",attr:B});A.dispatchEvent(G)}},A.audioVolumeIndication.interval)}},A.closeGateway=function(){E.default.debug("[".concat(A.clientId,"] close gateway")),A.state=fe,A.socket.close(),ue()},A.startChannelMediaRelay=function(){var D=w()(O.a.mark(function se(ie){var ae,he,B;return O.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!A.channelMediaRelayController){G.next=2;break}throw new s.ChannelMediaError("RELAY_ALREADY_START","",s.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return ae=function(X){A.dispatchEvent({type:"channel-media-relay-event",code:X})},he=function(X,Q,ve){X===s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&Q===s.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(A.channelMediaRelayController.dispose(),A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:X,code:Q,data:ve})},A.channelMediaRelayController=new l.a(A.joinInfo,A.clientId),A.channelMediaRelayController.on("event",ae),A.channelMediaRelayController.on("state",he),G.prev=7,G.next=10,A.channelMediaRelayController.startChannelMediaRelay(ie);case 10:G.next=22;break;case 12:throw G.prev=12,G.t0=G.catch(7),E.default.debug("[".concat(A.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(G.t0))),A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:s.CHANNEL_MEDIA_RELAY_ERROR[B=G.t0 instanceof s.ChannelMediaError?"SetSourceChannelStatus"===G.t0.data||G.t0.data&&G.t0.data.serverResponse&&"SetSourceChannel"===G.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===G.t0.data||G.t0.data&&G.t0.data.serverResponse&&"SetDestChannel"===G.t0.data.serverResponse.command?"FAILED_JOIN_DEST":G.t0.data&&G.t0.data.serverResponse&&"StartPacketTransfer"===G.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":G.t0.message===s.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||G.t0.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":G.t0.message===s.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||G.t0.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":G.t0.message===s.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":G.t0.message===s.CHANNEL_MEDIA_ERROR.WS_ABORT||G.t0.message===s.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new s.ChannelMediaError(B,null,s.CHANNEL_MEDIA_RELAY_ERROR[B]);case 22:A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:s.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),A.channelMediaConfig=ie;case 24:case"end":return G.stop()}},se,null,[[7,12]])}));return function(se){return D.apply(this,arguments)}}(),A.updateChannelMediaRelay=function(){var D=w()(O.a.mark(function se(ie){var ae,he;return O.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(A.channelMediaRelayController){F.next=2;break}throw new s.ChannelMediaError("RELAY_NOT_START",null,s.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return F.prev=2,F.next=5,A.channelMediaRelayController.updateChannelMediaRelay(ie);case 5:F.next=18;break;case 7:throw F.prev=7,F.t0=F.catch(2),E.default.debug("[".concat(A.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),ae=s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,he=e instanceof s.ChannelMediaError?e.message===s.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===s.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===s.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===s.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",A.dispatchEvent({type:"channel-media-relay-event",code:s.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),A.dispatchEvent({type:"channel-media-relay-state",state:ae,code:s.CHANNEL_MEDIA_RELAY_ERROR[he]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new s.ChannelMediaError(he,null,s.CHANNEL_MEDIA_RELAY_ERROR[he]);case 18:A.channelMediaConfig=ie;case 19:case"end":return F.stop()}},se,null,[[2,7]])}));return function(se){return D.apply(this,arguments)}}(),A.stopChannelMediaRelay=w()(O.a.mark(function D(){var ie;return O.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(A.channelMediaRelayController){ae.next=2;break}throw new s.ChannelMediaError("RELAY_NOT_START",null,s.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return ae.prev=2,ae.next=5,A.channelMediaRelayController.stopChannelMediaRelay();case 5:ae.next=17;break;case 7:throw ae.prev=7,ae.t0=ae.catch(2),E.default.debug("[".concat(A.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),ie=e instanceof s.ChannelMediaError?e.message===s.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===s.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===s.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:s.CHANNEL_MEDIA_RELAY_ERROR[ie]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:s.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new s.ChannelMediaError(ie,null,s.CHANNEL_MEDIA_RELAY_ERROR[ie]);case 17:A.channelMediaConfig=null,A.channelMediaRelayController=null;case 19:case"end":return ae.stop()}},D,null,[[2,7]])})),A.sendMetadata=function(D,se){A.makeRequest({_type:"send_metadata",_message:{session_id:A.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(D)))}},function(){E.default.debug("[".concat(A.clientId,'] send metadata "').concat(D,'" success')),se&&se(null)},function(ie){E.default.error("[".concat(A.clientId,'] send metadata "').concat(D,'" failed'),ie),se&&se(ie)})},A._reportWebsocketCloseEvent=function(D,se){try{var ie=R.report.getSessionStartTime(A.joinInfo.sid),ae=Date.now();R.report.webSocketQuit({lts:ae,sid:A.joinInfo.sid,cname:A.joinInfo.cname,cid:A.joinInfo.cid,uid:A.joinInfo.uid,elapse:ae-ie,succ:D,errorCode:se,ip:null})}catch(he){E.default.debug("[".concat(A.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(he))}};var j=function(){E.default.debug("[".concat(A.clientId,"] Reconnect gateway")),A.state=fe,A.socket.close(),ue(),A.reconnectMode="recover",A.state=te,Pe()};A.recover=j;var ue=function(){for(var D in A.dispatchEvent({type:"before-clear-connection"}),A.timers)A.timers.hasOwnProperty(D)&&clearInterval(A.timers[D]);for(var D in A.remoteStreams)if(A.remoteStreams.hasOwnProperty(D)){var se=A.remoteStreams[D],ie=Object(M.a)({type:"stream-removed",uid:se.getId(),stream:se});A.dispatchEvent(ie)}A.p2ps.clear(),re(),Be(),clearInterval(A.pingTimer)};A.rejoin=function(){A.socket&&(clearInterval(A.pingTimer),A.socket.close(),A.socket=void 0),A.state=te,Pe()};var Pe=function(D,se){A.dispatchEvent(Object(M.a)({type:"rejoin-start"})),D=D||function(ie){E.default.info("[".concat(A.clientId,"] User ").concat(ie," is re-joined to ").concat(A.joinInfo.cname)),A.dispatchEvent(Object(M.a)({type:"rejoin"})),A.channelMediaConfig&&A.startChannelMediaRelay(A.channelMediaConfig).then(function(){E.default.debug("[".concat(A.clientId,"] restartChannelMediaRelay success"))}).catch(function(ae){E.default.debug("[".concat(A.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(ae)))}),A.liveStreams&&A.liveStreams.size&&A.liveStreams.forEach(function(ae,he){ae&&A.setLiveTranscoding(A.transcoding),A.startLiveStreaming(he,ae)}),A.injectLiveStreams&&A.injectLiveStreams.size&&A.injectLiveStreams.forEach(function(ae,he){A.addInjectStreamUrl(he,ae)})},se=se||function(ie){E.default.error("[".concat(A.clientId,"] Re-join to channel failed "),ie),A.dispatchEvent(Object(M.e)({type:"error",reason:ie}))},A.key?(++A.rejoinAttempt,A.join(A.joinInfo,A.key,D,se)):E.default.error("[".concat(A.clientId,"] Connection recover failed [Invalid channel key]"))},pe=function(D,se,ie){if(A.onConnect=se,A.socket){if(A.dispatchEvent({type:"reconnect"}),"retry"===A.reconnectMode)E.default.debug("[".concat(A.clientId,"] Retry current gateway")),A.socket.reconnect();else if("tryNext"===A.reconnectMode)E.default.debug("[".concat(A.clientId,"] Try next gateway")),A.socket.connectNext();else if("recover"===A.reconnectMode){E.default.debug("[".concat(A.clientId,"] Recover gateway")),E.default.debug("[".concat(A.clientId,"] Try to reconnect choose server and get gateway list again ")),A.reconnectingCS=!0;var ae=A.joinInfo&&A.joinInfo.sid;Object(K.getGatewayList)(A.joinInfo,function(F){E.default.debug("[".concat(A.clientId,"] session:  ").concat(ae," get gateway list success")),A.joinInfo.apResponse=F.res,A.reconnectingCS?A.socket.replaceHost(F.gateway_addr):E.default.debug("[".concat(A.clientId,"] session:  ").concat(ae," already leave"))})}}else A.socket=function(f,L){var C={connect:function(){L.host=f,C.signal=U(L),C.on=C.signal.on,C.dispatchEvent=C.signal.dispatchEvent,C.signal.on("onopen",function(H){C.signal.onEvent=function(Y){C.dispatchEvent(Object(M.d)({type:Y.event,msg:Y}))},C.dispatchEvent(Object(M.d)({type:"connect",msg:H}))}),C.signal.on("onError",function(H){onError(H.msg.code,"error")})},getLastMsgTime:function(){return C.signal&&C.signal.lastMsgTime},getSendBytes:function(){return C.signal.getSendBytes()},getRecvBytes:function(){return C.signal.getRecvBytes()},getDuration:function(){return C.signal.getDuration()},disconnect:function(){C.signal.disconnect()},close:function(){C.signal.close()},getURL:function(){return C.signal.getURL()},reconnect:function(){C.signal.reconnect()},connectNext:function(){C.signal.connectNext()},replaceHost:function(H){C.signal.replaceHost(H)},emitSimpleMessage:function(H,Y){C.signal.sendSignalCommand(H,Y)},emitRequest:function(H,Y){C.signal.sendRequest(H,Y)},emitReport:function(H){C.signal.sendReport(H)}};return C.connect(),C}(D.gatewayAddr,{sid:A.joinInfo.sid,clientId:A.clientId,proxyServerType:A.joinInfo.proxyServerType}),A.socket.on("start-connection",function(F){A.ticket=F&&F.msg&&F.msg.ticket}),A.socket.on("on_uplink_stats",function(F){var B={};for(var G in F)B[i(G)]=F[G];if(A.OutgoingAvailableBandwidth=B.uplink_available_bandwidth,A.localStreams[A.uid]){var X=A.localStreams[A.uid].uplinkStats;X&&X.period_fir===B.period_fir||E.default.debug("[".concat(A.clientId,"]: Period fir change to: ").concat(B.period_fir)),A.localStreams[A.uid].uplinkStats=B}}),A.socket.on("connect",function(){A.dispatchEvent({type:"connected"}),A.attemps=1,A.onConnect()}),A.socket.on("recover",function(){A.state=te,E.default.debug("[".concat(A.clientId,"] Try to reconnect choose server and get gateway list again ")),A.reconnectingCS=!0;var F=A.joinInfo&&A.joinInfo.sid;Object(K.getGatewayList)(A.joinInfo,function(B){E.default.debug("[".concat(A.clientId,"] session:  ").concat(F," get gateway list success")),A.reconnectingCS?A.socket.replaceHost(B.gateway_addr):E.default.debug("[".concat(A.clientId,"] session:  ").concat(F," already leave"))})}),A.socket.on("disconnect",function(F){if(E.default.debug("[".concat(A.clientId,"] Receive disconnect message")),A.state!==fe){A.state=fe,A._reportWebsocketCloseEvent(-1,J.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var B=Object(M.e)({type:"error",reason:J.default.SOCKET_DISCONNECTED});if(A.dispatchEvent(B),A.reconnectMode=0===A.p2ps.size?"tryNext":"retry",ue(),A.channelMediaRelayController&&A.channelMediaRelayController.dispose(),A.channelMediaRelayController=null,1!=C){var X=1e3*Math.min(30,Math.pow(2,A.attemps)-1);if(E.default.error("[".concat(A.clientId,"] Disconnect from server [").concat(JSON.stringify(F),"], attempt to recover [#").concat(A.attemps,"] after ").concat(X/1e3," seconds")),A.hasInvokeLeave)return E.default.debug("[".concat(A.clientId,"] No reconnection because Client.leave has been invoked")),void(A.hasInvokeLeave=!1);setTimeout(function(){A.attemps++,A.state=te,A.inChannelInfo&&Date.now()-A.inChannelInfo.joinAt>Object(I.getParameter)("TICKET_RENEW_TIMEOUT")?(E.default.debug("Recovering to renew ticket"),j()):Pe()},X)}else{var Q=r.unregister(A);Q&&E.default.debug("[".concat(A.clientId,"] "),Q)}}}),A.socket.on("on_add_audio_stream",function(F){if(E.default.info("[".concat(A.clientId,"] Newly added audio stream with uid ").concat(F.uid)),A.joinInfo.stringUid&&"string"!=typeof F.uid&&E.default.error("StringUID is Mixed with UintUID"),A.remoteStreamsInChannel.has(F.uid)||A.remoteStreamsInChannel.add(F.uid),void 0===A.remoteStreams[F.uid]){var B=Object(m.a)({streamID:F.uid,local:!1,audio:F.audio,video:F.video,uintUID:F.uint_id||F.uid});B.peerMuteVideo=!0,A.remoteStreams[F.uid]=B;var G=Object(M.e)({type:"stream-added",stream:B});A.dispatchEvent(G);var X=A.remoteMuteState[F.uid];X&&X.audio&&(G=Object(M.a)({type:"mute-audio",uid:F.uid}),A.dispatchEvent(G)),X&&X.video&&(G=Object(M.a)({type:"mute-video",uid:F.uid}),A.dispatchEvent(G))}R.report.onAddAudioStream(A.joinInfo.sid,{peerid:F.uint_id||F.uid,uid:A.uid})}),A.socket.on("on_update_stream",function(F){E.default.info("[".concat(A.clientId,"] on_update_stream:"),F);var B=A.remoteStreams[F.uid];if(A.joinInfo.stringUid&&"string"!=typeof F.uid&&E.default.error("StringUID is Mixed with UintUID"),B){B.audio=F.audio,B.video=F.video,B.screen=F.screen,B.pc&&A._adjustPCMuteStatus(B);var G=Object(M.e)({type:"stream-updated",stream:B});A.dispatchEvent(G)}else E.default.debug("[".concat(A.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(F.uid));R.report.onUpdateStream(A.joinInfo.sid,{peerid:F.uint_id||F.uid,audio:F.audio,video:F.video,uid:A.uid})}),A.socket.on("on_add_video_stream",function(F){if(E.default.info("[".concat(A.clientId,"] Newly added remote stream with uid ").concat(F.uid,".")),A.joinInfo.stringUid&&"string"!=typeof F.uid&&E.default.error("StringUID is Mixed with UintUID"),A.remoteStreamsInChannel.has(F.uid)||A.remoteStreamsInChannel.add(F.uid),void 0===A.remoteStreams[F.uid]){var B=Object(m.a)({streamID:F.uid,local:!1,audio:F.audio,video:F.video,uintUID:F.uint_id||F.uid});A.remoteStreams[F.uid]=B;var G=Object(M.e)({type:"stream-added",stream:B});A.dispatchEvent(G);var X=A.remoteMuteState[F.uid];X&&X.audio&&(G=Object(M.a)({type:"mute-audio",uid:F.uid}),A.dispatchEvent(G)),X&&X.video&&(G=Object(M.a)({type:"mute-video",uid:F.uid}),A.dispatchEvent(G))}else{var Q=A.remoteStreams[F.uid];if(Q.video=!0,Q.peerMuteVideo=!1,Q.pc&&A._adjustPCMuteStatus(Q),E.default.info("[".concat(A.clientId,"] Stream changed: enable video ").concat(F.uid)),void 0!==Q.stream&&Q.isPlaying()){var ve=Q.player.elementID;Q.stop(),Q.play(ve,Q.playOptions)}}R.report.onAddVideoStream(A.joinInfo.sid,{peerid:F.uint_id||F.uid,uid:A.uid})}),A.socket.on("on_remove_stream",function(F){E.default.info("[".concat(A.clientId,"] on_remove_stream:"),F),A.remoteStreamsInChannel.has(F.uid)&&A.remoteStreamsInChannel.delete(F.uid);var B=A.remoteStreams[F.uid];if(B){delete A.remoteStreams[F.uid],delete A.remoteMuteState[F.uid];var G=Object(M.e)({type:"stream-removed",stream:B});A.dispatchEvent(G),B.close(),void 0!==B.pc&&(B.pc.close(),B.pc=void 0,A.p2ps.delete(B.p2pId)),R.report.onRemoveStream(A.joinInfo.sid,{peerid:F.uint_id||F.uid,uid:A.uid})}else E.default.error("ERROR stream ",F.uid," not found onRemoveStream ",F)}),A.socket.on("on_publish_stream",function(F){E.default.info("[".concat(A.clientId,"] on_publish_stream:"),F),A.dispatchEvent({type:"streamPublished",stream:A.localStreams[F.uid],proxy:F.proxy}),R.report.reportApiInvoke(A.joinInfo.sid,{name:"on_publish_stream",options:{proxy:F.proxy}})()}),A.socket.on("mute_audio",function(F){E.default.info("[".concat(A.clientId,"] rcv peer mute audio: ").concat(F.uid)),A.remoteMuteState[F.uid]=A.remoteMuteState[F.uid]||{audio:!1,video:!1},A.remoteMuteState[F.uid].audio=!0;var B=Object(M.a)({type:"mute-audio",uid:F.uid}),G=A.remoteStreams[F.uid];G?(G.peerMuteAudio=!0,G.pc&&A._adjustPCMuteStatus(G),A.dispatchEvent(B)):E.default.debug("Ignoring event ".concat(F.type),F)}),A.socket.on("unmute_audio",function(F){E.default.info("[".concat(A.clientId,"] rcv peer unmute audio: ").concat(F.uid)),A.remoteMuteState[F.uid]=A.remoteMuteState[F.uid]||{audio:!1,video:!1},A.remoteMuteState[F.uid].audio=!1;var B=Object(M.a)({type:"unmute-audio",uid:F.uid}),G=A.remoteStreams[F.uid];G?(G.peerMuteAudio=!1,G.pc&&A._adjustPCMuteStatus(G),A.dispatchEvent(B)):E.default.debug("Ignoring event ".concat(F.type),F)}),A.socket.on("mute_video",function(F){E.default.info("[".concat(A.clientId,"] rcv peer mute video: ").concat(F.uid)),A.remoteMuteState[F.uid]=A.remoteMuteState[F.uid]||{audio:!1,video:!1},A.remoteMuteState[F.uid].video=!0;var B=Object(M.a)({type:"mute-video",uid:F.uid}),G=A.remoteStreams[F.uid];G?(G.peerMuteVideo=!0,G.player&&(G.player.peerVideoReady=!1),G.pc&&A._adjustPCMuteStatus(G),A.dispatchEvent(B)):E.default.debug("Ignoring event ".concat(F.type),F)}),A.socket.on("unmute_video",function(F){E.default.info("[".concat(A.clientId,"] rcv peer unmute video: ").concat(F.uid)),A.remoteMuteState[F.uid]=A.remoteMuteState[F.uid]||{audio:!1,video:!1},A.remoteMuteState[F.uid].video=!1;var B=Object(M.a)({type:"unmute-video",uid:F.uid}),G=A.remoteStreams[F.uid];G?(G.peerMuteVideo=!1,G.pc&&A._adjustPCMuteStatus(G),A.dispatchEvent(B)):E.default.debug("Ignoring event ".concat(F.type),F)}),A.socket.on("on_crypt_error",function(F){E.default.warning("[".concat(A.clientId,"] stream crypt error"));var B=Object(M.a)({type:"crypt-error",cryptType:F.crypt_type});A.dispatchEvent(B)}),A.socket.on("on_user_banned",function(F){E.default.info("[".concat(A.clientId,"] user banned uid: ").concat(F.uid," error: ").concat(F.error_code));var B=Object(M.a)({type:"client-banned",uid:F.uid,attr:F.error_code});A.dispatchEvent(B),C=!0}),A.socket.on("on_stream_fallback_update",function(F){E.default.info("[".concat(A.clientId,"] stream fallback peerId: ").concat(F.stream_id," type: ").concat(F.stream_type));var B=Object(M.a)({type:"stream-fallback",uid:F.stream_id,stream:F.stream_id,attr:F.stream_type});A.dispatchEvent(B)}),A.socket.on("stream_recover",function(F){E.default.info("[".concat(A.clientId,"] stream recover uid: ").concat(F.id," peerId: ").concat(F.peerid," type: ").concat(F.type));var B=Object(M.a)({type:"stream-recover",uid:F.id,stream:F.peerid,attr:F.type});A.dispatchEvent(B)}),A.socket.on("on_p2p_lost",function(F){E.default.debug("[".concat(A.clientId,"] p2plost: "),F,"p2ps:",A.p2ps);var B,G="DTLS failed";(B=A.localStreams[F.uid]||A.remoteStreams[F.uid])?(B.pc&&B.pc.offerCandidates&&0===B.pc.offerCandidates.length&&(G="NO_CANDIDATES_IN_OFFER"),"publish"===F.event&&R.report.publish(A.joinInfo.sid,{lts:B.publishLTS,succ:!1,audio:B.hasAudio(),video:B.hasVideo(),screenshare:B.hasScreen(),audioName:B.hasAudio()&&B.audioName,videoName:B.hasVideo()&&B.videoName,screenName:B.hasScreen()&&B.screenName,ec:G,publishRequestid:A.publishRequestId||0,p2pid:A.p2ps.get(B.getId())}),"subscribe"===F.event&&R.report.subscribe(A.joinInfo.sid,{lts:B.subscribeLTS,succ:!1,video:B.subscribeOptions&&B.subscribeOptions.video,audio:B.subscribeOptions&&B.subscribeOptions.audio,peerid:F.uid+"",ec:G,subscribeRequestid:A.subscribeRequestId.get(B.getId())||0,p2pid:A.p2ps.get(B.getId())})):E.default.warning("P2PLost Stream Not found",F),E.default.debug("[".concat(A.clientId,"] p2plost:"),F.p2pid),(B=A.p2ps.get(F.p2pid))&&(A.p2ps.delete(F.p2pid),B.local?A.dispatchEvent(Object(M.a)({type:"pubP2PLost",stream:B,attr:G})):A.remoteStreams[B.getId()]&&A.dispatchEvent(Object(M.a)({type:"subP2PLost",stream:B,attr:G})))}),A.socket.on("on_token_privilege_will_expire",function(F){E.default.debug("[".concat(A.clientId,"] Received Message onTokenPrivilegeWillExpire")),A.dispatchEvent(Object(M.a)({type:"onTokenPrivilegeWillExpire"}))}),A.socket.on("on_token_privilege_did_expire",function(){E.default.warning("[".concat(A.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),A.closeGateway(),A.dispatchEvent(Object(M.a)({type:"onTokenPrivilegeDidExpire"}))}),A.socket.on("enable_local_video",function(F){E.default.info("[".concat(A.clientId,"] enable_local_video:"),F),A.dispatchEvent(Object(M.a)({type:"enable-local-video",uid:F.uid}))}),A.socket.on("disable_local_video",function(F){E.default.info("[".concat(A.clientId,"] disable_local_video:"),F),A.dispatchEvent(Object(M.a)({type:"disable-local-video",uid:F.uid}))}),A._doWithAction=function(F,B,G){var X,Q;"tryNext"===F?(X=B,Q=G,E.default.debug("[".concat(A.clientId,"] Connect next gateway")),A.state=fe,A.socket.close(),ue(),A.reconnectMode="tryNext",A.state=te,Pe(X,Q)):"retry"===F?function(X,Q){E.default.debug("[".concat(A.clientId,"] Reconnect gateway")),A.state=fe,A.socket.close(),ue(),A.reconnectMode="retry",A.state=te,Pe(X,Q)}(B,G):"quit"===F?(E.default.debug("[".concat(A.clientId,"] quit gateway")),A.state=fe,A.socket.close(),ue()):"recover"===F&&j()},A.socket.on("on_notification",function(F){if(E.default.debug("[".concat(A.clientId,"] Receive notification: "),F),"ERR_JOIN_BY_MULTI_IP"===J.GatewayErrorCode[F.code])return A.dispatchEvent({type:"onMultiIP",option:F.option});F.detail?A._doWithAction(S[J.GatewayErrorCode[F.code]]):F.action&&A._doWithAction(F.action)}),A.socket.on("on_user_offline",function(F){E.default.info("[".concat(A.clientId,"] on_user_offline:"),F);var B=Object(M.a)({type:"peer-leave",uid:F.uid});if(A.remoteStreamsInChannel.has(F.uid)&&A.remoteStreamsInChannel.delete(F.uid),A.remoteStreams.hasOwnProperty(F.uid)&&(B.stream=A.remoteStreams[F.uid]),B.reason=F.reason,A.dispatchEvent(B),E.default.info("[".concat(A.clientId,"] remove remoteMuteState "),F.uid),delete A.remoteMuteState[F.uid],A.remoteStreams.hasOwnProperty(F.uid)){E.default.info("[".concat(A.clientId,"] closing stream on peer leave"),F.uid);var G=A.remoteStreams[F.uid];G.close(),delete A.remoteStreams[F.uid],R.report.onRemoveStream(A.joinInfo.sid,{peerid:F.uint_id||F.uid,uid:A.uid}),void 0!==G.pc&&(G.pc.close(),G.pc=void 0,A.p2ps.delete(G.p2pId))}A.timers.hasOwnProperty(F.uid)&&(clearInterval(A.timers[F.uid]),clearInterval(A.timers[F.uid]+"_RelatedStats"),delete A.timers[F.uid]),null!=A.audioLevel[F.uid]&&delete A.audioLevel[F.uid],null!=A.timer_counter[F.uid]&&delete A.timer_counter[F.uid]}),A.socket.on("onUplinkStats",function(F){}),A.socket.on("liveStreamingStarted",function(F){var B=Object(M.c)({type:"liveStreamingStarted",url:F.url});A.dispatchEvent(B)}),A.socket.on("liveStreamingFailed",function(F){var B=Object(M.c)({type:"liveStreamingFailed",url:F.url});A.dispatchEvent(B)}),A.socket.on("liveStreamingStopped",function(F){var B=Object(M.c)({type:"liveStreamingStopped",url:F.url});A.dispatchEvent(B)}),A.socket.on("liveTranscodingUpdated",function(F){var B=Object(M.c)({type:"liveTranscodingUpdated",reason:F.reason});A.dispatchEvent(B)}),A.socket.on("streamInjectedStatus",function(F){var B=Object(M.c)({type:"streamInjectedStatus",url:F.url,uid:F.uid,status:F.status});A.dispatchEvent(B)}),A.socket.on("on_user_online",function(F){A.joinInfo.stringUid&&"string"!=typeof F.uid&&E.default.error("StringUID is Mixed with UintUID"),A.dispatchEvent({type:"peer-online",uid:F.uid})}),A.socket.on("receive_metadata",function(F){A.joinInfo.stringUid&&"string"!=typeof F.uid&&E.default.error("StringUID is Mixed with UintUID");var B=decodeURIComponent(escape(window.atob(F.metadata)));E.default.debug("[".concat(A.clientId,"] received ").concat(F.uid," metadata: ").concat(B)),A.dispatchEvent({type:"receive-metadata",uid:F.uid,metadata:B})})},me=function(D,se){if(void 0!==A.socket)try{A.socket.emitSimpleMessage(D,function(ie,ae){se&&se(ie,ae)})}catch(ie){E.default.error("[".concat(A.clientId,"] Error in sendSimpleSdp [").concat(ie,"]"))}else E.default.error("[".concat(A.clientId,"] Error in sendSimpleSdp [socket not ready]"))},Be=function(){for(var D in A.localStreams)if(void 0!==A.localStreams[D]){var se=A.localStreams[D];delete A.localStreams[D],void 0!==se.pc&&(se.pc.close(),se.pc=void 0)}},re=function(){for(var D in A.remoteStreamsInChannel.clear(),A.remoteStreams)if(A.remoteStreams.hasOwnProperty(D)){var se=A.remoteStreams[D];se.isPlaying()&&se.stop(),se.close(),delete A.remoteStreams[D],void 0!==se.pc&&(se.pc.close(),se.pc=void 0)}};return A},r={_gatewayClients:{},register:function(f,L){if(!L.uid){var C="NO_UID_PROVIDED";return E.default.error("[".concat(f.clientId,"] "),C,L),C}return L.cname?this._gatewayClients[L.cname]&&this._gatewayClients[L.cname][L.uid]&&this._gatewayClients[L.cname][L.uid]!==f?(C="UID_CONFLICT",E.default.error("[".concat(f.clientId,"] "),C,L),C):(E.default.debug("[".concat(f.clientId,"] register client Channel"),L.cname,"Uid",L.uid),this._gatewayClients[L.cname]||(this._gatewayClients[L.cname]={}),this._gatewayClients[L.cname][L.uid]=f,null):(C="NO_CHANNEL_PROVIDED",E.default.error("[".concat(f.clientId,"] "),C,L),C)},unregister:function(f){var L=f&&f.uid,C=f.joinInfo&&f.joinInfo.cname;if(!L||!C){var H="INVALID_GATEWAYCLIENT";return E.default.error("[".concat(f.clientId,"] "),H),H}if(this._gatewayClients[C]&&this._gatewayClients[C][L])return this._gatewayClients[C][L]!==f?(H="GATEWAYCLIENT_UID_CONFLICT",E.default.error("[".concat(f.clientId,"] "),H),H):(E.default.debug("[".concat(f.clientId,"] unregister client "),f.uid),delete this._gatewayClients[C][L],null);H="GATEWEAY_CLIENT_UNREGISTERED",E.default.error("[".concat(f.clientId,"] "),H)}};c.DISCONNECTED=0,c.CONNECTING=1,c.CONNECTED=2,c.DISCONNECTING=3,c.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},q.a=c},function(Z,q,N){"use strict";N.r(q),N.d(q,"post",function(){return h}),N.d(q,"postFormData",function(){return v}),N.d(q,"shouldUseHttps",function(){return d}),N.d(q,"getHTTPSendBytes",function(){return o}),N.d(q,"getHTTPRecvBytes",function(){return p}),N.d(q,"resetHTTPByetsCount",function(){return y});var x=N(2),O=N(10),_=0,w=0,o=function(){return _},p=function(){return w},y=function(){_=0,w=0},v=function(m,M,g,E,R){var T=new XMLHttpRequest;if(T.timeout=M.timeout||Object(x.getParameter)("HTTP_CONNECT_TIMEOUT"),T.open("POST",m,!0),R)for(var k in R)"withCredentials"==k?T.withCredentials=!0:T.setRequestHeader(k,R[k]);T.onload=function(V){w+=Object(O.lengthInUtf8Bytes)(T.responseText),200!==T.status?E&&E({httpErrorCode:"httpcode-xhr.status"},m):g&&g(T.responseText)},T.onerror=function(V){E&&E(V,m)},T.ontimeout=function(V){E&&E(V,m)};var I=JSON.stringify(M);_+=Object(O.lengthInUtf8Bytes)(I);var U=new FormData;U.append("request",I),T.send(U)},h=function(m,M,g,E,R){var T=new XMLHttpRequest;if(T.timeout=M.timeout||Object(x.getParameter)("HTTP_CONNECT_TIMEOUT"),T.open("POST",m,!0),T.setRequestHeader("Content-type","application/json; charset=utf-8"),R)for(var k in R)"withCredentials"==k?T.withCredentials=!0:T.setRequestHeader(k,R[k]);T.onload=function(U){w+=Object(O.lengthInUtf8Bytes)(T.responseText),200!==T.status?E&&E({httpErrorCode:"httpcode-xhr.status"},m):g&&g(T.responseText)},T.onerror=function(U){E&&E(U,m)},T.ontimeout=function(U){E&&E(U,m)};var I=JSON.stringify(M);_+=Object(O.lengthInUtf8Bytes)(I),T.send(I)},d=function(){return"https:"==document.location.protocol}},function(Z,q,N){"use strict";N.r(q),N.d(q,"RTCPeerConnection",function(){return W}),N.d(q,"getUserMedia",function(){return w}),N.d(q,"attachMediaStream",function(){return o}),N.d(q,"reattachMediaStream",function(){return p}),N.d(q,"setSrcObject",function(){return m}),N.d(q,"getSrcObject",function(){return M}),N.d(q,"webrtcDetectedBrowser",function(){return y}),N.d(q,"webrtcDetectedVersion",function(){return v}),N.d(q,"webrtcMinimumVersion",function(){return h}),N.d(q,"webrtcTesting",function(){return J}),N.d(q,"webrtcUtils",function(){return R});var x=N(11),O=N.n(x),_=N(5),w=null,o=null,p=null,y=null,v=null,h=null,d=null,m=null,M=null,g=null,E={addStream:null},R={log:function(){},extractVersion:function(K,P,S){var z=K.match(P);return z&&z.length>=S&&parseInt(z[S])}};if("object"==("undefined"==typeof window?"undefined":O()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(m=function(K,P){"mozSrcObject"in K?K.mozSrcObject=P:(K._srcObject=P,K.src=P?URL.createObjectURL(P):null)},M=function(K){return"mozSrcObject"in K?K.mozSrcObject:K._srcObject}):(m=function(K,P){K.srcObject=P},M=function(K){return K.srcObject}),w=window.navigator&&window.navigator.getUserMedia):(m=function(K,P){K.srcObject=P},M=function(K){return K.srcObject}),o=function(K,P){m(K,P)},p=function(K,P){m(K,M(P))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var T in R.log("This appears to be Firefox"),y="firefox",v=R.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),h=31,g=mozRTCPeerConnection,E)E[T]=g.prototype[T];if(d=function(K,P){if(v<38&&K&&K.iceServers){for(var S=[],z=0;z<K.iceServers.length;z++){var u=K.iceServers[z];if(u.hasOwnProperty("urls"))for(var t=0;t<u.urls.length;t++){var n={url:u.urls[t]};0===u.urls[t].indexOf("turn")&&(n.username=u.username,n.credential=u.credential),S.push(n)}else S.push(K.iceServers[z])}K.iceServers=S}var a=new g(K,P);for(var i in E)a[i]=E[i];return a},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),w=function(K,P,S){var z=function(u){if("object"!==O()(u)||u.require)return u;var t=[];return Object.keys(u).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var a=u[n]="object"===O()(u[n])?u[n]:{ideal:u[n]};if(void 0===a.min&&void 0===a.max&&void 0===a.exact||t.push(n),void 0!==a.exact&&("number"==typeof a.exact?a.min=a.max=a.exact:u[n]=a.exact,delete a.exact),void 0!==a.ideal){u.advanced=u.advanced||[];var i={};i[n]="number"==typeof a.ideal?{min:a.ideal,max:a.ideal}:a.ideal,u.advanced.push(i),delete a.ideal,Object.keys(a).length||delete u[n]}}}),t.length&&(u.require=t),u};return v<38&&(R.log("spec: "+JSON.stringify(K)),K.audio&&(K.audio=z(K.audio)),K.video&&(K.video=z(K.video)),R.log("ff37: "+JSON.stringify(K))),navigator.mozGetUserMedia(K,P,S)},navigator.getUserMedia=w,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:V,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(K){K([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},v<41){var k=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return k().then(void 0,function(K){if("NotFoundError"===K.name)return[];throw K})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var T in R.log("This appears to be Chrome"),y="chrome",v=R.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),h=38,g=webkitRTCPeerConnection,E)E[T]=g.prototype[T];d=function(K,P){K&&K.iceTransportPolicy&&(K.iceTransports=K.iceTransportPolicy);var S=new g(K,P);for(var z in E)S[z]=E[z];var u=S.getStats.bind(S);return S.getStats=function(t,n,a){var i=arguments;i.length>0&&"function"==typeof t&&(n?(a=n,n=t,i=[t=null,n,a]):(n=t,i=[t=null,n]));var s=function(b){var c={};return b.result().forEach(function(r){var f={id:r.id,timestamp:r.timestamp,type:r.type};r.names().forEach(function(L){f[L]=r.stat(L)}),c[f.id]=f}),c};if(i.length>=2){var l=function(b){i[1](s(b))};return u.apply(this,[l,i[0]])}return u()},S},["createOffer","createAnswer"].forEach(function(K){var P=webkitRTCPeerConnection.prototype[K];webkitRTCPeerConnection.prototype[K]=function(){var S=this;if(arguments.length<1||1===arguments.length&&"object"===O()(arguments[0])){var z=1===arguments.length?arguments[0]:void 0;return new Promise(function(u,t){P.apply(S,[u,t,z])})}return P.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(K){var P=webkitRTCPeerConnection.prototype[K];webkitRTCPeerConnection.prototype[K]=function(){var S=arguments,z=this;return new Promise(function(u,t){P.apply(z,[S[0],function(){u(),S.length>=2&&S[1].apply(null,[])},function(n){t(n),S.length>=3&&S[2].apply(null,[n])}])})}});var I=function(K){if("object"!==O()(K)||K.mandatory||K.optional)return K;var P={};return Object.keys(K).forEach(function(S){if("require"!==S&&"advanced"!==S&&"mediaSource"!==S){var z="object"===O()(K[S])?K[S]:{ideal:K[S]};void 0!==z.exact&&"number"==typeof z.exact&&(z.min=z.max=z.exact);var u=function(n,a){return n?n+a.charAt(0).toUpperCase()+a.slice(1):"deviceId"===a?"sourceId":a};if(void 0!==z.ideal){P.optional=P.optional||[];var t={};"number"==typeof z.ideal?(t[u("min",S)]=z.ideal,P.optional.push(t),(t={})[u("max",S)]=z.ideal,P.optional.push(t)):(t[u("",S)]=z.ideal,P.optional.push(t))}void 0!==z.exact&&"number"!=typeof z.exact?(P.mandatory=P.mandatory||{},P.mandatory[u("",S)]=z.exact):["min","max"].forEach(function(n){void 0!==z[n]&&(P.mandatory=P.mandatory||{},P.mandatory[u(n,S)]=z[n])})}}),K.advanced&&(P.optional=(P.optional||[]).concat(K.advanced)),P};if(w=function(K,P,S){return K.audio&&(K.audio=I(K.audio)),K.video&&(K.video=I(K.video)),R.log("chrome: "+JSON.stringify(K)),navigator.webkitGetUserMedia(K,P,S)},navigator.getUserMedia=w,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:V,enumerateDevices:function(){return new Promise(function(K){var P={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(S){K(S.map(function(z){return{label:z.label,kind:P[z.kind],deviceId:z.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if((Object(_.getBrowserVersion)()?Number(Object(_.getBrowserVersion)().split(".")[0]):void 0)<46){var U=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(K){return R.log("spec:   "+JSON.stringify(K)),K.audio=I(K.audio),K.video=I(K.video),R.log("chrome: "+JSON.stringify(K)),U(K)}}}else navigator.mediaDevices.getUserMedia=function(K){return V(K)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){R.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){R.log("Dummy mediaDevices.removeEventListener called.")}),o=function(K,P){v>=43?m(K,P):void 0!==K.src?K.src=P?URL.createObjectURL(P):null:R.log("Error attaching stream to element.")},p=function(K,P){v>=43?m(K,M(P)):K.src=P.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(R.log("This appears to be Edge"),y="edge",v=R.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),h=12):R.log("Browser does not appear to be WebRTC-capable");else R.log("This does not appear to be a browser"),y="not a browser";function V(K){return new Promise(function(P,S){w(K,P,S)})}var W,J={};try{Object.defineProperty(J,"version",{set:function(K){v=K}})}catch(K){}d?W=d:"undefined"!=typeof window&&(W=window.RTCPeerConnection)},function(Z,q,N){"use strict";var x=N(12),O=N.n(x),_=N(17),w=N.n(_),o=N(51),p=N.n(o),y=N(5),v=N(1),h=N(3),d=N(0),m=(N(25),N(2),N(4),N(52)),M=N.n(m),g=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function E(t){for(var n=new Uint8Array([99,114,121,112,116,105,105]),a=n.length,i=t,s=i.length,l=new Uint8Array(s),b=new Uint8Array(256),c=0;c<256;c++)b[c]=c;for(var r=0,f=0;f<256;f++){var L=[b[r=(r+b[f]+n[f%a])%256],b[f]];b[f]=L[0],b[r]=L[1]}var H=0;r=0;for(var Y=0;Y<0+s;Y++){var ee=[b[r=(r+b[H=(H+1)%256])%256],b[H]];b[H]=ee[0],b[r]=ee[1],Y>=0&&(l[Y-0]=i[Y-0]^b[(b[H]+b[r])%256])}var ne=String.fromCharCode.apply(null,l);return Function("var winSize = 5; return `"+ne+"`")()}function R(t,n){var a=E(n),i=M.a.createProgramFromSources(t,[E(g),a]),s=t.getAttribLocation(i,"a_position"),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(s);var b=2,c=t.FLOAT,r=!1,f=0,L=0;t.vertexAttribPointer(s,b,c,r,f,L);var C=t.getAttribLocation(i,"a_texCoord"),H=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,H),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(C),t.vertexAttribPointer(C,b=2,c=t.FLOAT,r=!1,f=0,L=0),i}var T=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function k(t,n,a){var i=t.gl;this.program=R(i,T),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var s=i.getUniformLocation(this.program,"u_flipY");i.uniform1f(s,1)}}var I=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function U(t,n,a){var i=t.gl,s=1/n,l=1/a,b=5;this.program=R(i,I),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var c=i.getUniformLocation(this.program,"u_flipY"),r=i.getUniformLocation(this.program,"u_singleStepOffset"),f=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(r,s,l),i.uniform1f(f,b),i.uniform1f(c,1)},this.setParameters=function(c){void 0!==c.denoiseLevel&&(b=c.denoiseLevel)},this.setSize=function(c,r){s=1/c,l=1/r}}var V=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function W(t,n,a){var i=t.gl,s=1/n,l=1/a,b=5;this.program=R(i,V),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var c=i.getUniformLocation(this.program,"u_flipY"),r=i.getUniformLocation(this.program,"u_singleStepOffset"),f=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(r,s,l),i.uniform1f(f,b),i.uniform1f(c,1)},this.setParameters=function(c){void 0!==c.denoiseLevel&&(b=c.denoiseLevel)},this.setSize=function(c,r){s=1/c,l=1/r}}var J=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function K(t,n,a){var i=t.gl,s=1/n,l=1/a,b=5;this.program=R(i,J),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var c=i.getUniformLocation(this.program,"u_flipY"),r=i.getUniformLocation(this.program,"u_singleStepOffset"),f=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(r,s,l),i.uniform1f(f,b),i.uniform1f(c,1)},this.setParameters=function(c){void 0!==c.denoiseLevel&&(b=c.denoiseLevel)},this.setSize=function(c,r){s=1/c,l=1/r}}var P=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function S(t,n,a){var i=t.gl,s=5,l=.1,b=.5,c=175/180*3.141593,r=115/180*3.141593,f=173/180*3.141593,L=116/180*3.141593,C=2.04203545,H=0,Y=0,ee=0,ne=[],fe=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],te=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],oe=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=R(i,P),this.setUniforms=function(){var le=i.getUniformLocation(this.program,"u_flipY"),de=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform1f(de,s),i.uniform1f(le,1);var A=i.getUniformLocation(this.program,"light");i.uniform1f(A,l);var $=i.getUniformLocation(this.program,"redness");i.uniform1f($,b);var j=i.getUniformLocation(this.program,"skin_he_max"),ue=i.getUniformLocation(this.program,"skin_he_min"),Pe=i.getUniformLocation(this.program,"skin_hc_max"),pe=i.getUniformLocation(this.program,"skin_hc_min"),me=i.getUniformLocation(this.program,"skin_hc_axis"),Be=i.getUniformLocation(this.program,"facts_rotate_c"),re=i.getUniformLocation(this.program,"facts_rotate_le"),D=i.getUniformLocation(this.program,"facts_rotate_ge");i.uniform1f(j,c),i.uniform1f(ue,r),i.uniform1f(Pe,f),i.uniform1f(pe,L),i.uniform1f(me,C),i.uniform1f(Be,H),i.uniform1f(re,Y),i.uniform1f(D,ee);var se=i.getUniformLocation(this.program,"u_originImage");i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,t.inputTexture),i.uniform1i(se,2);for(var ie=["lighten_lut"],ae=[i.TEXTURE3],he=0;he<ie.length;he++){var F=i.getUniformLocation(this.program,ie[he]);i.activeTexture(ae[he]),i.bindTexture(i.TEXTURE_2D,ne[he]),i.uniform1i(F,he+3)}},this.setParameters=function(le){void 0!==le.denoiseLevel&&(s=le.denoiseLevel),void 0!==le.lightLevel&&(l=le.lightLevel),void 0!==le.rednessLevel&&this._updateRedness(b=le.rednessLevel),void 0!==le.lighteningContrastLevel&&this._updateLut(le.lighteningContrastLevel)},this._updateRedness=function(le){var de,A,$=3.141593,j=le,ue=j;j>1&&(j=1),j<0&&(j=0),ue>1&&(ue=1),ue<0&&(ue=0),H=.8*j,ue<.8&&(ue=0),(C=(117-4*ue)/180*$)<(L=(116-4*ue)/180*$)&&(C=L),L<$/2&&(L=$/2),C<$/2&&(C=$/2),(r=(115-4*ue)/180*$)<$/2&&(r=$/2),(f=173/180*$)>$&&(f=$),C>$&&(C=$),(c=175/180*$)>$&&(c=$),A=f-C,ee=(de=c-f)>.01?H*A/de:H,A=C-L,Y=(de=L-r)>.01?H*A/de:H},this._updateLut=function(le){var de=null;0==le&&(de=te),1==le&&(de=oe),2==le&&(de=fe);for(var A=[new Uint8Array(de)],$=[256],j=[1],ue=0;ue<A.length;ue++)i.bindTexture(i.TEXTURE_2D,ne[ue]),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,$[ue],j[ue],0,i.LUMINANCE,i.UNSIGNED_BYTE,A[ue])},this._init=function(){for(var de=[new Uint8Array(te)],A=[256],$=[1],j=0;j<de.length;j++){var ue=i.createTexture();i.bindTexture(i.TEXTURE_2D,ue),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,A[j],$[j],0,i.LUMINANCE,i.UNSIGNED_BYTE,de[j]),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),ne.push(ue)}},this._init()}var z=!1;function u(){this.programs=[];var t=this,n=null,a=null;t.gl=null,t.inputTexture=null;var i=[],s=[],l=0,b=0;t._initGl=function(c,r){t.inputTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,t.inputTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);for(var f=0;f<4;f++){var L=n.createTexture();n.bindTexture(n.TEXTURE_2D,L),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),f<2?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,c,r,0,n.RGBA,n.UNSIGNED_BYTE,null):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r,c,0,n.RGBA,n.UNSIGNED_BYTE,null);var C=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,C),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,L,0),i.push(L),s.push(C)}n.viewport(0,0,c,r),l=c,b=r},t.render=function(c){if(n){var r=0;b==c.videoWidth&&l===c.videoHeight&&(r=2),n.viewport(0,0,c.videoWidth,c.videoHeight),n.bindTexture(n.TEXTURE_2D,t.inputTexture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,c);for(var f=z?t.programs.length-1:0,L=0;L<=f;L++){var C=t.programs[L].program;n.useProgram(C);var H=n.getUniformLocation(C,"u_image");t.programs[L].setUniforms(),n.bindFramebuffer(n.FRAMEBUFFER,s[r+L%2]),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,6),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i[r+L%2]),n.uniform1i(H,0)}n.useProgram(a);var Y=n.getUniformLocation(a,"u_flipY");n.uniform1f(Y,-1),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,6)}},t.setEnableBeauty=function(c){z=c},t.init=function(c,r,f){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");n=f.getContext("webgl"),t.gl=n,t._initGl(c,r),t.programs.push(new k(this,c,r)),t.programs.push(new U(this,c,r)),t.programs.push(new W(this,c,r)),t.programs.push(new K(this,c,r)),t.programs.push(new S(this,c,r)),a=t.programs[0].program},t.release=function(){t.gl=null,n=null,a=null,t.inputTexture=null,t.programs=[],i=[],s=[]},t.setDenoiseLevel=function(c){t.programs.forEach(function(r){r.setParameters&&r.setParameters({denoiseLevel:c})})},t.setLightLevel=function(c){t.programs.forEach(function(r){r.setParameters&&r.setParameters({lightLevel:c})})},t.setRednessLevel=function(c){t.programs.forEach(function(r){r.setParameters&&r.setParameters({rednessLevel:c})})},t.setContrastLevel=function(c){t.programs.forEach(function(r){r.setParameters&&r.setParameters({lighteningContrastLevel:c})})},t.setSize=function(c,r){t.programs.forEach(function(f){f.setSize&&f.setSize(c,r)})}}u._instance=null,u.getInstance=function(){return u._instance||(u._instance=new u),u._instance},q.a={addVideoEffectCapability:function(t){var n;t.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},t._initVideoContext=function(){if(t.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!t.stream)throw new Error("Failed to init video context. Local Stream not initialized");t.videoEffect.originVideoTrack=t.stream.getVideoTracks()[0],t.attributes&&t.attributes.maxFrameRate&&(t.videoEffect.fps=t.attributes.maxFrameRate),t.videoEffect.videoContextInited=!0},t._renderWithWebGL=function(n){return new Promise(function(a){t.videoEffect.canvas||(t.videoEffect.canvas=document.createElement("canvas")),t.videoEffect.video||(t.videoEffect.video=document.createElement("video")),t.videoEffect.video.setAttribute("autoplay",""),t.videoEffect.video.setAttribute("muted",""),t.videoEffect.video.muted=!0,t.videoEffect.video.setAttribute("playsinline",""),t.videoEffect.video.setAttribute("style","display:none"),t.videoEffect.video.srcObject=n;var i=n.getVideoTracks()[0].getSettings(),s=i.width,l=i.height;console.log("Width: ".concat(s,", Height: ").concat(l)),t.videoEffect.canvas.setAttribute("width",s),t.videoEffect.canvas.setAttribute("height",l),t.videoEffect.video.setAttribute("width",s),t.videoEffect.video.setAttribute("height",l);var b=u.getInstance();b.init(t.videoEffect.video.width,t.videoEffect.video.height,t.videoEffect.canvas),b.setDenoiseLevel(t.videoEffect.denoiseLevel),b.setLightLevel(t.videoEffect.lightLevel),b.setRednessLevel(t.videoEffect.rednessLevel),b.setContrastLevel(t.videoEffect.lighteningContrastLevel),t.videoEffect.video.addEventListener("playing",function c(){var r=t.videoEffect.canvas.captureStream(t.videoEffect.fps);t.videoEffect.video.removeEventListener("playing",c,!0),a([r.getVideoTracks()[0],t.videoEffect.video])},!0),t.videoEffect.video.play()})},t._disableEffect=function(){t.videoEffect.videoContextInited||t._initVideoContext();var n=t.videoEffect.originVideoTrack;if(!n)return d.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(t.pc&&t.pc.peerConnection&&t.pc.peerConnection){var a=(t.pc.peerConnection&&t.pc.peerConnection.getSenders()).find(function(i){return i&&i.track&&"video"==i.track.kind});if(a&&a.replaceTrack&&n)return a.replaceTrack(n)}return Promise.resolve()},t._releaseEffect=function(){var n;return n=t.videoEffect.enableBeauty?t._disableEffect():Promise.resolve(),u.getInstance().release(),t.videoEffect.videoContextInited=!1,t.videoEffect.canvasVideoTrack=null,n},t._enableEffect=function(){return t.videoEffect.videoContextInited||t._initVideoContext(),t.videoEffect.originVideoTrack?t.videoEffect.canvasVideoTrack?(t._showEffectInLocalPlayer(),t._replaceWithCanvasTrack()):t._renderWithWebGL(t.stream).then(function(n){var a=p()(n,2),s=a[1];t.videoEffect.canvasVideoTrack=a[0];var l=u.getInstance();return requestAnimationFrame(function b(){t.videoEffect.enableBeauty&&l.render(s),t.videoEffect.videoContextInited&&requestAnimationFrame(b)}),y.isChrome()&&document.addEventListener("visibilitychange",function(){document,document.hidden?t.videoEffect.stopChromeBackgroundLoop=function(b,c){var r=1/c,f=new AudioContext,L=f.createGain();L.gain.value=0,L.connect(f.destination),function H(){var Y=f.createOscillator();Y.onended=H,Y.connect(L),Y.start(0),Y.stop(f.currentTime+r),t.videoEffect.enableBeauty&&l.render(s),C&&(Y.onended=function(){f.close()})}();var C=!1;return function(){C=!0}}(0,t.videoEffect.fps):t.videoEffect.stopChromeBackgroundLoop&&(t.videoEffect.stopChromeBackgroundLoop(),t.videoEffect.stopChromeBackgroundLoop=null)},!1),t._showEffectInLocalPlayer(),t._replaceWithCanvasTrack()}):(d.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},t._showEffectInLocalPlayer=function(){if(t.player){var n=t.player.div.children[0];if("none"!==n.style.display&&(t.player.div.appendChild(t.videoEffect.canvas),"video"===n.tagName.toLowerCase())){var a=n.getAttribute("style");t.videoEffect.canvas.setAttribute("style",a),"none"!==n.style.display&&(n.style.display="none")}}},t._removeEffectFromLocalPlayer=function(){if(t.player&&t.player.div&&t.videoEffect.enableBeauty&&t.videoEffect.canvas){t.player.div.removeChild(t.videoEffect.canvas);var n=t.player.div.children[0];"video"===n.tagName.toLowerCase()&&(t.videoEffect.canvas.style.display="none",n.style.display="block")}},t._replaceWithCanvasTrack=function(){var n=null;return t.pc&&t.pc.peerConnection&&t.pc.peerConnection&&(n=(t.pc.peerConnection&&t.pc.peerConnection.getSenders()).find(function(a){return a&&a.track&&"video"==a.track.kind})),n&&n.replaceTrack&&t.videoEffect.canvasVideoTrack?n.replaceTrack(t.videoEffect.canvasVideoTrack):Promise.resolve()},t.setBeautyEffectOptions=(n=w()(O.a.mark(function a(i,s){var l,b=arguments;return O.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(Object(h.checkValidBoolean)(i,"enabled"),l=u.getInstance(),t.videoEffect.enableBeauty==i){c.next=14;break}if(l.setEnableBeauty(i),!i){c.next=9;break}return c.next=7,t._enableEffect();case 7:c.next=12;break;case 9:return t._removeEffectFromLocalPlayer(),c.next=12,t._releaseEffect();case 12:t.videoEffect.enableBeauty=i,v.report.reportApiInvoke(t.sid,{callback:null,options:b,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(i){c.next=16;break}return c.abrupt("return");case 16:if(!s){c.next=20;break}Object(h.checkValidObject)(s,"options"),c.next=21;break;case 20:return c.abrupt("return");case 21:if(void 0!==s.smoothnessLevel&&(Object(h.checkValidFloatNumber)(s.smoothnessLevel,"smoothnessLevel",0,1),t.videoEffect.denoiseLevel=10*s.smoothnessLevel,t.videoEffect.denoiseLevel<.1&&(t.videoEffect.denoiseLevel=.1),l.setDenoiseLevel(t.videoEffect.denoiseLevel)),void 0!==s.lighteningLevel&&(Object(h.checkValidFloatNumber)(s.lighteningLevel,"lighteningLevel",0,1),t.videoEffect.lightLevel=s.lighteningLevel/2,t.videoEffect.lightLevel<.01&&(t.videoEffect.lightLevel=.01),l.setLightLevel(t.videoEffect.lightLevel)),void 0!==s.rednessLevel&&(Object(h.checkValidFloatNumber)(s.rednessLevel,"rednessLevel",0,1),t.videoEffect.rednessLevel=s.rednessLevel,t.videoEffect.rednessLevel<.01&&(t.videoEffect.rednessLevel=.01),l.setRednessLevel(t.videoEffect.rednessLevel)),void 0===s.lighteningContrastLevel){c.next=29;break}if(0===s.lighteningContrastLevel||1===s.lighteningContrastLevel||2===s.lighteningContrastLevel){c.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:t.videoEffect.lighteningContrastLevel=parseFloat(s.lighteningContrastLevel),l.setContrastLevel(t.videoEffect.lighteningContrastLevel);case 29:case"end":return c.stop()}},a)})),function(a,i){return n.apply(this,arguments)})},restoreVideoEffect:function(t){return t.videoEffect.enableBeauty?t._enableEffect():Promise.resolve()},disableVideoEffect:function(t){return t._releaseEffect?t._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(t){t.videoEffect.enableBeauty&&t.videoEffect.canvas&&t._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(t){t._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(t){return t.videoEffect.enableBeauty?t._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(t){return!!(t.videoEffect.enableBeauty&&t.videoEffect&&t.videoEffect.videoContextInited)&&(d.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(Z,q){function N(x,O,_,w,o,p,y){try{var v=x[p](y),h=v.value}catch(d){return void _(d)}v.done?O(h):Promise.resolve(h).then(w,o)}Z.exports=function(x){return function(){var O=this,_=arguments;return new Promise(function(w,o){var p=x.apply(O,_);function y(h){N(p,w,o,y,v,"next",h)}function v(h){N(p,w,o,y,v,"throw",h)}y(void 0)})}}},function(Z,q,N){"use strict";var x=N(38),O=Object.prototype.toString;function _(v){return"[object Array]"===O.call(v)}function w(v){return void 0===v}function o(v){return null!==v&&"object"==typeof v}function p(v){return"[object Function]"===O.call(v)}function y(v,h){if(null!=v)if("object"!=typeof v&&(v=[v]),_(v))for(var d=0,m=v.length;d<m;d++)h.call(null,v[d],d,v);else for(var M in v)Object.prototype.hasOwnProperty.call(v,M)&&h.call(null,v[M],M,v)}Z.exports={isArray:_,isArrayBuffer:function(v){return"[object ArrayBuffer]"===O.call(v)},isBuffer:function(v){return null!==v&&!w(v)&&null!==v.constructor&&!w(v.constructor)&&"function"==typeof v.constructor.isBuffer&&v.constructor.isBuffer(v)},isFormData:function(v){return"undefined"!=typeof FormData&&v instanceof FormData},isArrayBufferView:function(v){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(v):v&&v.buffer&&v.buffer instanceof ArrayBuffer},isString:function(v){return"string"==typeof v},isNumber:function(v){return"number"==typeof v},isObject:o,isUndefined:w,isDate:function(v){return"[object Date]"===O.call(v)},isFile:function(v){return"[object File]"===O.call(v)},isBlob:function(v){return"[object Blob]"===O.call(v)},isFunction:p,isStream:function(v){return o(v)&&p(v.pipe)},isURLSearchParams:function(v){return"undefined"!=typeof URLSearchParams&&v instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:y,merge:function v(){var h={};function d(g,E){h[E]="object"==typeof h[E]&&"object"==typeof g?v(h[E],g):g}for(var m=0,M=arguments.length;m<M;m++)y(arguments[m],d);return h},deepMerge:function v(){var h={};function d(g,E){h[E]="object"==typeof h[E]&&"object"==typeof g?v(h[E],g):"object"==typeof g?v({},g):g}for(var m=0,M=arguments.length;m<M;m++)y(arguments[m],d);return h},extend:function(v,h,d){return y(h,function(m,M){v[M]=d&&"function"==typeof m?x(m,d):m}),v},trim:function(v){return v.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(Z,q,N){"use strict";N.d(q,"a",function(){return v});var x=N(7),O=N.n(x),_=N(8),w=N(0),o=N(4);function y(h,d){(null==d||d>h.length)&&(d=h.length);for(var m=0,M=new Array(d);m<d;m++)M[m]=h[m];return M}var v=new function(){var h=Object(_.b)();return h.devicesHistory={},h.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},h.state=h.states.UNINIT,h.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},h.deviceReloadTimer=null,h._init=function(d,m){h.state=h.states.INITING,h.devicesHistory={},h._reloadDevicesInfo(function(){h.state=h.states.INITED,h.dispatchEvent({type:"inited"}),d&&d()},function(M){w.default.warning("Device Detection functionality cannot start properly."),h.state=h.states.UNINIT,m&&m(M)})},h._enumerateDevices=function(d,m){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return w.default.warning("enumerateDevices() not supported."),m&&m("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(M){d&&setTimeout(function(){d(M)},0)}).catch(function(M){m&&m(M)})},h._reloadDevicesInfo=function(d,m){var M=[];h._enumerateDevices(function(g){var E=Date.now();for(var R in g.forEach(function(k){var I=h.devicesHistory[k.deviceId];if((I?I.state:h.deviceStates.INACTIVE)!=h.deviceStates.ACTIVE){var U=I||{initAt:E};U.device=k,U.state=h.deviceStates.ACTIVE,M.push(U),h.devicesHistory[k.deviceId]=U}h.devicesHistory[k.deviceId].lastReloadAt=E}),h.devicesHistory){var T=h.devicesHistory[R];T&&T.state==h.deviceStates.ACTIVE&&T.lastReloadAt!==E&&(T.state=h.deviceStates.INACTIVE,M.push(T)),T.lastReloadAt=E}h.state==h.states.INITED&&M.forEach(function(k){var I=O()({},k);switch(k.device.kind){case"audioinput":I.type="recordingDeviceChanged";break;case"audiooutput":I.type="playoutDeviceChanged";break;case"videoinput":I.type="cameraChanged";break;default:w.default.warning("Unknown device change",I),I.type="unknownDeviceChanged"}h.dispatchEvent(I)}),d&&d()},m)},h.getDeviceById=function(d,m,M){h.getDevices(function(g){for(var E=0;E<g.length;E++){var R=g[E];if(R&&R.deviceId===d)return m&&m(R)}return M&&M()})},h.searchDeviceNameById=function(d){var m=h.devicesHistory[d];return m?m.device.label||m.device.deviceId:null},h.getDevices=function(d,m){h._enumerateDevices(d,function(M){m&&m(M.name+": "+M.message)})},h.getVideoCameraIdByLabel=function(d,m,M){h.getCameras(function(g){var E,R=function p(h){if("undefined"==typeof Symbol||null==h[Symbol.iterator]){if(Array.isArray(h)||(h=function(T,k){if(T){if("string"==typeof T)return y(T,k);var I=Object.prototype.toString.call(T).slice(8,-1);if("Object"===I&&T.constructor&&(I=T.constructor.name),"Map"===I||"Set"===I)return Array.from(I);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return y(T,k)}}(h))){var d=0,m=function(){};return{s:m,n:function(){return d>=h.length?{done:!0}:{done:!1,value:h[d++]}},e:function(T){throw T},f:m}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var M,g,E=!0,R=!1;return{s:function(){M=h[Symbol.iterator]()},n:function(){var T=M.next();return E=T.done,T},e:function(T){R=!0,g=T},f:function(){try{E||null==M.return||M.return()}finally{if(R)throw g}}}}(g);try{for(R.s();!(E=R.n()).done;){var T=E.value;if(T.label===d)return m&&m(T.deviceId)}}catch(k){R.e(k)}finally{R.f()}return M&&M(o.default.NOT_FIND_DEVICE_BY_LABEL)},M)},h.getRecordingDevices=function(d,m){return h._enumerateDevices(function(M){var g=M.filter(function(E){return"audioinput"==E.kind});d&&d(g)},function(M){m&&m(M)})},h.getPlayoutDevices=function(d,m){return h._enumerateDevices(function(M){var g=M.filter(function(E){return"audiooutput"==E.kind});d&&d(g)},function(M){m&&m(M)})},h.getCameras=function(d,m){return h._enumerateDevices(function(M){var g=M.filter(function(E){return"videoinput"==E.kind});d&&d(g)},function(M){m&&m(M)})},h._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){h._reloadDevicesInfo()}),h.deviceReloadTimer=setInterval(h._reloadDevicesInfo,5e3)}),h}},function(Z,q,N){"use strict";N.r(q),N.d(q,"_getReconnectCSTimer",function(){return P}),N.d(q,"_setClientConnectionStateRecord",function(){return S}),N.d(q,"getGatewayList",function(){return u}),N.d(q,"getUserAccount",function(){return n});var x=N(11),O=N.n(x),_=N(12),w=N.n(_),o=N(17),p=N.n(o),y=N(2),v=(N(5),N(0)),h=N(14),d=N(1),m=N(4),M=function(a,i){var s=!1,l=0,b=Object(y.getParameter)("PROXY_CS"),c=Object(y.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),r=0,f={command:"convergeAllocateEdge",sid:a.sid,appId:a.appId,token:a.token,uid:a.uid,cname:a.cname,ts:Math.floor(Date.now()/1e3),version:y.VERSION,seq:0,requestId:1},L=function(H){var Y=(new Date).getTime();g("https://"+H+"/api/v1",f,function(ee,ne){if(ee)return v.default.debug("["+a.clientId+"] Request proxy server failed: ",ee),l++,d.report.requestProxyAppCenter(a.sid,{lts:Y,succ:!1,APAddr:H,workerManagerList:null,ec:JSON.stringify(ee),response:JSON.stringify({err:ee,res:ne})}),l>=b.length&&i&&i("Get proxy server failed: request all failed"),void(!(l%c)&&l<b.length&&(r++,C()));if(!s)if((ne=JSON.parse(ne)).json_body){var fe=JSON.parse(ne.json_body);if(v.default.debug("["+a.clientId+"] App return:",fe.servers),200!==fe.code)l++,v.default.debug("["+a.clientId+"] "+(ee="Get proxy server failed: response code ["+fe.code+"], reason [ "+fe.reason+"]")),d.report.requestProxyAppCenter(a.sid,{lts:Y,succ:!1,APAddr:H,workerManagerList:null,ec:ee,response:JSON.stringify({err:ee,res:ne})}),l>=b.length&&i&&i(ee),!(l%c)&&l<b.length&&(r++,C());else{s=!0;var te=R(fe.servers);d.report.requestProxyAppCenter(a.sid,{lts:Y,succ:!0,APAddr:H,workerManagerList:JSON.stringify(te),ec:null,response:JSON.stringify({res:ne})}),i&&i(null,te)}}else v.default.debug("["+a.clientId+"] Get proxy server failed: no json_body"),d.report.requestProxyAppCenter(a.sid,{lts:Y,succ:!1,APAddr:H,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:ne})})})},C=function(){for(var H=r*c,Y=H;Y<Math.min(b.length,H+c);Y++)L(b[Y])};C()},g=function(a,i,s){var l={service_name:"webrtc_proxy",json_body:JSON.stringify(i)};Object(h.post)(a,l,function(b){s&&s(null,b)},function(b){s&&s(b)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},R=function(a){if(!(a&&[]instanceof Array))return[];var i=[];return a.forEach(function(s){var l;s.address&&s.tcp?(s.address.match(/^[\.\:\d]+$/)?l="".concat(s.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(v.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(s.address,". Used As Host instead")),l="".concat(s.address,":").concat(s.tcp)),i.push(l)):v.default.error("["+joinInfo.clientId+"] Invalid address format ",s)}),i},T=N(21),k=function(a,i,s,l){var b=Object(y.getParameter)("WEBCS_DOMAIN").concat(Object(y.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),c=Object(y.getParameter)("PROXY_SERVER_TYPE3");b=b.map(function(ne,fe){return"".concat(c[(fe+1)%c.length],"/ap/?url=").concat(ne)});var r,f=0,L=!0,C=Object(y.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),H=0,Y=function(ne){var fe,te,oe,le,de,A,$,j,ue,Pe;fe=a,te=ne,oe=i,le=function(fe,te){fe?(f++,v.default.error("[".concat(i.clientId,"] request ").concat(ne," failed: ").concat(fe)),fe&&-1===m.JOIN_PROXY_RETRY_LIST.indexOf(fe)&&(r=fe),f===b.length&&(r||(r="RETRYABLE_ERROR"),s(r)),!(f%C)&&f<b.length&&(H++,ee())):L&&(/sd-rtn/.test(te.gatewayServers.gateway_addr[0])?Object(y.setParameter)("NGINX",c[0]):Object(y.setParameter)("NGINX",c[1]),L=!1,s(null,te))},de=l,A=Date.now(),$=function(pe,me){try{d.report.joinChooseServer2(oe.sid,{lts:A,succ:!pe,csAddr:te,serverList:me&&me.gateway_addr,cid:me&&me.cid+"",uid:me&&me.uid+"",ec:pe,chooseServerIp:me&&me.detail&&me.detail[502]})}catch(Be){}},j=function(pe,me){var Be=Date.now();try{d.report.joinWebProxyAP({lts:Be,sid:oe.sid,cname:oe.cname,cid:oe.cid,uid:oe.uid,sucess:pe?-1:1,elapse:Be-A,eventType:fe,apServerAddr:te,turnServerAddrList:JSON.stringify(me),errorCode:pe||"0"})}catch(re){}},ue=Object(y.getParameter)("AREA_SETTING").reduce(function(pe,me,Be){var re=Object(T.getAreaCodeByArea)(me);return re?0===Be?re:"".concat(pe,",").concat(re):pe},""),Pe={appid:oe.token,client_ts:Date.now(),opid:133,sid:oe.sid,request_bodies:[{uri:22,buffer:{cname:oe.cname,detail:{11:ue,6:oe.stringUid},key:oe.token,service_ids:[11,de?20:18],uid:oe.uid||0}}]},te="https://".concat(te,"/api/v2/transpond/webrtc?v=2"),Object(h.postFormData)(te,Pe,function(pe){var me=function(G){return new RegExp(/10102\d{2}$/).test(G)?"NO_SERVICE_AVAILABLE":m.APErrorCode[G]||G};try{var Be,re,D=JSON.parse(pe);if(30===(D=D.response_body)[0].uri&&0!==D[0].buffer.code){var se=me(D[0].buffer.code);return j(se,D),le(se)}if(4096===D[0].buffer.flag?(re=D[0].buffer,Be=D[1].buffer):(re=D[1].buffer,Be=D[0].buffer),0!==Be.code)return se=me(Be.code),v.default.error("[".concat(oe.clientId,"] requestProxyServer failed: ").concat(se)),j(se,Be),le(se);if(!Be.edges_services||!Be.edges_services instanceof Array)return j("UNEXPECTED_ERROR",Be),le("UNEXPECTED_ERROR");var ie=Object(y.getParameter)("GATEWAY_DOMAINS"),ae=0;if(te.indexOf(ie[1])>-1&&(ae=1),0===Be.edges_services.length)return j("EMPTY_PROXY_LIST",Be),le("EMPTY_PROXY_LIST");var he=Be.edges_services.map(function(G){if(G.ip)return G.ip=de?"".concat(G.ip.replace(/[^\d]/g,"-"),".").concat(ie[ae++%ie.length]):"".concat(G.ip),G});if(j(null,he),0!==re.code)return se=me(re.code),v.default.error("[".concat(oe.clientId,"] requestChooseServer failed: ").concat(se)),$(se),le(se);var F=[];if(ie=Object(y.getParameter)("GATEWAY_DOMAINS"),ae=0,te.indexOf(ie[1])>-1&&(ae=1),re.edges_services.forEach(function(G){var X;if(G.ip&&G.port){if(!G.ip.match(/^[\.\:\d]+$/))return v.default.info("["+oe.clientId+"] "+"Cannot recognized as IP address ".concat(G.ip,". Used As Host instead")),void $("UNEXPECTED_IP");X="".concat(G.ip.replace(/[^\d]/g,"-"),".").concat(ie[ae++%ie.length]);var Q=Object(y.getParameter)("PROXY_SERVER_TYPE3");X=/sd-rtn/.test(te)?"".concat(Q[0],"/ws/?h=").concat(X,"&p=").concat(G.port):"".concat(Q[1],"/ws/?h=").concat(X,"&p=").concat(G.port),F.push(X)}else v.default.error("["+oe.clientId+"] Invalid address format ",G)}),!F.length)return v.default.error("["+oe.clientId+"] Empty Address response",D),$("EMPTY_ADDRESS_RESPONSE"),le("EMPTY_ADDRESS_RESPONSE");re.ticket=re.cert;var B={gateway_addr:F,uid:re.uid,cid:re.cid,vid:re.detail&&re.detail[8],res:re,detail:D.detail};$(null,B),le(null,{gatewayServers:B,turnServers:he})}catch(G){return v.default.error("[".concat(oe.clientId,"] requestProxyServer failed with unexpected body "),G),j("UNEXPECTED_ERROR"),le("UNEXPECTED_ERROR")}},function(pe,me){"timeout"===pe.type?(j("REQUEST_PROXY_SERVER_TIME_OUT"),le("REQUEST_PROXY_SERVER_TIME_OUT")):(j("REQUEST_PROXY_SERVER_FAILED"),le("REQUEST_PROXY_SERVER_FAILED"))})},ee=function(){for(var ne=H*C,fe=ne;fe<Math.min(b.length,ne+C);fe++)Y(b[fe])};ee()},I=N(13),U=N(29),V=N.n(U),W=N(30),J={},K={},P=function(a){return J[a]},S=function(a,i){K[a]=i},z=function(a,i,s,l,b,c){var r=(new Date).getTime(),f=i,L="";i.multiIP&&i.multiIP.gateway_ip&&(L={vocs_ip:[i.multiIP.uni_lbs_ip],vos_ip:[i.multiIP.gateway_ip]});var C=Object(y.getParameter)("AREA_SETTING").reduce(function(Y,ee,ne){var fe=Object(T.getAreaCodeByArea)(ee);return fe?0===ne?fe:"".concat(Y,",").concat(fe):Y},""),H={appid:i.token,opid:133,client_ts:+new Date,sid:i.sid,request_bodies:[{uri:22,buffer:{cname:i.cname,detail:{5:L?JSON.stringify(L):void 0,6:i.stringUid,11:C},key:i.token,service_ids:[11],uid:i.uid||0}}]};Object(h.postFormData)(a,H,function(Y){try{var ee=JSON.parse(Y),ne=(ee=ee.response_body[0].buffer).code}catch($){var fe="requestChooseServer failed with unexpected body "+Y;return v.default.error("["+f.clientId+"]",fe),l(fe,void 0,void 0,c)}if(ne)return de=new RegExp(/10102\d{2}$/).test(ne)?"NO_SERVICE_AVAILABLE":m.APErrorCode[ee.code]||ne,d.report.joinChooseServer(i.sid,{lts:r,succ:!1,csAddr:a,serverList:null,ec:de,chooseServerIp:ee&&ee.detail&&ee.detail[502]}),l("Get server node failed ["+de+"]",a,de,c);var te=[],oe=Object(y.getParameter)("GATEWAY_DOMAINS"),le=0;if(a.indexOf(oe[1])>-1&&(le=1),ee.edges_services.forEach(function($){var j;$.ip&&$.port?($.ip.match(/^[\.\:\d]+$/)?j="".concat($.ip.replace(/[^\d]/g,"-"),".").concat(oe[le++%oe.length],":").concat($.port):(v.default.info("["+f.clientId+"] "+"Cannot recognized as IP address ".concat($.ip,". Used As Host instead")),j="".concat($.ip,":").concat($.port)),te.push(j)):v.default.error("["+f.clientId+"] Invalid address format ",$)}),!te.length){v.default.error("["+f.clientId+"] Empty Address response",ee);var de="EMPTY_ADDRESS_RESPONSE";return d.report.joinChooseServer(i.sid,{lts:r,succ:!1,csAddr:a,serverList:null,ec:de,chooseServerIp:ee&&ee.detail&&ee.detail[502]}),l("Get server node failed ["+de+"]",a,de,c)}return ee.ticket=ee.cert,s({gateway_addr:te,uid:ee.uid,cid:ee.cid,vid:ee.detail&&ee.detail[8],res:ee,uni_lbs_ip:ee.detail},a)},function(Y,ee){"timeout"===Y.type?(d.report.joinChooseServer(i.sid,{lts:r,succ:!1,csAddr:ee,serverList:null,ec:"timeout"}),l("Connect choose server timeout",ee,void 0,c)):(d.report.joinChooseServer(i.sid,{lts:r,succ:!1,csAddr:ee,serverList:null,ec:Y.httpErrorCode||"server_wrong"}),l("Connect choose server error",ee,void 0,c))})},u=function(a,i,s){var l=!1,b=null,c=1,r=1,f=a.clientId,L=function H(Y,ee){if(!l){var ne=[];!function(fe,te,oe){var le,de=(new Date).getTime(),A=!1,$=0,j=0,ue=Object(y.getParameter)("WEBCS_DOMAIN"),Pe=ue.length,pe=Object(y.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),me=pe.length,Be=Object(y.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),re=0,D=0,se=function(B,G){var X;try{X=B.res.detail[8]}catch(ge){v.default.debug("["+fe.clientId+"] get vid failed",ge)}if(A)d.report.joinChooseServer(fe.sid,{lts:de,succ:!0,csAddr:G,serverList:B.gateway_addr,cid:B.cid+"",uid:B.uid+"",ec:null,vid:X,chooseServerIp:B.res&&B.res.detail&&B.res.detail[502]},!1);else{if(clearTimeout(F),A=!0,fe.proxyServer)for(var Q=B.gateway_addr,ve=0;ve<Q.length;ve++){var ce=Q[ve].split(":");B.gateway_addr[ve]=fe.proxyServer+"/ws/?h="+ce[0]+"&p="+ce[1]}(function(fe){l=!0,ne=fe,clearTimeout(b),K[f]!==I.a.DISCONNECTED&&K[f]!==I.a.DISCONNECTING?ee&&ee(ne,null):v.default.debug("[".concat(a.clientId,"] Request gateway list success when connection state is ").concat(K[f]))})(B),d.report.joinChooseServer(fe.sid,{lts:de,succ:!0,csAddr:G,serverList:B.gateway_addr,cid:B.cid+"",uid:B.uid+"",ec:null,vid:X,chooseServerIp:B.res&&B.res.detail&&B.res.detail[502]},!0)}},ie=function(B,G,X,Q){"domain"===Q&&$++,"backup"===Q&&j++,v.default.error("["+fe.clientId+"]",B,G,X),X&&-1===m.JOIN_CS_RETRY_LIST.indexOf(X)&&(le=X),$===Pe&&j===me&&function(fe){if(fe)return v.default.info("["+a.clientId+"] Join failed: "+fe),void(s&&s(fe));if(K[f]===I.a.DISCONNECTED||K[f]===I.a.DISCONNECTING)return v.default.debug("[".concat(a.clientId,"] Request gateway list falied when connection state is ").concat(K[f])),void(s&&s("OPERATION_ABORT"));v.default.debug("["+a.clientId+"] Request gateway list will be restart in "+c+"s"),b=setTimeout(function(){H(Y,ee)},1e3*c),J[f]=b;var te=Object(y.getParameter)("AP_BACKOFF_MAX_TIME");c=c>=te?te:2*c}(le),"domain"===Q&&!($%Be)&&$<Pe&&(re++,ae()),"backup"===Q&&!(j%Be)&&j<me&&(D++,he())},ae=function B(){for(var G=re*Be,X=G;X<Math.min(Pe,G+Be);++X){var Q;if("string"==typeof ue[X]){var ve=ue[X];Q=fe.proxyServer?"https://".concat(fe.proxyServer,"/ap/?url=").concat(ve+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ve,"/api/v2/transpond/webrtc?v=2");var ce=Object(T.getAreaCodeByWebCS)(ve);v.default.debug("["+fe.clientId+"] "+"Connect to choose_server: ".concat(Q,", ").concat(ce)),z(Q,fe,se,ie,0,"domain")}else $++,v.default.error("["+fe.clientId+"] Invalid Host",ue[X]),X===G+Be-1&&X<Pe-1-1&&(re++,B())}};ae();var he=function B(){if(!A)for(var G=D*Be,X=G;X<Math.min(me,G+Be);X++){var Q;if("string"==typeof pe[X]){var ve=pe[X];Q=fe.proxyServer?"https://".concat(fe.proxyServer,"/ap/?url=").concat(ve+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ve,"/api/v2/transpond/webrtc?v=2");var ce=Object(T.getAreaCodeByWebCS)(ve);v.default.debug("["+fe.clientId+"] "+"Connect to backup_choose_server: ".concat(Q,", ").concat(ce)),z(Q,fe,se,ie,0,"backup")}else j++,v.default.error("["+fe.clientId+"] Invalid Host",pe[X]),X===G+Be-1&&X<pe-1-1&&(re++,B())}},F=setTimeout(he,1e3)}(a)}},C=function H(){var Y,ee;ee=function(Y,ee){if(Y){v.default.debug("["+a.clientId+"]",Y),v.default.debug("["+a.clientId+"] Request proxy will be restart in "+r+"s"),b=setTimeout(function(){H()},1e3*r),J[f]=b;var ne=Object(y.getParameter)("AP_BACKOFF_MAX_TIME");r=r>=ne?ne:2*r}else{clearTimeout(b);var fe=ee.address;a.proxyServer=fe;var te={mode:"manual",url:ee.address,tcpport:ee.serverResponse.tcpport||"3433",udpport:ee.serverResponse.udpport||"3478",username:ee.serverResponse.username||"test",credential:ee.serverResponse.password||Object(y.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};te.tcpport+="",te.udpport+="",a.turnServers=[],a.turnServers.push(te),d.report.setProxyServer(fe),v.default.setProxyServer(fe),L(fe,i)}},M(Y=a,function(ne,fe){if(ne)return ee&&ee(ne);v.default.debug("["+Y.clientId+"] getProxyServerList: ",fe),function(a,i,s){var l=!1,b=0,c={command:"request",gatewayType:"http",appId:a.appId,cname:a.cname,uid:a.uid+"",sdkVersion:"2.3.1",sid:a.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:a.appId,cname:a.cname,uid:a.uid+"",sid:a.sid}};i.map(function(r){var L,C,H,f=(new Date).getTime();L="https://"+r+":4000/v2/machine",C=c,H=function(L,C){if(L)return v.default.debug("["+a.clientId+"] Request worker manager failed: ",L),b++,d.report.requestProxyWorkerManager(a.sid,{lts:f,succ:!1,workerManagerAddr:r,ec:JSON.stringify(L),response:JSON.stringify({res:C})}),void(b>=i.length&&s&&s("requeet worker manager server failed: request failed"));if(!l){if(!(C=JSON.parse(C)).serverResponse)return s&&s("requeet worker manager server failed: serverResponse is undefined");l=!0,d.report.requestProxyWorkerManager(a.sid,{lts:f,succ:!0,workerManagerAddr:r,ec:JSON.stringify(L),response:JSON.stringify({res:C})}),s&&s(null,{address:r,serverResponse:C.serverResponse})}},Object(h.post)(L,C,function(Y){H&&H(null,Y)},function(Y){H&&H(Y)})})}(Y,fe,ee)})};a.useProxyServer?1==a.proxyServerType?C():2==a.proxyServerType?function H(){var Y,ee;ee=function(Y,ee){if(Y)return v.default.debug("["+a.clientId+"]",Y),v.default.debug("["+a.clientId+"] Request proxy will be restart in "+r+"s"),b=setTimeout(function(){H()},1e3*r),J[f]=b,void(r=r>=3600?3600:2*r);clearTimeout(b);var ne=Object(y.getParameter)("PROXY_SERVER_TYPE2");a.proxyServer=ne;var fe={mode:"manual",url:ee.address,tcpport:ee.serverResponse.tcpport||"3433",udpport:ee.serverResponse.udpport||"3478",username:ee.serverResponse.username||"test",credential:ee.serverResponse.password||"111111",forceturn:!0};fe.tcpport+="",fe.udpport+="",a.turnServers=[],a.turnServers.push(fe),d.report.setProxyServer(ne),v.default.setProxyServer(ne),L(ne,i)},M(Y=a,function(ne,fe){return ne?ee&&ee(ne):(v.default.debug("["+Y.clientId+"] getProxyServerList: ",fe),ee&&ee(null,{address:fe[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))})}():3==a.proxyServerType?function H(){k("proxy3",a,function(Y,ee){if(Y)return"RETRYABLE_ERROR"!==Y?s&&s(Y):(v.default.debug("["+a.clientId+"]",Y),v.default.debug("["+a.clientId+"] Request proxy will be restart in "+r+"s"),b=setTimeout(function(){H()},1e3*r),J[f]=b,void(r=r>=3600?3600:2*r));var ne=ee.gatewayServers,fe=ee.turnServers;clearTimeout(b);var te=Object(y.getParameter)("NGINX");a.proxyServer=te,a.turnServers=[];var oe=Object(W.randomString)();fe.map(function(le){var de={mode:"manual",url:le.ip,tcpport:"",udpport:le.port||"3478",username:le.username||oe,credential:le.password||V()(oe).toString(),forceturn:!0};de.tcpport+="",de.udpport+="",a.turnServers.push(de)}),d.report.setProxyServer(te),v.default.setProxyServer(te),i(ne)})}():4==a.proxyServerType?function H(){k("proxy4",a,function(Y,ee){if(Y)return"RETRYABLE_ERROR"!==Y?s&&s(Y):(v.default.debug("["+a.clientId+"]",Y),v.default.debug("["+a.clientId+"] Request proxy will be restart in "+r+"s"),b=setTimeout(function(){H()},1e3*r),J[f]=b,void(r=r>=3600?3600:2*r));var ne=ee.gatewayServers,fe=ee.turnServers;clearTimeout(b);var te=Object(y.getParameter)("NGINX");a.proxyServer=te,a.turnServers=[];var oe=Object(W.randomString)();fe.map(function(le){var de={mode:"manual",url:le.ip,tcpport:le.port||"443",udpport:"",username:le.username||oe,credential:le.password||V()(oe).toString(),forceturn:!1};de.tcpport+="",de.udpport+="",a.turnServers.push(de)}),d.report.setProxyServer(te),v.default.setProxyServer(te),i(ne)})}():5==a.proxyServerType?function H(){k("proxy5",a,function(Y,ee){if(Y)return"RETRYABLE_ERROR"!==Y?s&&s(Y):(v.default.debug("["+a.clientId+"]",Y),v.default.debug("["+a.clientId+"] Request proxy will be restart in "+r+"s"),b=setTimeout(function(){H()},1e3*r),J[f]=b,void(r=r>=3600?3600:2*r));var ne=ee.gatewayServers,fe=ee.turnServers;clearTimeout(b);var te=Object(y.getParameter)("NGINX");a.proxyServer=te,a.turnServers=[];var oe=Object(W.randomString)();fe.map(function(le){var de={mode:"manual",url:le.ip,tcpport:le.port||"443",udpport:"",username:le.username||oe,credential:le.password||V()(oe).toString(),forceturn:!1,useTurns:!0};de.tcpport+="",de.udpport+="",a.turnServers.push(de)}),d.report.setProxyServer(te),v.default.setProxyServer(te),i(ne)},!0)}():C():L(null,i)},t=function(a,i,s,l,b){var c=Date.now(),r={sid:i.sid,opid:10,appid:i.appId,string_uid:l=l||i.stringUid};return new Promise(function(f,L){Object(h.post)(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),r,function(C){try{var H=JSON.parse(C),Y=H.code}catch(oe){var ee="requestUserAccount failed with unexpected body "+C;return v.default.error("["+i.clientId+"]",ee),L({retryable:!0,info:ee,url:a,error:"UNEXPECTED_ERROR"}),s&&s.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void d.report.reqUserAccount(r.sid,{lts:c,success:!1,serverAddress:a,stringUid:l,uid:null,extend:C,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(Y){var ne=!1;return"INTERNAL_SERVER_ERROR"===(te=m.StringUidErrorCode[H.code%1e4]||"REQ_ACCOUNT_ERR_".concat(Y))&&(ne=!0),s&&s.dispatchEvent({type:"error",reason:te}),d.report.reqUserAccount(r.sid,{lts:c,success:!1,serverAddress:a,stringUid:l,uid:null,errorCode:te,extend:r}),L({retryable:ne,info:ee="Get String Uid Failed ["+te+"]",url:a,error:te})}var fe=H.uid;if(!(fe>0&&fe<Math.pow(2,32))){v.default.error("["+i.clientId+"] "+"Invalid Uint Uid ".concat(l," => ").concat(fe),H);var te="INVALID_UINT_UID_".concat(fe);return s&&s.dispatchEvent({type:"error",reason:te}),d.report.reqUserAccount(r.sid,{lts:c,success:!1,serverAddress:a,stringUid:l,uid:null,errorCode:te,extend:r}),L({retryable:!0,error:te,info:"Get String Uid failed ["+te+"]",url:a})}f({uid:fe,url:a}),d.report.reqUserAccount(r.sid,{lts:c,success:!0,serverAddress:a,stringUid:l,uid:fe,errorCode:null,extend:r})},function(C,H){if("timeout"===C.type){var Y="USER_ACCOUNT_TIMEOUT";s&&s.dispatchEvent({type:"error",reason:Y}),d.report.reqUserAccount(r.sid,{lts:c,success:!1,serverAddress:H,stringUid:l,uid:null,errorCode:Y,extend:r}),L({retryable:!0,info:Y,url:H,error:Y})}else{var ee="USER_ACCOUNT_SERVER_WRONG_".concat(C.type);s&&s.dispatchEvent({type:"error",reason:ee}),d.report.reqUserAccount(r.sid,{lts:c,success:!1,serverAddress:H,stringUid:l,uid:null,errorCode:ee,extend:r}),L({retryable:!0,info:ee,url:H,error:ee})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},n=function(a,i,s){Date.now();var l,H,b=Object(y.getParameter)("ACCOUNT_REGISTER"),c=!1,r=Object(y.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),f=null,L=null,C=new Promise((H=p()(w.a.mark(function Y(ee,ne){var fe,te,oe;return w.a.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:f=ee,L=ne,l=0;case 3:if(!(l<Object(y.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){le.next=33;break}if(!c){le.next=6;break}return le.abrupt("return");case 6:return fe=b[l%b.length],te=a.proxyServer?"https://".concat(a.proxyServer,"/ap/?url=").concat(fe+"/api/v1"):"https://".concat(fe,"/api/v1"),le.prev=8,le.delegateYield(w.a.mark(function de(){var A;return w.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=3,t(te,a,i,s);case 3:if(A=$.sent,!c){$.next=6;break}return $.abrupt("return",{v:void 0});case 6:c=!0,setTimeout(function(){v.default.debug("Get UserAccount Successfully",A),f(A)},0);case 8:case"end":return $.stop()}},de)})(),"t0",10);case 10:if(oe=le.t0,"object"!==O()(oe)){le.next=13;break}return le.abrupt("return",oe.v);case 13:le.next=30;break;case 15:if(le.prev=15,le.t1=le.catch(8),!c){le.next=19;break}return le.abrupt("return");case 19:if(!le.t1.retryable){le.next=27;break}return(r=Math.ceil(r*Object(y.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(y.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(r=Object(y.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),v.default.error("".concat(le.t1.info," ").concat(le.t1.url," Will Fetch User Account in ").concat(r/1e3," seconds")),le.next=25,new Promise(function(de){setTimeout(de,r)});case 25:le.next=30;break;case 27:v.default.error("Get UserAccount Error: ".concat(le.t1.info," ").concat(le.t1.url),le.t1.error),c=!0,L(le.t1.error);case 30:l++,le.next=3;break;case 33:case"end":return le.stop()}},Y,null,[[8,15]])})),function(Y,ee){return H.apply(this,arguments)}));return C.cancel=function(){c||(c=!0,L({info:"Request Cancelled",retryable:!1}))},C.isFinished=function(){return c},C}},function(Z,q,N){"use strict";var x=this&&this.__spreadArrays||function(){for(var m=0,M=0,g=arguments.length;M<g;M++)m+=arguments[M].length;var E=Array(m),R=0;for(M=0;M<g;M++)for(var T=arguments[M],k=0,I=T.length;k<I;k++,R++)E[R]=T[k];return E},O=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(q,"__esModule",{value:!0});var _,w,m,o=O(N(0));(m=_||(_={})).CHINA="CHINA",m.ASIA="ASIA",m.NORTH_AMERICA="NORTH_AMERICA",m.EUROPE="EUROPE",m.JAPAN="JAPAN",m.INDIA="INDIA",m.OCEANIA="OCEANIA",m.SOUTH_AMERICA="SOUTH_AMERICA",m.AFRICA="AFRICA",m.OVERSEA="OVERSEA",m.GLOBAL="GLOBAL",q.AREAS=_,function(m){m.CHINA="CN",m.ASIA="AS",m.NORTH_AMERICA="NA",m.EUROPE="EU",m.JAPAN="JP",m.INDIA="IN",m.OCEANIA="OC",m.SOUTH_AMERICA="SA",m.AFRICA="AF",m.OVERSEA="OVERSEA",m.GLOBAL="GLOBAL"}(w||(w={}));var p={ASIA:{CODE:w.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:w.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:w.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:w.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:w.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:w.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:w.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:w.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:w.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:w.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};q.AREA_DOMAIN_MAP=p;var y={GLOBAL:{ASIA:[_.CHINA,_.JAPAN,_.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},v=Object.keys(y[_.GLOBAL]),h=[_.CHINA,_.NORTH_AMERICA,_.EUROPE,_.ASIA,_.JAPAN,_.INDIA,_.OCEANIA,_.SOUTH_AMERICA,_.AFRICA];q.getAreaCodeByConfig=function(m){var M=m.areaCode,g=m.excludedArea;return g?function(m,M){var W,E=[];if("string"==typeof m&&(m=[m]),M&&!m.includes(_.GLOBAL)&&(E=m),M||(E=m),M&&m.includes(_.GLOBAL)){var R=[_.GLOBAL,_.OVERSEA],T=Object.keys(p);if(M===_.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(M===_.CHINA)E=[_.OVERSEA];else if(v.includes(M)){var k=(void 0===(W=M)&&(W=""),y[_.GLOBAL][W]||[]),I=x(R,[M],k);E=T.filter(function(W){return!I.includes(W)})}else if(function(W){var J=!1;return v.forEach(function(K){y.GLOBAL[K].includes(W)&&(J=!0)}),J}(M)){var U=function(W){void 0===W&&(W="");var J="";return v.forEach(function(K){y.GLOBAL[K].includes(W)&&(J=K)}),J}(M),V=x(R,[U,M]);E=T.filter(function(W){return!V.includes(W)})}else E=m;E=function(W){var J=[];return h.forEach(function(K){W.includes(K)&&J.push(K)}),J.concat(W.filter(function(K){return!h.includes(K)}))}(E)}return console.log("getAreaCodeAfterCalculation result",E),E}(M,g):M},p.CHINA={CODE:w.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},q.getAreaCodeByWebCS=function(m){for(var M=Object.keys(p),g=0;g<M.length;g++){var R=p[M[g]];if(R.WEBCS_DOMAIN.includes(m)||R.WEBCS_DOMAIN_BACKUP_LIST.includes(m))return R.CODE===w.OVERSEA?w.ASIA+","+w.EUROPE+","+w.AFRICA+","+w.NORTH_AMERICA+","+w.SOUTH_AMERICA+","+w.OCEANIA:R.CODE}},q.getAreaCodeByArea=function(m){return m===_.OVERSEA?w.ASIA+","+w.EUROPE+","+w.AFRICA+","+w.NORTH_AMERICA+","+w.SOUTH_AMERICA+","+w.OCEANIA:w[m]},q.getAreaDomainConfig=function(m){var M={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return m.map(function(g){var E=p[g];if(E){var R=Object.keys(E);R?R.map(function(T){"CODE"!==T&&(M[T]=M[T].concat(E[T]))}):o.default.info(g+" is not exist")}else o.default.info(g+" is not exist")}),M}},function(Z,q,N){"use strict";N.d(q,"a",function(){return S}),N.d(q,"b",function(){return z});var x=N(7),O=N.n(x),_=N(5),w=N(8),p=N(0),y=N(15),v=N(4),h=N(2),d=N(1),m=0,M=function(u){var t=function(u){var t=Object(w.b)({});return t.url=".",t}();t.id=u.id,t.playerId=m++,t.destroyed=!1,t.fit=u.options&&u.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=u.url,t.stream=u.stream.stream,t.peerVideoReady=!1,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=u.elementID,t.setAudioOutput=function(te,oe,le){var de=t.video||t.audio;return de?de.setSinkId?void de.setSinkId(te).then(function(){return p.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(te," SUCCESS")),de==t.video&&t.audio?t.audio.setSinkId(te):Promise.resolve()}).then(function(){return p.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(te," SUCCESS")),oe&&oe()}).catch(function(A){return p.default.error("["+t.id+"] VideoPlayer.setAudioOutput",A),le&&le(A)}):(p.default.error("["+t.id+"] ",v.default.WEB_API_NOT_SUPPORTED),le&&le(v.default.WEB_API_NOT_SUPPORTED)):(p.default.error("["+t.id+"] ",v.default.PLAYER_NOT_FOUND),le&&le(v.default.PLAYER_NOT_FOUND))},t.destroy=function(){p.default.debug("[".concat(t.id,"] destroy ").concat(u.stream.local?"local":"remote"," Player ").concat(t.id)),Object(y.setSrcObject)(t.video,null),Object(y.setSrcObject)(t.audio,null),t.video.load(),t.audio.load(),t.video.pause(),t.video.remove(),t.audio.remove(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.div.remove()&&t.parentNode.removeChild(t.div),["video","audio"].forEach(function(te){var oe=i[te];clearTimeout(oe.playDeferTimeout),oe.formerMediaState=null;var le={playerId:t.playerId,stateId:oe.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};i[te]=le;var de={type:"player-status-change",playerId:t.playerId,mediaType:te,status:le.status,reason:le.reason,isErrorState:!1,streamId:t.id};p.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),de),u.stream.dispatchEvent(de),d.report.reportApiInvoke(u.stream.sid,{name:"Stream.playerStatusChange",options:de,tag:"tracer"})()})},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),t.div.setAttribute("style",u.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),t.video.setAttribute("style",u.stream.local&&!u.stream.screen?u.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):u.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):u.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!u.stream.local||!(!_.isSafari()&&"iOS"!==_.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},a=O()({},n,u.options);!0!==a.muted||a.volume||(a.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,a.playsinline&&t.video.setAttribute("playsinline",""),a.controls&&t.video.setAttribute("controls",""),a.contains&&(t.video.controls=!0),Number.isFinite(a.volume)&&(t.video.volume=a.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===a.muted&&t.audio.setAttribute("muted",""),!0===a.muted&&(t.audio.muted=!0),a.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(a.volume)&&(t.audio.volume=a.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var i={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(te){for(var oe=te,le=0;le<Object(h.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&oe;le++)oe=oe.parentNode;return!!oe};var s=function(te){return t.mediaElemExists(te)?te.paused?"paused":"play":"aborted"},l=function(te,oe,le){var de=s(te),A=!0;return"paused"===de?("audio"===oe&&!0===le.muted&&(A=!1),le.autoplay||(A=!1)):"play"===de?"video"===oe?A=!1:!0===le.muted?te.muted&&(A=!1):te.muted||(A=!1):"aborted"===de&&(A=!1),A},b=function(te){var oe,le=this;if(le===t.video?oe="video":le===t.audio&&(oe="audio"),oe){if(te.type||p.default.error("[".concat(t.id,"] Unexpected evt"),te),"video"===oe&&le.muted&&le.paused)return p.default.debug("[".concat(t.id,"] auto resume video element")),void le.play();var de=s(le);clearTimeout(i[oe].playDeferTimeout),i[oe].playDeferTimeout=setTimeout(function(){i[oe].playDeferTimeout=null;var A=i[oe],$=s(le);if(de===$){var j={playerId:t.playerId,stateId:A.stateId+1,playDeferTimeout:null,error:l(le,oe,a),status:s(le),reason:te.type,updatedAt:Date.now()};if(A.status!==j.status){i[oe]=j;var ue={type:"player-status-change",playerId:t.playerId,mediaType:oe,status:j.status,reason:j.reason,isErrorState:j.error,streamId:t.id};p.default.debug("[".concat(t.id,"] Media Player Status Change"),ue),u.stream.dispatchEvent(ue),d.report.reportApiInvoke(u.stream.sid,{name:"Stream.playerStatusChange",options:ue,tag:"tracer"})()}}else p.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(oe," Status ").concat(de,"=>").concat($))},Object(h.getParameter)("PLAYER_STATE_DEFER"))}else p.default.error("[".concat(t.id,"] Unknown media element"),le)};t.video.addEventListener("playing",function(te){!function oe(){t.video.videoWidth*t.video.videoHeight>4?p.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(oe,50)}()});var c=0,r=0,f=0;t.freezeCheckInterval=setInterval(function(){Date.now()-t.lastTimeupdateTime>500&&t.peerVideoReady?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1},500),t.video.addEventListener("playing",b),t.video.addEventListener("canplay",b),t.video.addEventListener("abort",b),t.video.addEventListener("onerror",b),t.video.addEventListener("suspend",b),t.video.addEventListener("stalled",b),t.video.addEventListener("pause",b),t.audio.addEventListener("playing",b),t.audio.addEventListener("canplay",b),t.audio.addEventListener("abort",b),t.audio.addEventListener("onerror",b),t.audio.addEventListener("suspend",b),t.audio.addEventListener("stalled",b),t.audio.addEventListener("pause",b);var L=t.audio,C="audio";if(u.stream.hasVideo()||u.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),_.isEdge()?t.video.srcObject=u.stream.stream:(Object(y.attachMediaStream)(t.video,u.stream.stream),Object(y.attachMediaStream)(t.audio,u.stream.stream)),t.video.addEventListener("timeupdate",function(){var te=Date.now();if((c+=1)<10)t.lastTimeupdateTime=te;else for(te-t.lastTimeupdateTime>500&&(t.peerVideoReady?r+=te-t.lastTimeupdateTime:t.peerVideoReady=!0),f+=te-t.lastTimeupdateTime,t.lastTimeupdateTime=te;f>=6e3;)f-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,r)),r-=6e3,r=Math.max(r,0)});else{!1!==a.muted&&"video_element_muted"!==a.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),L=t.video,C="video";var Y={playerId:t.playerId,stateId:i.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};i.audio=Y;var ee={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:Y.status,reason:Y.reason,isErrorState:Y.error,streamId:t.id};if(p.default.debug("[".concat(t.id,"] Media Player Status Change"),ee),Promise.resolve().then(function(){return u.stream.dispatchEvent(ee)}),d.report.reportApiInvoke(u.stream.sid,{name:"Stream.playerStatusChange",options:ee,tag:"tracer"})(),window.MediaStream&&(_.isSafari()||"iOS"===_.getBrowserOS())){var ne=new MediaStream(u.stream.stream.getAudioTracks());Object(y.setSrcObject)(t.video,ne)}else Object(y.setSrcObject)(t.video,u.stream.stream)}if(a.autoplay&&L){var fe=L.play();fe&&fe.catch&&fe.catch(function(te){if(!t.destroyed&&L){var oe=i[C],le={playerId:t.playerId,stateId:oe.stateId+1,playDeferTimeout:null,error:l(L,C,a),status:s(L),reason:"error",updatedAt:Date.now()};if(oe.status!==le.status){p.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(oe.status,"=>").concat(le.status),te),i[C]=le;var de={type:"player-status-change",playerId:t.playerId,mediaType:C,status:le.status,reason:le.reason,isErrorState:le.error,streamId:t.id};p.default.debug("[".concat(t.id,"] Media Player Status Change"),de),u.stream.dispatchEvent(de),d.report.reportApiInvoke(u.stream.sid,{name:"Stream.playerStatusChange",options:de,tag:"tracer"})()}}})}return t.setAudioVolume=function(te){var oe=parseInt(te)/100;isFinite(oe)&&(oe<0?oe=0:oe>1&&(oe=1),t.video&&(t.video.volume=oe),t.audio&&(t.audio.volume=oe))},t},g=N(23),E=N(10),R=N(6),T=N(19),k=N(3),I=N(25),U=N(16),V=N(11),W=N.n(V),J=function(u){Object(k.checkValidString)(u,"profileName"),-1===(u=u.toLowerCase()).indexOf("_")&&(u+="_1"),Object(k.checkValidEnum)(u,"profileName",Object.keys(h.SUPPORT_RESOLUTION_LIST));var t=h.SUPPORT_RESOLUTION_LIST[u];t||(u=Object(h.getParameter)("DEFAULT_PROFILE"),t=h.SUPPORT_RESOLUTION_LIST[u]);var n={profileName:u,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(n.video.frameRate=t[2]),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},K=function(u){return Object.keys(h.SUPPORT_RESOLUTION_LIST).filter(function(t){var n=h.SUPPORT_RESOLUTION_LIST[t],a=["width","height","frameRate"];for(var i in a){var s=a[i];if(u[s]&&n[i]&&("number"==typeof u[s].max&&u[s].max<n[i]||"number"==typeof u[s].min&&u[s].min>n[i]))return!1}return!0}).reverse()},P=function(u){var t=h.AUDIO_PROFILE_SETTINGS[u]||h.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}},S=function(u){var a,t=Object(w.b)();if(t.params=O()({},u),t.stream=u.stream,t.url=u.url,t.onClose=void 0,t.local=!1,t.videoSource=u.videoSource,t.audioSource=u.audioSource,u.video=!(!u.videoSource&&!u.video),t.video=u.video,u.audio=!(!u.audioSource&&!u.audio),t.audio=u.audio,t.screen=!!u.screen,t.screenAudio=!!u.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=u.videoSize,t.player=void 0,t.audioLevelHelper=null,u.attributes=u.attributes||{},t.attributes=u.attributes,t.microphoneId=u.microphoneId,t.cameraId=u.cameraId,t.facingMode=u.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=u.streamID,t.userId=null,t.uintId=u.uintUID||null,t.mirror=!1!==u.mirror,t.DTX=u.audioProcessing&&u.audioProcessing.DTX,t.audioProcessing=u.audioProcessing,t.optimizationMode=u.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var a={};t.getVideoTrack()===this?(p.default.debug("Video Track Ended"),a.type="videoTrackEnded",a.track=this):t.getAudioTrack()===this?(p.default.debug("Audio Track Ended"),a.type="audioTrackEnded",a.track=this):p.default.debug("Detached Track ended",this.kind,this.label,this),a.type&&t.dispatchEvent(a)}return t.videoSize=[640,480,640,480],void 0!==u.local&&!0!==u.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,(a=t).audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},a._initSoundIfNotExists=function(i,s){a.audioMixing.sounds[i]||(a.audioMixing.sounds[i]={soundId:i,state:"IDLE",muted:a.userMuteAudio,filePath:s,volume:a.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},a._initSoundIfNotExists(-1),a.loadAudioBuffer=function(i,s,l){var b=d.report.reportApiInvoke(a.sid,{callback:l,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(k.checkValidString)(s,"url",1,1024,!1),Object(k.checkValidString)(i,"id",1,1024,!1);var c=function(f){p.default.error("[".concat(a.streamId,"] loadAudioBuffer Failed: ")+f),b(v.default.LOAD_AUDIO_FAILED)},r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>400)c("".concat(r.status," ").concat(r.statusText));else{var f=r.response;a.audioMixing.audioContextInited||a._initAudioContext(),a.audioMixing.ctx.decodeAudioData(f,function(L){a.audioMixing.buffer[i]=L,b(null)},function(L){p.default.error("[".concat(a.streamId,"] decodeAudioData Failed: "),L),b(L)})}},r.onerror=function(){return c("load error")},r.ontimeout=function(){return c("timeout")},r.send()},a.createAudioBufferSource=function(i){var s=d.report.reportApiInvoke(a.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(a.audioMixing.buffer[i.id]){var l=a.audioMixing.buffer[i.id],b=a.audioMixing.ctx.createBufferSource();b.buffer=l;var c=a.audioMixing.ctx.createGain();if(b.connect(c),c.connect(a.audioMixing.mediaStreamDest),b.gainNode=c,i.loop)b.loop=!0,b.start(0,i.playTime/1e3);else if(i.cycle>1)if(Object(_.isChrome)()){b.loop=!0;var r=i.cycle*l.duration*1e3-(i.playTime||0);b.start(0,i.playTime/1e3,r/1e3)}else p.default.warning("[".concat(a.streamId,"] Cycle Param is ignored by current browser")),b.start(0,i.playTime/1e3);else b.start(0,i.playTime/1e3);var f=a.audioMixing.sounds[i.soundId];return f.source=b,a._flushAudioMixingMuteStatus(),b.addEventListener("ended",function(){b===f.source&&a.dispatchEvent({type:"audioSourceEnded",soundId:i.soundId,source:b,sound:f})}),s(),b}var L="AUDIOBUFFER_NOT_FOUND";return p.default.error("[".concat(a.streamId,"] "),L,i.id),s(!1),!1},a.on("audioSourceEnded",function(i){var s=i.source,l=i.sound;l&&l.state===a.audioMixing.states.BUSY&&!l.pauseAt&&(l.state=a.audioMixing.states.IDLE,l.startAt=null,l.startOffset=null,l.resumeAt=null,l.resumeOffset=null,s.gainNode&&s.gainNode.disconnect&&s.gainNode.disconnect(),s.buffer=null,a.audioMixing.mediaStreamSource.connect(a.audioMixing.mediaStreamDest))}),a.clearAudioBufferSource=function(){a.audioBufferSource.forEach(function(i){i.stop()})},a._isSoundExists=function(i){return!!a.audioMixing.sounds[i.soundId]||(p.default.error("SoundId not exists. #".concat(i.soundId)),!1)},a._initAudioContext=function(){if(a.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!a.stream)throw new Error("Failed to init audio context. Local Stream not initialized");a.audioMixing.ctx=Object(I.a)(),a.audioMixing.mediaStreamSource=a.audioMixing.ctx.createMediaStreamSource(a.stream),a.audioMixing.mediaStreamDest=a.audioMixing.ctx.createMediaStreamDestination(),a.audioMixing.mediaStreamSource.connect(a.audioMixing.mediaStreamDest);var i=a.stream.getVideoTracks()[0];if(i&&a.audioMixing.mediaStreamDest.stream.addTrack(i),a._originStream=a.stream,a._isAudioMuted()?(a._unmuteAudio(),a.stream=a.audioMixing.mediaStreamDest.stream,a._muteAudio()):a.stream=a.audioMixing.mediaStreamDest.stream,a.audioLevelHelper=null,a.pc&&a.pc.peerConnection&&a.pc.peerConnection){var s=(a.pc.peerConnection&&a.pc.peerConnection.getSenders()).find(function(b){return b&&b.track&&"audio"==b.track.kind}),l=a.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];s&&s.replaceTrack&&l&&s.replaceTrack(l)}a.audioMixing.audioContextInited=!0},a._cleanupAudioMixing=function(){if(a.audioMixing.audioContextInited){for(var i in a.audioMixing.sounds){var s=a.audioMixing.sounds[i];s.state!==a.audioMixing.states.BUSY&&s.state!==a.audioMixing.states.PAUSED||a._stopOneEffect({soundId:i})}a.audioLevelHelper=null,a.audioMixing.audioContextInited=!1}},a._reloadInEarMonitoringMode=function(i){if(i){if(!a.audioMixing.inEarMonitoringModes[i])return p.default.error("[".concat(a.streamId,"] Invalid InEarMonitoringMode ").concat(i));a.audioMixing.inEarMonitoring=i}switch(a.audioMixing.audioContextInited||a._initAudioContext(),a.audioMixing.inEarMonitoring){case a.audioMixing.inEarMonitoringModes.FILE:a.audioMixing.mediaStreamSource.connectedToDestination&&(a.audioMixing.mediaStreamSource.disconnect(a.audioMixing.ctx.destination),a.audioMixing.mediaStreamSource.connectedToDestination=!1);case a.audioMixing.inEarMonitoringModes.ALL:for(var s in a.audioMixing.sounds){var l=a.audioMixing.sounds[s];l&&l.source&&!l.source.connectedToDestination&&(l.source.gainNode.connect(a.audioMixing.ctx.destination),l.source.connectedToDestination=!0)}}switch(a.audioMixing.inEarMonitoring){case a.audioMixing.inEarMonitoringModes.MICROPHONE:a.audioMixing.source.forEach(function(b){b.connectedToDestination&&(b.gainNode.disconnect(a.audioMixing.ctx.destination),b.connectedToDestination=!1)});case a.audioMixing.inEarMonitoringModes.ALL:a.audioMixing.mediaStreamSource.connectedToDestination||(a.audioMixing.mediaStreamSource.connect(a.audioMixing.ctx.destination),a.audioMixing.mediaStreamSource.connectedToDestination=!0)}},a._startAudioMixingBufferSource=function(i){a.audioMixing.audioContextInited||a._initAudioContext();var l=i.replace,b=a.createAudioBufferSource({soundId:i.soundId,id:i.filePath,loop:i.loop,cycle:i.cycle,playTime:i.playTime||0});return b.sound=a.audioMixing.sounds[i.soundId],b?(b.addEventListener("ended",a._audioMixingFinishedListener,{once:!0}),a._reloadInEarMonitoringMode(),l&&a.audioMixing.mediaStreamSource.disconnect(a.audioMixing.mediaStreamDest),b):null},a._stopAudioMixingBufferSource=function(i){var s=a.audioMixing.sounds[i.soundId].source;return s?(s.removeEventListener("ended",a._audioMixingFinishedListener),a.audioMixing.mediaStreamSource.connect(a.audioMixing.mediaStreamDest),s.stop(),s.gainNode&&s.gainNode.disconnect&&s.gainNode.disconnect(),s.buffer=null,s):null},a._flushAudioMixingMuteStatus=function(i){for(var s in a.audioMixing.sounds){var l=a.audioMixing.sounds[s];l&&(void 0!==i&&(l.muted=!!i),l.source&&(l.source.gainNode.gain.value=l.muted?0:l.volume/100))}},a._handleAudioMixingInvalidStateError=function(i,s,l){var b=a.audioMixing.sounds[s.soundId],c=-1===s.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";p.default.error("[".concat(a.streamId,"] Cannot ").concat(i,": ").concat(c,", state is ").concat(b.state)),l&&l(c)},a._handleAudioMixingNoSourceError=function(i,s,l){a.audioMixing.sounds[s.soundId].state=a.audioMixing.states.IDLE;var b=-1===s.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";p.default.error("[".concat(a.streamId,"] Cannot ").concat(i,": ").concat(b)),l&&l(b)},a._getOneEffectStates=function(i){var s=a.audioMixing.sounds[i.soundId];return function(){return s?{state:s.state,startAt:s.startAt,resumeAt:s.resumeAt,pauseOffset:s.pauseOffset,pauseAt:s.pauseAt,resumeOffset:s.resumeOffset,stopAt:s.stopAt,duration:a._getOneEffectDuration(i),position:a._getOneEffectCurrentPosition(i)}:{}}},a._audioMixingFinishedListener=function(){var i=this.sound;i.state===a.audioMixing.states.IDLE&&a.audioMixing.buffer[i.options.filePath]&&!i.options.cacheResource&&(p.default.debug("Recycled buffer ".concat(i.options.filePath)),delete a.audioMixing.buffer[i.options.filePath]),-1===i.soundId&&a.dispatchEvent({type:"audioMixingFinished"})},a._playOneEffect=function(i,s){Object(k.checkValidObject)(i,"options");var l=i.soundId,b=i.cacheResource;if(Object(_.isSafari)()&&Object(_.getBrowserVersion)()<12){var c="BROWSER_NOT_SUPPORT";return p.default.error("[".concat(a.streamId,"] Cannot _playOneEffect: "),c),s(c)}a.audioMixing.audioContextInited||a._initAudioContext(),a._initSoundIfNotExists(l);var r=a.audioMixing.sounds[l];if(r.state===a.audioMixing.states.IDLE){if(void 0!==i.cycle&&!i.cycle>0)return c="Invalid Parmeter cycle: "+i.cycle,p.default.error("[".concat(a.streamId,"] ").concat(l),c),s(c);if(Object(k.isEmpty)(b)&&(i.cacheResource=!0),r.state=a.audioMixing.states.STARTING,r.options=i,a.audioMixing.buffer[i.filePath]){var f=a._startAudioMixingBufferSource(i);if(f)return r.source=f,r.startAt=Date.now(),r.resumeAt=null,r.pauseOffset=null,r.pauseAt=null,r.resumeOffset=null,r.stopAt=null,r.startOffset=i.playTime||0,r.state=a.audioMixing.states.BUSY,a._flushAudioMixingMuteStatus(),s(null);r.state=a.audioMixing.states.IDLE;var L="CREATE_BUFFERSOURCE_FAILED";if(s)return s(L);p.default.error("[".concat(a.streamId,"] "),L)}else a.loadAudioBuffer(i.filePath,i.filePath,function(C){if(C)r.state=a.audioMixing.states.IDLE,s?s(C):p.default.error("[".concat(a.streamId,"] "),C);else{var H=a._startAudioMixingBufferSource(i);if(H)return r.source=H,r.startAt=Date.now(),r.resumeAt=null,r.pauseOffset=null,r.pauseAt=null,r.resumeOffset=null,r.stopAt=null,r.startOffset=i.playTime||0,r.state=a.audioMixing.states.BUSY,a._flushAudioMixingMuteStatus(),s(null);if(r.state=a.audioMixing.states.IDLE,C="CREATE_BUFFERSOURCE_FAILED",s)return s(C);p.default.error("[".concat(a.streamId,"] "),C)}})}else a._handleAudioMixingInvalidStateError("_playEffect",i,s)},a._stopOneEffect=function(i,s){var l=a.audioMixing.sounds[i.soundId];return a._isSoundExists(i)?l.state===a.audioMixing.states.BUSY||l.state===a.audioMixing.states.PAUSED?(a._stopAudioMixingBufferSource(i),l.stopAt=Date.now(),l.state=a.audioMixing.states.IDLE,a.audioMixing.buffer[l.options.filePath]&&!l.options.cacheResource&&(p.default.debug("Recycled buffer ".concat(l.options.filePath)),delete a.audioMixing.buffer[l.options.filePath]),void(s&&s(null))):void a._handleAudioMixingInvalidStateError("_stopOneEffect",i,s):s("SOUND_NOT_EXISTS")},a._pauseOneEffect=function(i,s){var l=a.audioMixing.sounds[i.soundId];if(l.state===a.audioMixing.states.BUSY)return a._stopAudioMixingBufferSource(i)?(l.pauseAt=Date.now(),l.state=a.audioMixing.states.PAUSED,l.pauseOffset=l.resumeAt?l.pauseAt-l.resumeAt+l.resumeOffset:l.pauseAt-l.startAt+l.startOffset,s&&s(null)):void a._handleAudioMixingNoSourceError("_pauseOneEffect",i,s);a._handleAudioMixingInvalidStateError("_pauseOneEffect",i,s)},a._resumeOneEffect=function(i,s){var l=a.audioMixing.sounds[i.soundId];if(l.state===a.audioMixing.states.PAUSED){var c=a._startAudioMixingBufferSource({soundId:i.soundId,filePath:l.options.filePath,cycle:l.options.cycle,loop:l.options.loop,playTime:l.pauseOffset,replace:l.options.replace});if(!c){var r="CREATE_BUFFERSOURCE_FAILED";return s(r),void p.default.error("[".concat(a.streamId,"] "),r)}l.source=c,l.resumeAt=Date.now(),l.resumeOffset=l.pauseOffset,l.state=a.audioMixing.states.BUSY,l.pauseAt=null,l.pauseOffset=null,s(null)}else a._handleAudioMixingInvalidStateError("_resumeOneEffect",i,s)},a._getOneEffectDuration=function(i){var s=a.audioMixing.sounds[i.soundId];return s.options&&s.options.filePath&&a.audioMixing.buffer[s.options.filePath]?1e3*a.audioMixing.buffer[s.options.filePath].duration:null},a._getOneEffectCurrentPosition=function(i,s){var l=a.audioMixing.sounds[i.soundId];return l.state===a.audioMixing.states.PAUSED?l.pauseOffset%a._getOneEffectDuration(i):l.state===a.audioMixing.states.BUSY?l.resumeAt?(Date.now()-l.resumeAt+l.resumeOffset)%a._getOneEffectDuration(i):(Date.now()-l.startAt+l.startOffset)%a._getOneEffectDuration(i):void(s&&a._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",i))},a._setOneEffectPosition=function(i,s,l){var b=a.audioMixing.sounds[i.soundId];if(b.state===a.audioMixing.states.BUSY){if(!a._stopAudioMixingBufferSource(i))return void a._handleAudioMixingNoSourceError("_setOneEffectPosition",i,l);var r=a._startAudioMixingBufferSource({soundId:i.soundId,filePath:b.options.filePath,loop:b.options.loop,cycle:b.options.cycle,playTime:s});if(!r){var f="CREATE_BUFFERSOURCE_FAILED";return l&&l(f),void p.default.error("[".concat(a.streamId,"] "),f)}b.source=r,b.startAt=Date.now(),b.startOffset=s,b.resumeAt=null,b.resumeOffset=null,b.pauseOffset=null,b.pauseAt=null}else{if(b.state!==a.audioMixing.states.PAUSED)return void a._handleAudioMixingInvalidStateError("_setOneEffectPosition",i,l);b.pauseOffset=s}l&&l(null)},a.startAudioMixing=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:function(Y){if(Y)return s&&s(Y);a.dispatchEvent({type:"audioMixingPlayed"}),s&&s(null)},getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:i});Object(k.checkValidObject)(i,"options");var b=i.filePath,c=i.cacheResource,r=i.cycle,f=i.loop,L=i.playTime,C=i.replace;Object(k.checkValidString)(b,"filePath",1,Object(h.getParameter)("FILEPATH_LENMAX"),!1),Object(k.checkValidNumber)(L,"playTime",0,1e8),!Object(k.isEmpty)(r)&&Object(k.checkValidNumber)(r,"cycle"),!Object(k.isEmpty)(f)&&Object(k.checkValidBoolean)(f,"loop"),!Object(k.isEmpty)(C)&&Object(k.checkValidBoolean)(C,"replace"),!Object(k.isEmpty)(c)&&Object(k.checkValidBoolean)(c,"cacheResource");var H=O()({soundId:-1},i);a._playOneEffect(H,l)},a.stopAudioMixing=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:i,getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});a._stopOneEffect({soundId:-1},s)},a.pauseAudioMixing=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:i,getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return a._pauseOneEffect({soundId:-1},s)},a.resumeAudioMixing=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:function(l,b){if(l)return i&&i(l);a.dispatchEvent({type:"audioMixingPlayed"}),i&&i(null)},getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});a._resumeOneEffect({soundId:-1},s)},a.adjustAudioMixingVolume=function(i){var s=d.report.reportApiInvoke(a.sid,{getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(k.checkValidNumber)(i,"volume",0,100),a.audioMixing.sounds[-1].volume=i,a._flushAudioMixingMuteStatus(),s()},a.getAudioMixingDuration=function(){var i=d.report.reportApiInvoke(a.sid,{getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),s=a._getOneEffectDuration({soundId:-1});return i(null,s),s},a.getAudioMixingCurrentPosition=function(){var i=d.report.reportApiInvoke(a.sid,{getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),s=a._getOneEffectCurrentPosition({soundId:-1},!0);return i(null,s),s},a.setAudioMixingPosition=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:s,options:arguments,tag:"tracer",getStates:a._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(k.checkValidNumber)(i,"position",0,1e8),a._setOneEffectPosition({soundId:-1},i,l)},a.playEffect=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:function(f){if(f)return s&&s(f);a.dispatchEvent({type:"effectPlayed"}),s&&s(null)},name:"Stream.playEffect",options:i});Object(k.checkValidObject)(i,"options");var b=i.soundId,c=i.filePath,r=i.cycle;Object(k.checkValidNumber)(b,"soundId",1,1e4),Object(k.checkValidString)(c,"filePath",0,Object(h.getParameter)("FILEPATH_LENMAX"),!1),!Object(k.isEmpty)(r)&&Object(k.checkValidNumber)(r,"cycle"),a._playOneEffect(i,l)},a.stopEffect=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:s,getStates:a._getOneEffectStates({soundId:i}),name:"Stream.stopEffect"});Object(k.checkValidNumber)(i,"soundId",1,1e4),a._stopOneEffect({soundId:i},l)},a.stopAllEffects=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:i,name:"Stream.stopAllEffect"}),l=!1,b=0,c=0,r=function(C){l||(C?(s(C),l=!0):b+=1,b===c&&(s(null),l=!0))};for(var f in a.audioMixing.sounds){var L=a.audioMixing.sounds[f];-1!==L.soundId&&(L.state!==a.audioMixing.states.BUSY&&L.state!==a.audioMixing.states.PAUSED||(c++,a._stopOneEffect({soundId:f},r)))}c||s(null)},a.preloadEffect=function(i,s,l){var b=d.report.reportApiInvoke(a.sid,{callback:l,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(k.checkValidNumber)(i,"soundId",1,1e4),Object(k.checkValidString)(s,"filePath",1,Object(h.getParameter)("FILEPATH_LENMAX"),!1),a._initSoundIfNotExists(i,s),a.audioMixing.buffer[s]?b(null):a.loadAudioBuffer(s,s,b)},a.unloadEffect=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:s,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(k.checkValidNumber)(i,"soundId",1,1e4);var b=a.audioMixing.sounds[i];if(!b){var c="SOUND_NOT_EXISTS";return p.default.error(c,i),void l(c)}var r=b.options?b.options.filePath:b.filePath;if(r)delete a.audioMixing.buffer[r],delete a.audioMixing.sounds[i],l(null);else{var f="SOUND_BUFFER_NOT_FOUND";p.default.error(f,i),l(f)}},a.pauseEffect=function(i,s){var l=d.report.reportApiInvoke(a.sid,{callback:s,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return a._pauseOneEffect({soundId:i},l)},a.pauseAllEffects=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:i,name:"Stream.pauseAllEffects"}),l=!1,b=0,c=0,r=function(L){l||(L?(s(L),l=!0):b+=1,b===c&&(s(null),l=!0))};for(var f in a.audioMixing.sounds)"-1"!==f&&a.audioMixing.sounds[f].state===a.audioMixing.states.BUSY&&(c++,a._pauseOneEffect({soundId:f},r));c||s(null)},a.resumeEffect=function(i,s){Object(k.checkValidNumber)(i,"soundId",1,1e4);var l=d.report.reportApiInvoke(a.sid,{callback:s,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return a._resumeOneEffect({soundId:i},l)},a.resumeAllEffects=function(i){var s=d.report.reportApiInvoke(a.sid,{callback:i,name:"Stream.resumeAllEffects"}),l=!1,b=0,c=0,r=function(L){l||(L?(s(L),l=!0):b+=1,b===c&&(s(null),l=!0))};for(var f in a.audioMixing.sounds)"-1"!==f&&a.audioMixing.sounds[f].state===a.audioMixing.states.PAUSED&&(c++,a._resumeOneEffect({soundId:f},r));c||s(null)},a.getEffectsVolume=function(){var i=[];for(var s in a.audioMixing.sounds){var l=a.audioMixing.sounds[s];l&&"-1"!==s&&i.push({soundId:parseInt(s),volume:l.volume})}return i},a.setEffectsVolume=function(i,s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:s});for(var b in Object(k.checkValidNumber)(i,"volume",0,100),a.audioMixing.defaultVolume=i,a.audioMixing.sounds){var c=a.audioMixing.sounds[b];"-1"!==b&&(c.volume=i)}a._flushAudioMixingMuteStatus(),l(null)},a.setVolumeOfEffect=function(i,s,l){var b=d.report.reportApiInvoke(a.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:l});Object(k.checkValidNumber)(i,"soundId",0,1e4),Object(k.checkValidNumber)(s,"volume",0,100),a._initSoundIfNotExists(i);var c=a.audioMixing.sounds[i];c.volume=s,a._flushAudioMixingMuteStatus(),b(null)},U.a.addVideoEffectCapability(t),function(a,i){a.videoConstraint={},i.cameraId&&(a.videoConstraint.deviceId={exact:i.cameraId}),i.facingMode&&(a.videoConstraint.facingMode=i.facingMode),a.videoSize&&(a.videoConstraint.width=a.videoSize[0],a.videoConstraint.height=a.videoSize[1]),Object(_.isLegacyChrome)()||(a.videoConstraint.frameRate=30),a.audioConstraint={},i.microphoneId&&(a.audioConstraint.deviceId={exact:i.microphoneId}),Object(_.isLegacyChrome)()||a.audioProcessing&&(void 0!==a.audioProcessing.AGC&&(Object(_.isFireFox)()?a.audioConstraint.autoGainControl=a.audioProcessing.AGC:Object(_.isChrome)()&&(a.audioConstraint.googAutoGainControl=a.audioProcessing.AGC,a.audioConstraint.googAutoGainControl2=a.audioProcessing.AGC)),void 0!==a.audioProcessing.AEC&&(a.audioConstraint.echoCancellation=a.audioProcessing.AEC),void 0!==a.audioProcessing.ANS&&(Object(_.isFireFox)()?a.audioConstraint.noiseSuppression=a.audioProcessing.ANS:Object(_.isChrome)()&&(a.audioConstraint.googNoiseSuppression=a.audioProcessing.ANS))),a.screenConstraint={},i.sourceId&&(a.screenConstraint.sourceId=i.sourceId),i.extensionId&&Object(_.isChrome)()?(a.screenConstraint.extensionId=i.extensionId,a.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:a.screenAttributes.width,maxHeight:a.screenAttributes.height,maxFrameRate:a.screenAttributes.maxFr,minFrameRate:a.screenAttributes.minFr}):(a.screenConstraint.mediaSource="screen",a.screenConstraint.width=a.screenAttributes.width,a.screenConstraint.height=a.screenAttributes.height,a.screenConstraint.frameRate={ideal:a.screenAttributes.maxFr,max:a.screenAttributes.maxFr}),i.mediaSource&&(a.screenConstraint.mediaSource=i.mediaSource),a.setVideoResolution=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(s instanceof Array)){var b=J(s+="");return b&&b.video?(a.videoConstraint=O()(a.videoConstraint,{width:{ideal:b.video.width},height:{ideal:b.video.height}}),i.attributes.resolution=b.attributes.resolution,(c=a.stream&&a.stream.getVideoTracks&&a.stream.getVideoTracks()[0])&&c.applyConstraints?(p.default.debug("setVideoResolution applyConstraints",a.videoConstraint),c.applyConstraints(a.videoConstraint).then(l).catch(l)):l(),!0):(l("NO_PROFILE_".concat(s)),!1)}var c,r=s[0],f=s[1];a.videoConstraint=O()(a.videoConstraint,{width:{ideal:r},height:{ideal:f}}),i.attributes.resolution="".concat(r,"x").concat(f),(c=a.stream&&a.stream.getVideoTracks&&a.stream.getVideoTracks()[0])&&c.applyConstraints?(p.default.debug("setVideoResolution applyConstraints",a.videoConstraint),U.a.disableVideoEffect(a).then(function(){return c.applyConstraints(a.videoConstraint).then(l).catch(l)}).then(function(){return U.a.restoreVideoEffect(a)})):l()},a.setVideoFrameRate=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(_.isFireFox)())return l("FIREFOX_NOT_SUPPORTED"),!1;if("object"===W()(s)&&s instanceof Array&&s.length>1){a.videoConstraint=O()(a.videoConstraint,{frameRate:s[0]}),a.attributes.minFrameRate=s[0],a.attributes.maxFrameRate=s[1];var b=a.stream&&a.stream.getVideoTracks&&a.stream.getVideoTracks()[0];return b&&b.applyConstraints?(p.default.debug("setVideoFrameRate applyConstraints",a.videoConstraint),b.applyConstraints(a.videoConstraint).then(l).catch(l)):l(),!0}return l("INVALID_PARAM_".concat(JSON.stringify(s))),!1},a.setVideoBitRate=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===W()(s)&&s instanceof Array&&s.length>1?(i.attributes.minVideoBW=s[0],i.attributes.maxVideoBW=s[1],a.connectionSpec&&(a.connectionSpec.minVideoBW=s[0],a.connectionSpec.maxVideoBW=s[1]),a.pc&&a.pc.renegotiate&&a.pc.renegotiate(),l(),!0):(l("INVALID_PARAM_".concat(JSON.stringify(s))),!1)},a.setScreenBitRate=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===W()(s)&&s instanceof Array&&s.length>1?(a.screenAttributes.minVideoBW=s[0],a.screenAttributes.maxVideoBW=s[1],l(),!0):(l("INVALID_PARAM_".concat(JSON.stringify(s))),!1)},a.setScreenProfile=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(k.checkValidEnum)(s,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var b=J(s);return b&&b.screen?(a.screenConstraint.mandatory?(a.screenConstraint.mandatory.maxWidth=b.screen.width,a.screenConstraint.mandatory.maxHeight=b.screen.height,b.screen.frameRate&&b.screen.frameRate.min&&b.screen.frameRate.max&&(a.screenConstraint.mandatory.minFrameRate=b.screen.frameRate.min,a.screenConstraint.mandatory.maxFrameRate=b.screen.frameRate.max)):a.screenConstraint=O()(a.screenConstraint,b.screen),a.screenAttributes.width=b.screen.width,a.screenAttributes.height=b.screen.height,a.screenAttributes.minFr=b.screen.frameRate.min,a.screenAttributes.maxFr=b.screen.frameRate.max,l(),!0):(l("NO_SCREEN_PROFILE_".concat(JSON.stringify(s))),!1)},a.setVideoProfileCustom=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});a.setVideoResolution(s[0]),a.setVideoFrameRate([s[1],s[1]]),a.setVideoBitRate([s[2],s[2]]),l()},a.setVideoProfileCustomPlus=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});a.setVideoResolution([s.width,s.height]),i.attributes.resolution="".concat(s.width,"x").concat(s.height),a.setVideoFrameRate([s.framerate,s.framerate]),a.setVideoBitRate([s.bitrate,s.bitrate]),l()},a.setVideoProfile=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),b=J(s);if(!b){var c="Invalid Profile ".concat(s);throw new Error(c)}if(a.profile=s,b&&b.video){a.profile=b.profileName,a.videoConstraint=O()(a.videoConstraint,b.video),a.connectionSpec&&b.attributes.maxVideoBW&&(a.connectionSpec.minVideoBW=b.attributes.minVideoBW,a.connectionSpec.maxVideoBW=b.attributes.maxVideoBW),Object(_.isEdge)()&&(a.videoConstraint.frameRate.max=60),Object(_.isFireFox)()&&(a.videoConstraint.frameRate=30),i.attributes=O()(i.attributes,b.attributes),a.pc&&a.pc.renegotiate&&a.pc.renegotiate();var r=a.stream&&a.stream.getVideoTracks&&a.stream.getVideoTracks()[0];return r&&r.applyConstraints?(p.default.debug("setVideoProfile applyConstraints",a.videoConstraint),U.a.disableVideoEffect(a).then(function(){return r.applyConstraints(a.videoConstraint)}).then(function(){return U.a.restoreVideoEffect(a)}).then(function(f){return new Promise(function(L,C){l(f),setTimeout(function(){Object(E.vsResHack)(a.stream,function(H,Y){a.videoWidth=H,a.videoHeight=Y,L()},function(H){p.default.warning("[".concat(a.streamId,"] vsResHack failed: "),H),C()})},2500)})}).catch(l)):l(),!0}return l("INVALID_VIDEO_PROFILE_".concat(s)),!1},a.setAudioProfile=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(k.checkValidEnum)(s,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),a.audioProfile=s;var b=P(s);return a.highQuality=b.highQuality,a.stereo=b.stereo,a.speech=b.speech,a.lowQuality=b.lowQuality,a.stereo&&Object(_.isChrome)()&&(a.audioConstraint.googAutoGainControl=!1,a.audioConstraint.googAutoGainControl2=!1,a.audioConstraint.echoCancellation=!1,a.audioConstraint.googNoiseSuppression=!1),l(),!0},a.setVideoEncoderConfiguration=function(s){Object(k.checkValidObject)(s,"config");var l=d.report.reportApiInvoke(a.sid,{name:"Stream.setVideoEncoderConfiguration",options:s,tag:"tracer"});s.resolution&&(Object(k.checkValidNumber)(s.resolution.width,"config.resolution.width"),Object(k.checkValidNumber)(s.resolution.height,"config.resolution.height"),a.setVideoResolution([s.resolution.width,s.resolution.height])),s.frameRate&&(Object(k.checkValidNumber)(s.frameRate.min,"config.frameRate.min"),Object(k.checkValidNumber)(s.frameRate.max,"config.frameRate.max"),a.setVideoFrameRate([s.frameRate.min,s.frameRate.max])),s.bitrate&&(Object(k.checkValidNumber)(s.bitrate.min,"config.bitrate.min",1,1e7),Object(k.checkValidNumber)(s.bitrate.max,"config.bitrate.max",1,1e7),a.setVideoBitRate([s.bitrate.min,s.bitrate.max])),l()},a.getSupportedProfile=function(s){var l=d.report.reportApiInvoke(a.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:s});if(!a.local){var b="ONLY_LOCAL_STREAM_SUPPORTED";return p.default.error(b),l(b)}if(!a.stream)return p.default.error(b="STREAM_NOT_INIT"),l(b);if(!a.stream.getVideoTracks)return p.default.error(b="TRACK_NOT_SUPPORT"),l(b);var c=a.stream.getVideoTracks()[0];if(!c)return p.default.error(b="NO_VIDEO_TRACK_FOUND"),l(b);if(!c.getCapabilities)return p.default.error(b="GETCAPABILITY_NOT_SUPPORT"),l(b);var r=c.getCapabilities(),f=K(r);return l(null,f)}}(t,u),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(h.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(p.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(a){var i=d.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&p.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(a)),t.userId=a,i()},t.getAttributes=function(){return u.screen?t.screenAttributes:u.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(a,i){var s=d.report.reportApiInvoke(t.sid,{callback:function(r,f){if(r)return i&&i(r);a&&a(f)},name:"Stream.init",options:arguments,tag:"tracer"}),l=((new Date).getTime(),arguments[2]);if(void 0===l&&(l=2),!0===t.initialized)return s({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return s({type:"warning",msg:"STREAM_NOT_LOCAL"});var b=Math.random().toString().slice(3);t._streamInitID=b,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=T.a.searchDeviceNameById(u.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=T.a.searchDeviceNameById(u.microphoneId)||"default"),t.screen&&(t.screenName=u.extensionId||"default");try{if(u.audio||u.video||u.screen||u.screenAudio||u.videoSource||u.audioSource){p.default.debug("[".concat(t.streamId,"] Requested access to local media"));var c={streamId:t.streamId};u.videoSource?c.videoSource=u.videoSource:u.screen?c.screen=t.screenConstraint:u.video&&(c.video=t.videoConstraint),u.audioSource?c.audioSource=u.audioSource:u.screenAudio?c.screenAudio=u.screenAudio:u.audio&&(c.audio=t.audioConstraint),Object(g.b)(c,function(r){if(c.screenAudio&&!r.getAudioTracks()[0]&&p.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),c.screen&&p.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(c.video||c.audio)&&p.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){r.getTracks().forEach(function(L){L.stop()});var f={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return p.default.error(t.streamId,f.info),void s(f)}if(t._streamInitID!==b)return r.getTracks().forEach(function(L){L.stop()}),p.default.error(t.streamId,(f={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void s(f);t.dispatchEvent({type:"accessAllowed"}),t.stream=r,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(E.vsResHack)(r,function(L,C){t.videoWidth=L,t.videoHeight=C},function(L){p.default.warning("[".concat(t.streamId,"] vsResHack failed: "),L)}),u.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach(function(L){L&&!L.onended&&(L.onended=n),"video"===L.kind&&u.optimizationMode&&(L.contentHint=u.optimizationMode,L.contentHint===u.optimizationMode&&p.default.debug("[".concat(t.streamId,"] set content hint to"),u.optimizationMode))}),s()},function(r){var f={type:"error",info:null};switch(r&&(f.msg=r.name||r.code||r,r.message&&(f.info=r.message),r.code&&(f.info?f.info+=". "+r.code:f.info=" "+r.code),r.constraint&&(f.info?f.info+=". Constraint: "+r.constraint:f.info="constraint: "+r.constraint)),f.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),l>0)return void setTimeout(function(){t.init(function(C){return s(C)},s,l-1)},1);f.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":f.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":f.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":f.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":f.msg="CONSTRAINT_NOT_SATISFIED";break;default:f.msg||(f.msg="UNDEFINED")}var L="Media access ".concat(f.msg).concat(f.info?": "+f.info:"");p.default.error("[".concat(t.streamId,"] "),L),s(f)})}else s({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(r){p.default.error("[".concat(t.streamId,"] Stream init: "),r),s({type:"error",msg:r.message||r})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var a=t.stream.getVideoTracks()[0];a&&a.label&&(t.videoName=a.label)}if(t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];i&&i.label&&(t.audioName=i.label)}}},t.close=function(){var a=d.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(p.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map(function(b){return b.stop()})}catch(b){}if(void 0!==t.stream){var i=t.stream.getTracks();for(var s in i)i.hasOwnProperty(s)&&(i[s].stop(),i[s].onended=null);!t.isLowStream&&t.local?U.a.disableVideoEffect(t).then(function(){t.stream=void 0}):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var s in console.log("clear _originStream"),i=t._originStream.getTracks())i.hasOwnProperty(s)&&(i[s].stop(),i[s].onended=null,console.log("clear onended"));!t.isLowStream&&t.local?U.a.disableVideoEffect(t).then(function(){t._originStream=void 0}):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}if(Object(_.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders){var l=t.pc.peerConnection.getSenders();l.forEach(function(b){b&&(p.default.debug("[".concat(t.streamId,"] Remove Track"),b),t.pc.peerConnection.removeTrack(b))})}t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),t.player&&t.player.video&&t.player.video.srcObject&&(t.player.video.srcObject=null),t.player&&t.player.audio&&t.player.audio.srcObject&&(t.player.audio.srcObject=null),a()},t.enableAudio=function(){var a,i=d.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return p.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||p.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,i(null,a=!t.peerMuteAudio&&t._unmuteAudio()),a},t.disableAudio=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});p.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&p.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return a(null,i),i},t.enableVideo=function(){var a,i=d.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return p.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||p.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,a=!t.peerMuteVideo&&t._unmuteVideo()),a},t.disableVideo=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});p.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&p.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return a(null,i),i},t.unmuteAudio=function(){var a,i=d.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||p.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,i(null,a=!t.peerMuteAudio&&t._unmuteAudio()),a},t.muteAudio=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&p.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return a(null,i),i},t.unmuteVideo=function(){var a,i=d.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||p.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,a=!t.peerMuteVideo&&t._unmuteVideo()),a},t.muteVideo=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&p.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return a(null,i),i},t._unmuteAudio=function(){return p.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled||(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,0))},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var a=t.stream.getAudioTracks();return a.length>0&&!a[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var a=t.stream.getVideoTracks();return a.length>0&&!a[0].enabled}return!1},t._muteAudio=function(){return p.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&d.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return p.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled||(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),0))},t._muteVideo=function(){return p.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&d.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(a){if(t.audio&&"audio"===a.kind)p.default.warning("already added audio track");else if(t.video&&"video"===a.kind)p.default.warning("already added video track");else{var i=d.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(a,t.stream),"audio"==a.kind){t._cleanupAudioMixing();var s=new MediaStream;t.userMuteAudio&&(a.enabled=!1),s.addTrack(a);var l=t.stream.getVideoTracks()[0];l&&s.addTrack(l),t.audio=!0,u.audio=!0,t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(a.enabled=!1),t.stream.addTrack(a),t.video=!0,u.video=!0;a.onended||(a.onended=n),i()}},t.removeTrack=function(a){if(a)if(t.audio||"audio"!==a.kind)if(t.video||"video"!==a.kind){var i=d.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(a,t.stream),t.stream.removeTrack(a),t._cleanupAudioMixing(),"audio"===a.kind?(t.audio=!1,u.audio=!1):(t.video=!1,u.video=!1),t.audioLevelHelper=null,"live"==a.readyState&&(a.stop(),p.default.debug("[".concat(t.streamId,"] Track ").concat(a.kind," Stopped"))),i()}else p.default.warning("already removed video track");else p.default.warning("already removed audio track");else p.default.warning("track doesn't exist.")},t.setAudioOutput=function(a,i,s){var l=d.report.reportApiInvoke(t.sid,{callback:function(b,c){if(b)return s&&s(b);i&&i(c)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(k.isValidString)(a,1,255)?(t.audioOutput=a,t.player?void t.player.setAudioOutput(a,function(){return l()},l):l()):(p.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),a),l(v.default.INVALID_PARAMETER))},t.play=function(a,i,s){"function"==typeof i&&(s=i,i=null),p.default.debug("[".concat(t.streamId,"] play()."),a,i);var l=d.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:s});if(Object(k.checkValidString)(a,"elementID"),Object(k.isEmpty)(i)||(Object(k.isEmpty)(i.fit)||Object(k.checkValidEnum)(i.fit,"fit",["cover","contain"]),Object(k.isEmpty)(i.muted)||Object(k.checkValidBoolean)(i.muted,"muted")),t.player)p.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then(function(){l(null)}).catch(l);else{t.elementID=a,t.playOptions=i,!t.local||t.video||t.screen?(t.player=new M({id:t.getId(),stream:t,elementID:a,options:i}),t.local&&U.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new M({id:t.getId(),stream:t,elementID:a,options:i}));var b={video:null,audio:null},c=function r(f){if(b[f.mediaType]=f,b.video&&b.audio)if(t.removeEventListener("player-status-change",r),b.video.isErrorState||b.audio.isErrorState){var L=b.video.isErrorState?b.video:b.audio;l({isErrorState:!0,status:L.status,reason:L.reason,video:b.video,audio:b.audio})}else l("aborted"===b.video.status&&"aborted"===b.audio.status?{status:"aborted",reason:"stop",video:b.video,audio:b.audio}:null)};t.on("player-status-change",c),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});p.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(U.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):p.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),a()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!(!t.player||!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video)||t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var a,i;return t.player?(t.player.video&&t.player.video.play&&(a=t.player.video.play()),a=a||Promise.resolve(),t.player.audio&&t.player.audio.play&&(i=t.player.audio.play()),i=i||Promise.resolve(),Promise.all([a,i])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var i=t.stream.getVideoTracks()[0];if(i)return p.default.info("[".concat(t.streamId,"] getVideoTrack"),i),a(),i}p.default.info("[".concat(t.streamId,"] getVideoTrack None")),a(null,"getVideoTrack None")},t.getAudioTrack=function(){var a=d.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];if(i)return p.default.info("[".concat(t.streamId,"] getAudioTracks"),i),a(),i}p.default.info("[".concat(t.streamId,"] getAudioTracks None")),a(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(a,i,s){if(t.stream){if("video"==a.kind){if(b=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(a.enabled=!1),t.stream.removeTrack(b),t.stream.addTrack(a),p.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(a.kind," SUCCESS")),"live"==b.readyState&&(b.stop(),p.default.debug("[".concat(t.streamId,"] Track ").concat(b.kind," Stopped"))),i&&i();var l="MEDIASTREAM_TRACK_NOT_FOUND";return p.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(a.kind)),s(l)}if("audio"==a.kind){var b;if(b=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(a.enabled=!1);var c=new MediaStream;c.addTrack(a);var r=t.stream&&t.stream.getVideoTracks()[0];return r&&c.addTrack(r),t.stream=c,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),p.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==b.readyState&&(b.stop(),p.default.debug("[".concat(t.streamId,"] Track ").concat(b.kind," Stopped"))),i&&i()}return l="MEDIASTREAM_TRACK_NOT_FOUND",p.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(a.kind)),s(l)}return l="INVALID_TRACK_TYPE",p.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(l," ").concat(a.kind)),s&&s(l)}return l="NO_STREAM_FOUND",p.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(l)),s&&s(l)},t.replaceTrack=function(a,i,s){var l=d.report.reportApiInvoke(t.sid,{callback:function(b,c){if(b)return s&&s(b);i&&i(c)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return a&&a.kind?(t._cleanupAudioMixing(),a.onended||(a.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(a.kind)?void t.pc.replaceTrack(a,function(){return p.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(a.kind," SUCCESS")),t._replaceMediaStreamTrack(a,function(b){return l(null,b)},l)},function(b){return p.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(a.kind," Failed ").concat(b)),l(b)}):t._replaceMediaStreamTrack(a,function(b){return l(null,b)},l)):l("INVALID_TRACK")},t.setAudioVolume=function(a){var i=d.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(k.checkValidNumber)(a,"level",0,100),t.audioLevel=a,t.player&&t.player.setAudioVolume(a),i()},t.getStats=function(a,i,s){var l=[];l.push(t._getPCStats(s)),l.push(new Promise(function(b){var c={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(R.b)(c,"videoReceiveResolutionHeight",t.videoHeight),Object(R.b)(c,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(_.isSafari)()||Object(_.isFireFox)())&&(Object(R.b)(c,"videoSendResolutionHeight",t.videoHeight),Object(R.b)(c,"videoSendResolutionWidth",t.videoWidth)),(Object(_.isSafari)()||Object(_.isFireFox)())&&t.uplinkStats&&Object(R.b)(c,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),b(c)})),l.push(new Promise(function(b){var c={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(R.b)(c,"accessDelay",t.traffic_stats.access_delay),Object(R.b)(c,"endToEndDelay",t.traffic_stats.e2e_delay),Object(R.b)(c,"videoReceiveDelay",t.traffic_stats.video_delay),Object(R.b)(c,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(R.b)(c,"accessDelay",t.traffic_stats.access_delay),b(c)})),Promise.all(l).then(function(b){for(var c={},r=b.length-1;r>=0;r--){var f=b[r];O()(c,f)}a&&setTimeout(a.bind(t,c),0)}).catch(function(b){i&&setTimeout(i.bind(t,b),0)})},t._getPCStats=function(a){return new Promise(function(i,s){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return s("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats(function(l){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return s("PEER_CONNECTION_STATE_CHANGE");var b=t.pc.isSubscriber?Object(R.c)(l):Object(R.a)(l);return i(b)},a)}).then(function(i){return t.pc.isSubscriber?(Object(_.isFireFox)()||Object(_.isSafari)())&&(i.videoReceiveResolutionHeight&&"0"!==i.videoReceiveResolutionHeight||i.videoReceiveResolutionWidth&&"0"!==i.videoReceiveResolutionWidth||(Object(R.b)(i,"videoReceiveResolutionHeight",t.videoHeight),Object(R.b)(i,"videoReceiveResolutionWidth",t.videoWidth))):((Object(_.isSafari)()||Object(_.isFireFox)())&&(i.videoSendResolutionHeight&&"0"!==i.videoSendResolutionHeight||i.videoSendResolutionWidth&&"0"!==i.videoSendResolutionWidth||(Object(R.b)(i,"videoSendResolutionHeight",t.videoHeight),Object(R.b)(i,"videoSendResolutionWidth",t.videoWidth))),(Object(_.isSafari)()||Object(_.isFireFox)())&&t.uplinkStats&&Object(R.b)(i,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(i)})},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new E.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();p.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else p.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(a,i,s){if(a===t.cameraId)return i&&i();var l={video:O()({},t.videoConstraint,{deviceId:{exact:a}}),audio:!1};p.default.debug("[".concat(t.streamId,"] ").concat(l)),Object(g.b)(l,function(b){try{var c=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=a,t.videoConstraint.deviceId={exact:a},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),U.a.restoreVideoEffect(t).then(function(){i&&i()})};U.a.disableVideoEffect(t).then(function(){var r=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(r=!0),r?t.replaceTrack(b.getVideoTracks()[0],c,s):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(b.getVideoTracks()[0]),c())})}catch(r){return s&&s(r)}},function(b){return s&&s(b)})},t._switchAudioDevice=function(a,i,s){if(a===t.microphoneId)return i&&i();var l={video:!1,audio:O()({},t.audioConstraint,{deviceId:{exact:a}})};p.default.debug("[".concat(t.streamId,"] "),l);var b=t.stream.getAudioTracks()[0];b&&b.stop(),Object(g.b)(l,function(c){var r=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.microphoneId=a,t.audioConstraint.deviceId={exact:a},i&&i()};try{var f=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(f=!0),f?t.replaceTrack(c.getAudioTracks()[0],r,s):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(c.getAudioTracks()[0]),r())}catch(L){return s&&s(L)}},function(c){return s&&s(c)})},t.switchDevice=function(a,i,s,l){var b=d.report.reportApiInvoke(t.sid,{callback:function(Y,ee){if(Y)return l&&l(Y);s&&s(ee)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(k.checkValidString)(i,"deviceId");var c=function(){return t.inSwitchDevice=!1,b()},r=function(Y){t.inSwitchDevice=!1,p.default.error("[".concat(t.streamId,"] "),Y),b(Y)};if(t.inSwitchDevice)return b("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return r("Only the local stream can switch the device.");if(t.screen&&"video"===a)return r("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===a)return r("Video track not exist.");if(!t.audio&&"audio"===a)return r("Audio track not exist.");if(t.videoSource||t.audioSource)return r("The device cannot be switched when using videoSource or audioSource.");var f=!1;for(var L in t.audioMixing.sounds){var C=t.audioMixing.sounds[L];if(C.state!==t.audioMixing.states.IDLE){f=!0;break}}var H=t.audioMixing.audioContextInited;if(H&&f)return r("The device cannot be switched when using audio Mixing.");T.a.getDeviceById(i,function(){if("video"===a)t._switchVideoDevice(i,c,r);else{if("audio"!==a)return r("Invalid type.");t._switchAudioDevice(i,c,r)}},function(){return r("The device does not exist.")})},t},z=function(u){var t=d.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:u&&u.audioSource?u.audioSource.enabled:null,videoTrackEnable:u&&u.videoSource?u.videoSource.enabled:null}}});Object(k.checkValidObject)(u,"StreamSpec");var n=u.streamID,a=u.audio,i=u.video,s=u.screen,l=u.screenAudio,b=u.cameraId,c=u.facingMode,r=u.microphoneId,f=u.mirror,L=u.extensionId,C=u.mediaSource,H=u.audioProcessing,Y=u.optimizationMode;if(!Object(k.isEmpty)(n)&&!Object(E.is32Uint)(n)&&!Object(k.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(k.checkValidBoolean)(a,"audio"),Object(k.checkValidBoolean)(i,"video"),Object(k.isEmpty)(s)||Object(k.checkValidBoolean)(s,"screen"),Object(k.isEmpty)(l)||Object(k.checkValidBoolean)(l,"screenAudio"),Object(k.isEmpty)(b)||Object(k.checkValidString)(b,"cameraId",0,255,!1),Object(k.isEmpty)(c)||Object(k.checkValidEnum)(c,"facingMode",["user","environment","left","right"]),Object(k.isEmpty)(r)||Object(k.checkValidString)(r,"microphoneId",0,255,!1),Object(k.isEmpty)(L)||Object(k.checkValidString)(L,"extensionId"),Object(k.isEmpty)(C)||Object(k.checkValidEnum)(C,"mediaSource",["screen","application","window"]),Object(k.isEmpty)(f)||Object(k.checkValidBoolean)(f,"mirror"),!Object(k.isEmpty)(H)){var ee=H.AGC,ne=H.AEC,fe=H.ANS;Object(k.isEmpty)(ee)||Object(k.checkValidBoolean)(ee,"AGC"),Object(k.isEmpty)(ne)||Object(k.checkValidBoolean)(ne,"AEC"),Object(k.isEmpty)(fe)||Object(k.checkValidBoolean)(fe,"ANS")}Object(k.isEmpty)(Y)||Object(k.checkValidEnum)(Y,"optimizationMode",["detail","motion"]),p.default.debug("Create stream"),!0===l&&!0===a&&p.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),u.screen&&!Y&&(u.optimizationMode="detail");var te=S(u);return t(),te}},function(Z,q,N){"use strict";N.d(q,"a",function(){return J}),N.d(q,"b",function(){return K});var x=N(5),O=N(7),_=N.n(O),w=N(12),o=N.n(w),p=N(17),y=N.n(p),v=N(0),h=N(15),d=N(2);function M(P,S){(null==S||S>P.length)&&(S=P.length);for(var z=0,u=new Array(S);z<S;z++)u[z]=P[z];return u}function R(P){if("undefined"==typeof Symbol||null==P[Symbol.iterator]){if(Array.isArray(P)||(P=function(i,s){if(i){if("string"==typeof i)return T(i,s);var l=Object.prototype.toString.call(i).slice(8,-1);if("Object"===l&&i.constructor&&(l=i.constructor.name),"Map"===l||"Set"===l)return Array.from(l);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return T(i,s)}}(P))){var S=0,z=function(){};return{s:z,n:function(){return S>=P.length?{done:!0}:{done:!1,value:P[S++]}},e:function(i){throw i},f:z}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,t,n=!0,a=!1;return{s:function(){u=P[Symbol.iterator]()},n:function(){var i=u.next();return n=i.done,i},e:function(i){a=!0,t=i},f:function(){try{n||null==u.return||u.return()}finally{if(a)throw t}}}}function T(P,S){(null==S||S>P.length)&&(S=P.length);for(var z=0,u=new Array(S);z<S;z++)u[z]=P[z];return u}var I=N(50),U=N.n(I),V=N(26),W=(N(4),103),J=function(P){var S={};if(S.clientId=P.clientId,P.session_id=W+=1,"undefined"==typeof window||!window.navigator)throw v.default.error("["+S.streamId+"]["+S.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(S.browser="mozilla",S=function(P){var f,S={},z=(mozRTCPeerConnection,mozRTCSessionDescription),u=!1;S.uid=P.uid,S.isVideoMute=P.isVideoMute,S.isAudioMute=P.isAudioMute,S.isSubscriber=P.isSubscriber,S.clientId=P.clientId,S.filterStatsCache=[],S.originStatsCache=[],S.lastTimeGetStats=null,S.pc_config={iceServers:[]},P.iceServers instanceof Array?P.iceServers.map(function(f){0===f.url.indexOf("stun:")&&S.pc_config.iceServers.push({url:f.url})}):(P.stunServerUrl&&(P.stunServerUrl instanceof Array?P.stunServerUrl.map(function(f){"string"==typeof f&&""!==f&&S.pc_config.iceServers.push({url:f})}):"string"==typeof P.stunServerUrl&&""!==P.stunServerUrl&&S.pc_config.iceServers.push({url:P.stunServerUrl})),P.turnServers&&(P.turnServers instanceof Array?P.turnServers.map(function(f){f.udpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.udpport+"?transport=udp"}),"string"==typeof f.tcpport&&""!==f.tcpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.tcpport+"?transport=tcp"}),!0===f.forceturn&&(S.pc_config.iceTransportPolicy="relay")}):v.default.error("[".concat(S.clientId,"] turnServers is not a array")))),void 0===P.audio&&(P.audio=!0),void 0===P.video&&(P.video=!0),S.mediaConstraints={offerToReceiveAudio:P.audio,offerToReceiveVideo:P.video,mozDontOfferDataChannel:!0},S.roapSessionId=103,S.peerConnection=new h.RTCPeerConnection(S.pc_config),S.iceCandidateTimer=setTimeout(function(){S.iceCandidateTimer=null,v.default.debug("[".concat(S.clientId,"]Candidates collected: ").concat(S.iceCandidateCount)),S.moreIceComing&&(S.moreIceComing=!1,S.markActionNeeded())},Object(d.getParameter)("CANDIDATE_TIMEOUT")),S.peerConnection.onicecandidate=function(f){var L,C,H,Y;C=(L=S.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),H=L.match(/a=candidate:.+typ\shost.+\r\n/),Y=L.match(/a=candidate:.+typ\srelay.+\r\n/),null===C&&null===H&&null===Y||void 0!==S.ice||!S.iceCandidateTimer||(clearTimeout(S.iceCandidateTimer),S.iceCandidateTimer=null,S.ice=0,S.moreIceComing=!1,S.markActionNeeded()),S.iceCandidateCount=S.iceCandidateCount+1},S.checkMLineReverseInSDP=function(f){return!(!~f.indexOf("m=audio")||!~f.indexOf("m=video"))&&f.indexOf("m=audio")>f.indexOf("m=video")},S.reverseMLineInSDP=function(f){var L=f.split("m=audio"),C=L[1].split("m=video");return L[0]+"m=video"+C[1]+"m=audio"+C[0]},S.processSignalingMessage=function(f){var L,C=JSON.parse(f);S.incomingMessage=C,"new"===S.state?"OFFER"===C.messageType?(C.sdp=c(C.sdp),S.peerConnection.setRemoteDescription(new z(L={sdp:C.sdp,type:"offer"}),function(){v.default.debug("["+S.clientId+"]setRemoteDescription succeeded")},function(H){v.default.info("["+S.clientId+"]setRemoteDescription failed: "+H.name)}),S.state="offer-received",S.markActionNeeded()):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state):"offer-sent"===S.state?"ANSWER"===C.messageType?(C.sdp=c(C.sdp),C.sdp=C.sdp.replace(/ generation 0/g,""),C.sdp=C.sdp.replace(/ udp /g," UDP "),-1!==C.sdp.indexOf("a=group:BUNDLE")?(C.sdp=C.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),C.sdp=C.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),C.sdp=C.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(C.sdp=C.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),C.sdp=C.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),L={sdp:C.sdp,type:"answer"},P.screen&&"detail"===P.optimizationMode&&(v.default.debug("[".concat(S.client,"] remove screen share abs ext")),C.sdp=r(L.sdp)),S.peerConnection.setRemoteDescription(new z(L),function(){v.default.debug("["+S.clientId+"]setRemoteDescription succeeded")},function(H){v.default.info("["+S.clientId+"]setRemoteDescription failed: "+H)}),S.state="established"):"pr-answer"===C.messageType?S.peerConnection.setRemoteDescription(new z(L={sdp:C.sdp,type:"pr-answer"}),function(){v.default.debug("["+S.clientId+"]setRemoteDescription succeeded")},function(H){v.default.info("["+S.clientId+"]setRemoteDescription failed: "+H.name)}):S.error("offer"===C.messageType?"Not written yet":"Illegal message for this state: "+C.messageType+" in state "+S.state):"established"===S.state&&("OFFER"===C.messageType?(S.peerConnection.setRemoteDescription(new z(L={sdp:C.sdp,type:"offer"}),function(){v.default.debug("["+S.clientId+"]setRemoteDescription succeeded")},function(H){v.default.info("["+S.clientId+"]setRemoteDescription failed: "+H.name)}),S.state="offer-received",S.markActionNeeded()):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state))},S.setRtpSenderParameters=(f=y()(o.a.mark(function L(C){var H,Y,ee;return o.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(H=S.peerConnection.getSenders(),Y=H.find(function(fe){return"video"===fe.track.kind})){ne.next=4;break}return ne.abrupt("return");case 4:return(ee=Y.getParameters()).degradationPreference=C,ne.prev=6,v.default.debug("[".concat(S.clientId,"] setParameters"),ee),ne.next=10,Y.setParameters(ee);case 10:ne.next=15;break;case 12:ne.prev=12,ne.t0=ne.catch(6),v.default.debug("[".concat(S.clientId,"] setParameters failed, ignore"));case 15:case"end":return ne.stop()}},L,null,[[6,12]])})),function(L){return f.apply(this,arguments)});var t={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},n={id:"",type:"",mediaType:"",googCodecName:P.codec?P.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},a={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},i={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},s=0,l=0,b=0;S.getVideoRelatedStats=function(f){S.peerConnection.getStats().then(function(L){var C,H=R(L.values());try{for(H.s();!(C=H.n()).done;){var Y=C.value;if(S.isSubscriber){if(("inbound-rtp"===Y.type||"inboundrtp"===Y.type)&&"video"===Y.mediaType){if(!S.lastReport)return void(S.lastReport=Y);f&&f({browser:"firefox",mediaType:"video",peerId:S.uid,isVideoMute:S.isVideoMute,frameRateReceived:Math.round(Y.framerateMean)+"",frameRateDecoded:Y.framesDecoded-S.lastReport.framesDecoded+"",bytesReceived:Y.bytesReceived+"",packetsReceived:Y.packetsReceived+"",packetsLost:Y.packetsLost+""}),S.lastReport=Y}}else if(("outbound-rtp"===Y.type||"outboundrtp"===Y.type)&&"video"===Y.mediaType){if(!S.lastReport)return void(S.lastReport=Y);f&&f({mediaType:"video",isVideoMute:S.isVideoMute,frameRateInput:Math.round(Y.framerateMean)+"",frameRateSent:Y.framesEncoded-S.lastReport.framesEncoded+""}),S.lastReport=Y}}}catch(ee){H.e(ee)}finally{H.f()}})},S.getAudioRelatedStats=function(f){S.peerConnection.getStats().then(function(L){var C,H=R(L.values());try{for(H.s();!(C=H.n()).done;){var Y=C.value;S.isSubscriber&&("inbound-rtp"!==Y.type&&"inboundrtp"!==Y.type||"audio"!==Y.mediaType||f&&f({browser:"firefox",mediaType:"audio",peerId:S.uid,isAudioMute:S.isAudioMute,frameDropped:Y.packetsLost+"",frameReceived:Y.packetsReceived+"",googJitterReceived:Y.jitter+"",bytesReceived:Y.bytesReceived+"",packetsReceived:Y.packetsReceived+"",packetsLost:Y.packetsLost+""}))}}catch(ee){H.e(ee)}finally{H.f()}})},S.getStatsRate=function(f){S.getStats(function(L){L.forEach(function(C){}),f(L)})},S.getStats=function(f,L){L=(L=L||500)>500?500:L,S.lastTimeGetStats&&Date.now()-S.lastTimeGetStats<L?f&&f(S.filterStatsCache,S.originStatsCache):this._getStats(function(C,H){S.filterStatsCache=C,S.originStatsCache=H,S.lastTimeGetStats=Date.now(),f&&f(C,H)})},S._getStats=function(f){S.peerConnection.getStats().then(function(L){var C,H=[],Y=R(L.values());try{for(Y.s();!(C=Y.n()).done;){var ee=C.value;H.push(ee),"outbound-rtp"!==ee.type&&"outboundrtp"!==ee.type||"video"!==ee.mediaType||-1!==ee.id.indexOf("rtcp")||(n.id=ee.id,n.type=ee.type,n.mediaType=ee.mediaType,n.bytesSent=ee.bytesSent?ee.bytesSent+"":"0",n.packetsSent=ee.packetsSent?ee.packetsSent+"":"0",n.googPlisReceived=ee.pliCount?ee.pliCount+"":"0",n.googNacksReceived=ee.nackCount?ee.nackCount+"":"0",n.googFirsReceived=ee.firCount?ee.firCount+"":"0",n.googFrameRateSent=ee.framerateMean?Math.round(ee.framerateMean)+"":"0"),"outbound-rtp"!==ee.type&&"outboundrtp"!==ee.type||"audio"!==ee.mediaType||-1!==ee.id.indexOf("rtcp")||(t.id=ee.id,t.type=ee.type,t.mediaType=ee.mediaType,t.bytesSent=ee.bytesSent?ee.bytesSent+"":"0",t.packetsSent=ee.packetsSent?ee.packetsSent+"":"0",P.agoraStream.local&&(t.audioInputLevel=Math.round(32767*P.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ee.type&&"inboundrtp"!==ee.type||"audio"!==ee.mediaType||ee.isRemote||-1!==ee.id.indexOf("rtcp")||(a.id=ee.id,a.type=ee.type,a.mediaType=ee.mediaType,a.bytesReceived=ee.bytesReceived?ee.bytesReceived+"":"0",a.packetsLost=ee.packetsLost?ee.packetsLost+"":"0",a.packetsReceived=ee.packetsReceived?ee.packetsReceived+"":"0",a.googJitterReceived=ee.jitter?ee.jitter+"":"0",P.agoraStream.local||(a.audioOutputLevel=Math.round(32767*P.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ee.type&&"inboundrtp"!==ee.type||"video"!==ee.mediaType||ee.isRemote||-1!==ee.id.indexOf("rtcp")||(i.id=ee.id,i.type=ee.type,i.mediaType=ee.mediaType,i.bytesReceived=ee.bytesReceived?ee.bytesReceived+"":"0",i.googFrameRateReceived=ee.framerateMean?Math.round(ee.framerateMean)+"":"0",i.googFramesDecoded=ee.framesDecoded?ee.framesDecoded+"":"0",Date.now()-b>=1e3?(i.googFrameRateDecoded=(ee.framesDecoded-s)/((Date.now()-b)/1e3),i.googFrameRateDecoded=Math.round(Math.max(0,i.googFrameRateDecoded)),b=Date.now(),l=i.googFrameRateDecoded,s=ee.framesDecoded,i.googFrameRateDecoded=i.googFrameRateDecoded.toString()):i.googFrameRateDecoded=l.toString(),i.packetsLost=ee.packetsLost?ee.packetsLost+"":"0",i.packetsReceived=ee.packetsReceived?ee.packetsReceived+"":"0",i.googJitterBufferMs=ee.jitter?ee.jitter+"":"0",i.googNacksSent=ee.nackCount?ee.nackCount+"":"0",i.googPlisSent=ee.pliCount?ee.pliCount+"":"0",i.googFirsSent=ee.firCount?ee.firCount+"":"0"),-1!==ee.id.indexOf("outbound_rtcp_video")&&(n.packetsLost=ee.packetsLost?ee.packetsLost+"":"0")}}catch(fe){Y.e(fe)}finally{Y.f()}var ne=[n,t,a,i];ne.push({id:"time",startTime:S.connectedTime,timestamp:new Date}),f(ne,H)},function(L){v.default.error("["+S.clientId+"]"+L)})},S.addStream=function(f){u=!0,S.peerConnection.addStream(f),S.markActionNeeded()},S.removeStream=function(){S.markActionNeeded()},S.close=function(){S.state="closed",S.peerConnection.close()},S.markActionNeeded=function(){S.actionNeeded=!0,S.doLater(function(){S.onstablestate()})},S.doLater=function(f){window.setTimeout(f,1)},S.onstablestate=function(){if(S.actionNeeded){if("new"===S.state||"established"===S.state)u&&(S.mediaConstraints=void 0),S.peerConnection.createOffer(function(L){if(L.sdp=c(L.sdp),L.sdp=L.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),L.sdp!==S.prevOffer)return S.peerConnection.setLocalDescription(L),S.state="preparing-offer",void S.markActionNeeded();v.default.debug("["+S.clientId+"]Not sending a new offer")},function(L){v.default.debug("["+S.clientId+"]Ups! create offer failed ",L)},S.mediaConstraints);else if("preparing-offer"===S.state){if(S.moreIceComing)return;S.prevOffer=S.peerConnection.localDescription.sdp,S.offerCandidates=S.prevOffer.match(/a=candidate.+\r\n/g)||[],S.offerCandidates.length||(P.isCloudProxy3&&P.onNoIceCandidate&&P.onNoIceCandidate(),v.default.warning("[".concat(S.clientId,"]No Ice Candidate generated")),Object(d.getParameter)("SHIM_CANDIDATE")?(v.default.debug("Shimming fake candidate"),S.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):v.default.error("[".concat(S.clientId,"]None Ice Candidate not allowed"))),S.prevOffer=S.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),S.sendMessage("OFFER",S.prevOffer),S.state="offer-sent"}else if("offer-received"===S.state)S.peerConnection.createAnswer(function(L){if(S.peerConnection.setLocalDescription(L),S.state="offer-received-preparing-answer",S.iceStarted)S.markActionNeeded();else{var C=new Date;v.default.debug("["+S.clientId+"]"+C.getTime()+": Starting ICE in responder"),S.iceStarted=!0}},function(){v.default.debug("["+S.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===S.state){if(S.moreIceComing)return;S.sendMessage("ANSWER",S.peerConnection.localDescription.sdp),S.state="established"}else S.debug("Dazed and confused in state "+S.state+", stopping here");S.actionNeeded=!1}},S.sendMessage=function(f,L){var C={};C.messageType=f,C.sdp=L,"OFFER"===f?(C.offererSessionId=S.sessionId,C.answererSessionId=S.otherSessionId,C.seq=S.sequenceNumber+=1,C.tiebreaker=Math.floor(429496723*Math.random()+1)):(C.offererSessionId=S.incomingMessage.offererSessionId,C.answererSessionId=S.sessionId,C.seq=S.incomingMessage.seq),S.onsignalingmessage(JSON.stringify(C))},S._getSender=function(f){if(S.peerConnection&&S.peerConnection.getSenders){var L=S.peerConnection.getSenders().find(function(C){return C.track.kind==f});if(L)return L}return null},S.hasSender=function(f){return!!S._getSender(f)},S.replaceTrack=function(f,L,C){var H=S._getSender(f.kind);if(!H)return C("NO_SENDER_FOUND");try{H.replaceTrack(f)}catch(Y){return C&&C(Y)}setTimeout(function(){return L&&L()},50)},S.error=function(f){throw"Error in RoapOnJsep: "+f},S.sessionId=S.roapSessionId+=1,S.sequenceNumber=0,S.actionNeeded=!1,S.iceStarted=!1,S.moreIceComing=!0,S.iceCandidateCount=0,S.onsignalingmessage=P.callback,S.peerConnection.ontrack=function(f){S.onaddstream&&S.onaddstream(f,"ontrack")},S.peerConnection.onremovestream=function(f){S.onremovestream&&S.onremovestream(f)},S.peerConnection.oniceconnectionstatechange=function(f){"connected"===f.currentTarget.iceConnectionState&&(S.connectedTime=new Date),S.oniceconnectionstatechange&&S.oniceconnectionstatechange(f.currentTarget.iceConnectionState)};var c=function(f){var L;if(P.video&&P.maxVideoBW&&(null==(L=f.match(/m=video.*\r\n/))&&(L=f.match(/m=video.*\n/)),L&&L.length>0)){var C=L[0]+"b=TIAS:"+1e3*P.maxVideoBW+"\r\n";f=f.replace(L[0],C)}return P.audio&&P.maxAudioBW&&(null==(L=f.match(/m=audio.*\r\n/))&&(L=f.match(/m=audio.*\n/)),L&&L.length>0)&&(f=f.replace(L[0],C=L[0]+"b=TIAS:"+1e3*P.maxAudioBW+"\r\n")),f},r=function(f){return(f=f.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return S.onaddstream=null,S.onremovestream=null,S.state="new",S.markActionNeeded(),S}(P)):"iOS"===x.getBrowserOS()||x.isSafari()?(v.default.debug("["+S.streamId+"]["+S.clientId+"]Safari"),(S=function(P){var S={},z=h.RTCPeerConnection;S.uid=P.uid,S.isVideoMute=P.isVideoMute,S.isAudioMute=P.isAudioMute,S.isSubscriber=P.isSubscriber,S.clientId=P.clientId,S.filterStatsCache=[],S.originStatsCache=[],S.lastTimeGetStats=null,S.pc_config={iceServers:[],bundlePolicy:"max-bundle"},S.con={optional:[{DtlsSrtpKeyAgreement:!0}]},P.iceServers instanceof Array?S.pc_config.iceServers=P.iceServers:(P.stunServerUrl&&(P.stunServerUrl instanceof Array?P.stunServerUrl.map(function(f){"string"==typeof f&&""!==f&&S.pc_config.iceServers.push({url:f})}):"string"==typeof P.stunServerUrl&&""!==P.stunServerUrl&&S.pc_config.iceServers.push({url:P.stunServerUrl})),P.turnServers&&(P.turnServers instanceof Array?P.turnServers.map(function(f){f.udpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.udpport+"?transport=udp"}),"string"==typeof f.tcpport&&""!==f.tcpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.tcpport+"?transport=tcp"}),!0===f.forceturn&&(S.pc_config.iceTransportPolicy="relay")}):v.default.error("[".concat(S.clientId,"] turnServers is not a array")))),void 0===P.audio&&(P.audio=!0),void 0===P.video&&(P.video=!0),S.mediaConstraints={mandatory:{OfferToReceiveVideo:P.video,OfferToReceiveAudio:P.audio}},S.roapSessionId=103;try{S.pc_config.sdpSemantics=Object(d.getParameter)("PLAN"),S.peerConnection=new z(S.pc_config,S.con)}catch(f){delete S.pc_config.sdpSemantics,S.peerConnection=new z(S.pc_config,S.con)}S.iceCandidateTimer=setTimeout(function(){S.iceCandidateTimer=null,S.moreIceComing&&(S.moreIceComing=!1,S.markActionNeeded())},Object(d.getParameter)("CANDIDATE_TIMEOUT")),S.peerConnection.onicecandidate=function(f){var L,C,H,Y;C=(L=S.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),H=L.match(/a=candidate:.+typ\shost.+\r\n/),Y=L.match(/a=candidate:.+typ\srelay.+\r\n/),0===S.iceCandidateCount&&(S.timeout=setTimeout(function(){S.moreIceComing&&(S.moreIceComing=!1,S.markActionNeeded())},1e3)),null===C&&null===H&&null===Y||void 0!==S.ice||!S.iceCandidateTimer||(clearTimeout(S.iceCandidateTimer),S.iceCandidateTimer=null,S.ice=0,S.moreIceComing=!1,S.markActionNeeded()),S.iceCandidateCount=S.iceCandidateCount+1};var f,u=function(f){return P.screen&&(f=f.replace("a=x-google-flag:conference\r\n","")),f},t=function(f){var L;return(L=f.match(/m=video.*\r\n/))&&P.minVideoBW&&P.maxVideoBW&&(f=f.replace(L[0],L[0]+"b=AS:"+P.maxVideoBW+"\r\n"),v.default.debug("["+S.clientId+"]Set Video Bitrate - min:"+P.minVideoBW+" max:"+P.maxVideoBW)),(L=f.match(/m=audio.*\r\n/))&&P.maxAudioBW&&(f=f.replace(L[0],L[0]+"b=AS:"+P.maxAudioBW+"\r\n")),f};S.processSignalingMessage=function(f){var L,C=JSON.parse(f);S.incomingMessage=C,"new"===S.state?"OFFER"===C.messageType?(L={sdp:C.sdp,type:"offer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)),S.state="offer-received",S.markActionNeeded()):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state):"offer-sent"===S.state?"ANSWER"===C.messageType?((L={sdp:C.sdp,type:"answer"}).sdp=u(L.sdp),L.sdp=t(L.sdp),L.sdp=L.sdp.replace(/a=x-google-flag:conference\r\n/g,""),P.screen&&"detail"===P.optimizationMode&&(v.default.debug("[".concat(S.client,"] remove screen share abs ext")),L.sdp=L.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)),S.state="established"):"pr-answer"===C.messageType?(L={sdp:C.sdp,type:"pr-answer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L))):S.error("offer"===C.messageType?"Not written yet":"Illegal message for this state: "+C.messageType+" in state "+S.state):"established"===S.state&&("OFFER"===C.messageType?(L={sdp:C.sdp,type:"offer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)),S.state="offer-received",S.markActionNeeded()):"ANSWER"===C.messageType?((L={sdp:C.sdp,type:"answer"}).sdp=u(L.sdp),L.sdp=t(L.sdp),S.peerConnection.setRemoteDescription(new RTCSessionDescription(L))):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state))},S.setRtpSenderParameters=(f=y()(o.a.mark(function L(C){return o.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:S.degradation=C;case 1:case"end":return H.stop()}},L)})),function(L){return f.apply(this,arguments)}),S._setRtpSenderParameters=function(){var f=y()(o.a.mark(function L(C){var H,Y,ee;return o.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(H=S.peerConnection.getSenders(),Y=H.find(function(fe){return fe&&fe.track&&"video"===fe.track.kind})){ne.next=4;break}return ne.abrupt("return");case 4:return(ee=Y.getParameters()).degradationPreference=C,ne.prev=6,v.default.debug("[".concat(S.clientId,"] setParameters"),ee),ne.next=10,Y.setParameters(ee);case 10:ne.next=15;break;case 12:ne.prev=12,ne.t0=ne.catch(6),v.default.debug("[".concat(S.clientId,"] setParameters failed, ignore"));case 15:case"end":return ne.stop()}},L,null,[[6,12]])}));return function(L){return f.apply(this,arguments)}}();var n={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"",type:"",mediaType:"",googCodecName:P.codec?P.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},i={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},s={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},l={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},b=0,c=0,r=0;return S.isRemoteVideoStats=function(f){return!!(f.frameHeight&&f.frameWidth&&f.remoteSource)},S.getVideoRelatedStats=function(f){S.peerConnection.getStats().then(function(L){L.forEach(function(C){if(S.isSubscriber){var H={peerId:S.uid,mediaType:"video",isVideoMute:S.isVideoMute};if("track"===C.type&&(~C.id.indexOf("video")||~C.trackIdentifier.indexOf("v")||S.isRemoteVideoStats(C))){if(!S.lastReport)return void(S.lastReport=C);H.frameRateReceived=C.framesReceived-S.lastReport.framesReceived+"",H.frameRateDecoded=C.framesDecoded-S.lastReport.framesDecoded+"",S.lastReport=C}"inbound-rtp"===C.type&&~C.id.indexOf("Video")&&(H.bytesReceived=C.bytesReceived+"",H.packetsReceived=C.packetsReceived+"",H.packetsLost=C.packetsLost+""),f&&f(H)}else if("outbound-rtp"===C.type&&~C.id.indexOf("Video")){if(!S.lastReport)return void(S.lastReport=C);f&&f({mediaType:"video",isVideoMute:S.isVideoMute,frameRateInput:P.maxFrameRate+"",frameRateSent:C.framesEncoded-S.lastReport.framesEncoded+""}),S.lastReport=C}})})},S.getAudioRelatedStats=function(f){S.peerConnection.getStats().then(function(L){L.forEach(function(C){S.isSubscriber&&"inbound-rtp"===C.type&&~C.id.indexOf("Audio")&&f&&f({peerId:S.uid,mediaType:"audio",isAudioMute:S.isAudioMute,frameDropped:C.packetsLost+"",frameReceived:C.packetsReceived+"",googJitterReceived:C.jitter+"",bytesReceived:C.bytesReceived+"",packetsReceived:C.packetsReceived+"",packetsLost:C.packetsLost+""})})})},S.getStatsRate=function(f){S.getStats(function(L){L.forEach(function(C){"outbound-rtp"===C.type&&"video"===C.mediaType&&C.googFramesEncoded&&(C.googFrameRateSent=Math.ceil((C.googFramesEncoded-b)/3).toString(),b=C.googFramesEncoded),"inbound-rtp"===C.type&&-1!=C.id.indexOf("55543")&&(C.googFrameRateReceived&&(C.googFrameRateReceived=Math.ceil((C.googFrameReceived-r)/3).toString(),r=C.googFrameReceived),C.googFrameRateDecoded&&(C.googFrameRateDecoded=Math.ceil((C.googFramesDecoded-c)/3).toString(),c=C.googFramesDecoded))}),f(L)})},S.getStats=function(f,L){L=(L=L||500)>500?500:L,S.lastTimeGetStats&&Date.now()-S.lastTimeGetStats<L?f&&f(S.filterStatsCache,S.originStatsCache):this._getStats(function(C,H){S.filterStatsCache=C,S.originStatsCache=H,S.lastTimeGetStats=Date.now(),f&&f(C,H)})},S._getStats=function(f){var L=[];S.peerConnection.getStats().then(function(C){C.forEach(function(Y){var ee;L.push(Y),"outbound-rtp"===Y.type&&"audio"===Y.mediaType&&(n.id=Y.id,n.type=Y.type,n.mediaType=Y.mediaType,n.bytesSent=Y.bytesSent?Y.bytesSent+"":"0",n.packetsSent=Y.packetsSent?Y.packetsSent+"":"0",P.agoraStream.local&&(n.audioInputLevel=Math.round(32767*P.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===Y.type&&"video"===Y.mediaType&&(a.id=Y.id,a.type=Y.type,a.mediaType=Y.mediaType,a.bytesSent=Y.bytesSent?Y.bytesSent+"":"0",a.packetsSent=Y.packetsSent?Y.packetsSent+"":"0",a.googPlisReceived=Y.pliCount?Y.pliCount+"":"0",a.googNacksReceived=Y.nackCount?Y.nackCount+"":"0",a.googFirsReceived=Y.firCount?Y.firCount+"":"0",a.googFramesEncoded=Y.framesEncoded?Y.framesEncoded+"":"0",(ee=C.get(Y.trackId))&&(a.googFrameHeightSent=ee.frameHeight&&ee.frameHeight.toString(),a.googFrameWidthSent=ee.frameWidth&&ee.frameWidth.toString())),"inbound-rtp"!==Y.type||-1==Y.id.indexOf("44444")&&"audio"!==Y.mediaType||(i.id=Y.id,i.type=Y.type,i.mediaType="audio",i.packetsReceived=Y.packetsReceived?Y.packetsReceived+"":"0",i.bytesReceived=Y.bytesReceived?Y.bytesReceived+"":"0",i.packetsLost=Y.packetsLost?Y.packetsLost+"":"0",i.packetsReceived=Y.packetsReceived?Y.packetsReceived+"":"0",i.googJitterReceived=Y.jitter?Y.jitter+"":"0",(ee=C.get(Y.trackId))&&(i.audioOutputLevel=ee.audioLevel&&Math.round(32767*ee.audioLevel).toString()),P.agoraStream.local||i.audioOutputLevel||(i.audioOutputLevel=Math.round(32767*P.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==Y.type||-1==Y.id.indexOf("55543")&&"video"!==Y.mediaType||(s.id=Y.id,s.type=Y.type,s.mediaType="video",s.packetsReceived=Y.packetsReceived?Y.packetsReceived+"":"0",s.bytesReceived=Y.bytesReceived?Y.bytesReceived+"":"0",s.packetsLost=Y.packetsLost?Y.packetsLost+"":"0",s.googJitterBufferMs=Y.jitter?Y.jitter+"":"0",s.googNacksSent=Y.nackCount?Y.nackCount+"":"0",s.googPlisSent=Y.pliCount?Y.pliCount+"":"0",s.googFirsSent=Y.firCount?Y.firCount+"":"0",(ee=C.get(Y.trackId))&&(s.googFrameHeightReceived=ee.frameHeight&&ee.frameHeight.toString(),s.googFrameWidthReceived=ee.frameWidth&&ee.frameWidth.toString(),s.googFrameReceived=ee.framesReceived&&ee.framesReceived.toString(),s.googFramesDecoded=ee.framesDecoded&&ee.framesDecoded.toString())),"candidate-pair"===Y.type&&(0==Y.availableIncomingBitrate?l.googAvailableSendBandwidth=Y.availableOutgoingBitrate+"":l.googAvailableReceiveBandwidth=Y.availableIncomingBitrate+"")});var H=[l,n,a,i,s];H.push({id:"time",startTime:S.connectedTime,timestamp:new Date}),f(H,L)}).catch(function(C){v.default.error("["+S.clientId+"] ",C)})},S.addTrack=function(f,L){S.peerConnection.addTrack(f,L)},S.removeTrack=function(f,L){var C=S.peerConnection.getSenders().find(function(H){return H.track==f});C.replaceTrack(null),S.peerConnection.removeTrack(C)},S.addStream=function(f){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?f.getTracks().forEach(function(L){return S.peerConnection.addTrack(L,f)}):S.peerConnection.addStream(f),S.markActionNeeded()},S.removeStream=function(){S.markActionNeeded()},S.close=function(){S.state="closed",S.peerConnection.close()},S.markActionNeeded=function(){S.actionNeeded=!0,S.doLater(function(){S.onstablestate()})},S.doLater=function(f){window.setTimeout(f,1)},S.onstablestate=function(){if(S.actionNeeded){if("new"===S.state||"established"===S.state)P.isSubscriber&&(S.peerConnection.addTransceiver("audio",{direction:"recvonly"}),S.peerConnection.addTransceiver("video",{direction:"recvonly"})),S.peerConnection.createOffer(S.mediaConstraints).then(function(L){if(L.sdp=t(L.sdp),P.isSubscriber||(L.sdp=L.sdp.replace(/a=.*video-orientation\r\n/g,"")),L.sdp!==S.prevOffer)return S.peerConnection.setLocalDescription(L),S.state="preparing-offer",void S.markActionNeeded();v.default.debug("["+S.clientId+"]Not sending a new offer")}).catch(function(L){v.default.debug("["+S.clientId+"]peer connection create offer failed ",L)});else if("preparing-offer"===S.state){if(S.moreIceComing)return;S.prevOffer=S.peerConnection.localDescription.sdp,S.offerCandidates=S.prevOffer.match(/a=candidate.+\r\n/g)||[],S.offerCandidates.length||(v.default.warning("[".concat(S.clientId,"]No Ice Candidate generated")),P.isCloudProxy3&&P.onNoIceCandidate&&P.onNoIceCandidate(),Object(d.getParameter)("SHIM_CANDIDATE")?(v.default.debug("Shimming fake candidate"),S.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):v.default.error("[".concat(S.clientId,"]None Ice Candidate not allowed"))),S.prevOffer=S.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),S.sendMessage("OFFER",S.prevOffer),S.state="offer-sent"}else if("offer-received"===S.state)S.peerConnection.createAnswer(function(L){if(S.peerConnection.setLocalDescription(L),S.state="offer-received-preparing-answer",S.iceStarted)S.markActionNeeded();else{var C=new Date;v.default.debug("["+S.clientId+"]"+C.getTime()+": Starting ICE in responder"),S.iceStarted=!0}},function(L){v.default.debug("["+S.clientId+"]peer connection create answer failed ",L)},S.mediaConstraints);else if("offer-received-preparing-answer"===S.state){if(S.moreIceComing)return;S.sendMessage("ANSWER",S.peerConnection.localDescription.sdp),S.state="established"}else S.debug("Dazed and confused in state "+S.state+", stopping here");S.actionNeeded=!1}},S.sendMessage=function(f,L){var C={};C.messageType=f,C.sdp=L,"OFFER"===f?(C.offererSessionId=S.sessionId,C.answererSessionId=S.otherSessionId,C.seq=S.sequenceNumber+=1,C.tiebreaker=Math.floor(429496723*Math.random()+1)):(C.offererSessionId=S.incomingMessage.offererSessionId,C.answererSessionId=S.sessionId,C.seq=S.incomingMessage.seq),S.onsignalingmessage(JSON.stringify(C))},S._getSender=function(f){if(S.peerConnection&&S.peerConnection.getSenders){var L=S.peerConnection.getSenders().find(function(C){return C.track.kind==f});if(L)return L}return null},S.hasSender=function(f){return!!S._getSender(f)},S.replaceTrack=function(f,L,C){var H=S._getSender(f.kind);if(!H)return C("NO_SENDER_FOUND");try{H.replaceTrack(f)}catch(Y){return C&&C(Y)}setTimeout(function(){return L&&L()},50)},S.error=function(f){throw"Error in RoapOnJsep: "+f},S.sessionId=S.roapSessionId+=1,S.sequenceNumber=0,S.actionNeeded=!1,S.iceStarted=!1,S.moreIceComing=!0,S.iceCandidateCount=0,S.onsignalingmessage=P.callback,S.peerConnection.ontrack=function(f){console.log("!!! ontrack, ",f.track.kind,f.track),S.onaddstream&&S.onaddstream(f,"ontrack")},S.peerConnection.onremovestream=function(f){S.onremovestream&&S.onremovestream(f)},S.peerConnection.oniceconnectionstatechange=function(f){"connected"===f.currentTarget.iceConnectionState&&(S.connectedTime=new Date,S._setRtpSenderParameters(S.degradation)),S.oniceconnectionstatechange&&S.oniceconnectionstatechange(f.currentTarget.iceConnectionState)},S.renegotiate=function(){S.isSubscriber||(v.default.debug("[".concat(S.uid,"]"),"renegotiating"),void 0!==S.prevOffer&&S.peerConnection.createOffer().then(function(f){return f.sdp=f.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),f.sdp=u(f.sdp),f.sdp=t(f.sdp),S.peerConnection.setLocalDescription(f)}).then(function(){S.onnegotiationneeded&&S.onnegotiationneeded(S.peerConnection.localDescription.sdp)}).catch(function(f){console.log("createOffer error: ",f)}))},S.isSubscriber||(S.peerConnection.onnegotiationneeded=S.renegotiate),S.onaddstream=null,S.onremovestream=null,S.state="new",S.markActionNeeded(),S}(P)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?S=new U.a(P):(S=function(P){var S={},z=h.RTCPeerConnection;S.uid=P.uid,S.isVideoMute=P.isVideoMute,S.isAudioMute=P.isAudioMute,S.isSubscriber=P.isSubscriber,S.clientId=P.clientId,S.filterStatsCache=[],S.originStatsCache=[],S.lastTimeGetStats=null,S.pc_config={iceServers:[]};var u={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},t={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:P.codec?P.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},n={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},a={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},i={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};S.con={optional:[{DtlsSrtpKeyAgreement:!0}]},P.iceServers instanceof Array?S.pc_config.iceServers=P.iceServers:(P.stunServerUrl&&(P.stunServerUrl instanceof Array?P.stunServerUrl.map(function(f){"string"==typeof f&&""!==f&&S.pc_config.iceServers.push({url:f})}):"string"==typeof P.stunServerUrl&&""!==P.stunServerUrl&&S.pc_config.iceServers.push({url:P.stunServerUrl})),P.turnServers&&(P.turnServers instanceof Array?P.turnServers.map(function(f){f.udpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.udpport+"?transport=udp"}),"string"==typeof f.tcpport&&""!==f.tcpport&&S.pc_config.iceServers.push({username:f.username,credential:f.credential,credentialType:"password",urls:(f.useTurns?"turns:":"turn:")+f.url+":"+f.tcpport+"?transport=tcp"}),!0===f.forceturn&&(S.pc_config.iceTransportPolicy="relay")}):v.default.error("[".concat(S.clientId,"] turnServers is not a array")))),void 0===P.audio&&(P.audio=!0),void 0===P.video&&(P.video=!0),S.mediaConstraints={mandatory:{OfferToReceiveVideo:P.video,OfferToReceiveAudio:P.audio}},S.roapSessionId=103;try{S.pc_config.sdpSemantics=Object(d.getParameter)("PLAN"),S.peerConnection=new z(S.pc_config,S.con)}catch(f){delete S.pc_config.sdpSemantics,S.peerConnection=new z(S.pc_config,S.con);var s=S.peerConnection.getConfiguration();s.sdpSemantics&&Object(d.setParameter)("PLAN",s.sdpSemantics)}S.iceCandidateTimer=setTimeout(function(){S.iceCandidateTimer=null,v.default.debug("[".concat(S.clientId,"]Candidates collected: ").concat(S.iceCandidateCount)),S.moreIceComing&&(S.moreIceComing=!1,S.markActionNeeded())},Object(d.getParameter)("CANDIDATE_TIMEOUT")),S.peerConnection.onicecandidate=function(f){var L,C,H,Y;C=(L=S.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),H=L.match(/a=candidate:.+typ\shost.+\r\n/),Y=L.match(/a=candidate:.+typ\srelay.+\r\n/),null===C&&null===H&&null===Y||void 0!==S.ice||!S.iceCandidateTimer||(clearTimeout(S.iceCandidateTimer),S.iceCandidateTimer=null,S.ice=0,S.moreIceComing=!1,S.markActionNeeded()),S.iceCandidateCount=S.iceCandidateCount+1};var f,l=function(f){return f.replace("a=x-google-flag:conference\r\n","")},b=function(f){var L,C;if((L=f.match(/m=video.*\r\n/))&&P.minVideoBW&&P.maxVideoBW){C=L[0]+"b=AS:"+P.maxVideoBW+"\r\n";var H=0,Y=0;"h264"===P.codec?(H=f.search(/a=rtpmap:(\d+) H264\/90000\r\n/),Y=f.search(/H264\/90000\r\n/)):"vp8"===P.codec?(H=f.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),Y=f.search(/VP8\/90000\r\n/)):"vp9"===P.codec&&(H=f.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),Y=f.search(/VP9\/90000\r\n/)),-1!==H&&-1!==Y&&Y-H>10&&(C=C+"a=fmtp:"+f.slice(H+9,Y-1)+" x-google-min-bitrate="+P.minVideoBW+"\r\n"),f=(f=f.replace(L[0],C)).replace(/42001f/g,"42e01f"),v.default.debug("["+S.clientId+"]Set Video Bitrate - min:"+P.minVideoBW+" max:"+P.maxVideoBW)}return(L=f.match(/m=audio.*\r\n/))&&P.maxAudioBW&&(f=f.replace(L[0],C=L[0]+"b=AS:"+P.maxAudioBW+"\r\n")),f};S.processSignalingMessage=function(f){var L,C=JSON.parse(f);S.incomingMessage=C,"new"===S.state?"OFFER"===C.messageType?(L={sdp:C.sdp,type:"offer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)).catch(function(H){}),S.state="offer-received",S.markActionNeeded()):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state):"offer-sent"===S.state?"ANSWER"===C.messageType?((L={sdp:C.sdp,type:"answer"}).sdp=l(L.sdp),L.sdp=b(L.sdp),P.screen&&"detail"===P.optimizationMode&&(v.default.debug("[".concat(S.client,"] remove screen share abs ext")),L.sdp=L.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),P.isSubscriber&&(L.sdp=L.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)).catch(function(H){}),S.state="established"):"pr-answer"===C.messageType?(L={sdp:C.sdp,type:"pr-answer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)).catch(function(H){})):S.error("offer"===C.messageType?"Not written yet":"Illegal message for this state: "+C.messageType+" in state "+S.state):"established"===S.state&&("OFFER"===C.messageType?(L={sdp:C.sdp,type:"offer"},S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)).catch(function(H){}),S.state="offer-received",S.markActionNeeded()):"ANSWER"===C.messageType?((L={sdp:C.sdp,type:"answer"}).sdp=l(L.sdp),L.sdp=b(L.sdp),S.peerConnection.setRemoteDescription(new RTCSessionDescription(L)).catch(function(H){})):S.error("Illegal message for this state: "+C.messageType+" in state "+S.state))},S.setRtpSenderParameters=(f=y()(o.a.mark(function L(C){var H,Y,ee;return o.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(H=S.peerConnection.getSenders(),console.log("senders",H),Y=H.find(function(fe){return"video"===fe.track.kind})){ne.next=5;break}return ne.abrupt("return");case 5:return(ee=Y.getParameters()).degradationPreference=C,ne.prev=7,v.default.debug("[".concat(S.clientId,"] setParameters"),ee),ne.next=11,Y.setParameters(ee);case 11:ne.next=16;break;case 13:ne.prev=13,ne.t0=ne.catch(7),v.default.debug("[".concat(S.clientId,"] setParameters failed, ignore"));case 16:case"end":return ne.stop()}},L,null,[[7,13]])})),function(L){return f.apply(this,arguments)});var c=0,r=0;return S.getVideoRelatedStats=function(f){S.getStats(function(L){L.forEach(function(C){if(S.isSubscriber){if("video"===C.mediaType&&C.id&&~C.id.indexOf("recv")){if(x.isChromeKernel()&&+x.getBrowserVersion()>=76){var Y=+C.googFramesDecoded-r;S._setStat(a,"googFrameRateReceived",+C.googFramesReceived-c),S._setStat(a,"googFrameRateDecoded",Y),S._setStat(a,"googFrameRateOutput",Y),c=+C.googFramesReceived,r=+C.googFramesDecoded}f&&f({mediaType:"video",peerId:S.uid,isVideoMute:S.isVideoMute,frameRateReceived:C.googFrameRateReceived,frameRateDecoded:C.googFrameRateDecoded,bytesReceived:C.bytesReceived,packetsReceived:C.packetsReceived,packetsLost:C.packetsLost})}}else"video"===C.mediaType&&C.id&&~C.id.indexOf("send")&&f&&f({mediaType:"video",isVideoMute:S.isVideoMute,frameRateInput:C.googFrameRateInput,frameRateSent:C.googFrameRateSent,googRtt:C.googRtt})})})},S.getAudioRelatedStats=function(f){S.getStats(function(L){L.forEach(function(C){S.isSubscriber&&"audio"===C.mediaType&&C.id&&~C.id.indexOf("recv")&&f&&f({mediaType:"audio",peerId:S.uid,isAudioMute:S.isAudioMute,frameDropped:parseInt(C.googDecodingPLC)+parseInt(C.googDecodingPLCCNG)+"",frameReceived:C.googDecodingCTN,googJitterReceived:C.googJitterReceived,bytesReceived:C.bytesReceived,packetsReceived:C.packetsReceived,packetsLost:C.packetsLost})})})},S.getStatsRate=function(f){S.getStats(function(L){f(L)})},S.getStats=function(f,L){L=(L=L||500)>500?500:L,S.lastTimeGetStats&&Date.now()-S.lastTimeGetStats<L?f&&f(S.filterStatsCache,S.originStatsCache):(S.lastTimeGetStats=Date.now(),this._getStats(function(C,H){S.filterStatsCache=C,S.originStatsCache=H,f&&f(C,H)}))},S._setStat=function(f,L,C){f.hasOwnProperty(L)&&(null!=C&&C!==1/0&&C==C||(C=0),f[L]=C+"")},S._processGetStatsAfterChrome76=function(f){var L=this;S.lastStats||(S.lastStats=new Map),S.peerConnection.getStats().then(function(C){var H,Y=[],ee=[],ne=new Map,fe=new Date,te=function m(P){if("undefined"==typeof Symbol||null==P[Symbol.iterator]){if(Array.isArray(P)||(P=function(i,s){if(i){if("string"==typeof i)return M(i,s);var l=Object.prototype.toString.call(i).slice(8,-1);if("Object"===l&&i.constructor&&(l=i.constructor.name),"Map"===l||"Set"===l)return Array.from(l);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return M(i,s)}}(P))){var S=0,z=function(){};return{s:z,n:function(){return S>=P.length?{done:!0}:{done:!1,value:P[S++]}},e:function(i){throw i},f:z}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,t,n=!0,a=!1;return{s:function(){u=P[Symbol.iterator]()},n:function(){var i=u.next();return n=i.done,i},e:function(i){a=!0,t=i},f:function(){try{n||null==u.return||u.return()}finally{if(a)throw t}}}}(C.values());try{for(te.s();!(H=te.n()).done;){var oe=H.value;"codec"!=oe.type?"candidate-pair"!=oe.type?("inbound-rtp"===oe.type&&"video"===oe.mediaType&&ne.set("inbound-video",oe),"inbound-rtp"===oe.type&&"audio"===oe.mediaType&&ne.set("inbound-audio",oe),"outbound-rtp"===oe.type&&"audio"===oe.mediaType&&ne.set("outbound-audio",oe),"outbound-rtp"===oe.type&&"video"===oe.mediaType&&ne.set("outbound-video",oe),"track"===oe.type&&"video"===oe.kind&&oe.remoteSource&&ne.set("remote-video-track",oe),"track"===oe.type&&"audio"===oe.kind&&oe.remoteSource&&ne.set("remote-audio-track",oe),"remote-inbound-rtp"===oe.type&&"video"===oe.mediaType&&ne.set("remote-inbound-video",oe),"remote-inbound-rtp"===oe.type&&"audio"===oe.mediaType&&ne.set("remote-inbound-audio",oe),"track"!==oe.type||"video"!==oe.kind||oe.remoteSource||ne.set("local-video-track",oe),"track"!==oe.type||"audio"!==oe.kind||oe.remoteSource||ne.set("local-audio-track",oe),"media-source"===oe.type&&"video"===oe.kind&&ne.set("media-source-video",oe),"media-source"===oe.type&&"audio"===oe.kind&&ne.set("media-source-audio",oe)):ee.push(oe):Y.push(oe)}}catch(re){te.e(re)}finally{te.f()}ne.set("codec",Y),ne.set("candidatePairs",ee),ne.set("timestamp",+fe);var le=null,de=null;if(a.timestamp=fe,n.timestamp=fe,u.timestamp=fe,u.timestamp=fe,i.timestamp=fe,L.isSubscriber)(le=ne.get("inbound-video"))&&(S._setStat(a,"id","inbound_video_ssrc_recv"),S._setStat(a,"mediaType",le.mediaType),S._setStat(a,"packetsLost",le.packetsLost),S._setStat(a,"googDecodeMs",null),S._setStat(a,"googMaxDecodeMs",null),S._setStat(a,"googRenderDelayMs",null),S._setStat(a,"googMinPlayoutDelayMs",null),S._setStat(a,"googNacksSent",le.nackCount),S._setStat(a,"googPlisSent",le.pliCount),S._setStat(a,"googFirsSent",le.firCount),S._setStat(a,"bytesReceived",le.bytesReceived),S._setStat(a,"packetsReceived",le.packetsReceived)),(le=ne.get("inbound-audio"))&&(S._setStat(n,"id","inbound_audio_ssrc_recv"),S._setStat(n,"mediaType",le.mediaType),S._setStat(n,"bytesReceived",le.bytesReceived),S._setStat(n,"packetsLost",le.packetsLost),S._setStat(n,"packetsReceived",le.packetsReceived),S._setStat(n,"googAccelerateRate",le.removedSamplesForAcceleration),S._setStat(n,"googCurrentDelayMs",le.jitterBufferDelay),S._setStat(n,"googDecodingCNG",null),S._setStat(n,"googDecodingCTN",null),S._setStat(n,"googDecodingCTSG",null),S._setStat(n,"googDecodingNormal",null),S._setStat(n,"googDecodingPLC",null),S._setStat(n,"googDecodingPLCCNG",null),S._setStat(n,"googJitterReceived",le.jitter),S._setStat(n,"googPreferredJitterBufferMs",null),S._setStat(n,"googSecondaryDecodedRate",null)),(le=ne.get("remote-video-track"))&&(S._setStat(a,"googTargetDelayMs",le.jitterBufferDelay),S._setStat(a,"googFrameWidthReceived",le.frameWidth),S._setStat(a,"googFrameHeightReceived",le.frameHeight),S._setStat(a,"googJitterBufferMs",le.jitterBufferDelay/le.jitterBufferEmittedCount*1e3),S._setStat(a,"googCurrentDelayMs",le.jitterBufferDelay),S._setStat(a,"googFramesDecoded",le.framesDecoded),S._setStat(a,"googFramesReceived",le.framesReceived)),(le=ne.get("remote-audio-track"))&&(S._setStat(n,"audioOutputLevel",32767*le.audioLevel),S._setStat(n,"googJitterBufferMs",le.jitterBufferDelay/le.jitterBufferEmittedCount*1e3),S._setStat(n,"googExpandRate",le.concealedSamples),S._setStat(n,"googPreemptiveExpandRate",le.insertedSamplesForDeceleration),S._setStat(n,"googSpeechExpandRate",le.silentConcealedSamples));else{var A=S.lastStats.get("timestamp"),$=S.lastStats.get("outbound-video");if((le=ne.get("outbound-audio"))&&(S._setStat(u,"id","outbound_audio_ssrc_send"),S._setStat(u,"mediaType",le.mediaType),S._setStat(u,"aecDivergentFilterFraction",null),S._setStat(u,"bytesSent",le.bytesSent),S._setStat(u,"packetsSent",le.packetsSent),de=le.transportId),le=ne.get("outbound-video")){if(S._setStat(t,"id","outbound_video_ssrc_send"),S._setStat(t,"mediaType",le.mediaType),S._setStat(t,"bytesSent",le.bytesSent),S._setStat(t,"packetsSent",le.packetsSent),S._setStat(t,"googAdaptationChanges",le.qualityLimitationDurations),S._setStat(t,"googAvgEncodeMs",null),S._setStat(t,"googEncodeUsagePercent",null),de=le.transportId,le.totalEncodedBytesTarget&&$&&$.totalEncodedBytesTarget){var j=(le.totalEncodedBytesTarget-$.totalEncodedBytesTarget)/(+new Date-A);S._setStat(i,"googTargetEncBitrate",Math.floor(8*j*1e3))}if(le.retransmittedBytesSent&&$&&$.retransmittedBytesSent){var ue=(le.retransmittedBytesSent-$.retransmittedBytesSent)/(+new Date-A);S._setStat(i,"googRetransmitBitrate",Math.floor(8*ue*1e3))}if(le.bytesSent&&$&&$.bytesSent){var Pe=(le.bytesSent-$.bytesSent)/(+new Date-A);S._setStat(i,"googTransmitBitrate",Math.floor(8*Pe*1e3)),S._setStat(i,"googActualEncBitrate",Math.floor(8*Pe*1e3))}if(le.totalPacketSendDelay&&$&&$.totalPacketSendDelay){var pe=(le.totalPacketSendDelay-$.totalPacketSendDelay)/(+new Date-A);S._setStat(i,"googBucketDelay",Math.floor(1e3*pe))}}if((le=ne.get("remote-inbound-video"))&&(S._setStat(t,"packetsLost",le.packetsLost),S._setStat(t,"googRtt",le.roundTripTime)),(le=ne.get("local-video-track"))&&(S._setStat(t,"googFrameHeightSent",le.frameHeight),S._setStat(t,"googFrameWidthSent",le.frameWidth),void 0!==le.framesPerSecond&&S._setStat(t,"googFrameRateSent",le.framesPerSecond)),(le=ne.get("local-audio-track"))&&(S._setStat(u,"googEchoCancellationReturnLoss",le.echoReturnLoss),S._setStat(u,"googEchoCancellationReturnLossEnhancement",le.echoReturnLossEnhancement)),(le=ne.get("media-source-video"))&&(S._setStat(t,"googFrameHeightInput",le.height),S._setStat(t,"googFrameWidthInput",le.width),S._setStat(t,"googFrameRateInput",le.framesPerSecond)),(le=ne.get("media-source-audio"))&&S._setStat(u,"audioInputLevel",32767*le.totalAudioEnergy),(le=ne.get("inbound-video"))&&(S._setStat(t,"googFirsReceived",le.firCount),S._setStat(t,"googNacksReceived",le.nackCount),S._setStat(t,"googPlisReceived",le.pliCount)),de)ne.get("candidatePairs").map(function(re){de==re.transportId&&S._setStat(i,"googAvailableSendBandwidth",re.availableOutgoingBitrate)});else{var me=ne.get("candidatePairs")[0];me&&S._setStat(i,"googAvailableSendBandwidth",me.availableOutgoingBitrate)}}S.lastStats=ne;var Be=[_()({},t),_()({},u),_()({},a),_()({},n),_()({},i)];Be.push({id:"time",startTime:S.connectedTime,timestamp:new Date}),f(Be)})},S._processGetStatsBeforeChrome76=function(f){S.peerConnection.getStats(function(L){var C=[],H=[],Y=null;Object.keys(L).forEach(function(ee){var ne=L[ee];ne&&(H.push(ne),Y=ne.timestamp,"VideoBwe"===ne.type?i=ne:ne.id.indexOf("_send")>-1&&"video"===ne.mediaType?t=ne:ne.id.indexOf("_send")>-1&&"audio"===ne.mediaType?u=ne:ne.id.indexOf("_recv")>-1&&"video"===ne.mediaType?a=ne:ne.id.indexOf("_recv")>-1&&"audio"===ne.mediaType&&(n=ne))}),(C=[_()({},t),_()({},u),_()({},a),_()({},n),_()({},i)]).push({id:"time",startTime:S.connectedTime,timestamp:Y||new Date}),f(C,H)})},S._getStats=function(f){Object(d.getParameter)("CHROME_NEW_STATS")&&x.isChromeKernel()&&+x.getBrowserVersion()>=76?S._processGetStatsAfterChrome76(f):S._processGetStatsBeforeChrome76(f)},S.addTrack=function(f,L){if("unified-plan"===Object(d.getParameter)("PLAN")){var C="audio"===f.kind?S._audioSender:S._videoSender;if(C){var H=S.peerConnection.getTransceivers().find(function(Y){return Y.sender===C});C.replaceTrack(f).then(function(){H.direction="sendrecv",S.renegotiate()})}else C=S.peerConnection.addTrack(f,L),"audio"===f.kind?S._audioSender=C:S._videoSender=C}else S.peerConnection.addTrack(f,L)},S.removeTrack=function(f,L){if("unified-plan"===Object(d.getParameter)("PLAN")){var C=S.peerConnection.getTransceivers().find(function(H){return H.sender.track===f});C&&(C.direction="inactive",S.peerConnection.removeTrack(C.sender))}else S.peerConnection.removeTrack(S.peerConnection.getSenders().find(function(H){return H.track==f}))},S.addStream=function(f){"unified-plan"===Object(d.getParameter)("PLAN")?f.getTracks().forEach(function(L){var C=S.peerConnection.addTrack(L,f);"audio"===L.kind?S._audioSender=C:S._videoSender=C}):(S.peerConnection.addStream(f),S.markActionNeeded())},S.removeStream=function(){S.markActionNeeded()},S.close=function(){S.state="closed",S.peerConnection.close()},S.markActionNeeded=function(){S.actionNeeded=!0,S.doLater(function(){S.onstablestate()})},S.doLater=function(f){window.setTimeout(f,1)},S.onstablestate=function(){if(S.actionNeeded){if("new"===S.state||"established"===S.state)S.peerConnection.createOffer(S.mediaConstraints).then(function(L){return L?L.sdp!==S.prevOffer?(P.isSubscriber&&(L.sdp=L.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),S.peerConnection.setLocalDescription(L),S.state="preparing-offer",void S.markActionNeeded()):void v.default.debug("["+S.clientId+"]Not sending a new offer"):(v.default.debug("["+S.clientId+"]sessionDescription is null"),void S.onsignalingmessage(null))}).catch(function(L){v.default.debug("["+S.clientId+"]peer connection create offer failed ",L)});else if("preparing-offer"===S.state){if(S.moreIceComing)return;S.prevOffer=S.peerConnection.localDescription.sdp,S.offerCandidates=S.prevOffer.match(/a=candidate.+\r\n/g)||[],S.offerCandidates.length||(P.isCloudProxy3&&P.onNoIceCandidate&&P.onNoIceCandidate(),v.default.warning("[".concat(S.clientId,"]No Ice Candidate generated")),Object(d.getParameter)("SHIM_CANDIDATE")?(v.default.debug("Shimming fake candidate"),S.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):v.default.error("[".concat(S.clientId,"]None Ice Candidate not allowed"))),S.prevOffer=S.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),S.sendMessage("OFFER",S.prevOffer),S.state="offer-sent"}else if("offer-received"===S.state)S.peerConnection.createAnswer(function(L){if(S.peerConnection.setLocalDescription(L),S.state="offer-received-preparing-answer",S.iceStarted)S.markActionNeeded();else{var C=new Date;v.default.debug("["+S.clientId+"]"+C.getTime()+": Starting ICE in responder"),S.iceStarted=!0}},function(L){v.default.debug("["+S.clientId+"]peer connection create answer failed ",L)},S.mediaConstraints);else if("offer-received-preparing-answer"===S.state){if(S.moreIceComing)return;S.sendMessage("ANSWER",S.peerConnection.localDescription.sdp),S.state="established"}else v.default.debug("[".concat(S.clientId,"] Dazed and confused in state ").concat(S.state,", stopping here'"));S.actionNeeded=!1}},S.sendMessage=function(f,L){var C={};C.messageType=f,C.sdp=L,"OFFER"===f?(C.offererSessionId=S.sessionId,C.answererSessionId=S.otherSessionId,C.seq=S.sequenceNumber+=1,C.tiebreaker=Math.floor(429496723*Math.random()+1)):(C.offererSessionId=S.incomingMessage.offererSessionId,C.answererSessionId=S.sessionId,C.seq=S.incomingMessage.seq),S.onsignalingmessage(JSON.stringify(C))},S._getSender=function(f){if(S.peerConnection&&S.peerConnection.getSenders){var L=S.peerConnection.getSenders().find(function(C){return C.track.kind==f});if(L)return L}return null},S.hasSender=function(f){return!!S._getSender(f)},S.replaceTrack=function(f,L,C){var H=S._getSender(f.kind);if(!H)return C("NO_SENDER_FOUND");try{H.replaceTrack(f)}catch(Y){return C&&C(Y)}setTimeout(function(){return L&&L()},50)},S.error=function(f){throw"Error in RoapOnJsep: "+f},S.sessionId=S.roapSessionId+=1,S.sequenceNumber=0,S.actionNeeded=!1,S.iceStarted=!1,S.moreIceComing=!0,S.iceCandidateCount=0,S.onsignalingmessage=P.callback,S.peerConnection.ontrack=function(f){S.onaddstream&&(S.onaddstream(f,"ontrack"),S.peerConnection.onaddstream=null)},S.peerConnection.onaddstream=function(f){S.onaddstream&&(S.onaddstream(f,"onaddstream"),S.peerConnection.ontrack=null)},S.peerConnection.onremovestream=function(f){S.onremovestream&&S.onremovestream(f)},S.peerConnection.oniceconnectionstatechange=function(f){console.log(f),console.log(S.peerConnection.iceConnectionState),"connected"===f.currentTarget.iceConnectionState&&(S.connectedTime=new Date),S.oniceconnectionstatechange&&S.oniceconnectionstatechange(f.currentTarget.iceConnectionState)},S.renegotiate=function(){void 0!==S.prevOffer&&S.peerConnection.createOffer().then(function(f){return"unified-plan"!==Object(d.getParameter)("PLAN")&&(f.sdp=f.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),f.sdp=l(f.sdp),f.sdp=b(f.sdp),S.peerConnection.setLocalDescription(f)}).then(function(){S.onnegotiationneeded&&S.onnegotiationneeded(S.peerConnection.localDescription.sdp)}).catch(function(f){console.log("createOffer error: ",f)})},S.peerConnection.onnegotiationneeded=S.renegotiate,S.onaddstream=null,S.onremovestream=null,S.onnegotiationneeded=null,S.state="new",S.markActionNeeded(),S}(P)).browser="chrome-stable",S},K=function(P,S,z){var u={};u.config=P,u.streamId=P.streamId,delete P.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=0,n=1,a=!1,i=null,s=function(r){if(t++,i)if(i===r)v.default.debug("Using Video Source/ Audio Source");else{var f=i.getVideoTracks()[0],L=i.getAudioTracks()[0],C=r.getVideoTracks()[0],H=r.getAudioTracks()[0];C&&(f&&i.removeTrack(f),i.addTrack(C)),H&&(L&&i.removeTrack(L),i.addTrack(H))}else i=r;t!==n||a||(a=!0,setTimeout(function(){S(i)},0))},l=function(r){v.default.error("Failed to GetUserMedia",r.name,r.code,r.message,r),t++,a||(a=!0,setTimeout(function(){z&&z(r)},0))},b=function(){var r={video:P.video,audio:P.audio};if(v.default.debug("GetUserMedia",JSON.stringify(r)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(r).then(s).catch(l);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(P,s,l);else{var f={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};v.default.error("["+u.streamId+"]"+f.message),z&&z(f)}};if((P.videoSource||P.audioSource)&&(i=new MediaStream,P.videoSource&&i.addTrack(P.videoSource),P.audioSource&&i.addTrack(P.audioSource)),P.video||P.audio||P.screen||P.screenAudio){if(!P.screen&&P.screenAudio)return z&&z({code:"Set screen to true before sharing the audio"});if(P.screen){if(V.a.isElectron())return P.screen.sourceId?V.a.getScreenStream(P.screen.sourceId,P.screen,function(r,f){r?l(r):(P.audio&&(n++,b()),s(f))}):V.a.shareScreen(P.screen,function(r,f){r?l(r):(P.audio&&(n++,b()),s(f))});if(x.isFireFox()){if(v.default.debug("["+u.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(P.screen.mediaSource))return z&&z({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:P.screen},function(r){P.audio&&(n++,b()),s(r)},l)}else if(x.isChromeKernel()&&P.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void z({code:"This browser does not support screen sharing"});v.default.debug("["+u.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(P.screen.extensionId,{getStream:!0},function(r){void 0===r?(v.default.error("["+u.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),l({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(P.screen.mandatory.chromeMediaSourceId=r.streamId,navigator.getMedia({video:P.screen},function(f){P.audio&&(n++,b()),s(f)},l))})}catch(r){return v.default.debug("["+u.streamId+"]AgoraRTC screensharing plugin is not accessible"),void z({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var c={};return c.video="number"==typeof P.screen.width&&"number"==typeof P.screen.height?{width:{ideal:P.screen.width},height:{ideal:P.screen.height}}:{width:P.screen.width,height:P.screen.height},c.video.frameRate=P.screen.frameRate&&P.screen.frameRate.min?{ideal:P.screen.frameRate.max,max:P.screen.frameRate.max}:P.screen.frameRate,P.screenAudio&&(c.audio=P.screenAudio),v.default.debug("use getDisplayMedia, constraints:",c),window.navigator.mediaDevices.getDisplayMedia(c).then(function(r){!P.screenAudio&&P.audio&&(n++,b()),s(r)}).catch(l)}v.default.error("["+u.streamId+"]This browser does not support screenSharing"),z({code:"This browser does not support screen sharing"})}}else b()}else s(i)}},function(Z,q,N){"use strict";var x=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(q,"__esModule",{value:!0});var w,O=x(N(0)),_=function(){function w(o,p,y){void 0===p&&(p=""),this.name="AgoraRTCException",this.code=o,this.message="AgoraRTCError "+this.code+": "+p,this.data=y}return w.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},w.prototype.throw=function(){throw O.default.error(this.toString()),this},w}();q.AgoraRTCError=_,(w=q.AgoraRTCErrorCode||(q.AgoraRTCErrorCode={})).UNEXPECTED_ERROR="UNEXPECTED_ERROR",w.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",w.TIMEOUT="TIMEOUT",w.INVALID_PARAMS="INVALID_PARAMS",w.NOT_SUPPORT="NOT_SUPPORT",w.INVALID_OPERATION="INVALID_OPERATION",w.OPERATION_ABORT="OPERATION_ABORT",w.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",w.NETWORK_ERROR="NETWORK_ERROR",w.NETWORK_TIMEOUT="NETWORK_TIMEOUT",w.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",w.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",w.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",w.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",w.ELECTRON_IS_NULL="ELECTRON_IS_NULL",w.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",w.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",w.STREAM_IS_CLOSED="STREAM_IS_CLOSED",w.ABORT_OTHER_INIT="ABORT_OTHER_INIT",w.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",w.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",w.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",w.PERMISSION_DENIED="PERMISSION_DENIED",w.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",w.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",w.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",w.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",w.TRACK_IS_DISABLED="TRACK_IS_DISABLED",w.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",w.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",w.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",w.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",w.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",w.UID_CONFLICT="UID_CONFLICT",w.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",w.INVALID_TRACK="INVALID_TRACK",w.SENDER_NOT_FOUND="SENDER_NOT_FOUND",w.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",w.SET_ANSWER_FAILED="SET_ANSWER_FAILED",w.ICE_FAILED="ICE_FAILED",w.PC_CLOSED="PC_CLOSED",w.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",w.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",w.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",w.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",w.INVALID_REMOTE_USER="INVALID_REMOTE_USER",w.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",w.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",w.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",w.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",w.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",w.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",w.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",w.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",w.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",w.WS_ABORT="WS_ABORT",w.WS_DISCONNECT="WS_DISCONNECT",w.WS_ERR="WS_ERR",w.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",w.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",w.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",w.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",w.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",w.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",w.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",w.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",w.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",w.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",w.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",w.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",w.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",w.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",w.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",w.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",w.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",w.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",w.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"},function(Z,q,N){"use strict";N.d(q,"a",function(){return p});var x=N(0),O=window.AudioContext||window.webkitAudioContext,_=N(2),w=_.getParameter,o=_.setParameter,p=function(){return w("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),o("AUDIO_CONTEXT",function(){if(O){var y=new O;return window.ctx=y,new Promise(function(v){document.body?v():window.addEventListener("load",v)}).then(function(){var v=function h(){"suspended"==y.state?(x.default.debug("AudioContext is suspended, auto resume"),y.resume().then(function(){x.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",h,!0),document.body.removeEventListener("mousedown",h,!0)})):(x.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",h,!0),document.body.removeEventListener("mousedown",h,!0))};x.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",v,!0),document.body.addEventListener("mousedown",v,!0)}),y}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),w("AUDIO_CONTEXT")};p()},function(Z,q,N){"use strict";var x=N(1),O=null,_=function(){try{O=window.require("electron")}catch(p){}return O},w=function(p){var y=x.report.reportApiInvoke(null,{callback:p,name:"getScreenSources",options:arguments,tag:"tracer"}),v=_();if(!v)return y&&y("electron is null");try{var h=v.desktopCapturer.getSources({types:["window","screen"]})}catch(d){console.log(d)}h instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),h.then(function(d){return y&&y(null,d)}).catch(function(d){return y&&y(d)})):h=v.desktopCapturer.getSources({types:["window","screen"]},function(d,m){console.log("electron.desktopCapturer.getSources return type is callback"),y&&y(null,m)})},o=function(p,y,v){y={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:p,maxHeight:y.height,maxWidth:y.width,maxFrameRate:y.frameRate&&y.frameRate.max,minFrameRate:y.frameRate&&y.frameRate.min}}},navigator.webkitGetUserMedia(y,function(d){v&&v(null,d)},function(d){v&&v(d)})};q.a={isElectron:function(){return!!_()},getElectronInstance:_,getScreenSources:w,getScreenStream:o,shareScreen:function(p,y){w(function(v,h){if(v)return y&&y(v);!function(d,m){var M=document.createElement("div");M.innerText="share screen",M.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var g=document.createElement("div");g.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");var R=document.createElement("div");R.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var T=document.createElement("div");T.setAttribute("style","text-align: right; padding: 16px 0;");var k=document.createElement("button");k.innerHTML="cancel",k.setAttribute("style","width: 85px;"),k.onclick=function(){document.body.removeChild(I),m&&m("NotAllowedError")},T.appendChild(k),g.appendChild(E),g.appendChild(R),g.appendChild(T);var I=document.createElement("div");I.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),I.appendChild(M),I.appendChild(g),document.body.appendChild(I),d.map(function(U){if(U.id){var V=document.createElement("div");V.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var W=U.thumbnail;W.getSize().width>1920&&(W=W.resize({width:1920})),V.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+W.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+U.name.replace(/[\u00A0-\u9999<>\&]/g,function(J){return"&#"+J.charCodeAt(0)+";"})+"</span>",V.onclick=function(){document.body.removeChild(I),m&&m(null,U.id)},R.appendChild(V)}})}(h,function(d,m){if(d)return y&&y(d);o(m,p,y)})})}}},function(Z,q,N){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var O,x=N(3);(O=q.LiveStreamingServiceMode||(q.LiveStreamingServiceMode={})).TRANSCODE="mix_streaming",O.RAW="raw_streaming",O.INJECT="inject_streaming",q.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},q.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},q.isLiveStreamingTranscodingConfig=function(O){return x.isEmpty(O.width)||x.checkValidNumber(O.width,"config.width",0),x.isEmpty(O.height)||x.checkValidNumber(O.height,"config.height",0),x.isEmpty(O.videoBitrate)||x.checkValidNumber(O.videoBitrate,"config.videoBitrate",1,1e6),x.isEmpty(O.videoFramerate)||x.checkValidNumber(O.videoFramerate,"config.videoFramerate"),x.isEmpty(O.lowLatency)||x.checkValidBoolean(O.lowLatency,"config.lowLatency"),x.isEmpty(O.audioSampleRate)||x.checkValidEnum(O.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),x.isEmpty(O.audioBitrate)||x.checkValidNumber(O.audioBitrate,"config.audioBitrate",1,128),x.isEmpty(O.audioChannels)||x.checkValidEnum(O.audioChannels,"config.audioChannels",[1,2,3,4,5]),x.isEmpty(O.videoGop)||x.checkValidNumber(O.videoGop,"config.videoGop"),x.isEmpty(O.videoCodecProfile)||x.checkValidEnum(O.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),x.isEmpty(O.userCount)||x.checkValidNumber(O.userCount,"config.userCount",0,17),x.isEmpty(O.backgroundColor)||x.checkValidNumber(O.backgroundColor,"config.backgroundColor",0,16777215),O.transcodingUsers&&!x.isEmpty(O.transcodingUsers)&&(x.checkValidArray(O.transcodingUsers,"config.transcodingUsers"),O.transcodingUsers.forEach(function(_,w){x.checkValidUID(_.uid),x.isEmpty(_.x)||x.checkValidNumber(_.x,"transcodingUser["+w+"].x",0,1e4),x.isEmpty(_.y)||x.checkValidNumber(_.y,"transcodingUser["+w+"].y",0,1e4),x.isEmpty(_.width)||x.checkValidNumber(_.width,"transcodingUser["+w+"].width",0,1e4),x.isEmpty(_.height)||x.checkValidNumber(_.height,"transcodingUser["+w+"].height",0,1e4),x.isEmpty(_.zOrder)||x.checkValidNumber(_.zOrder-1,"transcodingUser["+w+"].zOrder",0,100),x.isEmpty(_.alpha)||x.checkValidFloatNumber(_.alpha,"transcodingUser["+w+"].alpha",0,1)})),O.images&&!x.isEmpty(O.images)&&(x.checkValidArray(O.images,"config.images"),O.images.forEach(function(_,w){x.checkValidString(_.url,"images["+w+"].url",1,1e3,!1),x.isEmpty(_.x)||x.checkValidNumber(_.x,"images["+w+"].x",0,1e4),x.isEmpty(_.y)||x.checkValidNumber(_.y,"images["+w+"].y",0,1e4),x.isEmpty(_.width)||x.checkValidNumber(_.width,"images["+w+"].width",0,1e4),x.isEmpty(_.height)||x.checkValidNumber(_.height,"images["+w+"].height",0,1e4),x.isEmpty(_.zOrder)||x.checkValidNumber(_.zOrder,"images["+w+"].zOrder",0,255),x.isEmpty(_.alpha)||x.checkValidFloatNumber(_.alpha,"images["+w+"].alpha",0,1)})),!0},q.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},q.isInjectStreamConfig=function(O){return x.isEmpty(O.audioVolume)||x.checkValidNumber(O.audioVolume,"config.audioVolume",0,1e3),x.isEmpty(O.audioBitrate)||x.checkValidNumber(O.audioBitrate,"config.audioBitrate",1,1e4),x.isEmpty(O.audioChannels)||x.checkValidEnum(O.audioChannels,"config.audioChannels",[1,2]),x.isEmpty(O.audioSampleRate)||x.checkValidEnum(O.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),x.isEmpty(O.width)||x.checkValidNumber(O.width,"config.width",0,1e4),x.isEmpty(O.height)||x.checkValidNumber(O.height,"config.height",0,1e4),x.isEmpty(O.videoBitrate)||x.checkValidNumber(O.videoBitrate,"config.videoBitrate",1,1e4),x.isEmpty(O.videoFramerate)||x.checkValidNumber(O.videoFramerate,"config.videoFramerate",1,1e4),x.isEmpty(O.videoGop)||x.checkValidNumber(O.videoGop,"config.videoGop",1,1e4),!0},q.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(O){O.WARNING="@live_uap-warning",O.ERROR="@line_uap-error",O.PUBLISH_STREAM_STATUS="@live_uap-publish-status",O.INJECT_STREAM_STATUS="@live_uap-inject-status",O.WORKER_STATUS="@live_uap-worker-status",O.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(q.LiveStreamingUapSignalEvents||(q.LiveStreamingUapSignalEvents={})),function(O){O.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(q.LiveStreamingInternalEvents||(q.LiveStreamingInternalEvents={})),function(O){O[O.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",O[O.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",O[O.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",O[O.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",O[O.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",O[O.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",O[O.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",O[O.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",O[O.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",O[O.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",O[O.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",O[O.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",O[O.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",O[O.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",O[O.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",O[O.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",O[O.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",O[O.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",O[O.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",O[O.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",O[O.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",O[O.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(q.LIVE_STREAM_ERROR_CODE||(q.LIVE_STREAM_ERROR_CODE={})),function(O){O.CONNECTED="websocket:connected",O.RECONNECTING="websocket:reconnecting",O.WILL_RECONNECT="websocket:will_reconnect",O.CLOSED="websocket:closed",O.FAILED="websocket:failed",O.ON_MESSAGE="websocket:on_message",O.REQUEST_NEW_URLS="websocket:request_new_urls"}(q.WebSocketManagerEvents||(q.WebSocketManagerEvents={}))},function(Z,q,N){var x=N(57),O=N(58);Z.exports=function(_,w,o){var p=w&&o||0;"string"==typeof _&&(w="binary"===_?new Array(16):null,_=null);var y=(_=_||{}).random||(_.rng||x)();if(y[6]=15&y[6]|64,y[8]=63&y[8]|128,w)for(var v=0;v<16;++v)w[p+v]=y[v];return w||O(y)}},function(Z,q,N){var x;Z.exports=(x=N(73),function(O){var _=x,w=_.lib,o=w.WordArray,p=w.Hasher,y=_.algo,v=[],h=[];!function(){function M(T){for(var k=O.sqrt(T),I=2;I<=k;I++)if(!(T%I))return!1;return!0}function g(T){return 4294967296*(T-(0|T))|0}for(var E=2,R=0;R<64;)M(E)&&(R<8&&(v[R]=g(O.pow(E,.5))),h[R]=g(O.pow(E,1/3)),R++),E++}();var d=[],m=y.SHA256=p.extend({_doReset:function(){this._hash=new o.init(v.slice(0))},_doProcessBlock:function(M,g){for(var E=this._hash.words,R=E[0],T=E[1],k=E[2],I=E[3],U=E[4],V=E[5],W=E[6],J=E[7],K=0;K<64;K++){if(K<16)d[K]=0|M[g+K];else{var P=d[K-15],z=d[K-2];d[K]=((P<<25|P>>>7)^(P<<14|P>>>18)^P>>>3)+d[K-7]+((z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10)+d[K-16]}var t=R&T^R&k^T&k,a=J+((U<<26|U>>>6)^(U<<21|U>>>11)^(U<<7|U>>>25))+(U&V^~U&W)+h[K]+d[K];J=W,W=V,V=U,U=I+a|0,I=k,k=T,T=R,R=a+(((R<<30|R>>>2)^(R<<19|R>>>13)^(R<<10|R>>>22))+t)|0}E[0]=E[0]+R|0,E[1]=E[1]+T|0,E[2]=E[2]+k|0,E[3]=E[3]+I|0,E[4]=E[4]+U|0,E[5]=E[5]+V|0,E[6]=E[6]+W|0,E[7]=E[7]+J|0},_doFinalize:function(){var M=this._data,g=M.words,E=8*this._nDataBytes,R=8*M.sigBytes;return g[R>>>5]|=128<<24-R%32,g[14+(R+64>>>9<<4)]=O.floor(E/4294967296),g[15+(R+64>>>9<<4)]=E,M.sigBytes=4*g.length,this._process(),this._hash},clone:function(){var M=p.clone.call(this);return M._hash=this._hash.clone(),M}});_.SHA256=p._createHelper(m),_.HmacSHA256=p._createHmacHelper(m)}(Math),x.SHA256)},function(Z,q,N){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.randomString=function(x){void 0===x&&(x=8);for(var O="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",_=O.length,w="",o=0;o<x;o++)w+=O.charAt(Math.floor(Math.random()*_));return w}},function(Z,q,N){"use strict";var x=this&&this.__assign||function(){return(x=Object.assign||function(T){for(var k,I=1,U=arguments.length;I<U;I++)for(var V in k=arguments[I])Object.prototype.hasOwnProperty.call(k,V)&&(T[V]=k[V]);return T}).apply(this,arguments)},O=this&&this.__awaiter||function(T,k,I,U){return new(I||(I=Promise))(function(V,W){function J(S){try{P(U.next(S))}catch(z){W(z)}}function K(S){try{P(U.throw(S))}catch(z){W(z)}}function P(S){var z;S.done?V(S.value):(z=S.value,z instanceof I?z:new I(function(u){u(z)})).then(J,K)}P((U=U.apply(T,k||[])).next())})},_=this&&this.__generator||function(T,k){var I,U,V,W,J={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return W={next:K(0),throw:K(1),return:K(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function K(P){return function(S){return function(z){if(I)throw new TypeError("Generator is already executing.");for(;J;)try{if(I=1,U&&(V=2&z[0]?U.return:z[0]?U.throw||((V=U.return)&&V.call(U),0):U.next)&&!(V=V.call(U,z[1])).done)return V;switch(U=0,V&&(z=[2&z[0],V.value]),z[0]){case 0:case 1:V=z;break;case 4:return J.label++,{value:z[1],done:!1};case 5:J.label++,U=z[1],z=[0];continue;case 7:z=J.ops.pop(),J.trys.pop();continue;default:if(!((V=(V=J.trys).length>0&&V[V.length-1])||6!==z[0]&&2!==z[0])){J=0;continue}if(3===z[0]&&(!V||z[1]>V[0]&&z[1]<V[3])){J.label=z[1];break}if(6===z[0]&&J.label<V[1]){J.label=V[1],V=z;break}if(V&&J.label<V[2]){J.label=V[2],J.ops.push(z);break}V[2]&&J.ops.pop(),J.trys.pop();continue}z=k.call(T,J)}catch(u){z=[6,u],U=0}finally{I=V=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([P,S])}}},w=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(q,"__esModule",{value:!0});var o=N(2),p=w(N(37)),y=N(24),v=w(N(0)),h=N(1);function d(T){return new Promise(function(k){window.setTimeout(k,T)})}function m(T,k){return new Promise(function(I,U){k.timeout=k.timeout||o.getParameter("HTTP_CONNECT_TIMEOUT"),k.responseType=k.responseType||"json",k.data&&(k.data=JSON.stringify(k.data)),k.headers=k.headers||{},k.headers["Content-Type"]="application/json",k.method="POST",k.url=T,p.default.request(k).then(function(V){I(V.data)}).catch(function(V){p.default.isCancel(V)?U(new y.AgoraRTCError(y.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):U("ECONNABORTED"===V.code?new y.AgoraRTCError(y.AgoraRTCErrorCode.NETWORK_TIMEOUT,V.message):V.response?new y.AgoraRTCError(y.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,V.response.status):new y.AgoraRTCError(y.AgoraRTCErrorCode.NETWORK_ERROR,V.message))})})}function M(T,k,I,U){var V=this,W=Object.assign({},q.DEFAULT_RETRY_CONFIG,U),J=W.timeout,K=function(){return O(V,void 0,void 0,function(){return _(this,function(z){switch(z.label){case 0:return[4,d(J)];case 1:return z.sent(),J*=W.timeoutFactor,J=Math.min(W.maxRetryTimeout,J),[2]}})})},P=!1,S=new Promise(function(z,u){return O(V,void 0,void 0,function(){var t,n,a;return _(this,function(i){switch(i.label){case 0:k=k||function(){return!1},I=I||function(){return!0},t=0,i.label=1;case 1:if(!(t<W.maxRetryCount))return[3,12];if(P)return[2,u(new y.AgoraRTCError(y.AgoraRTCErrorCode.OPERATION_ABORT))];i.label=2;case 2:return i.trys.push([2,7,,11]),[4,T()];case 3:return n=i.sent(),k(n,t)?t+1===W.maxRetryCount?[2,z(n)]:[4,K()]:[3,5];case 4:return i.sent(),[3,6];case 5:return[2,z(n)];case 6:return[3,11];case 7:return a=i.sent(),I(a,t)?t+1===W.maxRetryCount?[2,u(a)]:[4,K()]:[3,9];case 8:return i.sent(),[3,10];case 9:return[2,u(a)];case 10:return[3,11];case 11:return t+=1,[3,1];case 12:return[2]}})})});return S.cancel=function(){return P=!0},S}function g(T,k){return{addressList:T.servers.map(function(I,U){return"wss://"+I.address.replace(/\./g,"-")+".edge.agora.io:"+I.wss+"?serviceName="+encodeURIComponent(k)}),workerToken:T.workerToken,vid:T.vid}}q.wait=d,q.post=m,q.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},q.getRetryWaitTime=function(T,k){var I=k.timeout*Math.pow(k.timeoutFactor,T);return Math.min(k.maxRetryTimeout,I)},q.retryable=M,q.liveStreamingServerResponseToResult=g;var E=1;function R(T,k,I,U,V){var W=this;void 0===V&&(V=q.DEFAULT_RETRY_CONFIG),E+=1;var J,K,P={sid:I.sid,command:"convergeAllocateEdge",uid:"666",appId:I.appId,ts:Math.floor(Date.now()/1e3),seq:E,requestId:E,version:o.VERSION,cname:I.cname},S={service_name:k,json_body:JSON.stringify(P)},z=T[0];return M(function(){return O(W,void 0,void 0,function(){var u,t,n,a,i;return _(this,function(s){switch(s.label){case 0:return J=Date.now(),[4,m(z,{data:S,cancelToken:U,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(u=s.sent(),K=Date.now()-J,0!==u.code)throw n=new y.AgoraRTCError(y.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+u.code,{retry:!0}),v.default.error(n.toString()),n;if(200!==(t=JSON.parse(u.json_body)).code)throw n=new y.AgoraRTCError(y.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),v.default.error(n.toString()),n;if(!t.servers||0===t.servers.length)throw n=new y.AgoraRTCError(y.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),v.default.error(n.toString()),n;if(a=g(t,k),o.getParameter("LIVE_STREAMING_ADDRESS"))try{i=JSON.parse(o.getParameter("LIVE_STREAMING_ADDRESS")),a.addressList=i}catch(l){a.addressList=[o.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,x(x({},a),{responseTime:K})]}})})},function(u,t){return h.report.requestApWorkerEvent(I.sid,{success:!0,sc:200,serviceName:k,responseDetail:JSON.stringify(u.addressList),firstSuccess:0===t,responseTime:K,serverIp:T[t%T.length]}),!1},function(u,t){return h.report.requestApWorkerEvent(I.sid,{success:!1,sc:u.data&&u.data.code||200,serviceName:k,responseTime:K,serverIp:T[t%T.length]}),!!(u.code!==y.AgoraRTCErrorCode.OPERATION_ABORT&&u.code!==y.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||u.data&&u.data.retry)&&(z=T[(t+1)%T.length],!0)},V)}q.requestLiveStreamingWorkerManager=R,q.getLiveStreamingWorkerMangerResult=function(T,k,I){return O(this,void 0,void 0,function(){var U,V;return _(this,function(W){switch(W.label){case 0:U=o.getParameter("UAP_AP").map(function(J){return k.proxyServer?"https://"+k.proxyServer+"/ap/?url="+J+"/api/v1?action=uap":"https://"+J+"/api/v1?action=uap"}),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,R(U,T,k,I)];case 2:return[2,W.sent()];case 3:throw V=W.sent(),h.report.requestApWorkerEvent(k.sid,{success:!1,sc:V.data&&V.data.code||200,serviceName:T,responseTime:V.data&&V.data.responseTime}),V;case 4:return[2]}})})}},function(Z,q,N){var x=N(70),O=N(71),_=N(34),w=N(72);Z.exports=function(o){return x(o)||O(o)||_(o)||w()}},function(Z,q){var N;N=function(){return this}();try{N=N||new Function("return this")()}catch(x){"object"==typeof window&&(N=window)}Z.exports=N},function(Z,q,N){var x=N(35);Z.exports=function(O,_){if(O){if("string"==typeof O)return x(O,_);var w=Object.prototype.toString.call(O).slice(8,-1);return"Object"===w&&O.constructor&&(w=O.constructor.name),"Map"===w||"Set"===w?Array.from(w):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?x(O,_):void 0}}},function(Z,q){Z.exports=function(N,x){(null==x||x>N.length)&&(x=N.length);for(var O=0,_=new Array(x);O<x;O++)_[O]=N[O];return _}},function(Z,q,N){"use strict";var x=this&&this.__spreadArrays||function(){for(var o=0,p=0,y=arguments.length;p<y;p++)o+=arguments[p].length;var v=Array(o),h=0;for(p=0;p<y;p++)for(var d=arguments[p],m=0,M=d.length;m<M;m++,h++)v[h]=d[m];return v};Object.defineProperty(q,"__esModule",{value:!0});var O=N(24),_=function(){function o(){this._events={},this.addListener=this.on}return o.prototype.getListeners=function(p){return this._events[p]?this._events[p].map(function(y){return y.listener}):[]},o.prototype.on=function(p,y){this._events[p]||(this._events[p]=[]);var v=this._events[p];-1===this._indexOfListener(v,y)&&v.push({listener:y,once:!1})},o.prototype.once=function(p,y){this._events[p]||(this._events[p]=[]);var v=this._events[p];-1===this._indexOfListener(v,y)&&v.push({listener:y,once:!0})},o.prototype.off=function(p,y){if(this._events[p]){var v=this._events[p],h=this._indexOfListener(v,y);-1!==h&&v.splice(h,1),0===this._events[p].length&&delete this._events[p]}},o.prototype.removeAllListeners=function(p){p?delete this._events[p]:this._events={}},o.prototype.emit=function(p){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];this._events[p]||(this._events[p]=[]);for(var h=this._events[p].map(function(M){return M}),d=0;d<h.length;d+=1){var m=h[d];m.once&&this.off(p,m.listener),m.listener.apply(this,y||[])}},o.prototype._indexOfListener=function(p,y){for(var v=p.length;v--;)if(p[v].listener===y)return v;return-1},o}();function w(o,p){for(var y=[],v=2;v<arguments.length;v++)y[v-2]=arguments[v];var h=null,d=null;if(o.emit.apply(o,x([p],y,[function(m){h=m},function(m){d=m}])),null!==d)throw d;if(null===h)throw new O.AgoraRTCError(O.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return h}q.EventEmitter=_,q.emitAsPromise=function(o,p){for(var y=[],v=2;v<arguments.length;v++)y[v-2]=arguments[v];return 0===o.getListeners(p).length?Promise.reject(new O.AgoraRTCError(O.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise(function(h,d){o.emit.apply(o,x([p],y,[h,d]))})},q.emitAsInvokerNoResponse=function(o,p){for(var y=[],v=2;v<arguments.length;v++)y[v-2]=arguments[v];return 0===o.getListeners(p).length?null:w.apply(void 0,x([o,p],y))},q.emitAsInvoker=w},function(Z,q,N){Z.exports=N(78)},function(Z,q,N){"use strict";Z.exports=function(x,O){return function(){for(var _=new Array(arguments.length),w=0;w<_.length;w++)_[w]=arguments[w];return x.apply(O,_)}}},function(Z,q,N){"use strict";var x=N(18);function O(_){return encodeURIComponent(_).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Z.exports=function(_,w,o){if(!w)return _;var p;if(o)p=o(w);else if(x.isURLSearchParams(w))p=w.toString();else{var y=[];x.forEach(w,function(h,d){null!=h&&(x.isArray(h)?d+="[]":h=[h],x.forEach(h,function(m){x.isDate(m)?m=m.toISOString():x.isObject(m)&&(m=JSON.stringify(m)),y.push(O(d)+"="+O(m))}))}),p=y.join("&")}if(p){var v=_.indexOf("#");-1!==v&&(_=_.slice(0,v)),_+=(-1===_.indexOf("?")?"?":"&")+p}return _}},function(Z,q,N){"use strict";Z.exports=function(x){return!(!x||!x.__CANCEL__)}},function(Z,q,N){"use strict";(function(x){var O=N(18),_=N(84),w={"Content-Type":"application/x-www-form-urlencoded"};function o(v,h){!O.isUndefined(v)&&O.isUndefined(v["Content-Type"])&&(v["Content-Type"]=h)}var p,y={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==x&&"[object process]"===Object.prototype.toString.call(x))&&(p=N(42)),p),transformRequest:[function(v,h){return _(h,"Accept"),_(h,"Content-Type"),O.isFormData(v)||O.isArrayBuffer(v)||O.isBuffer(v)||O.isStream(v)||O.isFile(v)||O.isBlob(v)?v:O.isArrayBufferView(v)?v.buffer:O.isURLSearchParams(v)?(o(h,"application/x-www-form-urlencoded;charset=utf-8"),v.toString()):O.isObject(v)?(o(h,"application/json;charset=utf-8"),JSON.stringify(v)):v}],transformResponse:[function(v){if("string"==typeof v)try{v=JSON.parse(v)}catch(h){}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};O.forEach(["delete","get","head"],function(v){y.headers[v]={}}),O.forEach(["post","put","patch"],function(v){y.headers[v]=O.merge(w)}),Z.exports=y}).call(this,N(83))},function(Z,q,N){"use strict";var x=N(18),O=N(85),_=N(39),w=N(87),o=N(90),p=N(91),y=N(43);Z.exports=function(v){return new Promise(function(h,d){var m=v.data,M=v.headers;x.isFormData(m)&&delete M["Content-Type"];var g=new XMLHttpRequest;v.auth&&(M.Authorization="Basic "+btoa((v.auth.username||"")+":"+(v.auth.password||"")));var T=w(v.baseURL,v.url);if(g.open(v.method.toUpperCase(),_(T,v.params,v.paramsSerializer),!0),g.timeout=v.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var U="getAllResponseHeaders"in g?o(g.getAllResponseHeaders()):null;O(h,d,{data:v.responseType&&"text"!==v.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:U,config:v,request:g}),g=null}},g.onabort=function(){g&&(d(y("Request aborted",v,"ECONNABORTED",g)),g=null)},g.onerror=function(){d(y("Network Error",v,null,g)),g=null},g.ontimeout=function(){var U="timeout of "+v.timeout+"ms exceeded";v.timeoutErrorMessage&&(U=v.timeoutErrorMessage),d(y(U,v,"ECONNABORTED",g)),g=null},x.isStandardBrowserEnv()){var k=N(92),I=(v.withCredentials||p(T))&&v.xsrfCookieName?k.read(v.xsrfCookieName):void 0;I&&(M[v.xsrfHeaderName]=I)}if("setRequestHeader"in g&&x.forEach(M,function(U,V){void 0===m&&"content-type"===V.toLowerCase()?delete M[V]:g.setRequestHeader(V,U)}),x.isUndefined(v.withCredentials)||(g.withCredentials=!!v.withCredentials),v.responseType)try{g.responseType=v.responseType}catch(U){if("json"!==v.responseType)throw U}"function"==typeof v.onDownloadProgress&&g.addEventListener("progress",v.onDownloadProgress),"function"==typeof v.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",v.onUploadProgress),v.cancelToken&&v.cancelToken.promise.then(function(U){g&&(g.abort(),d(U),g=null)}),void 0===m&&(m=null),g.send(m)})}},function(Z,q,N){"use strict";var x=N(86);Z.exports=function(O,_,w,o,p){var y=new Error(O);return x(y,_,w,o,p)}},function(Z,q,N){"use strict";var x=N(18);Z.exports=function(O,_){_=_||{};var w={},o=["url","method","params","data"],p=["headers","auth","proxy"],y=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];x.forEach(o,function(d){void 0!==_[d]&&(w[d]=_[d])}),x.forEach(p,function(d){x.isObject(_[d])?w[d]=x.deepMerge(O[d],_[d]):void 0!==_[d]?w[d]=_[d]:x.isObject(O[d])?w[d]=x.deepMerge(O[d]):void 0!==O[d]&&(w[d]=O[d])}),x.forEach(y,function(d){void 0!==_[d]?w[d]=_[d]:void 0!==O[d]&&(w[d]=O[d])});var v=o.concat(p).concat(y),h=Object.keys(_).filter(function(d){return-1===v.indexOf(d)});return x.forEach(h,function(d){void 0!==_[d]?w[d]=_[d]:void 0!==O[d]&&(w[d]=O[d])}),w}},function(Z,q,N){"use strict";function x(O){this.message=O}x.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},x.prototype.__CANCEL__=!0,Z.exports=x},function(Z,q){Z.exports=function(N,x,O){return x in N?Object.defineProperty(N,x,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[x]=O,N}},function(Z,q,N){"use strict";var x=this&&this.__awaiter||function(g,E,R,T){return new(R||(R=Promise))(function(k,I){function U(J){try{W(T.next(J))}catch(K){I(K)}}function V(J){try{W(T.throw(J))}catch(K){I(K)}}function W(J){var K;J.done?k(J.value):(K=J.value,K instanceof R?K:new R(function(P){P(K)})).then(U,V)}W((T=T.apply(g,E||[])).next())})},O=this&&this.__generator||function(g,E){var R,T,k,I,U={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return I={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function V(W){return function(J){return function(K){if(R)throw new TypeError("Generator is already executing.");for(;U;)try{if(R=1,T&&(k=2&K[0]?T.return:K[0]?T.throw||((k=T.return)&&k.call(T),0):T.next)&&!(k=k.call(T,K[1])).done)return k;switch(T=0,k&&(K=[2&K[0],k.value]),K[0]){case 0:case 1:k=K;break;case 4:return U.label++,{value:K[1],done:!1};case 5:U.label++,T=K[1],K=[0];continue;case 7:K=U.ops.pop(),U.trys.pop();continue;default:if(!((k=(k=U.trys).length>0&&k[k.length-1])||6!==K[0]&&2!==K[0])){U=0;continue}if(3===K[0]&&(!k||K[1]>k[0]&&K[1]<k[3])){U.label=K[1];break}if(6===K[0]&&U.label<k[1]){U.label=k[1],k=K;break}if(k&&U.label<k[2]){U.label=k[2],U.ops.push(K);break}k[2]&&U.ops.pop(),U.trys.pop();continue}K=E.call(g,U)}catch(P){K=[6,P],T=0}finally{R=k=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([W,J])}}},_=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}},w=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var E={};if(null!=g)for(var R in g)Object.hasOwnProperty.call(g,R)&&(E[R]=g[R]);return E.default=g,E};Object.defineProperty(q,"__esModule",{value:!0});var o=_(N(59)),p=w(N(62)),y=w(N(63)),v=_(N(0)),h=N(2),d=o.default.Root.fromJSON(y),m=function(){function g(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return g.prototype.setProxy=function(E){this.proxyServer=E},g.prototype.sendReportList=function(E,R){var T=this,k=this._dataConvert("ProtoRaws",{vid:R,sendTs:Math.round(Date.now()/1e3),payloads:E.map(function(I){return{id:p[I.type],msg:T._dataConvert(I.type,I.data)}})});this.send(k)},g.prototype._dataConvert=function(E,R){var T;try{T=d.lookupType("protobuf."+E)}catch(I){v.default.error("[send-proto] invalid proto name "+E)}var k=T.create(R);return T.encode(k).finish()},g.prototype.send=function(E){0==this.state?this._send(E):this.requestArray.push(E)},g.prototype._send=function(E){return x(this,void 0,void 0,function(){return O(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,4]),this.state=1,[4,this.request(E)];case 1:return R.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return R.sent(),[4,M(this.retryBackoffCount++<2?200:1e4)];case 3:return R.sent(),this._send(E),[3,4];case 4:return[2]}})})},g.prototype.request=function(E){return x(this,void 0,void 0,function(){var R,T;return O(this,function(k){switch(k.label){case 0:R=this._getAddress(),T=this._getBackupAddress(),k.label=1;case 1:return k.trys.push([1,3,,5]),[4,this._request(R,E)];case 2:return k.sent(),[3,5];case 3:return k.sent(),[4,this._request(T,E)];case 4:return k.sent(),[3,5];case 5:return[2]}})})},g.prototype._request=function(E,R){return this._post(E,R)},g.prototype._post=function(E,R){var T=this;return new Promise(function(k,I){var U=new XMLHttpRequest;U.timeout=h.getParameter("HTTP_CONNECT_TIMEOUT"),U.open("POST",E,!0),U.setRequestHeader("Content-type","application/octet-stream"),T.proxyServer||(U.setRequestHeader("Cache-Control","no-cache, no-store"),U.setRequestHeader("Pragma","no-cache"),U.setRequestHeader("Expires","0")),U.onload=function(V){k(U.responseText)},U.onerror=function(V){I(V)},U.ontimeout=function(V){I(V)},U.send(R)})},g.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+h.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+h.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},g.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+h.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+h.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},g}();q.default=m;var M=function(g){return new Promise(function(E){window.setTimeout(E,g)})}},function(Z,q){Z.exports=function(N,x){if(!(N instanceof x))throw new TypeError("Cannot call a class as a function")}},function(Z,q){function N(x,O){for(var _=0;_<O.length;_++){var w=O[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}Z.exports=function(x,O,_){return O&&N(x.prototype,O),_&&N(x,_),x}},function(Z,q,N){"use strict";var x=this&&this.__awaiter||function(v,h,d,m){return new(d||(d=Promise))(function(M,g){function E(k){try{T(m.next(k))}catch(I){g(I)}}function R(k){try{T(m.throw(k))}catch(I){g(I)}}function T(k){var I;k.done?M(k.value):(I=k.value,I instanceof d?I:new d(function(U){U(I)})).then(E,R)}T((m=m.apply(v,h||[])).next())})},O=this&&this.__generator||function(v,h){var d,m,M,g,E={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return g={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function R(T){return function(k){return function(I){if(d)throw new TypeError("Generator is already executing.");for(;E;)try{if(d=1,m&&(M=2&I[0]?m.return:I[0]?m.throw||((M=m.return)&&M.call(m),0):m.next)&&!(M=M.call(m,I[1])).done)return M;switch(m=0,M&&(I=[2&I[0],M.value]),I[0]){case 0:case 1:M=I;break;case 4:return E.label++,{value:I[1],done:!1};case 5:E.label++,m=I[1],I=[0];continue;case 7:I=E.ops.pop(),E.trys.pop();continue;default:if(!((M=(M=E.trys).length>0&&M[M.length-1])||6!==I[0]&&2!==I[0])){E=0;continue}if(3===I[0]&&(!M||I[1]>M[0]&&I[1]<M[3])){E.label=I[1];break}if(6===I[0]&&E.label<M[1]){E.label=M[1],M=I;break}if(M&&E.label<M[2]){E.label=M[2],E.ops.push(I);break}M[2]&&E.ops.pop(),E.trys.pop();continue}I=h.call(v,E)}catch(U){I=[6,U],m=0}finally{d=M=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([T,k])}}},_=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(q,"__esModule",{value:!0});var w,v,o=_(N(0)),p=N(15);(v=w||(w={})).NEW="new",v.PREPARING_OFFER="preparing-offer",v.OFFER_SENT="offer-sent",v.ESTABLISHED="established",v.CLOSED="closed";var y=function(){function v(h){this.candidate=null,this.state=w.NEW,this.config=h,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(h),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return v.prototype.addStream=function(h){this.peerConnection.addStream(h)},v.prototype.setRtpSenderParameters=function(h){return x(this,void 0,void 0,function(){return O(this,function(d){return[2]})})},v.prototype.setAnswer=function(h){var d=JSON.parse(h);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:d.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},v.prototype.close=function(){this.peerConnection.close()},v.prototype.getStats=function(h,d){if(void 0===d&&(d=500),d=d>500?500:d,Date.now()-this.lastTimeGetStats<d){var m=[];this.config.isSubscriber?(m.push(this.receiveVideoStats),m.push(this.receiveAudioStats)):(m.push(this.sendAudioStats),m.push(this.sendVideoStats)),m.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),h&&h(m)}else this._getStats(h)},v.prototype._getStats=function(h){var d=this,m=[];this.peerConnection.getStats(null).then(function(M){d.lastTimeGetStats=Date.now(),Object.keys(M).map(function(g){var E=M[g];d.config.isSubscriber?E.type&&"inboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(d.receiveAudioStats.id=E.id+"recv",d.receiveAudioStats.type=E.type+"",d.receiveAudioStats.mediaType=E.mediaType+"",d.receiveAudioStats.packetsReceived=E.packetsReceived+"",d.receiveAudioStats.bytesReceived=E.bytesReceived+"",d.receiveAudioStats.packetsLost=E.packetsLost+"",d.receiveAudioStats.googJitterReceived=E.jitter+""):E.type&&"inboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(d.receiveVideoStats.id=E.id+"recv",d.receiveVideoStats.type=E.type+"",d.receiveVideoStats.mediaType=E.mediaType+"",d.receiveVideoStats.packetsReceived=E.packetsReceived+"",d.receiveVideoStats.bytesReceived=E.bytesReceived+"",d.receiveVideoStats.packetsLost=E.packetsLost+"",d.receiveVideoStats.googJitterBufferMs=E.jitter+"",d.receiveVideoStats.googPlisSent=E.pliCount+"",d.receiveVideoStats.googFirsSent=E.firCount+"",d.receiveVideoStats.googNacksSent=E.nackCount+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("v")?(d.receiveVideoStats.googFrameHeightReceived=E.frameHeight+"",d.receiveVideoStats.googFrameWidthReceived=E.frameWidth+"",d.receiveVideoStats.googFrameRateDecoded=E.framesPerSecond+"",d.receiveVideoStats.googFrameRateOutput=E.framesPerSecond+"",d.receiveVideoStats.googFrameRateReceived=E.framesPerSecond+"",d.receiveVideoStats.googFramesDecoded=E.framesDecoded+"",d.receiveVideoStats.googFrameReceived=E.framesReceived+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("a")&&(d.receiveAudioStats.audioOutputLevel=E.audioLevel+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(d.sendAudioStats.id=E.id+"send",d.sendAudioStats.type=E.type+"",d.sendAudioStats.mediaType=E.mediaType+"",d.sendAudioStats.packetsSent=E.packetsSent+"",d.sendAudioStats.bytesSent=E.bytesSent+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(d.sendVideoStats.id=E.id+"send",d.sendVideoStats.type=E.type+"",d.sendVideoStats.mediaType=E.mediaType+"",d.sendVideoStats.packetsSent=E.packetsSent+"",d.sendVideoStats.bytesSent=E.bytesSent+"",d.sendVideoStats.googRtt=E.roundTripTime+"",d.sendVideoStats.googPlisReceived=E.pliCount+"",d.sendVideoStats.googFirsReceived=E.firCount+"",d.sendVideoStats.googNacksReceived=E.nackCount+""):!E.remoteSource&&E.type&&"track"===E.type&&E.framesSent&&0!==E.framesSent&&(d.sendVideoStats.googFrameHeightSent=E.frameHeight+"",d.sendVideoStats.googFrameHeightInput=E.frameHeight+"",d.sendVideoStats.googFrameWidthSent=E.frameWidth+"",d.sendVideoStats.googFrameWidthInput=E.frameWidth+"",d.sendVideoStats.googFramesEncoded=E.framesSent+"",d.sendVideoStats.googFrameRateSent=E.framesPerSecond+"")}),d.config.isSubscriber?(m.push(d.receiveVideoStats),m.push(d.receiveAudioStats)):(m.push(d.sendAudioStats),m.push(d.sendVideoStats)),m.push({id:"time",startTime:d.connectedTime,timestamp:Date.now()}),h&&h(m)})},v.prototype.getStatsRate=function(h){this.getStats(h)},v.prototype.initPeecConnection=function(h){var d=h.stunServerUrl,m=h.turnServer,M=h.iceServers;return this.pcConfig={iceServers:[]},M instanceof Array?this.pcConfig.iceServers=h.iceServers:d&&(d instanceof Array?d.map(function(g){"string"==typeof g&&""!==g&&this.pcConfig.iceServers.push({urls:g})}):"string"==typeof d&&""!==d&&this.pcConfig.iceServers.push({urls:d})),m&&(m instanceof Array?m.map(function(g){"string"==typeof g.url&&""!==g.url&&this.pcConfig.iceServers.push({username:g.username,credential:g.credential,url:g.url})}):"auto"!==m.mode&&"manual"!==m.mode||(m.udpport&&this.pcConfig.iceServers.push({username:m.username,credential:m.credential,credentialType:"password",urls:"turn:"+m.url+":"+m.udpport+"?transport=udp"}),"string"==typeof m.tcpport&&""!==m.tcpport&&this.pcConfig.iceServers.push({username:m.username,credential:m.credential,credentialType:"password",urls:"turn:"+m.url+":"+m.tcpport+"?transport=tcp"}),!0===m.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new p.RTCPeerConnection(this.pcConfig)},v.prototype._ontrack=function(h){this.onaddstream&&this.onaddstream(h,"ontrack")},v.prototype._onaddstream=function(h){this.onaddstream&&this.onaddstream(h,"onaddstream")},v.prototype._oniceconnectionstatechange=function(h){"connected"===h.currentTarget.iceConnectionState&&(this.state=w.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(h.currentTarget.iceConnectionState)},v.prototype._onicecandidate=function(h){!this.candidate&&h&&(this.candidate=h.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},v.prototype.setLocalSDP=function(h){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:h.sdp,type:"offer"})),this.state=w.PREPARING_OFFER,h},v.prototype.editLocalSDP=function(h){return h.sdp=this.setBandWidth(h.sdp),h.sdp=this.reviseOpus(h.sdp),h.sdp=this.addCandidate(h.sdp),h},v.prototype.setSendRecv=function(h){return(h=(h=h.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},v.prototype.setBandWidth=function(h){var d,m,M=this.config,g=M.codec,E=M.minVideoBW,R=M.maxVideoBW,T=M.maxAudioBW,k=M.clientId;if((d=h.match(/m=video.*\r\n/))&&E&&R){m=d[0]+"b=AS:"+R+"\r\n";var I=0,U=0;"h264"===g?(I=h.search(/a=rtpmap:(\d+) H264\/90000\r\n/),U=h.search(/H264\/90000\r\n/)):"vp8"===g?(I=h.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),U=h.search(/VP8\/90000\r\n/)):"vp9"===g&&(I=h.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),U=h.search(/VP9\/90000\r\n/)),-1!==I&&-1!==U&&U-I>10&&(m=m+"a=fmtp:"+h.slice(I+9,U-1)+" x-google-min-bitrate="+E+"\r\n"),h=h.replace(d[0],m),o.default.debug("["+k+"]Set Video Bitrate - min:"+E+" max:"+R)}return(d=h.match(/m=audio.*\r\n/))&&T&&(h=h.replace(d[0],m=d[0]+"b=AS:"+T+"\r\n")),h},v.prototype.reviseOpus=function(h){return(h=h.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},v.prototype.addCandidate=function(h){return h+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},v.prototype.sendOffer=function(h){this.config.callback(JSON.stringify({sdp:h.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=w.OFFER_SENT},v}();q.default=y},function(Z,q,N){var x=N(65),O=N(66),_=N(34),w=N(67);Z.exports=function(o,p){return x(o)||O(o,p)||_(o,p)||w()}},function(Z,q,N){var x,O,_;O=this,_=function(){"use strict";var w,o=this;function p(m){o.console&&(o.console.error?o.console.error(m):o.console.log&&o.console.log(m))}function y(m,M,g,E){var R=E||p,T=m.createShader(g);return m.shaderSource(T,M),m.compileShader(T),m.getShaderParameter(T,m.COMPILE_STATUS)?T:(R("*** Error compiling shader '"+T+"':"+m.getShaderInfoLog(T)),m.deleteShader(T),null)}function v(m,M,g,E,R){var T=R||p,k=m.createProgram();return M.forEach(function(I){m.attachShader(k,I)}),g&&g.forEach(function(I,U){m.bindAttribLocation(k,E?E[U]:U,I)}),m.linkProgram(k),m.getProgramParameter(k,m.LINK_STATUS)?k:(T("Error in program linking:"+m.getProgramInfoLog(k)),m.deleteProgram(k),null)}(w=w||o)===w.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var h,d=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(h=HTMLCanvasElement.prototype.getContext,function(){var m=arguments,M=m[0];return"webgl"===M&&((m=[].slice.call(arguments))[0]="experimental-webgl"),h.apply(this,m)})),{createProgram:v,createProgramFromSources:function(m,M,g,E,R){for(var T=[],k=0;k<M.length;++k)T.push(y(m,M[k],m[d[k]],R));return v(m,T,g,E,R)}}},void 0===(x=function(){return _.call(O)}.apply(q,[]))||(Z.exports=x)},function(Z,q,N){"use strict";var x=this&&this.__awaiter||function(v,h,d,m){return new(d||(d=Promise))(function(M,g){function E(k){try{T(m.next(k))}catch(I){g(I)}}function R(k){try{T(m.throw(k))}catch(I){g(I)}}function T(k){var I;k.done?M(k.value):(I=k.value,I instanceof d?I:new d(function(U){U(I)})).then(E,R)}T((m=m.apply(v,h||[])).next())})},O=this&&this.__generator||function(v,h){var d,m,M,g,E={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return g={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function R(T){return function(k){return function(I){if(d)throw new TypeError("Generator is already executing.");for(;E;)try{if(d=1,m&&(M=2&I[0]?m.return:I[0]?m.throw||((M=m.return)&&M.call(m),0):m.next)&&!(M=M.call(m,I[1])).done)return M;switch(m=0,M&&(I=[2&I[0],M.value]),I[0]){case 0:case 1:M=I;break;case 4:return E.label++,{value:I[1],done:!1};case 5:E.label++,m=I[1],I=[0];continue;case 7:I=E.ops.pop(),E.trys.pop();continue;default:if(!((M=(M=E.trys).length>0&&M[M.length-1])||6!==I[0]&&2!==I[0])){E=0;continue}if(3===I[0]&&(!M||I[1]>M[0]&&I[1]<M[3])){E.label=I[1];break}if(6===I[0]&&E.label<M[1]){E.label=M[1],M=I;break}if(M&&E.label<M[2]){E.label=M[2],E.ops.push(I);break}M[2]&&E.ops.pop(),E.trys.pop();continue}I=h.call(v,E)}catch(U){I=[6,U],m=0}finally{d=M=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([T,k])}}},_=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(q,"__esModule",{value:!0});var w=N(68),o=N(5),p=_(N(0));q.getSupportedCodec=function(v){return x(void 0,void 0,void 0,function(){var h,d,m,M;return O(this,function(E){switch(E.label){case 0:return h={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(p.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{d=w.createRTCPeerConnection({iceServers:[]})}catch(R){return p.default.error("Failed to init RTCPeerConnection",R),[2,Promise.reject(R)]}return d?[3,2]:(p.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(h)]);case 2:return v&&v.stream?[3,7]:(m={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},M=void 0,(o.isSafari()||o.isFireFox()||o.isWeChatBrowser())&&d.addTransceiver?(d.addTransceiver("audio"),d.addTransceiver("video"),[4,d.createOffer()]):[3,4]);case 3:return M=E.sent(),[3,6];case 4:return[4,new Promise(function(R,T){var k=setTimeout(function(){T("CREATEOFFER_TIMEOUT")},3e3);d.createOffer(function(I){clearTimeout(k),R(I)},function(I){clearTimeout(k),T(I)},m)})];case 5:M=E.sent(),E.label=6;case 6:return d.close(),[2,y(M.sdp)];case 7:return v.stream.getTracks&&d.addTrack?v.stream.getTracks().forEach(function(R){d.addTrack(R,v.stream)}):d.addStream(v.stream),M=void 0,o.isSafari()||o.isFireFox()?[4,d.createOffer()]:[3,9];case 8:return M=E.sent(),[3,11];case 9:return[4,new Promise(function(R,T){d.createOffer(R,T)})];case 10:M=E.sent(),E.label=11;case 11:return d.close(),[2,y(M.sdp)]}})})};var y=function(v){var h={video:[],audio:[]};return v.match(/ VP8/i)&&h.video.push("VP8"),v.match(/ VP9/i)&&h.video.push("VP9"),v.match(/ H264/i)&&h.video.push("H264"),v.match(/ opus/i)&&h.audio.push("OPUS"),Promise.resolve(h)}},function(Z,q,N){"use strict";var x=this&&this.__awaiter||function(o,p,y,v){return new(y||(y=Promise))(function(h,d){function m(E){try{g(v.next(E))}catch(R){d(R)}}function M(E){try{g(v.throw(E))}catch(R){d(R)}}function g(E){var R;E.done?h(E.value):(R=E.value,R instanceof y?R:new y(function(T){T(R)})).then(m,M)}g((v=v.apply(o,p||[])).next())})},O=this&&this.__generator||function(o,p){var y,v,h,d,m={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function M(g){return function(E){return function(R){if(y)throw new TypeError("Generator is already executing.");for(;m;)try{if(y=1,v&&(h=2&R[0]?v.return:R[0]?v.throw||((h=v.return)&&h.call(v),0):v.next)&&!(h=h.call(v,R[1])).done)return h;switch(v=0,h&&(R=[2&R[0],h.value]),R[0]){case 0:case 1:h=R;break;case 4:return m.label++,{value:R[1],done:!1};case 5:m.label++,v=R[1],R=[0];continue;case 7:R=m.ops.pop(),m.trys.pop();continue;default:if(!((h=(h=m.trys).length>0&&h[h.length-1])||6!==R[0]&&2!==R[0])){m=0;continue}if(3===R[0]&&(!h||R[1]>h[0]&&R[1]<h[3])){m.label=R[1];break}if(6===R[0]&&m.label<h[1]){m.label=h[1],h=R;break}if(h&&m.label<h[2]){m.label=h[2],m.ops.push(R);break}h[2]&&m.ops.pop(),m.trys.pop();continue}R=p.call(o,m)}catch(T){R=[6,T],v=0}finally{y=h=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([g,E])}}};Object.defineProperty(q,"__esModule",{value:!0});var _=N(10);function w(o){for(var p="",y=0;y<o.length;y+=1)p+=String.fromCharCode(o[y]);return window.btoa(p)}q.encryptRSA=function(o){return x(void 0,void 0,void 0,function(){var p,y,v,h;return O(this,function(d){switch(d.label){case 0:return p=_.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",p,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return y=d.sent(),m=o,v=(new TextEncoder).encode(m),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},y,v)];case 2:return h=d.sent(),[2,w(new Uint8Array(h))]}var m})})}},function(Z,q,N){"use strict";var x=this&&this.__awaiter||function(h,d,m,M){return new(m||(m=Promise))(function(g,E){function R(I){try{k(M.next(I))}catch(U){E(U)}}function T(I){try{k(M.throw(I))}catch(U){E(U)}}function k(I){var U;I.done?g(I.value):(U=I.value,U instanceof m?U:new m(function(V){V(U)})).then(R,T)}k((M=M.apply(h,d||[])).next())})},O=this&&this.__generator||function(h,d){var m,M,g,E,R={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return E={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function T(k){return function(I){return function(U){if(m)throw new TypeError("Generator is already executing.");for(;R;)try{if(m=1,M&&(g=2&U[0]?M.return:U[0]?M.throw||((g=M.return)&&g.call(M),0):M.next)&&!(g=g.call(M,U[1])).done)return g;switch(M=0,g&&(U=[2&U[0],g.value]),U[0]){case 0:case 1:g=U;break;case 4:return R.label++,{value:U[1],done:!1};case 5:R.label++,M=U[1],U=[0];continue;case 7:U=R.ops.pop(),R.trys.pop();continue;default:if(!((g=(g=R.trys).length>0&&g[g.length-1])||6!==U[0]&&2!==U[0])){R=0;continue}if(3===U[0]&&(!g||U[1]>g[0]&&U[1]<g[3])){R.label=U[1];break}if(6===U[0]&&R.label<g[1]){R.label=g[1],g=U;break}if(g&&R.label<g[2]){R.label=g[2],R.ops.push(U);break}g[2]&&R.ops.pop(),R.trys.pop();continue}U=d.call(h,R)}catch(V){U=[6,V],M=0}finally{m=g=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([k,I])}}},_=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(q,"__esModule",{value:!0});var w=_(N(0)),o=N(75),p=N(24),y=N(1),v=N(27);q.addLiveStreamingCapability=function(h,d){var m=this,M=function(g){var E=g.type;if(!h.joinInfo)return new p.AgoraRTCError(p.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(E){case v.LiveStreamingServiceMode.INJECT:return h._injectStreamingClient||(h._injectStreamingClient=new o.AgoraRTCLiveStreamingClient(h.joinInfo),h._injectStreamingClient.onInjectStatusChange=function(R,T,k){h.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:k,status:R})}),h._injectStreamingClient;case v.LiveStreamingServiceMode.RAW:return h._liveRawStreamingClient||(h._liveRawStreamingClient=new o.AgoraRTCLiveStreamingClient(h.joinInfo),h._liveRawStreamingClient.setGatewayConnectionState(h.getConnectionState()),h.on("connection-state-change",function(R){h._liveRawStreamingClient.setGatewayConnectionState(R.curState),"CONNECTING"===R.prevState&&"CONNECTED"===R.curState&&h._liveRawStreamingClient&&h._liveRawStreamingClient.resetAllTask()}),h._liveRawStreamingClient.onLiveStreamError=function(R,T){w.default.error("LIVE_STREAMING_ERROR",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:R,reason:T.code})},h._liveRawStreamingClient.onLiveStreamWarning=function(R,T){w.default.warning("LIVE_STREAMING_WARNING",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:R,reason:T.code})}),h._liveRawStreamingClient;case v.LiveStreamingServiceMode.TRANSCODE:return h._liveTranscodeStreamingClient||(h._liveTranscodeStreamingClient=new o.AgoraRTCLiveStreamingClient(h.joinInfo),h._liveTranscodeStreamingClient.setGatewayConnectionState(h.getConnectionState()),h.on("connection-state-change",function(R){h._liveTranscodeStreamingClient.setGatewayConnectionState(R.curState),"CONNECTING"===R.prevState&&"CONNECTED"===R.curState&&h._liveTranscodeStreamingClient&&h._liveTranscodeStreamingClient.resetAllTask()}),h._liveTranscodeStreamingClient.onLiveStreamError=function(R,T){w.default.error("LIVE_STREAMING_ERROR",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:R,reason:T.code})},h._liveTranscodeStreamingClient.onLiveStreamWarning=function(R,T){w.default.warning("LIVE_STREAMING_WARNING",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:R,reason:T})}),h._liveTranscodeStreamingClient}};h.gatewayClient.addEventListener("join",function(g){h._injectStreamingClient&&h._injectStreamingClient.resetAllTask()}),h.gatewayClient.addEventListener("stream-unpublished",function(g){g.options&&0===g.options.streamType&&(h._liveRawStreamingClient&&h._liveRawStreamingClient.resetAllTask(),h._liveTranscodeStreamingClient&&h._liveTranscodeStreamingClient.resetAllTask())}),h.gatewayClient.addEventListener("stream-published",function(g){}),h.startLiveStreaming=function(g,E){w.default.debug("startLiveStreaming");var R=y.report.reportApiInvoke(d.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(h.gatewayClient&&"audience"===h.gatewayClient.role){var T={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw R(T),T}var k=h._startLiveStreaming(g,E);return k.then(function(I){R(null,I)}).catch(function(I){w.default.error("LIVE_STREAMING_ERROR",I.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:g,reason:I.code}),R(I)}),k},h._startLiveStreaming=function(g,E){return x(m,void 0,void 0,function(){var R;return O(this,function(T){switch(T.label){case 0:return E||("vp8"===d.codec&&w.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===d.codec&&w.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===d.mode&&w.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(h._liveRawStreamingClient&&h._liveRawStreamingClient.haveUrl(g)||h._liveTranscodeStreamingClient&&h._liveTranscodeStreamingClient.haveUrl(g))&&new p.AgoraRTCError(p.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,M({type:R=E?v.LiveStreamingServiceMode.TRANSCODE:v.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(g,R)];case 1:return T.sent(),h.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:g}),[2]}})})},h.setLiveTranscoding=function(g){w.default.debug("setLiveTranscoding: "+JSON.stringify(g));var E=y.report.reportApiInvoke(d.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),R=M({type:v.LiveStreamingServiceMode.TRANSCODE});return R.setTranscodingConfig(g).then(function(){h.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),E(null)}).catch(function(T){w.default.error("SET_LIVE_TRANSCODING_ERROR",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:T.code}),E(T)})},h.stopLiveStreaming=function(g){var E=y.report.reportApiInvoke(d.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),R=h._stopLiveStreaming(g);return R.then(function(T){E(null,T)}).catch(function(T){w.default.error("STOP_LIVE_STREAMING_ERROR",T.toString()),h.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:g,reason:T.code}),E(T)}),R},h._stopLiveStreaming=function(g){return x(this,void 0,void 0,function(){return O(this,function(R){switch(R.label){case 0:return w.default.debug("stopLiveStreaming: "+JSON.stringify(g)),[4,Promise.all([h._liveRawStreamingClient,h._liveTranscodeStreamingClient].map(function(T){return T&&T.haveUrl(g)&&T.stopLiveStreamingTask(g)}))];case 1:return R.sent(),w.default.debug("stopLiveStreaming sucess: "+JSON.stringify(g)),h.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:g}),[2]}})})},h.addInjectStreamUrl=function(g,E){var R=y.report.reportApiInvoke(d.sessionId,{name:"Client.addInjectStreamUrl",options:[g,E],tag:"tracer"});if("audience"===h.gatewayClient.role){var T={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw R(T),T}var k=h._addInjectStreamUrl(g,E);return k.then(function(I){R(null,I)}).catch(function(I){w.default.error("ADD_INJECT_STREAM_ERROR",I.toString()),R(I)}),k},h._addInjectStreamUrl=function(g,E){return x(m,void 0,void 0,function(){var R;return O(this,function(T){switch(T.label){case 0:return(R=M({type:v.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(E,0),[4,R.startLiveStreamingTask(g,v.LiveStreamingServiceMode.INJECT)];case 1:return T.sent(),[2]}})})},h.removeInjectStreamUrl=function(g){return x(this,void 0,void 0,function(){var E,R;return O(this,function(T){return E=y.report.reportApiInvoke(d.sessionId,{name:"Client.removeInjectStreamUrl",options:[g],tag:"tracer"}),(R=h._removeInjectStreamUrl(g)).then(function(k){E(null,k)}).catch(function(k){w.default.error("REMOVE_INJECT_STREAM_ERROR",k.toString()),E(k)}),[2,R]})})},h._removeInjectStreamUrl=function(g){return x(m,void 0,void 0,function(){return O(this,function(E){switch(E.label){case 0:return[4,M({type:v.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(g)];case 1:return E.sent(),[2]}})})},h._terminateLiveStreaming=function(){return x(m,void 0,void 0,function(){return O(this,function(g){return[h._injectStreamingClient,h._liveRawStreamingClient,h._liveTranscodeStreamingClient].forEach(function(E){E&&E.terminate()}),[2]})})}}},function(Z,q,N){"use strict";var x=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(q,"__esModule",{value:!0});var O=x(N(4)),_=x(N(0)),w=N(10);q.default=function(o,p){void 0===p&&(p={width:160,height:120,framerate:15});var y=p.width,v=p.height,h=p.framerate,d=o.stream;if(!d)throw O.default.INVALID_LOCAL_STREAM;if(!d.getVideoTracks()[0])throw O.default.HIGH_STREAM_NOT_VIDEO_TRACE;var m=d.getVideoTracks()[0];_.default.debug("Start getLowStream");var M=document.createElement("video"),g=document.createElement("canvas");M.setAttribute("style","display:none"),M.setAttribute("muted",""),M.muted=!0,M.setAttribute("autoplay",""),M.autoplay=!0,M.setAttribute("playsinline",""),g.setAttribute("style","display:none"),g.setAttribute("width",y.toString()),g.setAttribute("height",v.toString());var E=g.getContext("2d");if(!E)throw new Error("not get canvas context");M.srcObject=d,document.body.append(M),document.body.append(g),M.play(),_.default.debug("Start render lowStream");var R=w.audioTimerLoop(function(){return function(){if(M.paused&&M.play(),M.videoHeight>2&&M.videoWidth>2){var V=g.width*(M.videoHeight/M.videoWidth);Math.abs(V-g.height)>=2&&(_.default.debug("adjust low stream resolution",g.width+"x"+g.height+" -> "+g.width+"x"+V),g.height=V)}E.drawImage(M,0,0,g.width,g.height);var W=o.stream;if(W){var J=W.getVideoTracks()[0];m!==J&&(_.default.debug("adjust low stream track"),M.srcObject=W,m=J)}}()},h),T=g.captureStream(h),k=T.getVideoTracks()[0];return k.requestFrame&&k.requestFrame(),T.clean=function(){_.default.debug("Start clean lowStream"),R(),(M||M.parentNode||M.parentNode.removeChild)&&M.parentNode.removeChild(M),(g||g.parentNode||g.parentNode.removeChild)&&g.parentNode.removeChild(g),_.default.debug("Clean lowStream")},T}},function(Z,q){var N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(N){var x=new Uint8Array(16);Z.exports=function(){return N(x),x}}else{var O=new Array(16);Z.exports=function(){for(var _,w=0;w<16;w++)0==(3&w)&&(_=4294967296*Math.random()),O[w]=_>>>((3&w)<<3)&255;return O}}},function(Z,q){for(var N=[],x=0;x<256;++x)N[x]=(x+256).toString(16).substr(1);Z.exports=function(O,_){var w=_||0;return[N[O[w++]],N[O[w++]],N[O[w++]],N[O[w++]],"-",N[O[w++]],N[O[w++]],"-",N[O[w++]],N[O[w++]],"-",N[O[w++]],N[O[w++]],"-",N[O[w++]],N[O[w++]],N[O[w++]],N[O[w++]],N[O[w++]],N[O[w++]]].join("")}},function(module,exports,__nested_webpack_require_639250__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(undefined){"use strict";var Z,q,x;Z={1:[function(Z,q,N){q.exports=function(x,O){for(var _=new Array(arguments.length-1),w=0,o=2,p=!0;o<arguments.length;)_[w++]=arguments[o++];return new Promise(function(y,v){_[w]=function(h){if(p)if(p=!1,h)v(h);else{for(var d=new Array(arguments.length-1),m=0;m<d.length;)d[m++]=arguments[m];y.apply(null,d)}};try{x.apply(O||null,_)}catch(h){p&&(p=!1,v(h))}})}},{}],2:[function(Z,q,N){var x=N;x.length=function(o){var p=o.length;if(!p)return 0;for(var y=0;--p%4>1&&"="===o.charAt(p);)++y;return Math.ceil(3*o.length)/4-y};for(var O=new Array(64),_=new Array(123),w=0;w<64;)_[O[w]=w<26?w+65:w<52?w+71:w<62?w-4:w-59|43]=w++;x.encode=function(o,p,y){for(var v,h=null,d=[],m=0,M=0;p<y;){var g=o[p++];switch(M){case 0:d[m++]=O[g>>2],v=(3&g)<<4,M=1;break;case 1:d[m++]=O[v|g>>4],v=(15&g)<<2,M=2;break;case 2:d[m++]=O[v|g>>6],d[m++]=O[63&g],M=0}m>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,d)),m=0)}return M&&(d[m++]=O[v],d[m++]=61,1===M&&(d[m++]=61)),h?(m&&h.push(String.fromCharCode.apply(String,d.slice(0,m))),h.join("")):String.fromCharCode.apply(String,d.slice(0,m))},x.decode=function(o,p,y){for(var v,h=y,d=0,m=0;m<o.length;){var M=o.charCodeAt(m++);if(61===M&&d>1)break;if((M=_[M])===undefined)throw Error("invalid encoding");switch(d){case 0:v=M,d=1;break;case 1:p[y++]=v<<2|(48&M)>>4,v=M,d=2;break;case 2:p[y++]=(15&v)<<4|(60&M)>>2,v=M,d=3;break;case 3:p[y++]=(3&v)<<6|M,d=0}}if(1===d)throw Error("invalid encoding");return y-h},x.test=function(o){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(o)}},{}],3:[function(Z,q,N){function x(O,_){"string"==typeof O&&(_=O,O=undefined);var w=[];function o(y){if("string"!=typeof y){var v=p();if(x.verbose&&console.log("codegen: "+v),v="return "+v,y){for(var h=Object.keys(y),d=new Array(h.length+1),m=new Array(h.length),M=0;M<h.length;)d[M]=h[M],m[M]=y[h[M++]];return d[M]=v,Function.apply(null,d).apply(null,m)}return Function(v)()}for(var g=new Array(arguments.length-1),E=0;E<g.length;)g[E]=arguments[++E];if(E=0,y=y.replace(/%([%dfijs])/g,function(R,T){var k=g[E++];switch(T){case"d":case"f":return String(Number(k));case"i":return String(Math.floor(k));case"j":return JSON.stringify(k);case"s":return String(k)}return"%"}),E!==g.length)throw Error("parameter count mismatch");return w.push(y),o}function p(y){return"function "+(y||_||"")+"("+(O&&O.join(",")||"")+"){\n  "+w.join("\n  ")+"\n}"}return o.toString=p,o}q.exports=x,x.verbose=!1},{}],4:[function(Z,q,N){function x(){this._listeners={}}q.exports=x,x.prototype.on=function(O,_,w){return(this._listeners[O]||(this._listeners[O]=[])).push({fn:_,ctx:w||this}),this},x.prototype.off=function(O,_){if(O===undefined)this._listeners={};else if(_===undefined)this._listeners[O]=[];else for(var w=this._listeners[O],o=0;o<w.length;)w[o].fn===_?w.splice(o,1):++o;return this},x.prototype.emit=function(O){var _=this._listeners[O];if(_){for(var w=[],o=1;o<arguments.length;)w.push(arguments[o++]);for(o=0;o<_.length;)_[o].fn.apply(_[o++].ctx,w)}return this}},{}],5:[function(Z,q,N){q.exports=_;var x=Z(1),O=Z(7)("fs");function _(w,o,p){return"function"==typeof o?(p=o,o={}):o||(o={}),p?!o.xhr&&O&&O.readFile?O.readFile(w,function(y,v){return y&&"undefined"!=typeof XMLHttpRequest?_.xhr(w,o,p):y?p(y):p(null,o.binary?v:v.toString("utf8"))}):_.xhr(w,o,p):x(_,this,w,o)}_.xhr=function(w,o,p){var y=new XMLHttpRequest;y.onreadystatechange=function(){if(4!==y.readyState)return undefined;if(0!==y.status&&200!==y.status)return p(Error("status "+y.status));if(o.binary){var v=y.response;if(!v){v=[];for(var h=0;h<y.responseText.length;++h)v.push(255&y.responseText.charCodeAt(h))}return p(null,"undefined"!=typeof Uint8Array?new Uint8Array(v):v)}return p(null,y.responseText)},o.binary&&("overrideMimeType"in y&&y.overrideMimeType("text/plain; charset=x-user-defined"),y.responseType="arraybuffer"),y.open("GET",w),y.send()}},{1:1,7:7}],6:[function(Z,q,N){function x(p){return"undefined"!=typeof Float32Array?function(){var y=new Float32Array([-0]),v=new Uint8Array(y.buffer),h=128===v[3];function d(E,R,T){y[0]=E,R[T]=v[0],R[T+1]=v[1],R[T+2]=v[2],R[T+3]=v[3]}function m(E,R,T){y[0]=E,R[T]=v[3],R[T+1]=v[2],R[T+2]=v[1],R[T+3]=v[0]}function M(E,R){return v[0]=E[R],v[1]=E[R+1],v[2]=E[R+2],v[3]=E[R+3],y[0]}function g(E,R){return v[3]=E[R],v[2]=E[R+1],v[1]=E[R+2],v[0]=E[R+3],y[0]}p.writeFloatLE=h?d:m,p.writeFloatBE=h?m:d,p.readFloatLE=h?M:g,p.readFloatBE=h?g:M}():function(){function y(h,d,m,M){var g=d<0?1:0;if(g&&(d=-d),0===d)h(1/d>0?0:2147483648,m,M);else if(isNaN(d))h(2143289344,m,M);else if(d>34028234663852886e22)h((g<<31|2139095040)>>>0,m,M);else if(d<11754943508222875e-54)h((g<<31|Math.round(d/1401298464324817e-60))>>>0,m,M);else{var E=Math.floor(Math.log(d)/Math.LN2);h((g<<31|E+127<<23|8388607&Math.round(d*Math.pow(2,-E)*8388608))>>>0,m,M)}}function v(h,d,m){var M=h(d,m),g=2*(M>>31)+1,E=M>>>23&255,R=8388607&M;return 255===E?R?NaN:g*(1/0):0===E?1401298464324817e-60*g*R:g*Math.pow(2,E-150)*(R+8388608)}p.writeFloatLE=y.bind(null,O),p.writeFloatBE=y.bind(null,_),p.readFloatLE=v.bind(null,w),p.readFloatBE=v.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var y=new Float64Array([-0]),v=new Uint8Array(y.buffer),h=128===v[7];function d(E,R,T){y[0]=E,R[T]=v[0],R[T+1]=v[1],R[T+2]=v[2],R[T+3]=v[3],R[T+4]=v[4],R[T+5]=v[5],R[T+6]=v[6],R[T+7]=v[7]}function m(E,R,T){y[0]=E,R[T]=v[7],R[T+1]=v[6],R[T+2]=v[5],R[T+3]=v[4],R[T+4]=v[3],R[T+5]=v[2],R[T+6]=v[1],R[T+7]=v[0]}function M(E,R){return v[0]=E[R],v[1]=E[R+1],v[2]=E[R+2],v[3]=E[R+3],v[4]=E[R+4],v[5]=E[R+5],v[6]=E[R+6],v[7]=E[R+7],y[0]}function g(E,R){return v[7]=E[R],v[6]=E[R+1],v[5]=E[R+2],v[4]=E[R+3],v[3]=E[R+4],v[2]=E[R+5],v[1]=E[R+6],v[0]=E[R+7],y[0]}p.writeDoubleLE=h?d:m,p.writeDoubleBE=h?m:d,p.readDoubleLE=h?M:g,p.readDoubleBE=h?g:M}():function(){function y(h,d,m,M,g,E){var R=M<0?1:0;if(R&&(M=-M),0===M)h(0,g,E+d),h(1/M>0?0:2147483648,g,E+m);else if(isNaN(M))h(0,g,E+d),h(2146959360,g,E+m);else if(M>17976931348623157e292)h(0,g,E+d),h((R<<31|2146435072)>>>0,g,E+m);else{var T;if(M<22250738585072014e-324)h((T=M/5e-324)>>>0,g,E+d),h((R<<31|T/4294967296)>>>0,g,E+m);else{var k=Math.floor(Math.log(M)/Math.LN2);1024===k&&(k=1023),h(4503599627370496*(T=M*Math.pow(2,-k))>>>0,g,E+d),h((R<<31|k+1023<<20|1048576*T&1048575)>>>0,g,E+m)}}}function v(h,d,m,M,g){var E=h(M,g+d),R=h(M,g+m),T=2*(R>>31)+1,k=R>>>20&2047,I=4294967296*(1048575&R)+E;return 2047===k?I?NaN:T*(1/0):0===k?5e-324*T*I:T*Math.pow(2,k-1075)*(I+4503599627370496)}p.writeDoubleLE=y.bind(null,O,0,4),p.writeDoubleBE=y.bind(null,_,4,0),p.readDoubleLE=v.bind(null,w,0,4),p.readDoubleBE=v.bind(null,o,4,0)}(),p}function O(p,y,v){y[v]=255&p,y[v+1]=p>>>8&255,y[v+2]=p>>>16&255,y[v+3]=p>>>24}function _(p,y,v){y[v]=p>>>24,y[v+1]=p>>>16&255,y[v+2]=p>>>8&255,y[v+3]=255&p}function w(p,y){return(p[y]|p[y+1]<<8|p[y+2]<<16|p[y+3]<<24)>>>0}function o(p,y){return(p[y]<<24|p[y+1]<<16|p[y+2]<<8|p[y+3])>>>0}q.exports=x(x)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Z){}return null}module.exports=inquire},{}],8:[function(Z,q,N){var x=N,O=x.isAbsolute=function(w){return/^(?:\/|\w+:)/.test(w)},_=x.normalize=function(w){var o=(w=w.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),p=O(w),y="";p&&(y=o.shift()+"/");for(var v=0;v<o.length;)".."===o[v]?v>0&&".."!==o[v-1]?o.splice(--v,2):p?o.splice(v,1):++v:"."===o[v]?o.splice(v,1):++v;return y+o.join("/")};x.resolve=function(w,o,p){return p||(o=_(o)),O(o)?o:(p||(w=_(w)),(w=w.replace(/(?:\/|^)[^/]+$/,"")).length?_(w+"/"+o):o)}},{}],9:[function(Z,q,N){q.exports=function(x,O,_){var w=_||8192,o=w>>>1,p=null,y=w;return function(v){if(v<1||v>o)return x(v);y+v>w&&(p=x(w),y=0);var h=O.call(p,y,y+=v);return 7&y&&(y=1+(7|y)),h}}},{}],10:[function(Z,q,N){var x=N;x.length=function(O){for(var _=0,w=0,o=0;o<O.length;++o)(w=O.charCodeAt(o))<128?_+=1:w<2048?_+=2:55296==(64512&w)&&56320==(64512&O.charCodeAt(o+1))?(++o,_+=4):_+=3;return _},x.read=function(O,_,w){if(w-_<1)return"";for(var o,p=null,y=[],v=0;_<w;)(o=O[_++])<128?y[v++]=o:o>191&&o<224?y[v++]=(31&o)<<6|63&O[_++]:o>239&&o<365?(o=((7&o)<<18|(63&O[_++])<<12|(63&O[_++])<<6|63&O[_++])-65536,y[v++]=55296+(o>>10),y[v++]=56320+(1023&o)):y[v++]=(15&o)<<12|(63&O[_++])<<6|63&O[_++],v>8191&&((p||(p=[])).push(String.fromCharCode.apply(String,y)),v=0);return p?(v&&p.push(String.fromCharCode.apply(String,y.slice(0,v))),p.join("")):String.fromCharCode.apply(String,y.slice(0,v))},x.write=function(O,_,w){for(var o,p,y=w,v=0;v<O.length;++v)(o=O.charCodeAt(v))<128?_[w++]=o:o<2048?(_[w++]=o>>6|192,_[w++]=63&o|128):55296==(64512&o)&&56320==(64512&(p=O.charCodeAt(v+1)))?(++v,_[w++]=(o=65536+((1023&o)<<10)+(1023&p))>>18|240,_[w++]=o>>12&63|128,_[w++]=o>>6&63|128,_[w++]=63&o|128):(_[w++]=o>>12|224,_[w++]=o>>6&63|128,_[w++]=63&o|128);return w-y}},{}],11:[function(Z,q,N){var x=N,O=Z(14),_=Z(33);function w(p,y,v,h){if(y.resolvedType)if(y.resolvedType instanceof O){p("switch(d%s){",h);for(var d=y.resolvedType.values,m=Object.keys(d),M=0;M<m.length;++M)y.repeated&&d[m[M]]===y.typeDefault&&p("default:"),p("case%j:",m[M])("case %i:",d[m[M]])("m%s=%j",h,d[m[M]])("break");p("}")}else p('if(typeof d%s!=="object")',h)("throw TypeError(%j)",y.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",h,v,h);else{var g=!1;switch(y.type){case"double":case"float":p("m%s=Number(d%s)",h,h);break;case"uint32":case"fixed32":p("m%s=d%s>>>0",h,h);break;case"int32":case"sint32":case"sfixed32":p("m%s=d%s|0",h,h);break;case"uint64":g=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":p("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",h,h,g)('else if(typeof d%s==="string")',h)("m%s=parseInt(d%s,10)",h,h)('else if(typeof d%s==="number")',h)("m%s=d%s",h,h)('else if(typeof d%s==="object")',h)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",h,h,h,g?"true":"");break;case"bytes":p('if(typeof d%s==="string")',h)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",h,h,h)("else if(d%s.length)",h)("m%s=d%s",h,h);break;case"string":p("m%s=String(d%s)",h,h);break;case"bool":p("m%s=Boolean(d%s)",h,h)}}return p}function o(p,y,v,h){if(y.resolvedType)y.resolvedType instanceof O?p("d%s=o.enums===String?types[%i].values[m%s]:m%s",h,v,h,h):p("d%s=types[%i].toObject(m%s,o)",h,v,h);else{var d=!1;switch(y.type){case"double":case"float":p("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",h,h,h,h);break;case"uint64":d=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":p('if(typeof m%s==="number")',h)("d%s=o.longs===String?String(m%s):m%s",h,h,h)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",h,h,h,h,d?"true":"",h);break;case"bytes":p("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",h,h,h,h,h);break;default:p("d%s=m%s",h,h)}}return p}x.fromObject=function(p){var y=p.fieldsArray,v=_.codegen(["d"],p.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!y.length)return v("return new this.ctor");v("var m=new this.ctor");for(var h=0;h<y.length;++h){var d=y[h].resolve(),m=_.safeProp(d.name);d.map?(v("if(d%s){",m)('if(typeof d%s!=="object")',m)("throw TypeError(%j)",d.fullName+": object expected")("m%s={}",m)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",m),w(v,d,h,m+"[ks[i]]")("}")("}")):d.repeated?(v("if(d%s){",m)("if(!Array.isArray(d%s))",m)("throw TypeError(%j)",d.fullName+": array expected")("m%s=[]",m)("for(var i=0;i<d%s.length;++i){",m),w(v,d,h,m+"[i]")("}")("}")):(d.resolvedType instanceof O||v("if(d%s!=null){",m),w(v,d,h,m),d.resolvedType instanceof O||v("}"))}return v("return m")},x.toObject=function(p){var y=p.fieldsArray.slice().sort(_.compareFieldsById);if(!y.length)return _.codegen()("return {}");for(var v=_.codegen(["m","o"],p.name+"$toObject")("if(!o)")("o={}")("var d={}"),h=[],d=[],m=[],M=0;M<y.length;++M)y[M].partOf||(y[M].resolve().repeated?h:y[M].map?d:m).push(y[M]);if(h.length){for(v("if(o.arrays||o.defaults){"),M=0;M<h.length;++M)v("d%s=[]",_.safeProp(h[M].name));v("}")}if(d.length){for(v("if(o.objects||o.defaults){"),M=0;M<d.length;++M)v("d%s={}",_.safeProp(d[M].name));v("}")}if(m.length){for(v("if(o.defaults){"),M=0;M<m.length;++M){var g=m[M],E=_.safeProp(g.name);if(g.resolvedType instanceof O)v("d%s=o.enums===String?%j:%j",E,g.resolvedType.valuesById[g.typeDefault],g.typeDefault);else if(g.long)v("if(util.Long){")("var n=new util.Long(%i,%i,%j)",g.typeDefault.low,g.typeDefault.high,g.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",E)("}else")("d%s=o.longs===String?%j:%i",E,g.typeDefault.toString(),g.typeDefault.toNumber());else if(g.bytes){var R="["+Array.prototype.slice.call(g.typeDefault).join(",")+"]";v("if(o.bytes===String)d%s=%j",E,String.fromCharCode.apply(String,g.typeDefault))("else{")("d%s=%s",E,R)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",E,E)("}")}else v("d%s=%j",E,g.typeDefault)}v("}")}var T=!1;for(M=0;M<y.length;++M){var k=p._fieldsArray.indexOf(g=y[M]);E=_.safeProp(g.name),g.map?(T||(T=!0,v("var ks2")),v("if(m%s&&(ks2=Object.keys(m%s)).length){",E,E)("d%s={}",E)("for(var j=0;j<ks2.length;++j){"),o(v,g,k,E+"[ks2[j]]")("}")):g.repeated?(v("if(m%s&&m%s.length){",E,E)("d%s=[]",E)("for(var j=0;j<m%s.length;++j){",E),o(v,g,k,E+"[j]")("}")):(v("if(m%s!=null&&m.hasOwnProperty(%j)){",E,g.name),o(v,g,k,E),g.partOf&&v("if(o.oneofs)")("d%s=%j",_.safeProp(g.partOf.name),g.name)),v("}")}return v("return d")}},{14:14,33:33}],12:[function(Z,q,N){q.exports=function(o){var p=_.codegen(["r","l"],o.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(o.fieldsArray.filter(function(M){return M.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");o.group&&p("if((t&7)===4)")("break"),p("switch(t>>>3){");for(var y=0;y<o.fieldsArray.length;++y){var v=o._fieldsArray[y].resolve(),h=v.resolvedType instanceof x?"int32":v.type,d="m"+_.safeProp(v.name);p("case %i:",v.id),v.map?(p("if(%s===util.emptyObject)",d)("%s={}",d)("var c2 = r.uint32()+r.pos"),O.defaults[v.keyType]!==undefined?p("k=%j",O.defaults[v.keyType]):p("k=null"),O.defaults[h]!==undefined?p("value=%j",O.defaults[h]):p("value=null"),p("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",v.keyType)("case 2:"),O.basic[h]===undefined?p("value=types[%i].decode(r,r.uint32())",y):p("value=r.%s()",h),p("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),p(O.long[v.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",d)):v.repeated?(p("if(!(%s&&%s.length))",d,d)("%s=[]",d),O.packed[h]!==undefined&&p("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",d,h)("}else"),O.basic[h]===undefined?p(v.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",d,y):p("%s.push(r.%s())",d,h)):O.basic[h]===undefined?p(v.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",d,y):p("%s=r.%s()",d,h),p("break")}for(p("default:")("r.skipType(t&7)")("break")("}")("}"),y=0;y<o._fieldsArray.length;++y){var m=o._fieldsArray[y];m.required&&p("if(!m.hasOwnProperty(%j))",m.name)("throw util.ProtocolError(%j,{instance:m})",w(m))}return p("return m")};var x=Z(14),O=Z(32),_=Z(33);function w(o){return"missing required '"+o.name+"'"}},{14:14,32:32,33:33}],13:[function(Z,q,N){q.exports=function(o){for(var p,y=_.codegen(["m","w"],o.name+"$encode")("if(!w)")("w=Writer.create()"),v=o.fieldsArray.slice().sort(_.compareFieldsById),h=0;h<v.length;++h){var d=v[h].resolve(),m=o._fieldsArray.indexOf(d),M=d.resolvedType instanceof x?"int32":d.type,g=O.basic[M];p="m"+_.safeProp(d.name),d.map?(y("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",p,d.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",p)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(d.id<<3|2)>>>0,8|O.mapKey[d.keyType],d.keyType),g===undefined?y("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",m,p):y(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|g,M,p),y("}")("}")):d.repeated?(y("if(%s!=null&&%s.length){",p,p),d.packed&&O.packed[M]!==undefined?y("w.uint32(%i).fork()",(d.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",p)("w.%s(%s[i])",M,p)("w.ldelim()"):(y("for(var i=0;i<%s.length;++i)",p),g===undefined?w(y,d,m,p+"[i]"):y("w.uint32(%i).%s(%s[i])",(d.id<<3|g)>>>0,M,p)),y("}")):(d.optional&&y("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",p,d.name),g===undefined?w(y,d,m,p):y("w.uint32(%i).%s(%s)",(d.id<<3|g)>>>0,M,p))}return y("return w")};var x=Z(14),O=Z(32),_=Z(33);function w(o,p,y,v){return p.resolvedType.group?o("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",y,v,(p.id<<3|3)>>>0,(p.id<<3|4)>>>0):o("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",y,v,(p.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(Z,q,N){q.exports=w;var x=Z(22);((w.prototype=Object.create(x.prototype)).constructor=w).className="Enum";var O=Z(21),_=Z(33);function w(o,p,y,v,h){if(x.call(this,o,y),p&&"object"!=typeof p)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=v,this.comments=h||{},this.reserved=undefined,p)for(var d=Object.keys(p),m=0;m<d.length;++m)"number"==typeof p[d[m]]&&(this.valuesById[this.values[d[m]]=p[d[m]]]=d[m])}w.fromJSON=function(o,p){var y=new w(o,p.values,p.options,p.comment,p.comments);return y.reserved=p.reserved,y},w.prototype.toJSON=function(o){var p=!!o&&Boolean(o.keepComments);return _.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",p?this.comment:undefined,"comments",p?this.comments:undefined])},w.prototype.add=function(o,p,y){if(!_.isString(o))throw TypeError("name must be a string");if(!_.isInteger(p))throw TypeError("id must be an integer");if(this.values[o]!==undefined)throw Error("duplicate name '"+o+"' in "+this);if(this.isReservedId(p))throw Error("id "+p+" is reserved in "+this);if(this.isReservedName(o))throw Error("name '"+o+"' is reserved in "+this);if(this.valuesById[p]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+p+" in "+this);this.values[o]=p}else this.valuesById[this.values[o]=p]=o;return this.comments[o]=y||null,this},w.prototype.remove=function(o){if(!_.isString(o))throw TypeError("name must be a string");var p=this.values[o];if(null==p)throw Error("name '"+o+"' does not exist in "+this);return delete this.valuesById[p],delete this.values[o],delete this.comments[o],this},w.prototype.isReservedId=function(o){return O.isReservedId(this.reserved,o)},w.prototype.isReservedName=function(o){return O.isReservedName(this.reserved,o)}},{21:21,22:22,33:33}],15:[function(Z,q,N){q.exports=y;var x=Z(22);((y.prototype=Object.create(x.prototype)).constructor=y).className="Field";var O,_=Z(14),w=Z(32),o=Z(33),p=/^required|optional|repeated$/;function y(v,h,d,m,M,g,E){if(o.isObject(m)?(E=M,g=m,m=M=undefined):o.isObject(M)&&(E=g,g=M,M=undefined),x.call(this,v,g),!o.isInteger(h)||h<0)throw TypeError("id must be a non-negative integer");if(!o.isString(d))throw TypeError("type must be a string");if(m!==undefined&&!p.test(m=m.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(M!==undefined&&!o.isString(M))throw TypeError("extend must be a string");this.rule=m&&"optional"!==m?m:undefined,this.type=d,this.id=h,this.extend=M||undefined,this.required="required"===m,this.optional=!this.required,this.repeated="repeated"===m,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&w.long[d]!==undefined,this.bytes="bytes"===d,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=E}y.fromJSON=function(v,h){return new y(v,h.id,h.type,h.rule,h.extend,h.options,h.comment)},Object.defineProperty(y.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),y.prototype.setOption=function(v,h,d){return"packed"===v&&(this._packed=null),x.prototype.setOption.call(this,v,h,d)},y.prototype.toJSON=function(v){var h=!!v&&Boolean(v.keepComments);return o.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",h?this.comment:undefined])},y.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=w.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof O?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof _&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof _)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var v;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,v=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,v=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=v}return this.defaultValue=this.map?o.emptyObject:this.repeated?o.emptyArray:this.typeDefault,this.parent instanceof O&&(this.parent.ctor.prototype[this.name]=this.defaultValue),x.prototype.resolve.call(this)},y.d=function(v,h,d,m){return"function"==typeof h?h=o.decorateType(h).name:h&&"object"==typeof h&&(h=o.decorateEnum(h).name),function(M,g){o.decorateType(M.constructor).add(new y(g,v,h,d,{default:m}))}},y._configure=function(v){O=v}},{14:14,22:22,32:32,33:33}],16:[function(Z,q,N){var x=q.exports=Z(17);x.build="light",x.load=function(O,_,w){return"function"==typeof _?(w=_,_=new x.Root):_||(_=new x.Root),_.load(O,w)},x.loadSync=function(O,_){return _||(_=new x.Root),_.loadSync(O)},x.encoder=Z(13),x.decoder=Z(12),x.verifier=Z(36),x.converter=Z(11),x.ReflectionObject=Z(22),x.Namespace=Z(21),x.Root=Z(26),x.Enum=Z(14),x.Type=Z(31),x.Field=Z(15),x.OneOf=Z(23),x.MapField=Z(18),x.Service=Z(30),x.Method=Z(20),x.Message=Z(19),x.wrappers=Z(37),x.types=Z(32),x.util=Z(33),x.ReflectionObject._configure(x.Root),x.Namespace._configure(x.Type,x.Service,x.Enum),x.Root._configure(x.Type),x.Field._configure(x.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(Z,q,N){var x=N;function O(){x.util._configure(),x.Writer._configure(x.BufferWriter),x.Reader._configure(x.BufferReader)}x.build="minimal",x.Writer=Z(38),x.BufferWriter=Z(39),x.Reader=Z(24),x.BufferReader=Z(25),x.util=Z(35),x.rpc=Z(28),x.roots=Z(27),x.configure=O,O()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(Z,q,N){q.exports=w;var x=Z(15);((w.prototype=Object.create(x.prototype)).constructor=w).className="MapField";var O=Z(32),_=Z(33);function w(o,p,y,v,h,d){if(x.call(this,o,p,v,undefined,undefined,h,d),!_.isString(y))throw TypeError("keyType must be a string");this.keyType=y,this.resolvedKeyType=null,this.map=!0}w.fromJSON=function(o,p){return new w(o,p.id,p.keyType,p.type,p.options,p.comment)},w.prototype.toJSON=function(o){var p=!!o&&Boolean(o.keepComments);return _.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",p?this.comment:undefined])},w.prototype.resolve=function(){if(this.resolved)return this;if(O.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return x.prototype.resolve.call(this)},w.d=function(o,p,y){return"function"==typeof y?y=_.decorateType(y).name:y&&"object"==typeof y&&(y=_.decorateEnum(y).name),function(v,h){_.decorateType(v.constructor).add(new w(h,o,p,y))}}},{15:15,32:32,33:33}],19:[function(Z,q,N){q.exports=O;var x=Z(35);function O(_){if(_)for(var w=Object.keys(_),o=0;o<w.length;++o)this[w[o]]=_[w[o]]}O.create=function(_){return this.$type.create(_)},O.encode=function(_,w){return this.$type.encode(_,w)},O.encodeDelimited=function(_,w){return this.$type.encodeDelimited(_,w)},O.decode=function(_){return this.$type.decode(_)},O.decodeDelimited=function(_){return this.$type.decodeDelimited(_)},O.verify=function(_){return this.$type.verify(_)},O.fromObject=function(_){return this.$type.fromObject(_)},O.toObject=function(_,w){return this.$type.toObject(_,w)},O.prototype.toJSON=function(){return this.$type.toObject(this,x.toJSONOptions)}},{35:35}],20:[function(Z,q,N){q.exports=_;var x=Z(22);((_.prototype=Object.create(x.prototype)).constructor=_).className="Method";var O=Z(33);function _(w,o,p,y,v,h,d,m){if(O.isObject(v)?(d=v,v=h=undefined):O.isObject(h)&&(d=h,h=undefined),o!==undefined&&!O.isString(o))throw TypeError("type must be a string");if(!O.isString(p))throw TypeError("requestType must be a string");if(!O.isString(y))throw TypeError("responseType must be a string");x.call(this,w,d),this.type=o||"rpc",this.requestType=p,this.requestStream=!!v||undefined,this.responseType=y,this.responseStream=!!h||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=m}_.fromJSON=function(w,o){return new _(w,o.type,o.requestType,o.responseType,o.requestStream,o.responseStream,o.options,o.comment)},_.prototype.toJSON=function(w){var o=!!w&&Boolean(w.keepComments);return O.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",o?this.comment:undefined])},_.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),x.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(Z,q,N){q.exports=v;var x=Z(22);((v.prototype=Object.create(x.prototype)).constructor=v).className="Namespace";var O,_,w,o=Z(15),p=Z(33);function y(d,m){if(!d||!d.length)return undefined;for(var M={},g=0;g<d.length;++g)M[d[g].name]=d[g].toJSON(m);return M}function v(d,m){x.call(this,d,m),this.nested=undefined,this._nestedArray=null}function h(d){return d._nestedArray=null,d}v.fromJSON=function(d,m){return new v(d,m.options).addJSON(m.nested)},v.arrayToJSON=y,v.isReservedId=function(d,m){if(d)for(var M=0;M<d.length;++M)if("string"!=typeof d[M]&&d[M][0]<=m&&d[M][1]>m)return!0;return!1},v.isReservedName=function(d,m){if(d)for(var M=0;M<d.length;++M)if(d[M]===m)return!0;return!1},Object.defineProperty(v.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=p.toArray(this.nested))}}),v.prototype.toJSON=function(d){return p.toObject(["options",this.options,"nested",y(this.nestedArray,d)])},v.prototype.addJSON=function(d){if(d)for(var m,M=Object.keys(d),g=0;g<M.length;++g)this.add(((m=d[M[g]]).fields!==undefined?O.fromJSON:m.values!==undefined?w.fromJSON:m.methods!==undefined?_.fromJSON:m.id!==undefined?o.fromJSON:v.fromJSON)(M[g],m));return this},v.prototype.get=function(d){return this.nested&&this.nested[d]||null},v.prototype.getEnum=function(d){if(this.nested&&this.nested[d]instanceof w)return this.nested[d].values;throw Error("no such enum: "+d)},v.prototype.add=function(d){if(!(d instanceof o&&d.extend!==undefined||d instanceof O||d instanceof w||d instanceof _||d instanceof v))throw TypeError("object must be a valid nested object");if(this.nested){var m=this.get(d.name);if(m){if(!(m instanceof v&&d instanceof v)||m instanceof O||m instanceof _)throw Error("duplicate name '"+d.name+"' in "+this);for(var M=m.nestedArray,g=0;g<M.length;++g)d.add(M[g]);this.remove(m),this.nested||(this.nested={}),d.setOptions(m.options,!0)}}else this.nested={};return this.nested[d.name]=d,d.onAdd(this),h(this)},v.prototype.remove=function(d){if(!(d instanceof x))throw TypeError("object must be a ReflectionObject");if(d.parent!==this)throw Error(d+" is not a member of "+this);return delete this.nested[d.name],Object.keys(this.nested).length||(this.nested=undefined),d.onRemove(this),h(this)},v.prototype.define=function(d,m){if(p.isString(d))d=d.split(".");else if(!Array.isArray(d))throw TypeError("illegal path");if(d&&d.length&&""===d[0])throw Error("path must be relative");for(var M=this;d.length>0;){var g=d.shift();if(M.nested&&M.nested[g]){if(!((M=M.nested[g])instanceof v))throw Error("path conflicts with non-namespace objects")}else M.add(M=new v(g))}return m&&M.addJSON(m),M},v.prototype.resolveAll=function(){for(var d=this.nestedArray,m=0;m<d.length;)d[m]instanceof v?d[m++].resolveAll():d[m++].resolve();return this.resolve()},v.prototype.lookup=function(d,m,M){if("boolean"==typeof m?(M=m,m=undefined):m&&!Array.isArray(m)&&(m=[m]),p.isString(d)&&d.length){if("."===d)return this.root;d=d.split(".")}else if(!d.length)return this;if(""===d[0])return this.root.lookup(d.slice(1),m);var g=this.get(d[0]);if(g){if(1===d.length){if(!m||m.indexOf(g.constructor)>-1)return g}else if(g instanceof v&&(g=g.lookup(d.slice(1),m,!0)))return g}else for(var E=0;E<this.nestedArray.length;++E)if(this._nestedArray[E]instanceof v&&(g=this._nestedArray[E].lookup(d,m,!0)))return g;return null===this.parent||M?null:this.parent.lookup(d,m)},v.prototype.lookupType=function(d){var m=this.lookup(d,[O]);if(!m)throw Error("no such type: "+d);return m},v.prototype.lookupEnum=function(d){var m=this.lookup(d,[w]);if(!m)throw Error("no such Enum '"+d+"' in "+this);return m},v.prototype.lookupTypeOrEnum=function(d){var m=this.lookup(d,[O,w]);if(!m)throw Error("no such Type or Enum '"+d+"' in "+this);return m},v.prototype.lookupService=function(d){var m=this.lookup(d,[_]);if(!m)throw Error("no such Service '"+d+"' in "+this);return m},v._configure=function(d,m,M){O=d,_=m,w=M}},{15:15,22:22,33:33}],22:[function(Z,q,N){q.exports=_,_.className="ReflectionObject";var x,O=Z(33);function _(w,o){if(!O.isString(w))throw TypeError("name must be a string");if(o&&!O.isObject(o))throw TypeError("options must be an object");this.options=o,this.parsedOptions=null,this.name=w,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(_.prototype,{root:{get:function(){for(var w=this;null!==w.parent;)w=w.parent;return w}},fullName:{get:function(){for(var w=[this.name],o=this.parent;o;)w.unshift(o.name),o=o.parent;return w.join(".")}}}),_.prototype.toJSON=function(){throw Error()},_.prototype.onAdd=function(w){this.parent&&this.parent!==w&&this.parent.remove(this),this.parent=w,this.resolved=!1;var o=w.root;o instanceof x&&o._handleAdd(this)},_.prototype.onRemove=function(w){var o=w.root;o instanceof x&&o._handleRemove(this),this.parent=null,this.resolved=!1},_.prototype.resolve=function(){return this.resolved||this.root instanceof x&&(this.resolved=!0),this},_.prototype.getOption=function(w){return this.options?this.options[w]:undefined},_.prototype.setOption=function(w,o,p){return p&&this.options&&this.options[w]!==undefined||((this.options||(this.options={}))[w]=o),this},_.prototype.setParsedOption=function(w,o,p){this.parsedOptions||(this.parsedOptions=[]);var y=this.parsedOptions;if(p){var v=y.find(function(m){return Object.prototype.hasOwnProperty.call(m,w)});v?O.setProperty(v[w],p,o):((v={})[w]=O.setProperty({},p,o),y.push(v))}else{var d={};d[w]=o,y.push(d)}return this},_.prototype.setOptions=function(w,o){if(w)for(var p=Object.keys(w),y=0;y<p.length;++y)this.setOption(p[y],w[p[y]],o);return this},_.prototype.toString=function(){var w=this.constructor.className,o=this.fullName;return o.length?w+" "+o:w},_._configure=function(w){x=w}},{33:33}],23:[function(Z,q,N){q.exports=w;var x=Z(22);((w.prototype=Object.create(x.prototype)).constructor=w).className="OneOf";var O=Z(15),_=Z(33);function w(p,y,v,h){if(Array.isArray(y)||(v=y,y=undefined),x.call(this,p,v),y!==undefined&&!Array.isArray(y))throw TypeError("fieldNames must be an Array");this.oneof=y||[],this.fieldsArray=[],this.comment=h}function o(p){if(p.parent)for(var y=0;y<p.fieldsArray.length;++y)p.fieldsArray[y].parent||p.parent.add(p.fieldsArray[y])}w.fromJSON=function(p,y){return new w(p,y.oneof,y.options,y.comment)},w.prototype.toJSON=function(p){var y=!!p&&Boolean(p.keepComments);return _.toObject(["options",this.options,"oneof",this.oneof,"comment",y?this.comment:undefined])},w.prototype.add=function(p){if(!(p instanceof O))throw TypeError("field must be a Field");return p.parent&&p.parent!==this.parent&&p.parent.remove(p),this.oneof.push(p.name),this.fieldsArray.push(p),p.partOf=this,o(this),this},w.prototype.remove=function(p){if(!(p instanceof O))throw TypeError("field must be a Field");var y=this.fieldsArray.indexOf(p);if(y<0)throw Error(p+" is not a member of "+this);return this.fieldsArray.splice(y,1),(y=this.oneof.indexOf(p.name))>-1&&this.oneof.splice(y,1),p.partOf=null,this},w.prototype.onAdd=function(p){x.prototype.onAdd.call(this,p);for(var y=0;y<this.oneof.length;++y){var v=p.get(this.oneof[y]);v&&!v.partOf&&(v.partOf=this,this.fieldsArray.push(v))}o(this)},w.prototype.onRemove=function(p){for(var y,v=0;v<this.fieldsArray.length;++v)(y=this.fieldsArray[v]).parent&&y.parent.remove(y);x.prototype.onRemove.call(this,p)},w.d=function(){for(var p=new Array(arguments.length),y=0;y<arguments.length;)p[y]=arguments[y++];return function(v,h){_.decorateType(v.constructor).add(new w(h,p)),Object.defineProperty(v,h,{get:_.oneOfGetter(p),set:_.oneOfSetter(p)})}}},{15:15,22:22,33:33}],24:[function(Z,q,N){q.exports=p;var x,O=Z(35),_=O.LongBits,w=O.utf8;function o(g,E){return RangeError("index out of range: "+g.pos+" + "+(E||1)+" > "+g.len)}function p(g){this.buf=g,this.pos=0,this.len=g.length}var y,v="undefined"!=typeof Uint8Array?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new p(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new p(g);throw Error("illegal buffer")},h=function(){return O.Buffer?function(g){return(p.create=function(E){return O.Buffer.isBuffer(E)?new x(E):v(E)})(g)}:v};function d(){var g=new _(0,0),E=0;if(!(this.len-this.pos>4)){for(;E<3;++E){if(this.pos>=this.len)throw o(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*E)>>>0,g}for(;E<4;++E)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;if(E=0,this.len-this.pos>4){for(;E<5;++E)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return g}else for(;E<5;++E){if(this.pos>=this.len)throw o(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function m(g,E){return(g[E-4]|g[E-3]<<8|g[E-2]<<16|g[E-1]<<24)>>>0}function M(){if(this.pos+8>this.len)throw o(this,8);return new _(m(this.buf,this.pos+=4),m(this.buf,this.pos+=4))}p.create=h(),p.prototype._slice=O.Array.prototype.subarray||O.Array.prototype.slice,p.prototype.uint32=(y=4294967295,function(){if(y=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(y=(y|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(y=(y|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(y=(y|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(y=(y|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return y;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return y}),p.prototype.int32=function(){return 0|this.uint32()},p.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)|0},p.prototype.bool=function(){return 0!==this.uint32()},p.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return m(this.buf,this.pos+=4)},p.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|m(this.buf,this.pos+=4)},p.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var g=O.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},p.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var g=O.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},p.prototype.bytes=function(){var g=this.uint32(),E=this.pos,R=this.pos+g;if(R>this.len)throw o(this,g);return this.pos+=g,Array.isArray(this.buf)?this.buf.slice(E,R):E===R?new this.buf.constructor(0):this._slice.call(this.buf,E,R)},p.prototype.string=function(){var g=this.bytes();return w.read(g,0,g.length)},p.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw o(this,g);this.pos+=g}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},p.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},p._configure=function(g){x=g,p.create=h(),x._configure();var E=O.Long?"toLong":"toNumber";O.merge(p.prototype,{int64:function(){return d.call(this)[E](!1)},uint64:function(){return d.call(this)[E](!0)},sint64:function(){return d.call(this).zzDecode()[E](!1)},fixed64:function(){return M.call(this)[E](!0)},sfixed64:function(){return M.call(this)[E](!1)}})}},{35:35}],25:[function(Z,q,N){q.exports=_;var x=Z(24);(_.prototype=Object.create(x.prototype)).constructor=_;var O=Z(35);function _(w){x.call(this,w)}_._configure=function(){O.Buffer&&(_.prototype._slice=O.Buffer.prototype.slice)},_.prototype.string=function(){var w=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+w,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+w,this.len))},_._configure()},{24:24,35:35}],26:[function(Z,q,N){q.exports=h;var x=Z(21);((h.prototype=Object.create(x.prototype)).constructor=h).className="Root";var O,_,w,o=Z(15),p=Z(14),y=Z(23),v=Z(33);function h(g){x.call(this,"",g),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(g,E){return E||(E=new h),g.options&&E.setOptions(g.options),E.addJSON(g.nested)},h.prototype.resolvePath=v.path.resolve,h.prototype.fetch=v.fetch,h.prototype.load=function g(E,R,T){"function"==typeof R&&(T=R,R=undefined);var k=this;if(!T)return v.asPromise(g,k,E,R);var I=T===d;function U(z,u){if(T){var t=T;if(T=null,I)throw z;t(z,u)}}function V(z){var u=z.lastIndexOf("google/protobuf/");if(u>-1){var t=z.substring(u);if(t in w)return t}return null}function W(z,u){try{if(v.isString(u)&&"{"===u.charAt(0)&&(u=JSON.parse(u)),v.isString(u)){_.filename=z;var t,n=_(u,k,R),a=0;if(n.imports)for(;a<n.imports.length;++a)(t=V(n.imports[a])||k.resolvePath(z,n.imports[a]))&&J(t);if(n.weakImports)for(a=0;a<n.weakImports.length;++a)(t=V(n.weakImports[a])||k.resolvePath(z,n.weakImports[a]))&&J(t,!0)}else k.setOptions(u.options).addJSON(u.nested)}catch(i){U(i)}I||K||U(null,k)}function J(z,u){if(!(k.files.indexOf(z)>-1))if(k.files.push(z),z in w)I?W(z,w[z]):(++K,setTimeout(function(){--K,W(z,w[z])}));else if(I){var t;try{t=v.fs.readFileSync(z).toString("utf8")}catch(n){return void(u||U(n))}W(z,t)}else++K,k.fetch(z,function(n,a){--K,T&&(n?u?K||U(null,k):U(n):W(z,a))})}var K=0;v.isString(E)&&(E=[E]);for(var P,S=0;S<E.length;++S)(P=k.resolvePath("",E[S]))&&J(P);return I?k:(K||U(null,k),undefined)},h.prototype.loadSync=function(g,E){if(!v.isNode)throw Error("not supported");return this.load(g,E,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(g){return"'extend "+g.extend+"' in "+g.parent.fullName}).join(", "));return x.prototype.resolveAll.call(this)};var m=/^[A-Z]/;function M(g,E){var R=E.parent.lookup(E.extend);if(R){var T=new o(E.fullName,E.id,E.type,E.rule,undefined,E.options);return T.declaringField=E,E.extensionField=T,R.add(T),!0}return!1}h.prototype._handleAdd=function(g){if(g instanceof o)g.extend===undefined||g.extensionField||M(0,g)||this.deferred.push(g);else if(g instanceof p)m.test(g.name)&&(g.parent[g.name]=g.values);else if(!(g instanceof y)){if(g instanceof O)for(var E=0;E<this.deferred.length;)M(0,this.deferred[E])?this.deferred.splice(E,1):++E;for(var R=0;R<g.nestedArray.length;++R)this._handleAdd(g._nestedArray[R]);m.test(g.name)&&(g.parent[g.name]=g)}},h.prototype._handleRemove=function(g){if(g instanceof o){if(g.extend!==undefined)if(g.extensionField)g.extensionField.parent.remove(g.extensionField),g.extensionField=null;else{var E=this.deferred.indexOf(g);E>-1&&this.deferred.splice(E,1)}}else if(g instanceof p)m.test(g.name)&&delete g.parent[g.name];else if(g instanceof x){for(var R=0;R<g.nestedArray.length;++R)this._handleRemove(g._nestedArray[R]);m.test(g.name)&&delete g.parent[g.name]}},h._configure=function(g,E,R){O=g,_=E,w=R}},{14:14,15:15,21:21,23:23,33:33}],27:[function(Z,q,N){q.exports={}},{}],28:[function(Z,q,N){N.Service=Z(29)},{29:29}],29:[function(Z,q,N){q.exports=O;var x=Z(35);function O(_,w,o){if("function"!=typeof _)throw TypeError("rpcImpl must be a function");x.EventEmitter.call(this),this.rpcImpl=_,this.requestDelimited=Boolean(w),this.responseDelimited=Boolean(o)}(O.prototype=Object.create(x.EventEmitter.prototype)).constructor=O,O.prototype.rpcCall=function _(w,o,p,y,v){if(!y)throw TypeError("request must be specified");var h=this;if(!v)return x.asPromise(_,h,w,o,p,y);if(!h.rpcImpl)return setTimeout(function(){v(Error("already ended"))},0),undefined;try{return h.rpcImpl(w,o[h.requestDelimited?"encodeDelimited":"encode"](y).finish(),function(d,m){if(d)return h.emit("error",d,w),v(d);if(null===m)return h.end(!0),undefined;if(!(m instanceof p))try{m=p[h.responseDelimited?"decodeDelimited":"decode"](m)}catch(M){return h.emit("error",M,w),v(M)}return h.emit("data",m,w),v(null,m)})}catch(d){return h.emit("error",d,w),setTimeout(function(){v(d)},0),undefined}},O.prototype.end=function(_){return this.rpcImpl&&(_||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(Z,q,N){q.exports=o;var x=Z(21);((o.prototype=Object.create(x.prototype)).constructor=o).className="Service";var O=Z(20),_=Z(33),w=Z(28);function o(y,v){x.call(this,y,v),this.methods={},this._methodsArray=null}function p(y){return y._methodsArray=null,y}o.fromJSON=function(y,v){var h=new o(y,v.options);if(v.methods)for(var d=Object.keys(v.methods),m=0;m<d.length;++m)h.add(O.fromJSON(d[m],v.methods[d[m]]));return v.nested&&h.addJSON(v.nested),h.comment=v.comment,h},o.prototype.toJSON=function(y){var v=x.prototype.toJSON.call(this,y),h=!!y&&Boolean(y.keepComments);return _.toObject(["options",v&&v.options||undefined,"methods",x.arrayToJSON(this.methodsArray,y)||{},"nested",v&&v.nested||undefined,"comment",h?this.comment:undefined])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=_.toArray(this.methods))}}),o.prototype.get=function(y){return this.methods[y]||x.prototype.get.call(this,y)},o.prototype.resolveAll=function(){for(var y=this.methodsArray,v=0;v<y.length;++v)y[v].resolve();return x.prototype.resolve.call(this)},o.prototype.add=function(y){if(this.get(y.name))throw Error("duplicate name '"+y.name+"' in "+this);return y instanceof O?(this.methods[y.name]=y,y.parent=this,p(this)):x.prototype.add.call(this,y)},o.prototype.remove=function(y){if(y instanceof O){if(this.methods[y.name]!==y)throw Error(y+" is not a member of "+this);return delete this.methods[y.name],y.parent=null,p(this)}return x.prototype.remove.call(this,y)},o.prototype.create=function(y,v,h){for(var d,m=new w.Service(y,v,h),M=0;M<this.methodsArray.length;++M){var g=_.lcFirst((d=this._methodsArray[M]).resolve().name).replace(/[^$\w_]/g,"");m[g]=_.codegen(["r","c"],_.isReserved(g)?g+"_":g)("return this.rpcCall(m,q,s,r,c)")({m:d,q:d.resolvedRequestType.ctor,s:d.resolvedResponseType.ctor})}return m}},{20:20,21:21,28:28,33:33}],31:[function(Z,q,N){q.exports=T;var x=Z(21);((T.prototype=Object.create(x.prototype)).constructor=T).className="Type";var O=Z(14),_=Z(23),w=Z(15),o=Z(18),p=Z(30),y=Z(19),v=Z(24),h=Z(38),d=Z(33),m=Z(13),M=Z(12),g=Z(36),E=Z(11),R=Z(37);function T(I,U){x.call(this,I,U),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function k(I){return I._fieldsById=I._fieldsArray=I._oneofsArray=null,delete I.encode,delete I.decode,delete I.verify,I}Object.defineProperties(T.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var I=Object.keys(this.fields),U=0;U<I.length;++U){var V=this.fields[I[U]],W=V.id;if(this._fieldsById[W])throw Error("duplicate id "+W+" in "+this);this._fieldsById[W]=V}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=T.generateConstructor(this)())},set:function(I){var U=I.prototype;U instanceof y||((I.prototype=new y).constructor=I,d.merge(I.prototype,U)),I.$type=I.prototype.$type=this,d.merge(I,y,!0),this._ctor=I;for(var V=0;V<this.fieldsArray.length;++V)this._fieldsArray[V].resolve();var W={};for(V=0;V<this.oneofsArray.length;++V)W[this._oneofsArray[V].resolve().name]={get:d.oneOfGetter(this._oneofsArray[V].oneof),set:d.oneOfSetter(this._oneofsArray[V].oneof)};V&&Object.defineProperties(I.prototype,W)}}}),T.generateConstructor=function(I){for(var U,V=d.codegen(["p"],I.name),W=0;W<I.fieldsArray.length;++W)(U=I._fieldsArray[W]).map?V("this%s={}",d.safeProp(U.name)):U.repeated&&V("this%s=[]",d.safeProp(U.name));return V("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},T.fromJSON=function(I,U){var V=new T(I,U.options);V.extensions=U.extensions,V.reserved=U.reserved;for(var W=Object.keys(U.fields),J=0;J<W.length;++J)V.add((void 0!==U.fields[W[J]].keyType?o.fromJSON:w.fromJSON)(W[J],U.fields[W[J]]));if(U.oneofs)for(W=Object.keys(U.oneofs),J=0;J<W.length;++J)V.add(_.fromJSON(W[J],U.oneofs[W[J]]));if(U.nested)for(W=Object.keys(U.nested),J=0;J<W.length;++J){var K=U.nested[W[J]];V.add((K.id!==undefined?w.fromJSON:K.fields!==undefined?T.fromJSON:K.values!==undefined?O.fromJSON:K.methods!==undefined?p.fromJSON:x.fromJSON)(W[J],K))}return U.extensions&&U.extensions.length&&(V.extensions=U.extensions),U.reserved&&U.reserved.length&&(V.reserved=U.reserved),U.group&&(V.group=!0),U.comment&&(V.comment=U.comment),V},T.prototype.toJSON=function(I){var U=x.prototype.toJSON.call(this,I),V=!!I&&Boolean(I.keepComments);return d.toObject(["options",U&&U.options||undefined,"oneofs",x.arrayToJSON(this.oneofsArray,I),"fields",x.arrayToJSON(this.fieldsArray.filter(function(W){return!W.declaringField}),I)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",U&&U.nested||undefined,"comment",V?this.comment:undefined])},T.prototype.resolveAll=function(){for(var I=this.fieldsArray,U=0;U<I.length;)I[U++].resolve();var V=this.oneofsArray;for(U=0;U<V.length;)V[U++].resolve();return x.prototype.resolveAll.call(this)},T.prototype.get=function(I){return this.fields[I]||this.oneofs&&this.oneofs[I]||this.nested&&this.nested[I]||null},T.prototype.add=function(I){if(this.get(I.name))throw Error("duplicate name '"+I.name+"' in "+this);if(I instanceof w&&I.extend===undefined){if(this._fieldsById?this._fieldsById[I.id]:this.fieldsById[I.id])throw Error("duplicate id "+I.id+" in "+this);if(this.isReservedId(I.id))throw Error("id "+I.id+" is reserved in "+this);if(this.isReservedName(I.name))throw Error("name '"+I.name+"' is reserved in "+this);return I.parent&&I.parent.remove(I),this.fields[I.name]=I,I.message=this,I.onAdd(this),k(this)}return I instanceof _?(this.oneofs||(this.oneofs={}),this.oneofs[I.name]=I,I.onAdd(this),k(this)):x.prototype.add.call(this,I)},T.prototype.remove=function(I){if(I instanceof w&&I.extend===undefined){if(!this.fields||this.fields[I.name]!==I)throw Error(I+" is not a member of "+this);return delete this.fields[I.name],I.parent=null,I.onRemove(this),k(this)}if(I instanceof _){if(!this.oneofs||this.oneofs[I.name]!==I)throw Error(I+" is not a member of "+this);return delete this.oneofs[I.name],I.parent=null,I.onRemove(this),k(this)}return x.prototype.remove.call(this,I)},T.prototype.isReservedId=function(I){return x.isReservedId(this.reserved,I)},T.prototype.isReservedName=function(I){return x.isReservedName(this.reserved,I)},T.prototype.create=function(I){return new this.ctor(I)},T.prototype.setup=function(){for(var I=this.fullName,U=[],V=0;V<this.fieldsArray.length;++V)U.push(this._fieldsArray[V].resolve().resolvedType);this.encode=m(this)({Writer:h,types:U,util:d}),this.decode=M(this)({Reader:v,types:U,util:d}),this.verify=g(this)({types:U,util:d}),this.fromObject=E.fromObject(this)({types:U,util:d}),this.toObject=E.toObject(this)({types:U,util:d});var W=R[I];if(W){var J=Object.create(this);J.fromObject=this.fromObject,this.fromObject=W.fromObject.bind(J),J.toObject=this.toObject,this.toObject=W.toObject.bind(J)}return this},T.prototype.encode=function(I,U){return this.setup().encode(I,U)},T.prototype.encodeDelimited=function(I,U){return this.encode(I,U&&U.len?U.fork():U).ldelim()},T.prototype.decode=function(I,U){return this.setup().decode(I,U)},T.prototype.decodeDelimited=function(I){return I instanceof v||(I=v.create(I)),this.decode(I,I.uint32())},T.prototype.verify=function(I){return this.setup().verify(I)},T.prototype.fromObject=function(I){return this.setup().fromObject(I)},T.prototype.toObject=function(I,U){return this.setup().toObject(I,U)},T.d=function(I){return function(U){d.decorateType(U,I)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(Z,q,N){var x=N,O=Z(33),_=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function w(o,p){var y=0,v={};for(p|=0;y<o.length;)v[_[y+p]]=o[y++];return v}x.basic=w([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),x.defaults=w([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",O.emptyArray,null]),x.long=w([0,0,0,1,1],7),x.mapKey=w([0,0,0,5,5,0,0,0,1,1,0,2],2),x.packed=w([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(Z,q,N){var x,O,_=q.exports=Z(35),w=Z(27);_.codegen=Z(3),_.fetch=Z(5),_.path=Z(8),_.fs=_.inquire("fs"),_.toArray=function(h){if(h){for(var d=Object.keys(h),m=new Array(d.length),M=0;M<d.length;)m[M]=h[d[M++]];return m}return[]},_.toObject=function(h){for(var d={},m=0;m<h.length;){var M=h[m++],g=h[m++];g!==undefined&&(d[M]=g)}return d};var o=/\\/g,p=/"/g;_.isReserved=function(h){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(h)},_.safeProp=function(h){return!/^[$\w_]+$/.test(h)||_.isReserved(h)?'["'+h.replace(o,"\\\\").replace(p,'\\"')+'"]':"."+h},_.ucFirst=function(h){return h.charAt(0).toUpperCase()+h.substring(1)};var y=/_([a-z])/g;_.camelCase=function(h){return h.substring(0,1)+h.substring(1).replace(y,function(d,m){return m.toUpperCase()})},_.compareFieldsById=function(h,d){return h.id-d.id},_.decorateType=function(h,d){if(h.$type)return d&&h.$type.name!==d&&(_.decorateRoot.remove(h.$type),h.$type.name=d,_.decorateRoot.add(h.$type)),h.$type;x||(x=Z(31));var m=new x(d||h.name);return _.decorateRoot.add(m),m.ctor=h,Object.defineProperty(h,"$type",{value:m,enumerable:!1}),Object.defineProperty(h.prototype,"$type",{value:m,enumerable:!1}),m};var v=0;_.decorateEnum=function(h){if(h.$type)return h.$type;O||(O=Z(14));var d=new O("Enum"+v++,h);return _.decorateRoot.add(d),Object.defineProperty(h,"$type",{value:d,enumerable:!1}),d},_.setProperty=function(h,d,m){if("object"!=typeof h)throw TypeError("dst must be an object");if(!d)throw TypeError("path must be specified");return function M(g,E,R){var T=E.shift();if(E.length>0)g[T]=M(g[T]||{},E,R);else{var k=g[T];k&&(R=[].concat(k).concat(R)),g[T]=R}return g}(h,d=d.split("."),m)},Object.defineProperty(_,"decorateRoot",{get:function(){return w.decorated||(w.decorated=new(Z(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(Z,q,N){q.exports=O;var x=Z(35);function O(p,y){this.lo=p>>>0,this.hi=y>>>0}var _=O.zero=new O(0,0);_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1};var w=O.zeroHash="\0\0\0\0\0\0\0\0";O.fromNumber=function(p){if(0===p)return _;var y=p<0;y&&(p=-p);var v=p>>>0,h=(p-v)/4294967296>>>0;return y&&(h=~h>>>0,v=~v>>>0,++v>4294967295&&(v=0,++h>4294967295&&(h=0))),new O(v,h)},O.from=function(p){if("number"==typeof p)return O.fromNumber(p);if(x.isString(p)){if(!x.Long)return O.fromNumber(parseInt(p,10));p=x.Long.fromString(p)}return p.low||p.high?new O(p.low>>>0,p.high>>>0):_},O.prototype.toNumber=function(p){if(!p&&this.hi>>>31){var y=1+~this.lo>>>0,v=~this.hi>>>0;return y||(v=v+1>>>0),-(y+4294967296*v)}return this.lo+4294967296*this.hi},O.prototype.toLong=function(p){return x.Long?new x.Long(0|this.lo,0|this.hi,Boolean(p)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(p)}};var o=String.prototype.charCodeAt;O.fromHash=function(p){return p===w?_:new O((o.call(p,0)|o.call(p,1)<<8|o.call(p,2)<<16|o.call(p,3)<<24)>>>0,(o.call(p,4)|o.call(p,5)<<8|o.call(p,6)<<16|o.call(p,7)<<24)>>>0)},O.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},O.prototype.zzEncode=function(){var p=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^p)>>>0,this.lo=(this.lo<<1^p)>>>0,this},O.prototype.zzDecode=function(){var p=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^p)>>>0,this.hi=(this.hi>>>1^p)>>>0,this},O.prototype.length=function(){var p=this.lo,y=(this.lo>>>28|this.hi<<4)>>>0,v=this.hi>>>24;return 0===v?0===y?p<16384?p<128?1:2:p<2097152?3:4:y<16384?y<128?5:6:y<2097152?7:8:v<128?9:10}},{35:35}],35:[function(Z,q,N){var x=N;function O(w,o,p){for(var y=Object.keys(o),v=0;v<y.length;++v)w[y[v]]!==undefined&&p||(w[y[v]]=o[y[v]]);return w}function _(w){function o(p,y){if(!(this instanceof o))return new o(p,y);Object.defineProperty(this,"message",{get:function(){return p}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),y&&O(this,y)}return(o.prototype=Object.create(Error.prototype)).constructor=o,Object.defineProperty(o.prototype,"name",{get:function(){return w}}),o.prototype.toString=function(){return this.name+": "+this.message},o}x.asPromise=Z(1),x.base64=Z(2),x.EventEmitter=Z(4),x.float=Z(6),x.inquire=Z(7),x.utf8=Z(10),x.pool=Z(9),x.LongBits=Z(34),x.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),x.global=x.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,x.emptyArray=Object.freeze?Object.freeze([]):[],x.emptyObject=Object.freeze?Object.freeze({}):{},x.isInteger=Number.isInteger||function(w){return"number"==typeof w&&isFinite(w)&&Math.floor(w)===w},x.isString=function(w){return"string"==typeof w||w instanceof String},x.isObject=function(w){return w&&"object"==typeof w},x.isset=x.isSet=function(w,o){var p=w[o];return!(null==p||!w.hasOwnProperty(o))&&("object"!=typeof p||(Array.isArray(p)?p.length:Object.keys(p).length)>0)},x.Buffer=function(){try{var w=x.inquire("buffer").Buffer;return w.prototype.utf8Write?w:null}catch(o){return null}}(),x._Buffer_from=null,x._Buffer_allocUnsafe=null,x.newBuffer=function(w){return"number"==typeof w?x.Buffer?x._Buffer_allocUnsafe(w):new x.Array(w):x.Buffer?x._Buffer_from(w):"undefined"==typeof Uint8Array?w:new Uint8Array(w)},x.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,x.Long=x.global.dcodeIO&&x.global.dcodeIO.Long||x.global.Long||x.inquire("long"),x.key2Re=/^true|false|0|1$/,x.key32Re=/^-?(?:0|[1-9][0-9]*)$/,x.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,x.longToHash=function(w){return w?x.LongBits.from(w).toHash():x.LongBits.zeroHash},x.longFromHash=function(w,o){var p=x.LongBits.fromHash(w);return x.Long?x.Long.fromBits(p.lo,p.hi,o):p.toNumber(Boolean(o))},x.merge=O,x.lcFirst=function(w){return w.charAt(0).toLowerCase()+w.substring(1)},x.newError=_,x.ProtocolError=_("ProtocolError"),x.oneOfGetter=function(w){for(var o={},p=0;p<w.length;++p)o[w[p]]=1;return function(){for(var y=Object.keys(this),v=y.length-1;v>-1;--v)if(1===o[y[v]]&&this[y[v]]!==undefined&&null!==this[y[v]])return y[v]}},x.oneOfSetter=function(w){return function(o){for(var p=0;p<w.length;++p)w[p]!==o&&delete this[w[p]]}},x.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},x._configure=function(){var w=x.Buffer;w?(x._Buffer_from=w.from!==Uint8Array.from&&w.from||function(o,p){return new w(o,p)},x._Buffer_allocUnsafe=w.allocUnsafe||function(o){return new w(o)}):x._Buffer_from=x._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(Z,q,N){q.exports=function(p){var y=O.codegen(["m"],p.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),h={};p.oneofsArray.length&&y("var p={}");for(var d=0;d<p.fieldsArray.length;++d){var m=p._fieldsArray[d].resolve(),M="m"+O.safeProp(m.name);if(m.optional&&y("if(%s!=null&&m.hasOwnProperty(%j)){",M,m.name),m.map)y("if(!util.isObject(%s))",M)("return%j",_(m,"object"))("var k=Object.keys(%s)",M)("for(var i=0;i<k.length;++i){"),o(y,m,"k[i]"),w(y,m,d,M+"[k[i]]")("}");else if(m.repeated)y("if(!Array.isArray(%s))",M)("return%j",_(m,"array"))("for(var i=0;i<%s.length;++i){",M),w(y,m,d,M+"[i]")("}");else{if(m.partOf){var g=O.safeProp(m.partOf.name);1===h[m.partOf.name]&&y("if(p%s===1)",g)("return%j",m.partOf.name+": multiple values"),h[m.partOf.name]=1,y("p%s=1",g)}w(y,m,d,M)}m.optional&&y("}")}return y("return null")};var x=Z(14),O=Z(33);function _(p,y){return p.name+": "+y+(p.repeated&&"array"!==y?"[]":p.map&&"object"!==y?"{k:"+p.keyType+"}":"")+" expected"}function w(p,y,v,h){if(y.resolvedType)if(y.resolvedType instanceof x){p("switch(%s){",h)("default:")("return%j",_(y,"enum value"));for(var d=Object.keys(y.resolvedType.values),m=0;m<d.length;++m)p("case %i:",y.resolvedType.values[d[m]]);p("break")("}")}else p("{")("var e=types[%i].verify(%s);",v,h)("if(e)")("return%j+e",y.name+".")("}");else switch(y.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":p("if(!util.isInteger(%s))",h)("return%j",_(y,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":p("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",h,h,h,h)("return%j",_(y,"integer|Long"));break;case"float":case"double":p('if(typeof %s!=="number")',h)("return%j",_(y,"number"));break;case"bool":p('if(typeof %s!=="boolean")',h)("return%j",_(y,"boolean"));break;case"string":p("if(!util.isString(%s))",h)("return%j",_(y,"string"));break;case"bytes":p('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',h,h,h)("return%j",_(y,"buffer"))}return p}function o(p,y,v){switch(y.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":p("if(!util.key32Re.test(%s))",v)("return%j",_(y,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":p("if(!util.key64Re.test(%s))",v)("return%j",_(y,"integer|Long key"));break;case"bool":p("if(!util.key2Re.test(%s))",v)("return%j",_(y,"boolean key"))}return p}},{14:14,33:33}],37:[function(Z,q,N){var x=N,O=Z(19);x[".google.protobuf.Any"]={fromObject:function(_){if(_&&_["@type"]){var w=_["@type"].substring(_["@type"].lastIndexOf("/")+1),o=this.lookup(w);if(o){var p="."===_["@type"].charAt(0)?_["@type"].substr(1):_["@type"];return-1===p.indexOf("/")&&(p="/"+p),this.create({type_url:p,value:o.encode(o.fromObject(_)).finish()})}}return this.fromObject(_)},toObject:function(_,w){var o="",p="";if(w&&w.json&&_.type_url&&_.value){p=_.type_url.substring(_.type_url.lastIndexOf("/")+1),o=_.type_url.substring(0,_.type_url.lastIndexOf("/")+1);var y=this.lookup(p);y&&(_=y.decode(_.value))}if(!(_ instanceof this.ctor)&&_ instanceof O){var v=_.$type.toObject(_,w);return""===o&&(o="type.googleapis.com/"),p=o+("."===_.$type.fullName[0]?_.$type.fullName.substr(1):_.$type.fullName),v["@type"]=p,v}return this.toObject(_,w)}}},{19:19}],38:[function(Z,q,N){q.exports=h;var x,O=Z(35),_=O.LongBits,w=O.base64,o=O.utf8;function p(T,k,I){this.fn=T,this.len=k,this.next=undefined,this.val=I}function y(){}function v(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}function h(){this.len=0,this.head=new p(y,0,0),this.tail=this.head,this.states=null}var d=function(){return O.Buffer?function(){return(h.create=function(){return new x})()}:function(){return new h}};function m(T,k,I){k[I]=255&T}function M(T,k){this.len=T,this.next=undefined,this.val=k}function g(T,k,I){for(;T.hi;)k[I++]=127&T.lo|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)k[I++]=127&T.lo|128,T.lo=T.lo>>>7;k[I++]=T.lo}function E(T,k,I){k[I]=255&T,k[I+1]=T>>>8&255,k[I+2]=T>>>16&255,k[I+3]=T>>>24}h.create=d(),h.alloc=function(T){return new O.Array(T)},O.Array!==Array&&(h.alloc=O.pool(h.alloc,O.Array.prototype.subarray)),h.prototype._push=function(T,k,I){return this.tail=this.tail.next=new p(T,k,I),this.len+=k,this},(M.prototype=Object.create(p.prototype)).fn=function(T,k,I){for(;T>127;)k[I++]=127&T|128,T>>>=7;k[I]=T},h.prototype.uint32=function(T){return this.len+=(this.tail=this.tail.next=new M((T>>>=0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len,this},h.prototype.int32=function(T){return T<0?this._push(g,10,_.fromNumber(T)):this.uint32(T)},h.prototype.sint32=function(T){return this.uint32((T<<1^T>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(T){var k=_.from(T);return this._push(g,k.length(),k)},h.prototype.sint64=function(T){var k=_.from(T).zzEncode();return this._push(g,k.length(),k)},h.prototype.bool=function(T){return this._push(m,1,T?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(T){return this._push(E,4,T>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(T){var k=_.from(T);return this._push(E,4,k.lo)._push(E,4,k.hi)},h.prototype.float=function(T){return this._push(O.float.writeFloatLE,4,T)},h.prototype.double=function(T){return this._push(O.float.writeDoubleLE,8,T)};var R=O.Array.prototype.set?function(T,k,I){k.set(T,I)}:function(T,k,I){for(var U=0;U<T.length;++U)k[I+U]=T[U]};h.prototype.bytes=function(T){var k=T.length>>>0;if(!k)return this._push(m,1,0);if(O.isString(T)){var I=h.alloc(k=w.length(T));w.decode(T,I,0),T=I}return this.uint32(k)._push(R,k,T)},h.prototype.string=function(T){var k=o.length(T);return k?this.uint32(k)._push(o.write,k,T):this._push(m,1,0)},h.prototype.fork=function(){return this.states=new v(this),this.head=this.tail=new p(y,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new p(y,0,0),this.len=0),this},h.prototype.ldelim=function(){var T=this.head,k=this.tail,I=this.len;return this.reset().uint32(I),I&&(this.tail.next=T.next,this.tail=k,this.len+=I),this},h.prototype.finish=function(){for(var T=this.head.next,k=this.constructor.alloc(this.len),I=0;T;)T.fn(T.val,k,I),I+=T.len,T=T.next;return k},h._configure=function(T){x=T,h.create=d(),x._configure()}},{35:35}],39:[function(Z,q,N){q.exports=_;var x=Z(38);(_.prototype=Object.create(x.prototype)).constructor=_;var O=Z(35);function _(){x.call(this)}function w(o,p,y){o.length<40?O.utf8.write(o,p,y):p.utf8Write?p.utf8Write(o,y):p.write(o,y)}_._configure=function(){_.alloc=O._Buffer_allocUnsafe,_.writeBytesBuffer=O.Buffer&&O.Buffer.prototype instanceof Uint8Array&&"set"===O.Buffer.prototype.set.name?function(o,p,y){p.set(o,y)}:function(o,p,y){if(o.copy)o.copy(p,y,0,o.length);else for(var v=0;v<o.length;)p[y++]=o[v++]}},_.prototype.bytes=function(o){O.isString(o)&&(o=O._Buffer_from(o,"base64"));var p=o.length>>>0;return this.uint32(p),p&&this._push(_.writeBytesBuffer,p,o),this},_.prototype.string=function(o){var p=O.Buffer.byteLength(o);return this.uint32(p),p&&this._push(w,p,o),this},_._configure()},{35:35,38:38}]},q={},x=function O(_){var w=q[_];return w||Z[_][0].call(w=q[_]={exports:{}},O,w,w.exports),w.exports}(16),x.util.global.protobuf=x,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_639250__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(O){return O&&O.isLong&&(x.util.Long=O,x.configure()),x}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=x)})()}).call(this,__nested_webpack_require_639250__(33),__nested_webpack_require_639250__(60)(module))},function(Z,q){Z.exports=function(N){return N.webpackPolyfill||(N.deprecate=function(){},N.paths=[],N.children||(N.children=[]),Object.defineProperty(N,"loaded",{enumerable:!0,get:function(){return N.l}}),Object.defineProperty(N,"id",{enumerable:!0,get:function(){return N.i}}),N.webpackPolyfill=1),N}},function(Z,q){Z.exports=x;var N=null;try{N=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(P){}function x(P,S,z){this.low=0|P,this.high=0|S,this.unsigned=!!z}function O(P){return!0===(P&&P.__isLong__)}Object.defineProperty(x.prototype,"__isLong__",{value:!0}),x.isLong=O;var _={},w={};function o(P,S){var z,u,t;return S?(t=0<=(P>>>=0)&&P<256)&&(u=w[P])?u:(z=y(P,(0|P)<0?-1:0,!0),t&&(w[P]=z),z):(t=-128<=(P|=0)&&P<128)&&(u=_[P])?u:(z=y(P,P<0?-1:0,!1),t&&(_[P]=z),z)}function p(P,S){if(isNaN(P))return S?T:R;if(S){if(P<0)return T;if(P>=M)return W}else{if(P<=-g)return J;if(P+1>=g)return V}return P<0?p(-P,S).neg():y(P%m|0,P/m|0,S)}function y(P,S,z){return new x(P,S,z)}x.fromInt=o,x.fromNumber=p,x.fromBits=y;var v=Math.pow;function h(P,S,z){if(0===P.length)throw Error("empty string");if("NaN"===P||"Infinity"===P||"+Infinity"===P||"-Infinity"===P)return R;if("number"==typeof S?(z=S,S=!1):S=!!S,(z=z||10)<2||36<z)throw RangeError("radix");var u;if((u=P.indexOf("-"))>0)throw Error("interior hyphen");if(0===u)return h(P.substring(1),S,z).neg();for(var t=p(v(z,8)),n=R,a=0;a<P.length;a+=8){var i=Math.min(8,P.length-a),s=parseInt(P.substring(a,a+i),z);if(i<8){var l=p(v(z,i));n=n.mul(l).add(p(s))}else n=(n=n.mul(t)).add(p(s))}return n.unsigned=S,n}function d(P,S){return"number"==typeof P?p(P,S):"string"==typeof P?h(P,S):y(P.low,P.high,"boolean"==typeof S?S:P.unsigned)}x.fromString=h,x.fromValue=d;var m=4294967296,M=m*m,g=M/2,E=o(1<<24),R=o(0);x.ZERO=R;var T=o(0,!0);x.UZERO=T;var k=o(1);x.ONE=k;var I=o(1,!0);x.UONE=I;var U=o(-1);x.NEG_ONE=U;var V=y(-1,2147483647,!1);x.MAX_VALUE=V;var W=y(-1,-1,!0);x.MAX_UNSIGNED_VALUE=W;var J=y(0,-2147483648,!1);x.MIN_VALUE=J;var K=x.prototype;K.toInt=function(){return this.unsigned?this.low>>>0:this.low},K.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},K.toString=function(P){if((P=P||10)<2||36<P)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(J)){var S=p(P),z=this.div(S),u=z.mul(S).sub(this);return z.toString(P)+u.toInt().toString(P)}return"-"+this.neg().toString(P)}for(var t=p(v(P,6),this.unsigned),n=this,a="";;){var i=n.div(t),s=(n.sub(i.mul(t)).toInt()>>>0).toString(P);if((n=i).isZero())return s+a;for(;s.length<6;)s="0"+s;a=""+s+a}},K.getHighBits=function(){return this.high},K.getHighBitsUnsigned=function(){return this.high>>>0},K.getLowBits=function(){return this.low},K.getLowBitsUnsigned=function(){return this.low>>>0},K.getNumBitsAbs=function(){if(this.isNegative())return this.eq(J)?64:this.neg().getNumBitsAbs();for(var P=0!=this.high?this.high:this.low,S=31;S>0&&0==(P&1<<S);S--);return 0!=this.high?S+33:S+1},K.isZero=function(){return 0===this.high&&0===this.low},K.eqz=K.isZero,K.isNegative=function(){return!this.unsigned&&this.high<0},K.isPositive=function(){return this.unsigned||this.high>=0},K.isOdd=function(){return 1==(1&this.low)},K.isEven=function(){return 0==(1&this.low)},K.equals=function(P){return O(P)||(P=d(P)),(this.unsigned===P.unsigned||this.high>>>31!=1||P.high>>>31!=1)&&this.high===P.high&&this.low===P.low},K.eq=K.equals,K.notEquals=function(P){return!this.eq(P)},K.neq=K.notEquals,K.ne=K.notEquals,K.lessThan=function(P){return this.comp(P)<0},K.lt=K.lessThan,K.lessThanOrEqual=function(P){return this.comp(P)<=0},K.lte=K.lessThanOrEqual,K.le=K.lessThanOrEqual,K.greaterThan=function(P){return this.comp(P)>0},K.gt=K.greaterThan,K.greaterThanOrEqual=function(P){return this.comp(P)>=0},K.gte=K.greaterThanOrEqual,K.ge=K.greaterThanOrEqual,K.compare=function(P){if(O(P)||(P=d(P)),this.eq(P))return 0;var S=this.isNegative(),z=P.isNegative();return S&&!z?-1:!S&&z?1:this.unsigned?P.high>>>0>this.high>>>0||P.high===this.high&&P.low>>>0>this.low>>>0?-1:1:this.sub(P).isNegative()?-1:1},K.comp=K.compare,K.negate=function(){return!this.unsigned&&this.eq(J)?J:this.not().add(k)},K.neg=K.negate,K.add=function(P){O(P)||(P=d(P));var s=0,l=0,b=0,c=0;return b+=(c+=(65535&this.low)+(65535&P.low))>>>16,l+=(b+=(this.low>>>16)+(P.low>>>16))>>>16,s+=(l+=(65535&this.high)+(65535&P.high))>>>16,s+=(this.high>>>16)+(P.high>>>16),y((b&=65535)<<16|(c&=65535),(s&=65535)<<16|(l&=65535),this.unsigned)},K.subtract=function(P){return O(P)||(P=d(P)),this.add(P.neg())},K.sub=K.subtract,K.multiply=function(P){if(this.isZero())return R;if(O(P)||(P=d(P)),N)return y(N.mul(this.low,this.high,P.low,P.high),N.get_high(),this.unsigned);if(P.isZero())return R;if(this.eq(J))return P.isOdd()?J:R;if(P.eq(J))return this.isOdd()?J:R;if(this.isNegative())return P.isNegative()?this.neg().mul(P.neg()):this.neg().mul(P).neg();if(P.isNegative())return this.mul(P.neg()).neg();if(this.lt(E)&&P.lt(E))return p(this.toNumber()*P.toNumber(),this.unsigned);var z=65535&this.high,u=this.low>>>16,t=65535&this.low,a=65535&P.high,i=P.low>>>16,s=65535&P.low,l=0,b=0,c=0,r=0;return c+=(r+=t*s)>>>16,b+=(c+=u*s)>>>16,c&=65535,b+=(c+=t*i)>>>16,l+=(b+=z*s)>>>16,b&=65535,l+=(b+=u*i)>>>16,b&=65535,l+=(b+=t*a)>>>16,l+=(this.high>>>16)*s+z*i+u*a+t*(P.high>>>16),y((c&=65535)<<16|(r&=65535),(l&=65535)<<16|(b&=65535),this.unsigned)},K.mul=K.multiply,K.divide=function(P){if(O(P)||(P=d(P)),P.isZero())throw Error("division by zero");var S,z,u;if(N)return this.unsigned||-2147483648!==this.high||-1!==P.low||-1!==P.high?y((this.unsigned?N.div_u:N.div_s)(this.low,this.high,P.low,P.high),N.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?T:R;if(this.unsigned){if(P.unsigned||(P=P.toUnsigned()),P.gt(this))return T;if(P.gt(this.shru(1)))return I;u=T}else{if(this.eq(J))return P.eq(k)||P.eq(U)?J:P.eq(J)?k:(S=this.shr(1).div(P).shl(1)).eq(R)?P.isNegative()?k:U:(z=this.sub(P.mul(S)),u=S.add(z.div(P)));if(P.eq(J))return this.unsigned?T:R;if(this.isNegative())return P.isNegative()?this.neg().div(P.neg()):this.neg().div(P).neg();if(P.isNegative())return this.div(P.neg()).neg();u=R}for(z=this;z.gte(P);){S=Math.max(1,Math.floor(z.toNumber()/P.toNumber()));for(var t=Math.ceil(Math.log(S)/Math.LN2),n=t<=48?1:v(2,t-48),a=p(S),i=a.mul(P);i.isNegative()||i.gt(z);)i=(a=p(S-=n,this.unsigned)).mul(P);a.isZero()&&(a=k),u=u.add(a),z=z.sub(i)}return u},K.div=K.divide,K.modulo=function(P){return O(P)||(P=d(P)),N?y((this.unsigned?N.rem_u:N.rem_s)(this.low,this.high,P.low,P.high),N.get_high(),this.unsigned):this.sub(this.div(P).mul(P))},K.mod=K.modulo,K.rem=K.modulo,K.not=function(){return y(~this.low,~this.high,this.unsigned)},K.and=function(P){return O(P)||(P=d(P)),y(this.low&P.low,this.high&P.high,this.unsigned)},K.or=function(P){return O(P)||(P=d(P)),y(this.low|P.low,this.high|P.high,this.unsigned)},K.xor=function(P){return O(P)||(P=d(P)),y(this.low^P.low,this.high^P.high,this.unsigned)},K.shiftLeft=function(P){return O(P)&&(P=P.toInt()),0==(P&=63)?this:P<32?y(this.low<<P,this.high<<P|this.low>>>32-P,this.unsigned):y(0,this.low<<P-32,this.unsigned)},K.shl=K.shiftLeft,K.shiftRight=function(P){return O(P)&&(P=P.toInt()),0==(P&=63)?this:P<32?y(this.low>>>P|this.high<<32-P,this.high>>P,this.unsigned):y(this.high>>P-32,this.high>=0?0:-1,this.unsigned)},K.shr=K.shiftRight,K.shiftRightUnsigned=function(P){if(O(P)&&(P=P.toInt()),0==(P&=63))return this;var S=this.high;return P<32?y(this.low>>>P|S<<32-P,S>>>P,this.unsigned):y(32===P?S:S>>>P-32,0,this.unsigned)},K.shru=K.shiftRightUnsigned,K.shr_u=K.shiftRightUnsigned,K.toSigned=function(){return this.unsigned?y(this.low,this.high,!1):this},K.toUnsigned=function(){return this.unsigned?this:y(this.low,this.high,!0)},K.toBytes=function(P){return P?this.toBytesLE():this.toBytesBE()},K.toBytesLE=function(){var P=this.high,S=this.low;return[255&S,S>>>8&255,S>>>16&255,S>>>24,255&P,P>>>8&255,P>>>16&255,P>>>24]},K.toBytesBE=function(){var P=this.high,S=this.low;return[P>>>24,P>>>16&255,P>>>8&255,255&P,S>>>24,S>>>16&255,S>>>8&255,255&S]},x.fromBytes=function(P,S,z){return z?x.fromBytesLE(P,S):x.fromBytesBE(P,S)},x.fromBytesLE=function(P,S){return new x(P[0]|P[1]<<8|P[2]<<16|P[3]<<24,P[4]|P[5]<<8|P[6]<<16|P[7]<<24,S)},x.fromBytesBE=function(P,S){return new x(P[4]<<24|P[5]<<16|P[6]<<8|P[7],P[0]<<24|P[1]<<16|P[2]<<8|P[3],S)}},function(Z){Z.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(Z){Z.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(Z,q,N){var x=function(O){"use strict";var _=Object.prototype,w=_.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},p=o.iterator||"@@iterator",y=o.asyncIterator||"@@asyncIterator",v=o.toStringTag||"@@toStringTag";function h(u,t,n,a){var b,c,r,f,s=Object.create((t&&t.prototype instanceof M?t:M).prototype),l=new P(a||[]);return s._invoke=(b=u,c=n,r=l,f="suspendedStart",function(L,C){if("executing"===f)throw new Error("Generator is already running");if("completed"===f){if("throw"===L)throw C;return{value:void 0,done:!0}}for(r.method=L,r.arg=C;;){var H=r.delegate;if(H){var Y=W(H,r);if(Y){if(Y===m)continue;return Y}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===f)throw f="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);f="executing";var ee=d(b,c,r);if("normal"===ee.type){if(f=r.done?"completed":"suspendedYield",ee.arg===m)continue;return{value:ee.arg,done:r.done}}"throw"===ee.type&&(f="completed",r.method="throw",r.arg=ee.arg)}}),s}function d(u,t,n){try{return{type:"normal",arg:u.call(t,n)}}catch(a){return{type:"throw",arg:a}}}O.wrap=h;var m={};function M(){}function g(){}function E(){}var R={};R[p]=function(){return this};var T=Object.getPrototypeOf,k=T&&T(T(S([])));k&&k!==_&&w.call(k,p)&&(R=k);var I=E.prototype=M.prototype=Object.create(R);function U(u){["next","throw","return"].forEach(function(t){u[t]=function(n){return this._invoke(t,n)}})}function V(u,t){var n;this._invoke=function(a,i){function s(){return new t(function(l,b){!function c(r,f,L,C){var H=d(u[r],u,f);if("throw"!==H.type){var Y=H.arg,ee=Y.value;return ee&&"object"==typeof ee&&w.call(ee,"__await")?t.resolve(ee.__await).then(function(ne){c("next",ne,L,C)},function(ne){c("throw",ne,L,C)}):t.resolve(ee).then(function(ne){Y.value=ne,L(Y)},function(ne){return c("throw",ne,L,C)})}C(H.arg)}(a,i,l,b)})}return n=n?n.then(s,s):s()}}function W(u,t){var n=u.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(u.iterator.return&&(t.method="return",t.arg=void 0,W(u,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=d(n,u.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var i=a.arg;return i?i.done?(t[u.resultName]=i.value,t.next=u.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function J(u){var t={tryLoc:u[0]};1 in u&&(t.catchLoc=u[1]),2 in u&&(t.finallyLoc=u[2],t.afterLoc=u[3]),this.tryEntries.push(t)}function K(u){var t=u.completion||{};t.type="normal",delete t.arg,u.completion=t}function P(u){this.tryEntries=[{tryLoc:"root"}],u.forEach(J,this),this.reset(!0)}function S(u){if(u){var t=u[p];if(t)return t.call(u);if("function"==typeof u.next)return u;if(!isNaN(u.length)){var n=-1,a=function i(){for(;++n<u.length;)if(w.call(u,n))return i.value=u[n],i.done=!1,i;return i.value=void 0,i.done=!0,i};return a.next=a}}return{next:z}}function z(){return{value:void 0,done:!0}}return g.prototype=I.constructor=E,E.constructor=g,E[v]=g.displayName="GeneratorFunction",O.isGeneratorFunction=function(u){var t="function"==typeof u&&u.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},O.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,E):(u.__proto__=E,v in u||(u[v]="GeneratorFunction")),u.prototype=Object.create(I),u},O.awrap=function(u){return{__await:u}},U(V.prototype),V.prototype[y]=function(){return this},O.AsyncIterator=V,O.async=function(u,t,n,a,i){void 0===i&&(i=Promise);var s=new V(h(u,t,n,a),i);return O.isGeneratorFunction(t)?s:s.next().then(function(l){return l.done?l.value:s.next()})},U(I),I[v]="Generator",I[p]=function(){return this},I.toString=function(){return"[object Generator]"},O.keys=function(u){var t=[];for(var n in u)t.push(n);return t.reverse(),function a(){for(;t.length;){var i=t.pop();if(i in u)return a.value=i,a.done=!1,a}return a.done=!0,a}},O.values=S,P.prototype={constructor:P,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(K),!u)for(var t in this)"t"===t.charAt(0)&&w.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if("throw"===u.type)throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var t=this;function n(c,r){return s.type="throw",s.arg=u,t.next=c,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=w.call(i,"catchLoc"),b=w.call(i,"finallyLoc");if(l&&b){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!b)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(u,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&w.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===u||"continue"===u)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=u,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(u,t){if("throw"===u.type)throw u.arg;return"break"===u.type||"continue"===u.type?this.next=u.arg:"return"===u.type?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):"normal"===u.type&&t&&(this.next=t),m},finish:function(u){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===u)return this.complete(n.completion,n.afterLoc),K(n),m}},catch:function(u){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===u){var a=n.completion;if("throw"===a.type){var i=a.arg;K(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(u,t,n){return this.delegate={iterator:S(u),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},O}(Z.exports);try{regeneratorRuntime=x}catch(O){Function("r","regeneratorRuntime = r")(x)}},function(Z,q){Z.exports=function(N){if(Array.isArray(N))return N}},function(Z,q){Z.exports=function(N,x){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(N)){var O=[],_=!0,w=!1,o=void 0;try{for(var p,y=N[Symbol.iterator]();!(_=(p=y.next()).done)&&(O.push(p.value),!x||O.length!==x);_=!0);}catch(v){w=!0,o=v}finally{try{_||null==y.return||y.return()}finally{if(w)throw o}}return O}}},function(Z,q){Z.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(Z,q,N){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var x="object"==typeof window&&window.RTCPeerConnection,O="object"==typeof window&&window.webkitRTCPeerConnection,_="object"==typeof window&&window.mozRTCPeerConnection;q.createRTCPeerConnection=function(w){var o=x||O||_;return o?new o(w):null}},function(Z,q,N){var x;!function(O){"use strict";function _(){}var w=_.prototype,o=O.EventEmitter;function p(v,h){for(var d=v.length;d--;)if(v[d].listener===h)return d;return-1}function y(v){return function(){return this[v].apply(this,arguments)}}w.getListeners=function(v){var h,d,m=this._getEvents();if(v instanceof RegExp)for(d in h={},m)m.hasOwnProperty(d)&&v.test(d)&&(h[d]=m[d]);else h=m[v]||(m[v]=[]);return h},w.flattenListeners=function(v){var h,d=[];for(h=0;h<v.length;h+=1)d.push(v[h].listener);return d},w.getListenersAsObject=function(v){var h,d=this.getListeners(v);return d instanceof Array&&((h={})[v]=d),h||d},w.addListener=function(v,h){if(!function g(E){return"function"==typeof E||E instanceof RegExp||!(!E||"object"!=typeof E)&&g(E.listener)}(h))throw new TypeError("listener must be a function");var d,m=this.getListenersAsObject(v),M="object"==typeof h;for(d in m)m.hasOwnProperty(d)&&-1===p(m[d],h)&&m[d].push(M?h:{listener:h,once:!1});return this},w.on=y("addListener"),w.addOnceListener=function(v,h){return this.addListener(v,{listener:h,once:!0})},w.once=y("addOnceListener"),w.defineEvent=function(v){return this.getListeners(v),this},w.defineEvents=function(v){for(var h=0;h<v.length;h+=1)this.defineEvent(v[h]);return this},w.removeListener=function(v,h){var d,m,M=this.getListenersAsObject(v);for(m in M)M.hasOwnProperty(m)&&-1!==(d=p(M[m],h))&&M[m].splice(d,1);return this},w.off=y("removeListener"),w.addListeners=function(v,h){return this.manipulateListeners(!1,v,h)},w.removeListeners=function(v,h){return this.manipulateListeners(!0,v,h)},w.manipulateListeners=function(v,h,d){var m,M,g=v?this.removeListener:this.addListener,E=v?this.removeListeners:this.addListeners;if("object"!=typeof h||h instanceof RegExp)for(m=d.length;m--;)g.call(this,h,d[m]);else for(m in h)h.hasOwnProperty(m)&&(M=h[m])&&("function"==typeof M?g.call(this,m,M):E.call(this,m,M));return this},w.removeEvent=function(v){var h,d=typeof v,m=this._getEvents();if("string"===d)delete m[v];else if(v instanceof RegExp)for(h in m)m.hasOwnProperty(h)&&v.test(h)&&delete m[h];else delete this._events;return this},w.removeAllListeners=y("removeEvent"),w.emitEvent=function(v,h){var d,m,M,g,E=this.getListenersAsObject(v);for(g in E)if(E.hasOwnProperty(g))for(d=E[g].slice(0),M=0;M<d.length;M++)!0===(m=d[M]).once&&this.removeListener(v,m.listener),m.listener.apply(this,h||[])===this._getOnceReturnValue()&&this.removeListener(v,m.listener);return this},w.trigger=y("emitEvent"),w.emit=function(v){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(v,h)},w.setOnceReturnValue=function(v){return this._onceReturnValue=v,this},w._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},w._getEvents=function(){return this._events||(this._events={})},_.noConflict=function(){return O.EventEmitter=o,_},void 0===(x=function(){return _}.call(O,N,O,Z))||(Z.exports=x)}("undefined"!=typeof window?window:this||{})},function(Z,q,N){var x=N(35);Z.exports=function(O){if(Array.isArray(O))return x(O)}},function(Z,q){Z.exports=function(N){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(N))return Array.from(N)}},function(Z,q){Z.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(Z,q,N){(function(x){var O;Z.exports=(O=O||function(_,w){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto),!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&void 0!==x&&x.crypto&&(o=x.crypto),!o)try{o=N(74)}catch(I){}var p=function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(I){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(I){}}throw new Error("Native crypto module could not be used to get secure random number.")},y=Object.create||function(){function I(){}return function(U){var V;return I.prototype=U,V=new I,I.prototype=null,V}}(),v={},h=v.lib={},d=h.Base={extend:function(I){var U=y(this);return I&&U.mixIn(I),U.hasOwnProperty("init")&&this.init!==U.init||(U.init=function(){U.$super.init.apply(this,arguments)}),U.init.prototype=U,U.$super=this,U},create:function(){var I=this.extend();return I.init.apply(I,arguments),I},init:function(){},mixIn:function(I){for(var U in I)I.hasOwnProperty(U)&&(this[U]=I[U]);I.hasOwnProperty("toString")&&(this.toString=I.toString)},clone:function(){return this.init.prototype.extend(this)}},m=h.WordArray=d.extend({init:function(I,U){I=this.words=I||[],this.sigBytes=null!=U?U:4*I.length},toString:function(I){return(I||g).stringify(this)},concat:function(I){var U=this.words,V=I.words,W=this.sigBytes,J=I.sigBytes;if(this.clamp(),W%4)for(var K=0;K<J;K++)U[W+K>>>2]|=(V[K>>>2]>>>24-K%4*8&255)<<24-(W+K)%4*8;else for(var S=0;S<J;S+=4)U[W+S>>>2]=V[S>>>2];return this.sigBytes+=J,this},clamp:function(){var I=this.words,U=this.sigBytes;I[U>>>2]&=4294967295<<32-U%4*8,I.length=_.ceil(U/4)},clone:function(){var I=d.clone.call(this);return I.words=this.words.slice(0),I},random:function(I){for(var U=[],V=0;V<I;V+=4)U.push(p());return new m.init(U,I)}}),M=v.enc={},g=M.Hex={stringify:function(I){for(var U=I.words,V=I.sigBytes,W=[],J=0;J<V;J++){var K=U[J>>>2]>>>24-J%4*8&255;W.push((K>>>4).toString(16)),W.push((15&K).toString(16))}return W.join("")},parse:function(I){for(var U=I.length,V=[],W=0;W<U;W+=2)V[W>>>3]|=parseInt(I.substr(W,2),16)<<24-W%8*4;return new m.init(V,U/2)}},E=M.Latin1={stringify:function(I){for(var U=I.words,V=I.sigBytes,W=[],J=0;J<V;J++)W.push(String.fromCharCode(U[J>>>2]>>>24-J%4*8&255));return W.join("")},parse:function(I){for(var U=I.length,V=[],W=0;W<U;W++)V[W>>>2]|=(255&I.charCodeAt(W))<<24-W%4*8;return new m.init(V,U)}},R=M.Utf8={stringify:function(I){try{return decodeURIComponent(escape(E.stringify(I)))}catch(U){throw new Error("Malformed UTF-8 data")}},parse:function(I){return E.parse(unescape(encodeURIComponent(I)))}},T=h.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(I){"string"==typeof I&&(I=R.parse(I)),this._data.concat(I),this._nDataBytes+=I.sigBytes},_process:function(I){var U,V=this._data,W=V.words,J=V.sigBytes,K=this.blockSize,P=J/(4*K),S=(P=I?_.ceil(P):_.max((0|P)-this._minBufferSize,0))*K,z=_.min(4*S,J);if(S){for(var u=0;u<S;u+=K)this._doProcessBlock(W,u);U=W.splice(0,S),V.sigBytes-=z}return new m.init(U,z)},clone:function(){var I=d.clone.call(this);return I._data=this._data.clone(),I},_minBufferSize:0}),k=(h.Hasher=T.extend({cfg:d.extend(),init:function(I){this.cfg=this.cfg.extend(I),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(I){return this._append(I),this._process(),this},finalize:function(I){return I&&this._append(I),this._doFinalize()},blockSize:16,_createHelper:function(I){return function(U,V){return new I.init(V).finalize(U)}},_createHmacHelper:function(I){return function(U,V){return new k.HMAC.init(I,V).finalize(U)}}}),v.algo={});return v}(Math),O)}).call(this,N(33))},function(Z,q){},function(Z,q,N){"use strict";var x=this&&this.__assign||function(){return(x=Object.assign||function(E){for(var R,T=1,k=arguments.length;T<k;T++)for(var I in R=arguments[T])Object.prototype.hasOwnProperty.call(R,I)&&(E[I]=R[I]);return E}).apply(this,arguments)},O=this&&this.__awaiter||function(E,R,T,k){return new(T||(T=Promise))(function(I,U){function V(K){try{J(k.next(K))}catch(P){U(P)}}function W(K){try{J(k.throw(K))}catch(P){U(P)}}function J(K){var P;K.done?I(K.value):(P=K.value,P instanceof T?P:new T(function(S){S(P)})).then(V,W)}J((k=k.apply(E,R||[])).next())})},_=this&&this.__generator||function(E,R){var T,k,I,U,V={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return U={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(U[Symbol.iterator]=function(){return this}),U;function W(J){return function(K){return function(P){if(T)throw new TypeError("Generator is already executing.");for(;V;)try{if(T=1,k&&(I=2&P[0]?k.return:P[0]?k.throw||((I=k.return)&&I.call(k),0):k.next)&&!(I=I.call(k,P[1])).done)return I;switch(k=0,I&&(P=[2&P[0],I.value]),P[0]){case 0:case 1:I=P;break;case 4:return V.label++,{value:P[1],done:!1};case 5:V.label++,k=P[1],P=[0];continue;case 7:P=V.ops.pop(),V.trys.pop();continue;default:if(!((I=(I=V.trys).length>0&&I[I.length-1])||6!==P[0]&&2!==P[0])){V=0;continue}if(3===P[0]&&(!I||P[1]>I[0]&&P[1]<I[3])){V.label=P[1];break}if(6===P[0]&&V.label<I[1]){V.label=I[1],I=P;break}if(I&&V.label<I[2]){V.label=I[2],V.ops.push(P);break}I[2]&&V.ops.pop(),V.trys.pop();continue}P=R.call(E,V)}catch(S){P=[6,S],k=0}finally{T=I=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([J,K])}}},w=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(q,"__esModule",{value:!0});var o=N(76),p=N(27),y=N(95),v=N(20),h=N(24),d=N(31),m=w(N(0)),M=w(N(37)),g=function(){function E(R){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new y.PromiseMutex("LS"),this.cancelToken=M.default.CancelToken.source(),this.injectConfig=x({},p.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=R}return Object.defineProperty(E.prototype,"isNeedReset",{get:function(){for(var R=this,T=0,k=Array.from(this.streamingTasks.values());T<k.length;T++){var I=k[T];if(I.mode===p.LiveStreamingServiceMode.INJECT||I.mode===p.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find(function(U){return U.uid===R.spec.uid}))return!0}return!1},enumerable:!0,configurable:!0}),E.prototype.setTranscodingConfig=function(R){return O(this,void 0,void 0,function(){var T,k,I,U,V,W=this;return _(this,function(J){switch(J.label){case 0:(T=x(x({},p.DEFAULT_TRANSCODING_CONFIG),R)).transcodingUsers||(T.transcodingUsers=T.userConfigs),66!==T.videoCodecProfile&&77!==T.videoCodecProfile&&100!==T.videoCodecProfile&&(m.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+T.videoCodecProfile+" -> 100"),T.videoCodecProfile=100),T.transcodingUsers&&(T.transcodingUsers=T.transcodingUsers.map(function(K){return x(x(x({},p.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),K),{zOrder:K.zOrder?K.zOrder+1:1})})),T.images&&(T.images=T.images.map(function(K){return x(x({},p.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),K)}));try{p.isLiveStreamingTranscodingConfig(T)}catch(K){throw K}return T.transcodingUsers&&(T.userConfigs=T.transcodingUsers.map(function(K){return x({},K)}),T.userCount=T.transcodingUsers.length,delete T.transcodingUsers),k=(T.userConfigs||[]).map(function(K){return"number"==typeof K.uid?Promise.resolve(K.uid):v.getUserAccount(W.spec,null,K.uid)}),[4,this.taskMutex.lock()];case 1:return I=J.sent(),[4,Promise.all(k)];case 2:if(J.sent().forEach(function(K,P){T.userConfigs&&T.userConfigs[P]&&(T.userConfigs[P].uid=K&&K.uid||K)}),this.transcodingConfig=T,!this.connection)return I(),[2];J.label=3;case 3:return J.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map(function(K){return K.taskId}).join("#")})];case 4:return U=J.sent(),I(),m.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+U.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(V=J.sent(),I(),!V.data||!V.data.retry)throw V;return V.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(function(K){m.default.warning("["+W.spec.clientId+"] live streaming receive error",V.toString(),"try to republish",K.url),W.startLiveStreamingTask(K.url,K.mode,V).then(function(){m.default.debug("["+W.spec.clientId+"] live streaming republish "+K.url+" success")}).catch(function(P){m.default.error("["+W.spec.clientId+"] live streaming republish failed",K.url,P.toString()),W.onLiveStreamError&&W.onLiveStreamError(K.url,P)})}),[3,6];case 6:return[2]}})})},E.prototype.setInjectStreamConfig=function(R,T){this.injectConfig=Object.assign({},this.injectConfig,R),this.injectLoopTimes=T},E.prototype.startLiveStreamingTask=function(R,T,k){return O(this,void 0,void 0,function(){var I,U,V,W,J,K,P,S,z=this;return _(this,function(u){switch(u.label){case 0:return Array.from(this.streamingTasks.values()).find(function(t){return t.mode===p.LiveStreamingServiceMode.INJECT})&&T===p.LiveStreamingServiceMode.INJECT?[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(I={command:"PublishStream",ts:Date.now(),url:R,uid:this.spec.uid.toString(),autoDestroyTime:30},m.default.debug("["+this.spec.clientId+"] start live streaming "+R+", mode: "+T),[4,this.taskMutex.lock()]);case 1:if(U=u.sent(),!this.transcodingConfig&&T===p.LiveStreamingServiceMode.TRANSCODE)throw U(),new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&k)return U(),[2];if(this.streamingTasks.get(R)&&!k)return U(),[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&T===p.LiveStreamingServiceMode.TRANSCODE)throw U(),new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");u.label=2;case 2:return u.trys.push([2,5,,6]),this.connection?[3,4]:(V=this,[4,this.connect(T)]);case 3:V.connection=u.sent(),u.label=4;case 4:return[3,6];case 5:throw W=u.sent(),U(),W;case 6:switch(T){case p.LiveStreamingServiceMode.TRANSCODE:I.transcodingConfig=x({},this.transcodingConfig);break;case p.LiveStreamingServiceMode.RAW:break;case p.LiveStreamingServiceMode.INJECT:I={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:R,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(I.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,J=this.lastTaskId++,u.label=7;case 7:return u.trys.push([7,9,,14]),K=new Promise(function(t,n){d.wait(z.retryTimeout).then(function(){if(k)return n(k);var a=z.statusError.get(R);return a?(z.statusError.delete(R),n(a)):void 0})}),[4,Promise.race([this.connection.request("request",{clientRequest:I},!0,{url:R,command:"PublishStream",workerType:T===p.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!k,tid:J.toString()}),K])];case 8:return P=u.sent(),this.isStartingStreamingTask=!1,m.default.debug("["+this.spec.clientId+"] live streaming started, code: "+P.code),this.streamingTasks.set(R,{clientRequest:I,mode:T,url:R,taskId:J}),U(),[3,14];case 9:if(S=u.sent(),U(),this.isStartingStreamingTask=!1,!S.data||!S.data.retry||k)throw S;return S.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(R,T,S)];case 10:return[2,u.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(R,T,S)];case 12:return[2,u.sent()];case 13:return[3,14];case 14:return[2]}})})},E.prototype.stopLiveStreamingTask=function(R){var T=this;return new Promise(function(k,I){var U=T.streamingTasks.get(R);if(!U||!T.connection)return new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var V=U.mode;U.abortTask=function(){m.default.debug("["+T.spec.clientId+"] stop live streaming success(worker exception)"),T.streamingTasks.delete(R),k()},m.default.debug("stop live streaming task request: "+JSON.stringify(R)),T.connection.request("request",{clientRequest:{command:V===p.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:U.url}},!1,{url:R,command:"UnPublishStream",workerType:V===p.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(T.lastTaskId++).toString()}).then(function(W){m.default.debug("["+T.spec.clientId+"] stop live streaming success, code: "+W.code),T.streamingTasks.delete(R),0===T.streamingTasks.size&&V!==p.LiveStreamingServiceMode.INJECT&&(T.connection.close(),T.connection=void 0),k()}).catch(I)})},E.prototype.controlInjectStream=function(R,T,k,I){return O(this,void 0,void 0,function(){var U;return _(this,function(V){switch(V.label){case 0:if(!(U=this.streamingTasks.get(R))||!this.connection||U.mode!==p.LiveStreamingServiceMode.INJECT)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:R,control:T,audioVolume:k,position:I}})];case 1:return[2,V.sent().serverResponse]}})})},E.prototype.resetAllTask=function(){var R=this,T=Array.from(this.streamingTasks.values());this.terminate();for(var k=function(W){I.startLiveStreamingTask(W.url,W.mode).catch(function(J){R.onLiveStreamError&&R.onLiveStreamError(W.url,J)})},I=this,U=0,V=T;U<V.length;U++)k(V[U])},E.prototype.setGatewayConnectionState=function(R){this.connection&&(this.connection.gatewayConnectionState=R)},E.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=M.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},E.prototype.connect=function(R){return O(this,void 0,void 0,function(){var T,k=this;return _(this,function(I){switch(I.label){case 0:if(this.connection)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,d.getLiveStreamingWorkerMangerResult(R,this.spec,this.cancelToken.token)];case 1:return T=I.sent(),this.uapResponse=T,this.connection=new o.AgoraLiveStreamingUapSignal(T.workerToken,this.spec,R),this.connection.on(p.LiveStreamingUapSignalEvents.WARNING,function(U,V){return k.onLiveStreamWarning&&k.onLiveStreamWarning(V,U)}),this.connection.on(p.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,function(U){return k.handlePublishStreamServer(U)}),this.connection.on(p.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,function(U){return k.handleInjectStreamServerStatus(U)}),this.connection.on(p.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,function(U,V){if(!k.connection)return V(new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));d.getLiveStreamingWorkerMangerResult(R,k.spec,k.cancelToken.token).then(function(W){k.uapResponse=W,U(W.addressList)}).catch(V)}),[4,this.connection.init(T.addressList)];case 2:return I.sent(),[2,this.connection]}})})},E.prototype.handlePublishStreamServer=function(R){var T=this,k=R.serverStatus&&R.serverStatus.url;if(!k)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:R.code});var I=this.streamingTasks.get(k);switch(R.code){case p.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case p.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case p.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case p.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var U=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:R.code});if(I)return m.default.error(U.toString()),this.onLiveStreamError&&this.onLiveStreamError(k,U);if(!this.isStartingStreamingTask)return;this.statusError.set(k,U);case p.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case p.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var V=Array.from(this.streamingTasks.values()),W=function(S){if(S.abortTask)return S.abortTask(),"continue";m.default.warning("["+J.spec.clientId+"] publish stream status code",R.code,"try to republish",S.url),J.startLiveStreamingTask(S.url,S.mode,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:R.code})).then(function(){m.default.debug("["+T.spec.clientId+"] republish live stream success",S.url)}).catch(function(z){m.default.error(z.toString()),T.onLiveStreamError&&T.onLiveStreamError(S.url,z)})},J=this,K=0,P=V;K<P.length;K++)W(P[K]);return}},E.prototype.handleInjectStreamServerStatus=function(R){var T=Number(R.uid),k=R.serverStatus&&R.serverStatus.url;switch(R.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,T,k));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,T,k),void this.streamingTasks.delete(k);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,T,k),void this.streamingTasks.delete(k);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,T,k),void this.streamingTasks.delete(k);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,T,k),void this.streamingTasks.delete(k);default:return void m.default.debug("inject stream server status",R)}},E.prototype.haveUrl=function(R){return this.streamingTasks.has(R)||void 0},E}();q.AgoraRTCLiveStreamingClient=g},function(Z,q,N){"use strict";var x,O=this&&this.__extends||(x=function(T,k){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,U){I.__proto__=U}||function(I,U){for(var V in U)U.hasOwnProperty(V)&&(I[V]=U[V])})(T,k)},function(T,k){function I(){this.constructor=T}x(T,k),T.prototype=null===k?Object.create(k):(I.prototype=k.prototype,new I)}),_=this&&this.__assign||function(){return(_=Object.assign||function(T){for(var k,I=1,U=arguments.length;I<U;I++)for(var V in k=arguments[I])Object.prototype.hasOwnProperty.call(k,V)&&(T[V]=k[V]);return T}).apply(this,arguments)},w=this&&this.__awaiter||function(T,k,I,U){return new(I||(I=Promise))(function(V,W){function J(S){try{P(U.next(S))}catch(z){W(z)}}function K(S){try{P(U.throw(S))}catch(z){W(z)}}function P(S){var z;S.done?V(S.value):(z=S.value,z instanceof I?z:new I(function(u){u(z)})).then(J,K)}P((U=U.apply(T,k||[])).next())})},o=this&&this.__generator||function(T,k){var I,U,V,W,J={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return W={next:K(0),throw:K(1),return:K(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function K(P){return function(S){return function(z){if(I)throw new TypeError("Generator is already executing.");for(;J;)try{if(I=1,U&&(V=2&z[0]?U.return:z[0]?U.throw||((V=U.return)&&V.call(U),0):U.next)&&!(V=V.call(U,z[1])).done)return V;switch(U=0,V&&(z=[2&z[0],V.value]),z[0]){case 0:case 1:V=z;break;case 4:return J.label++,{value:z[1],done:!1};case 5:J.label++,U=z[1],z=[0];continue;case 7:z=J.ops.pop(),J.trys.pop();continue;default:if(!((V=(V=J.trys).length>0&&V[V.length-1])||6!==z[0]&&2!==z[0])){J=0;continue}if(3===z[0]&&(!V||z[1]>V[0]&&z[1]<V[3])){J.label=z[1];break}if(6===z[0]&&J.label<V[1]){J.label=V[1],V=z;break}if(V&&J.label<V[2]){J.label=V[2],J.ops.push(z);break}V[2]&&J.ops.pop(),J.trys.pop();continue}z=k.call(T,J)}catch(u){z=[6,u],U=0}finally{I=V=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([P,S])}}},p=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(q,"__esModule",{value:!0});var y=N(27),v=N(77),h=N(36),d=N(24),m=N(2),M=p(N(0)),g=N(1),E=N(31),R=function(T){function k(I,U,V){var W=T.call(this)||this;return W._gatewayConnectionState="CONNECTED",W.reconnectMode="retry",W.reqId=0,W.commandReqId=0,W.waitingResponseList=[],W.handleWebSocketOpen=function(){W.reconnectMode="retry",W.startPingPong()},W.handleWebSocketMessage=function(J){if(J.data){var K=JSON.parse(J.data);if(K.requestId)W.emit("@"+K.requestId,K);else if(W.serviceMode===y.LiveStreamingServiceMode.INJECT)W.emit(y.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,K);else{g.report.requestWorkerEvent(W.spec.sid,{actionType:"status",serverCode:K.code,workerType:W.serviceMode===y.LiveStreamingServiceMode.TRANSCODE?1:2});var P=K.serverStatus&&K.serverStatus.url;P&&W.waitingResponseList.includes(P)&&200===K.code&&W.emit(P),W.emit(y.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,K)}}},W.spec=U,W.token=I,W.serviceMode=V,W.websocket=new v.AgoraWebSocketManager("live-streaming"),W.websocket.on(y.WebSocketManagerEvents.CONNECTED,W.handleWebSocketOpen),W.websocket.on(y.WebSocketManagerEvents.ON_MESSAGE,W.handleWebSocketMessage),W.websocket.on(y.WebSocketManagerEvents.REQUEST_NEW_URLS,function(J,K){h.emitAsPromise(W,y.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(J).catch(K)}),W.websocket.on(y.WebSocketManagerEvents.RECONNECTING,function(){W.websocket.reconnectMode=W.reconnectMode}),W}return O(k,T),Object.defineProperty(k.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(I){this._gatewayConnectionState=I,"CONNECTED"===I&&this.emit("gateway-connected",I)},enumerable:!0,configurable:!0}),k.prototype.init=function(I){return this.websocket.init(I)},k.prototype.request=function(I,U,V,W){return w(this,void 0,void 0,function(){var J,K,P,S,z,u,t,n,a,i,s=this;return o(this,function(l){switch(l.label){case 0:if(this.reqId+=1,J=this.reqId,"request"===I&&(this.commandReqId+=1),K=this.commandReqId,!J||!this.websocket)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(P=m.VERSION,"closed"===this.websocket.state)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_DISCONNECT);return S=function(){return new Promise(function(b,c){var r=function(){"CONNECTED"===s.gatewayConnectionState&&"connected"===s.websocket.state&&(s.off("gateway-connected",r),s.websocket.off(y.WebSocketManagerEvents.CONNECTED,r),b(void 0))};s.on("gateway-connected",r),s.websocket.once(y.WebSocketManagerEvents.CLOSED,function(){return c(new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_ABORT))}),s.websocket.on(y.WebSocketManagerEvents.CONNECTED,r)})},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,S()];case 1:l.sent(),l.label=2;case 2:z=Promise.race([new Promise(function(b,c){var r=function(){c(new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_ABORT))};s.websocket.once(y.WebSocketManagerEvents.RECONNECTING,r),s.websocket.once(y.WebSocketManagerEvents.CLOSED,r),s.once("@"+J,function(f){b(f)})}),E.wait(m.getParameter("LIVE_STREAMING_TIMEOUT")).then(function(){return!1})]),(u=_({command:I,sdkVersion:P,seq:J,requestId:J,allocate:V,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},U)).clientRequest&&(u.clientRequest.workerToken=this.token),W&&g.report.requestWorkerEvent(this.spec.sid,_(_({},W),{requestId:K,actionType:"request",payload:JSON.stringify(U.clientRequest),serverCode:0,code:0})),t=Date.now(),this.websocket.sendMessage(u),n=null,l.label=3;case 3:return l.trys.push([3,5,,8]),[4,z];case 4:return n=l.sent(),[3,8];case 5:if(a=l.sent(),"closed"===this.websocket.state)throw a;return[4,S()];case 6:return l.sent(),[4,this.request(I,U,V,W)];case 7:return[2,l.sent()];case 8:if(!1===n)throw i=new d.AgoraRTCError(d.AgoraRTCErrorCode.NETWORK_TIMEOUT,(U&&U.clientRequest&&U.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(y.LiveStreamingUapSignalEvents.WARNING,i,W&&W.url||"unknown url"),W&&g.report.requestWorkerEvent(this.spec.sid,_(_({},W),{requestId:K,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-t})),i;return W&&g.report.requestWorkerEvent(this.spec.sid,_(_({},W),{requestId:K,actionType:"response",payload:JSON.stringify(n.serverResponse),serverCode:n.code,success:200===n.code,responseTime:Date.now()-t})),200===n.code?[3,10]:[4,this.handleResponseError(n)];case 9:l.sent(),l.label=10;case 10:return[2,n]}})})},k.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},k.prototype.close=function(){var I="__VERSION__"===m.VERSION?"0.0.1":m.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:I,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},k.prototype.handleResponseError=function(I){return w(this,void 0,void 0,function(){var U,V,W,J,K=this;return o(this,function(P){switch(M.default.debug("[live-streaming] receive response error "+I.code),I.code){case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return M.default.warning("live stream response already exists stream"),this.emit(y.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",U=I.serverResponse.url),this.waitingResponseList.includes(U)||this.waitingResponseList.push(U),[2,new Promise(function(S,z){K.once(U,function(){K.waitingResponseList.splice(K.waitingResponseList.indexOf(U),1),S()}),setTimeout(function(){K.waitingResponseList.splice(K.waitingResponseList.indexOf(U),1),z(new d.AgoraRTCError(d.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:I.code}))},1e4)})];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:I.code}).throw()];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===I.serverResponse.command||"UninjectStream"===I.serverResponse.command)return[2];throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:I.code}).throw()];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return V=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(y.LiveStreamingUapSignalEvents.WARNING,V,I.serverResponse.url)];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return V=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(y.LiveStreamingUapSignalEvents.WARNING,V,I.serverResponse.url)];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:I.code}).throw()];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return V=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(y.LiveStreamingUapSignalEvents.WARNING,V,I.serverResponse.url)];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:I.code}).throw()];case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===I.serverResponse.command||"UninjectStream"===I.serverResponse.command)return[2];throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case y.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===I.serverResponse.command||"UninjectStream"===I.serverResponse.command)return[2];if("UpdateTranscoding"===I.serverResponse.command||"ControlStream"===I.serverResponse.command)return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:I.code}).throw()];throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return this.waitingResponseList.includes(W=I.serverResponse.url)||this.waitingResponseList.push(W),J=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:I.code}),this.emit(y.LiveStreamingUapSignalEvents.WARNING,J,W),[2,new Promise(function(S,z){K.once(W,function(){K.waitingResponseList.splice(K.waitingResponseList.indexOf(W),1),S()}),setTimeout(function(){K.waitingResponseList.splice(K.waitingResponseList.indexOf(W),1),z(J)},1e4)})]}return[2]})})},k.prototype.startPingPong=function(){var I=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(function(){"connected"===I.websocket.state&&I.request("ping",{}).catch(function(){})},6e3)},k}(h.EventEmitter);q.AgoraLiveStreamingUapSignal=R},function(Z,q,N){"use strict";var x,O=this&&this.__extends||(x=function(M,g){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var T in R)R.hasOwnProperty(T)&&(E[T]=R[T])})(M,g)},function(M,g){function E(){this.constructor=M}x(M,g),M.prototype=null===g?Object.create(g):(E.prototype=g.prototype,new E)}),_=this&&this.__awaiter||function(M,g,E,R){return new(E||(E=Promise))(function(T,k){function I(W){try{V(R.next(W))}catch(J){k(J)}}function U(W){try{V(R.throw(W))}catch(J){k(J)}}function V(W){var J;W.done?T(W.value):(J=W.value,J instanceof E?J:new E(function(K){K(J)})).then(I,U)}V((R=R.apply(M,g||[])).next())})},w=this&&this.__generator||function(M,g){var E,R,T,k,I={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return k={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function U(V){return function(W){return function(J){if(E)throw new TypeError("Generator is already executing.");for(;I;)try{if(E=1,R&&(T=2&J[0]?R.return:J[0]?R.throw||((T=R.return)&&T.call(R),0):R.next)&&!(T=T.call(R,J[1])).done)return T;switch(R=0,T&&(J=[2&J[0],T.value]),J[0]){case 0:case 1:T=J;break;case 4:return I.label++,{value:J[1],done:!1};case 5:I.label++,R=J[1],J=[0];continue;case 7:J=I.ops.pop(),I.trys.pop();continue;default:if(!((T=(T=I.trys).length>0&&T[T.length-1])||6!==J[0]&&2!==J[0])){I=0;continue}if(3===J[0]&&(!T||J[1]>T[0]&&J[1]<T[3])){I.label=J[1];break}if(6===J[0]&&I.label<T[1]){I.label=T[1],T=J;break}if(T&&I.label<T[2]){I.label=T[2],I.ops.push(J);break}T[2]&&I.ops.pop(),I.trys.pop();continue}J=g.call(M,I)}catch(K){J=[6,K],R=0}finally{E=T=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([V,W])}}},o=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(q,"__esModule",{value:!0});var p=N(24),y=N(36),v=N(31),h=N(27),d=o(N(0)),m=function(M){function g(E){var R=M.call(this)||this;return R.connectionID=0,R.currentURLIndex=0,R.reconnectMode="tryNext",R._state="closed",R.retryConfig=v.DEFAULT_RETRY_CONFIG,R.reconnectCount=0,R.name=E,R}return O(g,M),Object.defineProperty(g.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"state",{get:function(){return this._state},set:function(E){E!==this._state&&(this._state=E,"reconnecting"===this._state?this.emit(h.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(h.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(h.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(h.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),g.prototype.init=function(E){var R=this;return new Promise(function(T,k){R.urls=E;var I=R.urls[R.currentURLIndex];R.state="connecting",R.createWebSocketConnection(I).then(T).catch(k),R.once(h.WebSocketManagerEvents.CLOSED,function(){return k(new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_DISCONNECT))}),R.once(h.WebSocketManagerEvents.CONNECTED,function(){return T()})})},g.prototype.close=function(E,R){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var T=this.websocket;R?setTimeout(function(){return T.close()},500):T.close(),this.websocket=void 0}this.state=E?"failed":"closed"},g.prototype.reconnect=function(E){if(this.websocket){void 0!==E&&(this.reconnectMode=E);var R=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),R&&R.bind(this.websocket)({code:9999})}else d.default.warning("["+this.name+"] can not reconnect, no websocket")},g.prototype.sendMessage=function(E){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var R=JSON.stringify(E);try{this.websocket.send(R)}catch(T){throw new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+T.toString())}},g.prototype.createWebSocketConnection=function(E){return _(this,void 0,void 0,function(){var R,T=this;return w(this,function(k){return this.connectionID+=1,R=this.connectionID,[2,new Promise(function(I,U){T.websocket&&(T.websocket.onclose=null,T.websocket.close()),d.default.debug("["+T.name+"] start connect, url: "+E);try{T.websocket=new WebSocket(E),T.websocket.binaryType="arraybuffer"}catch(W){var V=new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+W.toString());return d.default.error("["+T.name+"]"+V),void U(V)}v.wait(5e3).then(function(){R===T.connectionID&&T.websocket&&T.websocket.readyState!==WebSocket.OPEN&&T.websocket&&T.websocket.close()}),T.websocket.onopen=function(){d.default.debug("["+T.name+"] websockect opened:",E),T.reconnectMode="retry",T.state="connected",T.reconnectCount=0,I()},T.websocket.onclose=function(W){return _(T,void 0,void 0,function(){var J,K;return w(this,function(P){switch(P.label){case 0:return d.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+W.code+", reason: "+W.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),J=y.emitAsInvokerNoResponse(this,h.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(J)]):[3,2];case 1:return K=P.sent(),"closed"===this.state?(d.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):K?(I(),[3,3]):(U(new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+W.code)),this.close(!0),[2]);case 2:U(new p.AgoraRTCError(p.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+W.code)),this.close(),P.label=3;case 3:return[2]}})})},T.websocket.onmessage=function(W){T.emit(h.WebSocketManagerEvents.ON_MESSAGE,W)}})]})})},g.prototype.reconnectWithAction=function(E,R){return _(this,void 0,void 0,function(){var T,k,U;return w(this,function(V){switch(V.label){case 0:return!R&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(T=v.getRetryWaitTime(this.reconnectCount,this.retryConfig),d.default.debug("["+this.name+"] wait "+T+"ms to reconnect websocket, mode: "+E),[4,v.wait(T)]):[2,!1];case 1:if(V.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,V.label=2;case 2:return V.trys.push([2,12,,14]),"retry"!==E?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return V.sent(),[3,11];case 4:return"tryNext"!==E?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,V.sent()];case 6:return d.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return V.sent(),[3,11];case 8:return"recover"!==E?[3,11]:(d.default.debug("["+this.name+"] request new urls"),k=this,[4,y.emitAsPromise(this,h.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return k.urls=V.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:V.sent(),V.label=11;case 11:return[2,!0];case 12:return U=V.sent(),d.default.error("["+this.name+"] reconnect failed",U.toString()),[4,this.reconnectWithAction(E)];case 13:return[2,V.sent()];case 14:return[2]}})})},g}(y.EventEmitter);q.AgoraWebSocketManager=m},function(Z,q,N){"use strict";var x=N(18),O=N(38),_=N(79),w=N(44);function o(y){var v=new _(y),h=O(_.prototype.request,v);return x.extend(h,_.prototype,v),x.extend(h,v),h}var p=o(N(41));p.Axios=_,p.create=function(y){return o(w(p.defaults,y))},p.Cancel=N(45),p.CancelToken=N(93),p.isCancel=N(40),p.all=function(y){return Promise.all(y)},p.spread=N(94),Z.exports=p,Z.exports.default=p},function(Z,q,N){"use strict";var x=N(18),O=N(39),_=N(80),w=N(81),o=N(44);function p(y){this.defaults=y,this.interceptors={request:new _,response:new _}}p.prototype.request=function(y){"string"==typeof y?(y=arguments[1]||{}).url=arguments[0]:y=y||{},y.method=(y=o(this.defaults,y)).method?y.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var v=[w,void 0],h=Promise.resolve(y);for(this.interceptors.request.forEach(function(d){v.unshift(d.fulfilled,d.rejected)}),this.interceptors.response.forEach(function(d){v.push(d.fulfilled,d.rejected)});v.length;)h=h.then(v.shift(),v.shift());return h},p.prototype.getUri=function(y){return y=o(this.defaults,y),O(y.url,y.params,y.paramsSerializer).replace(/^\?/,"")},x.forEach(["delete","get","head","options"],function(y){p.prototype[y]=function(v,h){return this.request(x.merge(h||{},{method:y,url:v}))}}),x.forEach(["post","put","patch"],function(y){p.prototype[y]=function(v,h,d){return this.request(x.merge(d||{},{method:y,url:v,data:h}))}}),Z.exports=p},function(Z,q,N){"use strict";var x=N(18);function O(){this.handlers=[]}O.prototype.use=function(_,w){return this.handlers.push({fulfilled:_,rejected:w}),this.handlers.length-1},O.prototype.eject=function(_){this.handlers[_]&&(this.handlers[_]=null)},O.prototype.forEach=function(_){x.forEach(this.handlers,function(w){null!==w&&_(w)})},Z.exports=O},function(Z,q,N){"use strict";var x=N(18),O=N(82),_=N(40),w=N(41);function o(p){p.cancelToken&&p.cancelToken.throwIfRequested()}Z.exports=function(p){return o(p),p.headers=p.headers||{},p.data=O(p.data,p.headers,p.transformRequest),p.headers=x.merge(p.headers.common||{},p.headers[p.method]||{},p.headers),x.forEach(["delete","get","head","post","put","patch","common"],function(y){delete p.headers[y]}),(p.adapter||w.adapter)(p).then(function(y){return o(p),y.data=O(y.data,y.headers,p.transformResponse),y},function(y){return _(y)||(o(p),y&&y.response&&(y.response.data=O(y.response.data,y.response.headers,p.transformResponse))),Promise.reject(y)})}},function(Z,q,N){"use strict";var x=N(18);Z.exports=function(O,_,w){return x.forEach(w,function(o){O=o(O,_)}),O}},function(Z,q){var N,x,O=Z.exports={};function _(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}function o(E){if(N===setTimeout)return setTimeout(E,0);if((N===_||!N)&&setTimeout)return N=setTimeout,setTimeout(E,0);try{return N(E,0)}catch(R){try{return N.call(null,E,0)}catch(T){return N.call(this,E,0)}}}!function(){try{N="function"==typeof setTimeout?setTimeout:_}catch(E){N=_}try{x="function"==typeof clearTimeout?clearTimeout:w}catch(E){x=w}}();var p,y=[],v=!1,h=-1;function d(){v&&p&&(v=!1,p.length?y=p.concat(y):h=-1,y.length&&m())}function m(){if(!v){var E=o(d);v=!0;for(var R=y.length;R;){for(p=y,y=[];++h<R;)p&&p[h].run();h=-1,R=y.length}p=null,v=!1,function(T){if(x===clearTimeout)return clearTimeout(T);if((x===w||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(T);try{x(T)}catch(k){try{return x.call(null,T)}catch(I){return x.call(this,T)}}}(E)}}function M(E,R){this.fun=E,this.array=R}function g(){}O.nextTick=function(E){var R=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)R[T-1]=arguments[T];y.push(new M(E,R)),1!==y.length||v||o(m)},M.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=g,O.addListener=g,O.once=g,O.off=g,O.removeListener=g,O.removeAllListeners=g,O.emit=g,O.prependListener=g,O.prependOnceListener=g,O.listeners=function(E){return[]},O.binding=function(E){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function(E){throw new Error("process.chdir is not supported")},O.umask=function(){return 0}},function(Z,q,N){"use strict";var x=N(18);Z.exports=function(O,_){x.forEach(O,function(w,o){o!==_&&o.toUpperCase()===_.toUpperCase()&&(O[_]=w,delete O[o])})}},function(Z,q,N){"use strict";var x=N(43);Z.exports=function(O,_,w){var o=w.config.validateStatus;!o||o(w.status)?O(w):_(x("Request failed with status code "+w.status,w.config,null,w.request,w))}},function(Z,q,N){"use strict";Z.exports=function(x,O,_,w,o){return x.config=O,_&&(x.code=_),x.request=w,x.response=o,x.isAxiosError=!0,x.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},x}},function(Z,q,N){"use strict";var x=N(88),O=N(89);Z.exports=function(_,w){return _&&!x(w)?O(_,w):w}},function(Z,q,N){"use strict";Z.exports=function(x){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(x)}},function(Z,q,N){"use strict";Z.exports=function(x,O){return O?x.replace(/\/+$/,"")+"/"+O.replace(/^\/+/,""):x}},function(Z,q,N){"use strict";var x=N(18),O=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Z.exports=function(_){var w,o,p,y={};return _&&x.forEach(_.split("\n"),function(v){if(p=v.indexOf(":"),w=x.trim(v.substr(0,p)).toLowerCase(),o=x.trim(v.substr(p+1)),w){if(y[w]&&O.indexOf(w)>=0)return;y[w]="set-cookie"===w?(y[w]?y[w]:[]).concat([o]):y[w]?y[w]+", "+o:o}}),y}},function(Z,q,N){"use strict";var x=N(18);Z.exports=x.isStandardBrowserEnv()?function(){var O,_=/(msie|trident)/i.test(navigator.userAgent),w=document.createElement("a");function o(p){var y=p;return _&&(w.setAttribute("href",y),y=w.href),w.setAttribute("href",y),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:"/"===w.pathname.charAt(0)?w.pathname:"/"+w.pathname}}return O=o(window.location.href),function(p){var y=x.isString(p)?o(p):p;return y.protocol===O.protocol&&y.host===O.host}}():function(){return!0}},function(Z,q,N){"use strict";var x=N(18);Z.exports=x.isStandardBrowserEnv()?{write:function(O,_,w,o,p,y){var v=[];v.push(O+"="+encodeURIComponent(_)),x.isNumber(w)&&v.push("expires="+new Date(w).toGMTString()),x.isString(o)&&v.push("path="+o),x.isString(p)&&v.push("domain="+p),!0===y&&v.push("secure"),document.cookie=v.join("; ")},read:function(O){var _=document.cookie.match(new RegExp("(^|;\\s*)("+O+")=([^;]*)"));return _?decodeURIComponent(_[3]):null},remove:function(O){this.write(O,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(Z,q,N){"use strict";var x=N(45);function O(_){if("function"!=typeof _)throw new TypeError("executor must be a function.");var w;this.promise=new Promise(function(p){w=p});var o=this;_(function(p){o.reason||(o.reason=new x(p),w(o.reason))})}O.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},O.source=function(){var _;return{token:new O(function(w){_=w}),cancel:_}},Z.exports=O},function(Z,q,N){"use strict";Z.exports=function(x){return function(O){return x.apply(null,O)}}},function(Z,q,N){"use strict";var x=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(q,"__esModule",{value:!0});var O=x(N(0)),_=1,w=function(){function o(p){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=_++,p&&(this.name=p),O.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(o.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),o.prototype.lock=function(){var p,y=this;this.locks+=1,O.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var v=new Promise(function(d){p=function(){y.locks-=1,O.default.debug("[lock-"+y.name+"-"+y.lockId+"] is not locked, current queue "+y.locks+"."),d()}}),h=this.lockingPromise.then(function(){return p});return this.lockingPromise=this.lockingPromise.then(function(){return v}),h},o}();q.PromiseMutex=w},function(Z,q,N){"use strict";N.r(q);var x=N(2),O=N(0),_=N(1),w=N(8),o=N(5),p=function(){};p.prototype.set=function($,j){["BatteryLevel"].indexOf($)>-1&&(this[$]=j)};var y=new function(){var $=Object(w.b)();return $.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},$.state=$.states.UNINIT,$.batteryManager=null,$._init=function(j,ue){$.state=$.states.INITING,navigator.getBattery?navigator.getBattery().then(function(Pe){$.batteryManager=Pe,j&&setTimeout(function(){j()},0)}).catch(function(Pe){O.default.debug("navigator.getBattery is disabled",Pe),j&&j()}):($.state=$.states.INITED,j&&j())},$._getBatteryStats=function(){var j={};return j.BatteryLevel=$.batteryManager&&$.batteryManager.level?Math.floor(100*$.batteryManager.level):"UNSUPPORTED",j},$.getStats=function(j,ue){var Pe=new p,pe=$._getBatteryStats();pe&&pe.BatteryLevel&&Pe.set("BatteryLevel",pe.BatteryLevel),j&&j(Pe)},$._init(),$},v=N(22),h=N(19),d=N(26),m=N(53),M=N(9),g=["live","rtc","web","interop","h264_interop","web-only"],E=["vp8","vp9","h264"],R=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],T=N(11),k=N.n(T),I=N(7),U=N.n(I),V=N(13),W=N(4),J=N(10),K=N(20),P=N(6),S=N(14),z={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},u={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},t=function($){var j={remoteStreamStorage:{},localStreamStorage:{}};return j.gatewayClient=$,j.checkAudioOutputLevel=function(ue){return!(ue&&parseInt(ue.audioRecvBytesDelta)>0&&parseInt(ue.audioDecodingNormalDelta)>0&&0===parseInt(ue.audioOutputLevel))},j.checkAudioIntputLevel=function(ue){return!ue||0!==parseInt(ue.audioInputLevel)},j.checkFramerateInput=function(ue,Pe){if(!ue||!Pe.attributes)return!0;var pe=parseInt(Pe.attributes.maxFrameRate),me=parseInt(ue.googFrameRateInput);return!pe||!me||!(pe>10&&me<5||pe<10&&pe>=5&&me<=1)},j.checkFramerateSent=function(ue){return!(ue&&parseInt(ue.googFrameRateInput)>5&&parseInt(ue.googFrameRateSent)<=1)},j.checkSendVideoBitrate=function(ue){return!ue||0!==parseInt(ue.videoSendBytesDelta)},j.checkSendAudioBitrate=function(ue){return!ue||0!==parseInt(ue.audioSendBytesDelta)},j.checkVideoDecode=function(ue){return!ue||0===parseInt(ue.videoRecvBytesDelta)||0!==parseInt(ue.googFrameRateDecoded)},j.checkAudioDecode=function(ue){return!ue||0===parseInt(ue.audioRecvBytesDelta)||0!==parseInt(ue.audioDecodingNormalDelta)},j.record=function(ue,Pe,pe,me,Be){pe[ue]||(pe[ue]={isPrevNormal:!0,record:[]});var re=pe[ue],D=j["check"+ue](Pe,Be);if(re.record.push(D),re.record.length>=5){re.isCurNormal=-1!==re.record.indexOf(!0);var se=u[ue];re.isPrevNormal&&!re.isCurNormal&&j.gatewayClient.dispatchEvent({type:"exception",code:se,msg:z[se],uid:me}),!re.isPrevNormal&&re.isCurNormal&&j.gatewayClient.dispatchEvent({type:"exception",code:se+2e3,msg:z[se+2e3],uid:me}),re.isPrevNormal=re.isCurNormal,re.record=[]}},j.setLocalStats=function(ue){var Pe={};Object.keys(ue).map(function(pe){var me=ue[pe],Be=j.gatewayClient.localStreams[parseInt(pe)],re=j.localStreamStorage[pe]||{};Be&&Be.hasVideo()&&(j.record("SendVideoBitrate",me.videoStats,re,pe),j.record("FramerateInput",me.videoStats,re,pe,Be),j.record("FramerateSent",me.videoStats,re,pe)),Be&&Be.hasAudio()&&(j.record("AudioIntputLevel",me.audioStats,re,pe),j.record("SendAudioBitrate",me.audioStats,re,pe)),Pe[pe]=re}),j.localStreamStorage=Pe},j.setRemoteStats=function(ue){var Pe={};Object.keys(ue).map(function(pe){var me=ue[pe],Be=$.remoteStreams[pe],re=j.remoteStreamStorage[pe]||{};Be&&Be.hasVideo()&&Be.isPlaying()&&j.record("VideoDecode",me.videoStats,re,pe),Be&&Be.hasAudio()&&Be.isPlaying()&&(j.record("AudioOutputLevel",me.audioStats,re,pe),j.record("AudioDecode",me.audioStats,re,pe)),Pe[pe]=re}),j.remoteStreamStorage=Pe},j};function a($,j){(null==j||j>$.length)&&(j=$.length);for(var ue=0,Pe=new Array(j);ue<j;ue++)Pe[ue]=$[ue];return Pe}var i,s=N(3),l=new function(){var $=Object(w.b)();return $.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},$.state=$.states.UNINIT,$.type=null,$.lastConnectedAt=null,$.lastDisconnectedAt=null,$.lastTypeChangedAt=null,$.networkChangeTimer=null,$._init=function(j,ue){if($.state=$.states.INITING,navigator.connection&&navigator.connection.addEventListener){var Pe=$._getNetworkInfo();$.type=Pe&&Pe.type,$.state=$.states.INITED,j&&j()}else $.state=$.states.UNINIT,ue&&ue("DO_NOT_SUPPORT")},$._getNetworkInfo=function(){return navigator.connection},$._reloadNetworkInfo=function(){var j=$._getNetworkInfo(),ue=j&&j.type||"UNSUPPORTED",Pe=Date.now();ue!==$.type&&($.lastTypeChangedAt=Pe,"none"==ue?$.lastDisconnectedAt=Pe:"none"==$.type&&($.lastConnectedAt=Pe),$.type=ue,$.dispatchEvent({type:"networkTypeChanged",networkType:ue}))},$.getStats=function(j,ue){var Pe={},pe=$._getNetworkInfo();pe&&(Pe.NetworkType=pe.type||"UNSUPPORTED"),setTimeout(function(){j(Pe)},0)},$._init(function(){navigator.connection.addEventListener("change",function(){$._reloadNetworkInfo()}),$.networkChangeTimer=setInterval(function(){$._reloadNetworkInfo()},5e3)},function(j){}),$},b=N(55),c=N(16),r=N(56),f=N.n(r),L=N(21),C=function(){return"HTTPS"===(i||i||(i=(window.location.protocol.split(":")[0]||"").toUpperCase()))},H=function(){return void 0!==window.isSecureContext},Y="host",ee=function($){var re,D,j={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(j.mode=$.mode,j.codec=$.codec,j.clientId=Object(J.generateSessionId)().slice(0,5),j.uintUid=null,j.customReportCount=0,$=U()({},$),j.aespassword=null,j.aesmode="none",j.hasPublished=!1,j.getSessionId=function(){return $.sessionId},j.startChannelMediaRelay=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(he){if(he)return D&&D(he);D&&D()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(re instanceof M.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var ie=re.getSrcChannelMediaInfo(),ae=re.getDestChannelMediaInfos();if(Object(s.isEmpty)(ie))throw"srcChannelMediaInfo should not be empty";if(Object(s.isEmpty)(ae)||0===ae.length)throw"destChannelMediaInfos should not be empty";if(!Object(J.is32Uint)(ie.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(s.isValidChannelName)(ie.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(ie.token&&!Object(s.isValidToken)(ie.token))throw"Invalid token in srcChannelMediaInfo";if(ae.forEach(function(he){if(!Object(J.is32Uint)(he.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(s.isValidChannelName)(he.channelName))throw"Invalid channelName in destChannelMediaInfo";if(he.token&&!Object(s.isValidToken)(he.token))throw"Invalid token in destChannelMediaInfo"}),j.gatewayClient.state!==V.a.CONNECTED)throw"startChannelMediaRelay should be used after join";j.gatewayClient.startChannelMediaRelay(re).then(function(){se&&se()}).catch(function(he){se&&se(he)})},j.updateChannelMediaRelay=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(he){if(he)return D&&D(he);D&&D()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(re instanceof M.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var ie=re.getSrcChannelMediaInfo(),ae=re.getDestChannelMediaInfos();if(Object(s.isEmpty)(ie))throw"srcChannelMediaInfo should not be empty";if(Object(s.isEmpty)(ae)||0===ae.length)throw"destChannelMediaInfos should not be empty";if(!Object(J.is32Uint)(ie.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(s.isValidChannelName)(ie.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(ie.token&&!Object(s.isValidToken)(ie.token))throw"Invalid token in srcChannelMediaInfo";if(ae.forEach(function(he){if(!Object(J.is32Uint)(he.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(s.isValidChannelName)(he.channelName))throw"Invalid channelName in destChannelMediaInfo";if(he.token&&!Object(s.isValidToken)(he.token))throw"Invalid token in destChannelMediaInfo"}),j.gatewayClient.state!==V.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";j.gatewayClient.updateChannelMediaRelay(re).then(function(){se&&se()}).catch(function(he){se&&se(he)})},j.stopChannelMediaRelay=function(re){var D=_.report.reportApiInvoke($.sessionId,{callback:function(se){if(se)return re&&re(se);re&&re()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});j.gatewayClient.stopChannelMediaRelay().then(function(){D&&D()}).catch(function(se){D&&D(se)})},j.getConnectionState=function(){var re=_.report.reportApiInvoke($.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),D=V.a.connetionStateMap[j.gatewayClient.state];return re(),D},j.setClientRole=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:D,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(s.checkValidEnum)(re,"setClientRole",[Y,"audience"]),"rtc"===j.mode){var ie="RTC mode can not use setClientRole";return O.default.warning("[".concat(j.clientId,"] ").concat(ie)),se&&se(ie)}j.gatewayClient&&j.gatewayClient.state===V.a.CONNECTED?("audience"===re&&(0===this.highStreamState?this._unpublish(this.highStream,function(){se&&se(null,{role:re})},function(ae){se&&se(ae)}):j.gatewayClient.setClientRole("audience",se)),re===Y&&j.gatewayClient.setClientRole(Y,se)):(j.gatewayClient.role=re,se&&se(null,{role:re}))},j.getGatewayInfo=function(re){if(j.gatewayClient.state!==V.a.CONNECTED){var D="Client is not in connected state";return O.default.error("[".concat(j.clientId,"] ").concat(D)),void re(D)}j.gatewayClient.getGatewayInfo(function(se){re(null,se)},re)},j.renewToken=function(re,D,se){var ie=_.report.reportApiInvoke($.sessionId,{callback:function(ae,he){if(ae)return O.default.error("Failed to renew token ".concat(ae),he),se&&se(ae);D&&D(he)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(s.isValidToken)(re))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return j.gatewayClient?j.key?(j.key=re,void j.gatewayClient.renewToken(re,function(ae){return ie(null,ae)},ie)):(O.default.error("[".concat(j.clientId,"] renewToken should not be called before user join")),ie(W.default.INVALID_OPERATION)):(O.default.error("[".concat(j.clientId,"] renewToken Failed. GatewayClient not Exist")),ie(W.default.INVALID_OPERATION))},j.setLowStreamParameter=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(s.checkValidObject)(re,"param");var se=re.width,ie=re.height,ae=re.framerate,he=re.bitrate;Object(s.isEmpty)(se)||Object(s.checkValidNumber)(se,"width"),Object(s.isEmpty)(ie)||Object(s.checkValidNumber)(ie,"height"),Object(s.isEmpty)(ae)||Object(s.checkValidNumber)(ae,"framerate"),Object(s.isEmpty)(he)||Object(s.checkValidNumber)(he,"bitrate",1,1e7),(!se&&ie||se&&!ie)&&O.default.warning("[".concat(j.clientId,"] The width and height parameters take effect only when both are set")),j.lowStreamParameter=re,D()},j.init=function(re,D,se){var ie=_.report.reportApiInvoke($.sessionId,{callback:function(ae,he){if(ae)return se&&se(ae);D&&D(he)},name:"Client.init",options:arguments,tag:"tracer"});Object(s.checkValidString)(re),Object(o.isChromeKernel)()&&Object(o.getChromeKernelVersion)()<=48?se?ie(W.default.BAD_ENVIRONMENT):Object(J.popBanTip)():($.appId=re,$.sessionId=Object(J.generateSessionId)(),ie())},j.setTurnServer=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(j.gatewayClient&&j.gatewayClient.state!==V.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(j.useProxyServer)throw new Error("You have already set the proxy");if(j.useLocalAccessPoint)throw new Error("You have already set the local proxy");re instanceof Array||(re=[re]);var se=[];re.map(function(ie,ae){Object(s.checkValidObject)(ie,"turnServer");var he=ie.turnServerURL,F=ie.username,B=ie.password,G=ie.udpport,X=ie.forceturn,Q=ie.tcpport;if(Object(s.checkValidString)(he,"turnServerURL"),Object(s.checkValidString)(F,"username"),Object(s.checkValidString)(B,"password"),Object(s.checkValidString)(G,"udpport"),0===parseInt(G))throw new Error("udpport should not be ".concat(G));Object(s.isEmpty)(X)||Object(s.checkValidBoolean)(X,"forceturn");var ve={mode:"manual"};if(ve.url=he,ve.udpport=G,ve.username=F,ve.credential=B,ve.forceturn=X||!1,!Object(s.isEmpty)(Q)){if(Object(s.checkValidString)(Q,"tcpport"),0===parseInt(Q))throw new Error("tcpport should not be ".concat(Q));ve.tcpport=Q,O.default.info("[".concat(j.clientId,"] Set turnserver[").concat(ae,"] tcpurl. ").concat(ve.url,":").concat(ve.tcpport))}O.default.info("[".concat(j.clientId,"] Set turnserver[").concat(ae,"] udpurl. ").concat(ve.url,":").concat(ve.udpport,",username: ").concat(ve.username)),se.push(ve)}),j.turnServers=se,D()},j.setProxyServer=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(j.gatewayClient&&j.gatewayClient.state!==V.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!re)throw new Error("Do not set the proxyServer parameter as empty");if(j.useProxyServer)throw new Error("You have already set the proxy");if(j.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(s.checkValidString)(re,"proxyServer"),j.proxyServer=re,_.report.setProxyServer(re),O.default.setProxyServer(re),D()},j.startProxyServer=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(j.gatewayClient&&j.gatewayClient.state!==V.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(j.proxyServer)throw new Error("You have already set the proxy");if(j.useLocalAccessPoint)throw new Error("You have already set the local proxy");j.useProxyServer=!0,j.proxyServerType=re||1,D()},j.stopProxyServer=function(){var re=_.report.reportApiInvoke($.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(j.gatewayClient&&j.gatewayClient.state!==V.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");_.report.setProxyServer(),O.default.setProxyServer(),j.turnServers=[],j.proxyServer=null,j.useProxyServer=!1,j.proxyServerType=null,re()},j.setEncryptionSecret=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(s.checkValidString)(re,"password");var se=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");se.test(re)||console.warn("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),j.aespassword=re,D()},j.setEncryptionMode=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(s.checkValidString)(re,"encryptionMode"),-1===R.indexOf(re))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');var ie=["aes-128-gcm2","aes-256-gcm2"];if(-1!==ie.indexOf(re)){if(!D||!(D instanceof Uint8Array&&32===D.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(D)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));D&&(j.aesSalt=Object(J.uint8ArrayToBase64)(D)),j.aesmode=re,se()},j.configPublisher=function(re){var D=_.report.reportApiInvoke($.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(s.checkValidObject)(re,"config");var se=re.width,ie=re.height,ae=re.framerate,he=re.bitrate,F=re.publisherUrl;Object(s.checkValidNumber)(se,"width"),Object(s.checkValidNumber)(ie,"height"),Object(s.checkValidNumber)(ae,"framerate"),Object(s.checkValidNumber)(he,"bitrate",1,1e7),F&&Object(s.checkValidString)(F,"publisherUrl"),j.gatewayClient.configPublisher(re),D()},j.enableDualStream=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(ie,ae){if(ie)return D&&D(ie);re&&re(ae)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(o.getBrowserOS)()?(_.report.streamSwitch($.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),se(W.default.IOS_NOT_SUPPORT)):Object(o.isWeChatBrowser)()?(_.report.streamSwitch($.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),se(W.default.WECHAT_NOT_SUPPORT)):(_.report.streamSwitch($.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),j.isDualStream=!0,j.highStream&&(j.highStream.isDualStream=!0),void(0===j.highStreamState?j._publishLowStream(function(ie){return se(null,ie)},function(ie){O.default.warning("[".concat(j.clientId,"]"),ie),se(W.default.ENABLE_DUALSTREAM_FAILED)}):se(1===j.highStreamState?W.default.STILL_ON_PUBLISHING:null)))},j.disableDualStream=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(ie,ae){if(ie)return D&&D(ie);re&&re(ae)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});_.report.streamSwitch($.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),j.isDualStream=!1,j.highStream&&(j.highStream.isDualStream=!1),0===j.highStreamState?j._unpublishLowStream(function(){j.highStream.lowStream=null,se()},function(ie){O.default.warning("[".concat(j.clientId,"]"),ie),se(W.default.DISABLE_DUALSTREAM_FAILED)}):1===j.highStreamState?se(W.default.STILL_ON_PUBLISHING):se()},j._getLowStream=function(re,D){j.lowStream?re(j.lowStream):j._createLowStream(function(se){j.lowStream=se,re(j.lowStream)},D)},j._createLowStream=function(re,D){if(j.highStream&&j.highStream.stream){var se=U()({},j.highStream.params);if(se.streamID+=1,se.audio=!1,se.video)if(j.highStream.stream.getVideoTracks()[0]){var ie=new v.a(se);ie.isLowStream=!0,ie.streamId=j.highStream.getId()+1;var ae={};j.lowStreamParameter&&(ae=U()({},j.lowStreamParameter)),ae.width&&ae.height||(ae.width=160,ae.height=120),ae.framerate=ae.framerate||15,ae.bitrate=ae.bitrate||50,ie.setVideoProfileCustomPlus(ae);try{var he=f()(j.highStream,{width:ie.videoConstraint.width.ideal,height:ie.videoConstraint.height.ideal,framerate:ie.videoConstraint.frameRate});return ie.stream=he,j.highStream.lowStream=ie,j.highStream.userMuteVideo&&ie.muteVideo(),re&&re(ie)}catch(F){return D&&D(F)}}else D&&D(W.default.HIGH_STREAM_NOT_VIDEO_TRACE);else D&&D(W.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else D&&D(W.default.HIGH_STREAM_NOT_VIDEO_TRACE)},j._publishLowStream=function(re,D){return 2!==j.lowStreamState?D&&D(W.default.LOW_STREAM_ALREADY_PUBLISHED):j.highStream&&j.highStream.hasScreen()?D&&D(W.default.SHARING_SCREEN_NOT_SUPPORT):void j._getLowStream(function(se){j.lowStreamState=1,j.gatewayClient.publish(se,{streamType:1},function(){j.lowStreamState=0,re&&re()},function(ie){1===j.lowStreamState&&(j.lowStreamState=2),O.default.debug("[".concat(j.clientId,"] publish low stream failed")),D&&D(ie)})},D)},j._unpublishLowStream=function(re,D){if(0!==j.lowStreamState)return D&&D(W.default.LOW_STREAM_NOT_YET_PUBLISHED);j.lowStream&&(j.gatewayClient.unpublish(j.lowStream,{streamType:1},function(){},function(se){O.default.debug("[".concat(j.clientId,"] unpublish low stream failed")),D&&D(se)}),j.lowStream.close(),j.lowStream=null,j.lowStreamState=2,re&&re())},j.join=function(re,D,se,ie,ae,he){ie&&"function"==typeof ie&&(he=ae,ae=ie,ie=null);var F=C(),B="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",G=H()?window.isSecureContext:"Browser Not Support",X=function(){O.default.warning(B)};H()?window.isSecureContext||X():F||X();var Q=_.report.reportApiInvoke($.sessionId,{callback:function(ye,be){if(ye)return he&&he(ye);ae&&ae(be)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:F,isSecureContext:G}},tag:"tracer"});if(re&&!Object(s.isValidToken)(re))return O.default.warning("[".concat(j.clientId,"] Param channelKey should be string")),Q(W.default.INVALID_PARAMETER);if(!Object(s.isValidChannelName)(D))return O.default.error("Invalid Channel Name ".concat(D)),O.default.warning("[".concat(j.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),Q(W.default.INVALID_PARAMETER);if("string"==typeof D&&""===D)return O.default.warning("[".concat(j.clientId,"] Param channel should not be empty")),Q(W.default.INVALID_PARAMETER);if(ie&&!Object(s.isValidString)(ie))return O.default.warning("[".concat(j.clientId,"] optionalInfo should be string")),Q(W.default.INVALID_PARAMETER);if(se&&!Object(J.is32Uint)(se)&&!Object(s.isValidString)(se,1,255))return O.default.error("Invalid UID ".concat(se," ").concat(k()(se))),O.default.warning("[".concat(j.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),Q(W.default.INVALID_PARAMETER);if("string"==typeof se&&0==se.length)return O.default.warning("[".concat(j.clientId,"] String uid should not be empty")),Q(W.default.INVALID_PARAMETER);if("string"==typeof se&&se.length>256)return O.default.warning("[".concat(j.clientId,"] Length of string uid should be less than 255")),Q(W.default.INVALID_PARAMETER);O.default.stopWaitJoin(),j.highStream=null,j.lowStream=null,j.lowStreamParameter=null,j.isDualStream=!1,j.highStreamState=2,j.lowStreamState=2;var ve=Date.now(),ce=setTimeout(function(){if(1!=j.gatewayClient.hasJoined){O.default.debug("[".concat(j.clientId,"] The time to join the channel is greater than 5 seconds "));var ye=Date.now();_.report.joinChannelTimeOut({lts:ye,sid:$.sessionId,cname:D,cid:ge&&ge.cid,uid:ge.uid||("string"==typeof se?void 0:se),elapse:ye-ve,timeout:5})}},5e3),ge={clientId:j.clientId,appId:$.appId,sid:$.sessionId,cname:D,uid:se,turnServers:j.turnServers.concat(),proxyServer:j.proxyServer,token:re||$.appId,useProxyServer:j.useProxyServer,useLocalAccessPoint:j.useLocalAccessPoint,proxyServerType:j.proxyServerType,optionalInfo:ie};if("string"==typeof se&&(ge.stringUid=se,j.uintUid?(ge.uid=j.uintUid,delete j.uintUid):ge.uid=0),j.aespassword&&"none"!==j.aesmode&&U()(ge,{aespassword:j.aespassword,aesmode:j.aesmode}),j.aesSalt&&(ge.aes_salt=j.aesSalt),_.report.sessionInit($.sessionId,{lts:(new Date).getTime(),cname:D,appid:$.appId,mode:$.mode,succ:!0}),j.onSuccess=function(ye){clearTimeout(ce),j.rtcStatsCollector.startNetworkQualityTimer(),j.onSuccess=null,Q(null,ye)},j.onFailure=function(ye){return Q(ye)},j.channel=D,j.gatewayClient.state!==V.a.DISCONNECTED)return O.default.error("[".concat(j.clientId,"] Client already in connecting/connected state")),Q(W.default.INVALID_OPERATION),void _.report.joinGateway($.sessionId,{lts:Date.now(),succ:!1,ec:W.default.INVALID_OPERATION,addr:null});j.gatewayClient.state=V.a.CONNECTING;var Fe=function(ye,be){O.default.info("[".concat(j.clientId,"] Joining channel: ").concat(D)),j.gatewayClient.dispatchEvent({type:"config-distribute",config:be,joinInfo:ge}),j.key=re||$.appId,ge.cid=ye.cid,ge.uid||(ge.uid=ye.uid),ge.vid=ye.vid,ge.clientId=j.clientId,ge.apResponse=ye.res,ye.uni_lbs_ip&&ye.uni_lbs_ip[1]&&(ge.uni_lbs_ip=ye.uni_lbs_ip[1]),ge.gatewayAddr=ye.gateway_addr,j.joinInfo=ge,j.gatewayClient.join(ge,j.key,function(Ue){O.default.info("[".concat(j.clientId,"] Join channel ").concat(D," success, join with uid: ").concat(Ue,".")),j.onSuccess=null,j.rtcStatsCollector.startNetworkQualityTimer(),Q(null,Ue)},function(Ue){return Q(Ue)})};ge.stringUid&&!ge.uid?(j.userAccountReq&&!j.userAccountReq.isFinished()&&j.userAccountReq.cancel(),j.userAccountReq=Object(K.getUserAccount)(ge,j.gatewayClient),j.userAccountReq.then(function(ye){O.default.debug("getUserAccount Success ".concat(ye.url," ").concat(ge.stringUid," => ").concat(ye.uid)),ge.uid=ye.uid,Object(K.getGatewayList)(ge,Fe,function(be){return Q(be)})}).catch(function(ye){O.default.error("getUserAccount rejected",ye),Q(ye)})):Object(K.getGatewayList)(ge,Fe,function(ye){return Q(ye)})},j.renewChannelKey=function(re,D,se){var ie=_.report.reportApiInvoke($.sessionId,{callback:function(ae,he){if(ae)return se&&se(ae);D&&D(he)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(s.checkValidString)(re,"key",1,2047),void 0===j.key?(O.default.error("[".concat(j.clientId,"] renewChannelKey should not be called before user join")),ie(W.default.INVALID_OPERATION)):(j.key=re,j.gatewayClient.joinInfo.token=re,j.gatewayClient.key=re,j.gatewayClient.recover(),ie())},j.leave=function(re,D){j.gatewayClient.isFirstSuccess=!0,j.gatewayClient.hasInvokeLeave=!0;var se=!1,ie=_.report.reportApiInvoke($.sessionId,{callback:function(ae,he){if(ae)return D&&D(ae);j.gatewayClient.reconnectingCS=!1,j.gatewayClient.state=V.a.DISCONNECTED,clearTimeout(Object(K._getReconnectCSTimer)(j.clientId)),j._renewSession(),j.rtcStatsCollector.clearNetworkQualityTimer(),re&&re(he)},name:"Client.leave",options:arguments,tag:"tracer"});O.default.info("[".concat(j.clientId,"] Leaving channel")),j.userAccountReq&&!j.userAccountReq.isFinished()&&(j.userAccountReq.cancel(),j.gatewayClient.state===V.a.CONNECTING&&(j.gatewayClient.state=V.a.DISCONNECTED)),j._terminateLiveStreaming(),j.gatewayClient.leave(function(ae){se=!0,ie(null,ae)},ie),setTimeout(function(){se||(j.gatewayClient.socket&&(j.gatewayClient.socket.close(),j.gatewayClient.socket=null),j.gatewayClient.state=V.a.DISCONNECTED,ie(null,"LEAVE_MSG_TIMEOUT"))},Object(x.getParameter)("LEAVE_MSG_TIMEOUT"))},j._renewSession=function(){var re=Object(J.generateSessionId)();if(O.default.debug("renewSession ".concat($.sessionId," => ").concat(re)),$.sessionId=re,j.gatewayClient.peerPublishDurationMap.clear(),j.joinInfo&&(j.joinInfo.sid=re),j.gatewayClient&&(j.gatewayClient.joinInfo&&(j.gatewayClient.joinInfo.sid=re),j.gatewayClient.localStreams))for(var D in j.gatewayClient.localStreams){var se=j.gatewayClient.localStreams[D];se&&(se.sid=re)}},j._publish=function(re,D,se,ie){if(2!==j.highStreamState)return O.default.warning("[".concat(j.clientId,"] Can't publish stream when stream already publish ").concat(re.getId())),se&&se(W.default.STREAM_ALREADY_PUBLISHED);if(0===j.turnServers.length&&Object(x.getParameter)("FORCE_TURN")&&!Object(x.getParameter)("TURN_ENABLE_TCP")&&!Object(x.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");O.default.info("[".concat(j.clientId,"] Publishing stream, uid ").concat(re.getId())),j.highStream=re,j.highStreamState=1,j.highStream.streamId=j.joinInfo.stringUid||j.joinInfo.uid,j.hasPublished=!1;var ae=function(he,F,B){j.gatewayClient.publish(he,{streamType:0},function(){he.sid=$.sessionId,j.highStreamState=0,O.default.info("[".concat(j.clientId,"] Publish success, uid: ").concat(he.getId())),j.highStream&&(j.highStream.isDualStream=j.isDualStream),j.isDualStream?j._publishLowStream(function(){F&&F()},function(G){O.default.warning("[".concat(j.clientId,"] "),G),c.a.replaceWithCanvasTrack(he).then(function(){F&&F()})}):c.a.replaceWithCanvasTrack(he).then(function(){F&&F()})},B)};"audience"!==j.gatewayClient.role||"live"!==j.mode||ie?ae(re,D,se):j.gatewayClient.setClientRole(Y,function(he){if(he)return se&&se(he);ae(re,D,se)})},j._unpublish=function(re,D,se,ie){if(0!==j.highStreamState)return O.default.warning("[".concat(j.clientId,"] Can't unpublish stream when stream not publish")),se&&se(W.default.STREAM_NOT_YET_PUBLISHED);O.default.info("[".concat(j.clientId,"] Unpublish stream, uid ").concat(re.getId()));var ae=function(he,F,B){j.isDualStream&&j.lowStream&&j._unpublishLowStream(null,B),j.gatewayClient.unpublish(he,{streamType:0},function(){j.highStreamState=2,O.default.info("[".concat(j.clientId,"] Unpublish stream success, uid: ").concat(he.getId())),j.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:he}),F&&F()},function(G){O.default.info("[".concat(j.clientId,"] Unpublish stream fail, uid: ").concat(he.getId())),B&&B(G)})};j.gatewayClient.role!==Y||"live"!==j.mode||ie?ae(re,D,se):j.gatewayClient.setClientRole("audience",function(he){if(he)return se&&se(he);ae(re,D,se)})},j.publish=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(ie,ae){if(ie)return 1===j.highStreamState&&"REQUEST_ABORT"!==ie&&(j.highStreamState=2),D&&D(ie)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!D}});2===j.highStreamState?re._hasVideoTracks()||re._hasAudioTracks()?(j.gatewayClient.publishRequestId=Object(J.generateId)(),j._publish(re,function(ie){return se(null,ie)},function(ie){return se(ie)})):se(W.default.NO_TRACK_IN_STREAM):se(W.default.STREAM_ALREADY_PUBLISHED)},j.unpublish=function(re,D,se){var ie=_.report.reportApiInvoke($.sessionId,{callback:function(ae,he){if(ae)return D&&D(ae);se&&se(he)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!D}});0===j.highStreamState?(j.gatewayClient.publishRequestId=null,j._unpublish(re,function(ae){return ie(null,ae)},function(ae){return ie(ae)})):ie(W.default.STREAM_NOT_YET_PUBLISHED)},j.subscribe=function(re,D,se){var ie=_.report.reportApiInvoke($.sessionId,{callback:function(F,B){if(F)return se&&se(F)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:D,onFailure:!!se}});"function"==typeof D&&(se=D,D=null),Object(s.checkValidObject)(re,"stream"),Object(s.isEmpty)(D)||(Object(s.checkValidObject)(D,"options"),Object(s.isEmpty)(D.video)||Object(s.checkValidBoolean)(D.video,"options.video"),Object(s.isEmpty)(D.audio)||Object(s.checkValidBoolean)(D.audio,"options.audio"));var ae={video:!0,audio:!0};if(!Object(s.isEmpty)(D)){if(Object(o.isSafari)()&&(!D.video||!D.audio)){var he="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return O.default.error("[".concat(j.clientId,"] "),he),void ie(he)}if(!Object(s.isEmpty)(D.video)&&!Object(s.isValidBoolean)(D.video)||!Object(s.isEmpty)(D.audio)&&!Object(s.isValidBoolean)(D.audio)||!1===D.audio&&!1===D.video)return he="INVALID_PARAMETER ".concat(JSON.stringify(D)),O.default.error("[".concat(j.clientId,"] "),he),void ie(he)}re.subscribeOptions?(U()(re.subscribeOptions,ae,D),j.gatewayClient.subscribeChange(re,function(F){return ie(null,F)},ie)):(j.gatewayClient.subscribeRequestId.set(re.getId(),Object(J.generateId)()),re.subscribeOptions=U()({},ae,D),j.gatewayClient.subscribe(re,function(F){return ie(null,F)},ie))},j.unsubscribe=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{callback:function(ie,ae){if(ie)return D&&D(ie)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!D}});O.default.info("[".concat(j.clientId,"] Unsubscribe stream, uid: ").concat(re.getId())),j.gatewayClient.subscribeRequestId.delete(re.getId()),j.gatewayClient.unsubscribe(re,function(ie){return se(null,ie)},se)},j.setRemoteVideoStreamType=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:D}});Object(s.checkValidEnum)(D,"streamType",[0,1]),j.gatewayClient.setRemoteVideoStreamType(re,D),se()},j.setStreamFallbackOption=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:D}});Object(s.checkValidEnum)(D,"fallbackType",[0,1,2]),j.gatewayClient.setStreamFallbackOption(re,D),se()},j.enableAudioVolumeIndicator=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});re=re||2e3,D=D||3,Object(s.checkValidNumber)(D,"smooth",1,100),Object(s.checkValidNumber)(re,"interval",50,1e5),j.audioVolumeIndication=j.audioVolumeIndication||{enabled:!0},j.audioVolumeIndication.interval=re,j.audioVolumeIndication.smooth=D,j.audioVolumeIndication={interval:re,smooth:D},O.default.info("[".concat(j.clientId,"] enableAudioVolumeIndicator interval ").concat(re," smooth ").concat(D)),j.gatewayClient.enableAudioVolumeIndicator(re,D),se()},j.getNetworkStats=function(re,D){return O.default.deprecate("[".concat(j.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),l.getStats(re,D)},j.getSystemStats=function(re,D){return y.getStats(re,D)},j.getRecordingDevices=function(re,D){return h.a.getRecordingDevices(re,D)},j.getPlayoutDevices=function(re,D){return h.a.getPlayoutDevices(re,D)},j.getCameras=function(re,D){return h.a.getCameras(re,D)},j.getRemoteAudioStats=function(re,D){return j.rtcStatsCollector.getRemoteAudioStats(re,D)},j.getLocalAudioStats=function(re,D){return j.rtcStatsCollector.getLocalAudioStats(re,D)},j.getRemoteVideoStats=function(re,D){return j.rtcStatsCollector.getRemoteVideoStats(re,D)},j.getLocalVideoStats=function(re,D){return j.rtcStatsCollector.getLocalVideoStats(re,D)},j._getRemoteVideoQualityStats=function(re,D){return j.rtcStatsCollector.getRemoteVideoQualityStats(re,D)},j._getRemoteAudioQualityStats=function(re,D){return j.rtcStatsCollector.getRemoteAudioQualityStats(re,D)},j.getTransportStats=function(re,D){return j.rtcStatsCollector.getTransportStats(function(se){return l.getStats(function(ie){var ae=U()({},se,ie);re&&re(ae)},D)},D)},j.getSessionStats=function(re,D){return j.rtcStatsCollector.getSessionStats(re,D)},j.onNetworkQuality=function(){return j.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},j.sendMetadata=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(ie){if(ie)return D&&D(ie);D&&D()}});j.gatewayClient.sendMetadata(re,se)},j.sendCustomReportMessage=function(re,D,se,ie,ae,he){Object(x.getParameter)("CR")?j.customReportCount>Object(x.getParameter)("CRL")?he&&he("REPORT_LIMITED"):(j.gatewayClient.hasJoined||(O.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),he&&he("REPORT_BEFORE_JOINED")),j.customReportTimer||(j.customReportTimer=setInterval(function(){j.customReportCount=0},Object(x.getParameter)("CRI"))),Object(s.checkValidString)(re,"reportId",0,100,!1),Object(s.checkValidString)(D,"category",0,100,!1),Object(s.checkValidString)(se,"event",0,100,!1),Object(s.checkValidString)(ie,"label",0,100,!1),Object(s.checkValidNumber)(ae,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),j.customReportCount++,_.report.sendCustomReportMessage($.sessionId,{reportId:re,category:D,event:se,label:ie,value:ae,lts:Date.now()},function(F){F?he&&he("REPORT_FAILED"):he&&he()})):he&&he("REPORT_FORBIDDEN")},j.setLocalAccessPoints=function(re,D){var se=_.report.reportApiInvoke($.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(s.checkValidArray)(re,"serverList"),Object(s.checkValidString)(D,"domain"),j.useProxyServer)throw new Error("You have already set the proxy");var ie=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;re=re.map(function(ae){return ie.test(ae)?"".concat(ae.replace(/\./g,"-"),".").concat(D):ae}),j.useLocalAccessPoint=!0,Object(x.setParameter)("WEBCS_DOMAIN",re),Object(x.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",re),Object(x.setParameter)("GATEWAY_DOMAINS",[D]),Object(x.setParameter)("EVENT_REPORT_DOMAIN",re[Math.floor(Math.random()*re.length)]),Object(x.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",re[Math.floor(Math.random()*re.length)]),Object(x.setParameter)("LOG_UPLOAD_SERVER","".concat(re[Math.floor(Math.random()*re.length)],":6444")),se()},$.clientId=j.clientId,j.gatewayClient=Object(V.a)($),j.listenerLoggerTimer=null,j.listenerLoggerCache=[],j.on=function(re,D){j.gatewayClient.on(re,D),j.listenerLoggerCache.push("".concat(re).concat(D.name?":"+D.name:"")),j.listenerLoggerTimer?clearTimeout(j.listenerLoggerTimer):O.default.info("[".concat(j.clientId,"] Adding event handler on ").concat(re)),j.listenerLoggerTimer=setTimeout(function(){j.listenerLoggerCache.length&&(j.listenerLoggerTimer=null,O.default.info("[".concat(j.clientId,"] Added event handler on ").concat(j.listenerLoggerCache.join(", "))),j.listenerLoggerCache=[])},0)},j.off=function(re,D){O.default.info("remove event handler from [".concat(re,"]")),j.gatewayClient.removeEventListener(re,D)},j.rtcStatsCollector=(re=j.gatewayClient,(D=Object(w.b)()).gatewayClient=re,D.exceptionMonitor=new t(re),D.localStats={},D.remoteStats={},D.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},D.getRemoteAudioStats=function(se){var ie=D.gatewayClient.traffic_stats,ae={};for(var he in D.remoteStats){var F={},B=D.remoteStats[he];if(Object(P.b)(F,"End2EndDelay",B.peer_delay&&B.peer_delay.audio_delay),Object(P.b)(F,"TransportDelay",B.peer_delay&&B.peer_delay.e2e_delay),Object(P.b)(F,"PacketLossRate",B.peer_delay&&B.peer_delay.e2e_audio_lost_ratio_400ms),Object(P.b)(F,"RecvLevel",B.audioStats&&B.audioStats.audioOutputLevel),Object(P.b)(F,"RecvBitrate",B.audioRecvBitrate),Object(P.b)(F,"CodecType",B.audioStats&&B.audioStats.googCodecName),Object(P.b)(F,"MuteState",B.audioDisabled),Object(P.b)(F,"TotalFreezeTime",B.audioStats&&B.audioStats.audioTotalFreezeTime),Object(P.b)(F,"TotalPlayDuration",B.audioStats&&B.audioStats.audioTotalPlayDuration),ie&&ie.peer_delay){var G=ie.peer_delay.find(function(Q){return Q.peer_uid==he});if(G){var X=G.peer_publish_audio_duration+(Date.now()-ie.timestamp);Object(P.b)(F,"AudioPublishDuration",X)}else Object(P.b)(F,"AudioPublishDuration",-1)}ae[he]=F}se&&se(ae)},D.getLocalAudioStats=function(se){var ie={};for(var ae in D.localStats){var he={},F=D.localStats[ae];Object(P.b)(he,"RecordingLevel",F.audioStats&&F.audioStats.audioInputLevel),Object(P.b)(he,"SendLevel",F.audioStats&&F.audioStats.totalAudioEnergy),Object(P.b)(he,"SamplingRate",F.audioStats&&F.audioStats.totalSamplesDuration),Object(P.b)(he,"SendBitrate",F.audioSendBitrate),Object(P.b)(he,"CodecType",F.audioStats&&F.audioStats.googCodecName),Object(P.b)(he,"MuteState",F.audioDisabled),Object(P.b)(he,"audioSendPacketsLost",F.audioStats&&F.audioStats.packetsLost);var B=D.gatewayClient.localStreams[ae];B&&B.isPlaying()&&Object(P.b)(he,"MuteState",B.userMuteAudio?"1":"0"),ie[ae]=he}se&&se(ie)},D.getRemoteVideoStats=function(se){var ie=D.gatewayClient.traffic_stats,ae={};for(var he in D.remoteStats){var F={},B=D.remoteStats[he];if(Object(P.b)(F,"End2EndDelay",B.peer_delay&&B.peer_delay.video_delay),Object(P.b)(F,"TransportDelay",B.peer_delay&&B.peer_delay.e2e_delay),Object(P.b)(F,"PacketLossRate",B.peer_delay&&B.peer_delay.e2e_video_lost_ratio_400ms),Object(P.b)(F,"RecvBitrate",B.videoRecvBitrate),Object(P.b)(F,"RecvResolutionWidth",B.videoStats&&B.videoStats.googFrameWidthReceived),Object(P.b)(F,"RecvResolutionHeight",B.videoStats&&B.videoStats.googFrameHeightReceived),Object(P.b)(F,"RenderResolutionWidth",B.videoStats&&B.videoStats.renderRemoteWidth),Object(P.b)(F,"RenderResolutionHeight",B.videoStats&&B.videoStats.renderRemoteHeight),Object(P.b)(F,"RenderFrameRate",B.videoStats&&B.videoStats.googFrameRateOutput),Object(P.b)(F,"MuteState",B.videoDisabled),Object(P.b)(F,"TotalFreezeTime",B.videoStats&&B.videoStats.videoTotalFreezeTime),Object(P.b)(F,"TotalPlayDuration",B.videoStats&&B.videoStats.videoTotalPlayDuration),ie&&ie.peer_delay){var G=ie.peer_delay.find(function(Q){return Q.peer_uid==he});if(G){var X=G.peer_publish_video_duration+(Date.now()-ie.timestamp);Object(P.b)(F,"VideoPublishDuration",X)}else Object(P.b)(F,"VideoPublishDuration",-1)}ae[he]=F}se&&se(ae)},D.getLocalVideoStats=function(se){var ie={};for(var ae in D.localStats){var he={},F=D.localStats[ae];Object(P.b)(he,"TargetSendBitrate",F.videoTargetSendBitrate),Object(P.b)(he,"SendFrameRate",F.videoStats&&F.videoStats.googFrameRateSent),Object(P.b)(he,"SendBitrate",F.videoSendBitrate),Object(P.b)(he,"SendResolutionWidth",F.videoStats&&F.videoStats.googFrameWidthSent),Object(P.b)(he,"SendResolutionHeight",F.videoStats&&F.videoStats.googFrameHeightSent),Object(P.b)(he,"CaptureResolutionWidth",F.videoStats&&F.videoStats.googFrameWidthInput),Object(P.b)(he,"CaptureResolutionHeight",F.videoStats&&F.videoStats.googFrameHeightInput),Object(P.b)(he,"EncodeDelay",F.videoStats&&F.videoStats.googAvgEncodeMs),Object(P.b)(he,"MuteState",F.videoDisabled),Object(P.b)(he,"TotalFreezeTime",F.videoStats&&F.videoStats.videoTotalFreezeTime),Object(P.b)(he,"TotalDuration",F.videoStats&&F.videoStats.videoTotalPlayDuration),Object(P.b)(he,"CaptureFrameRate",F.videoStats&&F.videoStats.googFrameRateSent),Object(P.b)(he,"videoSendPacketsLost",F.videoStats&&F.videoStats.packetsLost),F.videoStats&&!F.videoStats.googFrameWidthInput&&Object(P.b)(he,"CaptureResolutionWidth",F.videoStats&&F.videoStats.renderLocalWidth),F.videoStats&&!F.videoStats.googFrameHeightInput&&Object(P.b)(he,"CaptureResolutionHeight",F.videoStats&&F.videoStats.renderLocalHeight),ie[ae]=he}se&&se(ie)},D.getRemoteVideoQualityStats=function(se){var ie={};for(var ae in D.remoteStats){var he={},F=D.remoteStats[ae];Object(P.b)(he,"videoReceiveDelay",F.videoStats&&F.videoStats.googCurrentDelayMs),Object(P.b)(he,"VideoFreezeRate",F.videoStats&&F.videoStats.videoFreezeRate),Object(P.b)(he,"FirstFrameTime",F.firstFrameTime),ie[ae]=he}se&&se(ie)},D.getRemoteAudioQualityStats=function(se){var ie={};for(var ae in D.remoteStats){var he={},F=D.remoteStats[ae];Object(P.b)(he,"audioReceiveDelay",F.audioStats&&F.audioStats.googCurrentDelayMs),Object(P.b)(he,"AudioFreezeRate",F.videoStats&&F.videoStats.videoFreezeRate),ie[ae]=he}se&&se(ie)},D.getTransportStats=function(se){var ie={},ae={},he=D.gatewayClient.traffic_stats,F=he.peer_delay;if(Object(P.b)(ie,"OutgoingAvailableBandwidth",D.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(P.b)(ie,"RTT",he&&2*he.access_delay),F){var B,G=function n($){if("undefined"==typeof Symbol||null==$[Symbol.iterator]){if(Array.isArray($)||($=function(re,D){if(re){if("string"==typeof re)return a(re,D);var se=Object.prototype.toString.call(re).slice(8,-1);if("Object"===se&&re.constructor&&(se=re.constructor.name),"Map"===se||"Set"===se)return Array.from(se);if("Arguments"===se||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return a(re,D)}}($))){var j=0,ue=function(){};return{s:ue,n:function(){return j>=$.length?{done:!0}:{done:!1,value:$[j++]}},e:function(re){throw re},f:ue}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Pe,pe,me=!0,Be=!1;return{s:function(){Pe=$[Symbol.iterator]()},n:function(){var re=Pe.next();return me=re.done,re},e:function(re){Be=!0,pe=re},f:function(){try{me||null==Pe.return||Pe.return()}finally{if(Be)throw pe}}}}(F);try{for(G.s();!(B=G.n()).done;){var X=B.value;X.downlink_estimate_bandwidth&&(ae[X.peer_uid]=X.downlink_estimate_bandwidth/1e3+"")}}catch(Q){G.e(Q)}finally{G.f()}}ie.IncomingAvailableBandwidth=ae,se&&se(ie)},D.getSessionStats=function(se){var ie={},ae=D.gatewayClient.traffic_stats,he=D.gatewayClient.socket,F=0,B=0;for(var G in D.remoteStats)(X=D.remoteStats[G])&&X.videoStats&&X.videoStats.videoRecvBytesDelta&&(B+=parseInt(X.videoStats.videoRecvBytesDelta)),X&&X.audioStats&&X.audioStats.audioRecvBytesDelta&&(B+=parseInt(X.audioStats.audioRecvBytesDelta));for(var G in D.localStats){var X;(X=D.localStats[G])&&X.videoStats&&X.videoStats.videoSendBytesDelta&&(F+=parseInt(X.videoStats.videoSendBytesDelta)),X&&X.audioStats&&X.audioStats.audioSendBytesDelta&&(F+=parseInt(X.audioStats.audioSendBytesDelta))}var Q=F+D.session.WSSendBytesDelta+D.session.HTTPSendBytesDelta,ve=B+D.session.WSRecvBytesDelta+D.session.HTTPRecvBytesDelta,ce=D.session.sendBytes+Object(S.getHTTPSendBytes)(),ge=D.session.recvBytes+Object(S.getHTTPRecvBytes)();D.gatewayClient.socket&&D.gatewayClient.socket.state===D.gatewayClient.CONNECTED&&(ce+=he.getSendBytes(),ge+=he.getRecvBytes());var Fe=1;ae.peer_delay&&(Fe=ae.peer_delay.length,Fe+=1),he?Object(P.b)(ie,"Duration",he.getDuration()):Object(P.b)(ie,"Duration",0),Object(P.b)(ie,"UserCount",Fe),Object(P.b)(ie,"SendBytes",ce),Object(P.b)(ie,"RecvBytes",ge),Object(P.b)(ie,"SendBitrate",8*Q/1e3),Object(P.b)(ie,"RecvBitrate",8*ve/1e3),se&&se(ie)},D.isLocalVideoFreeze=function(se,ie){var ae=0,he=0;if(!se||!ie)return!1;if(Object(o.isChrome)()||Object(o.isOpera)())ae=se.googFrameRateInput,he=se.googFrameRateSent;else if(Object(o.isSafari)())ae=parseInt(se.framerateMean),he=parseInt(se.framesEncoded)-parseInt(ie.framesEncoded);else{if(!Object(o.isFireFox)())return!1;ae=parseInt(se.framerateMean),he=parseInt(se.framesEncoded)-parseInt(ie.framesEncoded)}return ae>5&&he<3},D.isRemoteVideoFreeze=function(se,ie){var ae=0,he=0;if(!se||!ie)return!1;if(Object(o.isChrome)()||Object(o.isOpera)())ae=se.googFrameRateReceived,he=se.googFrameRateDecoded;else if(Object(o.isSafari)())ae=se.framerateMean,he=parseInt(se.framesDecoded)-parseInt(ie.framesDecoded);else{if(!Object(o.isFireFox)())return!1;ae=parseInt(se.framesReceived)-parseInt(ie.framesReceived),he=parseInt(se.framesDecoded)-parseInt(ie.framesDecoded)}return ae>5&&ae<10&&he<3||ae>10&&ae<20&&he<4||ae>20&&he<5},D.isAudioFreeze=function(se){if(Object(o.isChrome)()&&se){if(se.googDecodingPLC&&se.googDecodingPLCCNG&&se.googDecodingCTN)return(parseInt(se.googDecodingPLC)+parseInt(se.googDecodingPLCCNG))/parseInt(se.googDecodingCTN)>.2}else if((Object(o.isSafari)()||Object(o.isFireFox)())&&se.packetsLost&&se.packetsReceived)return parseInt(se.packetsLost)/(parseInt(se.packetsLost)+parseInt(se.packetsReceived))>.2;return!1},D.isAudioDecodeFailed=function(se){return!!((Object(o.isChrome)()||Object(o.isOpera)())&&se&&parseInt(se.bytesReceived)>0&&0===parseInt(se.googDecodingNormal))},D.startNetworkQualityTimer=function(){D.clearNetworkQualityTimer(),D.networkQualityTimer=setInterval(function(){if(D.gatewayClient.state===V.a.CONNECTED&&navigator.onLine){var se=D.gatewayClient.traffic_stats;D.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:D.networkQualityTrans(se.uplink_network_quality),downlinkNetworkQuality:D.networkQualityTrans(se.downlink_network_quality)})}else D.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3)},D.clearNetworkQualityTimer=function(){D.networkQualityTimer&&clearInterval(D.networkQualityTimer)},D.networkQualityTrans=function(se){return se>=0&&se<.17?1:se>=.17&&se<.36?2:se>=.36&&se<.59?3:se>=.59&&se<=1?4:se>1?5:0},D.getStatsTimer=setInterval(function(){var se=D.gatewayClient.traffic_stats,ie=Date.now();D.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(D.localStats).length&&D.exceptionMonitor.setLocalStats(D.localStats),Object.keys(D.remoteStats).length&&D.exceptionMonitor.setRemoteStats(D.remoteStats);var ae={};Object.keys(D.gatewayClient.remoteStreams).forEach(function(B){var G=D.gatewayClient.remoteStreams[B],X=D.remoteStats[B],Q={id:B,updatedAt:ie};ae[B]=Q,Q.firstFrameTime=G.firstFrameTime,X?(Q.audioTotalPlayDuration=X.audioTotalPlayDuration+1,Q.audioTotalFreezeTime=X.audioTotalFreezeTime,Q.isAudioFreeze=!1,Q.isAudioDecodeFailed=!1,Q.videoTotalPlayDuration=X.videoTotalPlayDuration+1,Q.videoTotalFreezeTime=X.videoTotalFreezeTime,Q.isVideoFreeze=!1):(Q.audioTotalPlayDuration=1,Q.audioTotalFreezeTime=0,Q.videoTotalPlayDuration=1,Q.videoTotalFreezeTime=0);var ve=se&&se.peer_delay&&se.peer_delay.find(function(ce){return ce.peer_uid==B});ve&&(Q.peer_delay=ve),G&&(G.isPlaying()&&(Q.audioDisabled=G.userMuteAudio||G.peerMuteAudio?"1":"0",Q.videoDisabled=G.userMuteVideo||G.peerMuteVideo?"1":"0"),X&&X.peer_delay&&ve&&X.peer_delay.stream_type!==ve.stream_type&&D.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:B,streamType:ve.stream_type}),G.pc&&"established"==G.pc.state&&G.pc.getStats(function(ce){if(Q.pcStats=ce,Q.audioStats=ce.find(function(Ue){return"audio"==Ue.mediaType&&(Ue.id.indexOf("_recv")>-1||Ue.id.toLowerCase().indexOf("inbound")>-1)}),Q.videoStats=ce.find(function(Ue){return"video"==Ue.mediaType&&(Ue.id.indexOf("_recv")>-1||Ue.id.toLowerCase().indexOf("inbound")>-1)}),X&&X.audioStats&&Q.audioStats){var ge=parseInt(Q.audioStats.bytesReceived)-parseInt(X.audioStats.bytesReceived),Fe=parseInt(Q.audioStats.googDecodingNormal)-parseInt(X.audioStats.googDecodingNormal);if(Q.audioStats.audioRecvBytesDelta=ge,Q.audioStats.audioDecodingNormalDelta=Fe,D.session.recvBytes+=ge,isFinite(ge)&&Q.audioStats.timestamp){var ye=Q.audioStats.timestamp.getTime()-X.audioStats.timestamp.getTime();Q.audioRecvBitrate=Math.floor(8*ge/ye)}D.isAudioFreeze(Q.audioStats)&&Q.audioTotalPlayDuration>10&&(Q.audioTotalFreezeTime++,Q.isAudioFreeze=!0),D.isAudioDecodeFailed(Q.audioStats)&&Q.audioTotalPlayDuration>10&&(Q.isAudioDecodeFailed=!0),Q.audioStats.audioTotalFreezeTime=Q.audioTotalFreezeTime,Q.audioStats.audioTotalPlayDuration=Q.audioTotalPlayDuration,Q.audioStats.audioFreezeRate=Math.ceil(100*Q.audioTotalFreezeTime/Q.audioTotalPlayDuration)}if(X&&X.videoStats&&Q.videoStats){var be=parseInt(Q.videoStats.bytesReceived)-parseInt(X.videoStats.bytesReceived);Q.videoStats.videoRecvBytesDelta=be,D.session.recvBytes+=be,isFinite(be)&&Q.videoStats.timestamp&&(ye=Q.videoStats.timestamp.getTime()-X.videoStats.timestamp.getTime(),Q.videoRecvBitrate=Math.floor(8*be/ye)),D.isRemoteVideoFreeze(Q.videoStats,X.videoStats)&&(Q.videoTotalFreezeTime++,Q.isVideoFreeze=!0),Q.videoStats.videoTotalFreezeTime=Q.videoTotalFreezeTime,Q.videoStats.videoTotalPlayDuration=Q.videoTotalPlayDuration,Q.videoStats.videoFreezeRate=Math.ceil(100*Q.videoTotalFreezeTime/Q.videoTotalPlayDuration),G.player&&G.player.video&&G.player.video.videoWidth&&G.player.video.videoHeight?(Q.videoStats.renderRemoteWidth=G.player.video.videoWidth,Q.videoStats.renderRemoteHeight=G.player.video.videoHeight):(Q.videoStats.renderRemoteWidth=G.videoWidth||Q.videoStats.googFrameWidthReceived,Q.videoStats.renderRemoteHeight=G.videoHeight||Q.videoStats.googFrameHeightReceived)}}))}),D.remoteStats=ae;var he={};if(Object.keys(D.gatewayClient.localStreams).forEach(function(B){var G=D.gatewayClient.localStreams[B],X=D.localStats[B],Q={id:B,updatedAt:ie};he[B]=Q,X?(Q.videoTotalPlayDuration=X.videoTotalPlayDuration+1,Q.videoTotalFreezeTime=X.videoTotalFreezeTime,Q.isVideoFreeze=!1):(Q.videoTotalPlayDuration=1,Q.videoTotalFreezeTime=0),G&&(G.isPlaying()&&(Q.audioDisabled=G.userMuteAudio?"1":"0",Q.videoDisabled=G.userMuteVideo?"1":"0"),G.video&&G.attributes.maxVideoBW?Q.videoTargetSendBitrate=G.attributes.maxVideoBW:G.video&&G.screenAttributes&&(Q.videoTargetSendBitrate=G.screenAttributes.maxVideoBW),G.pc&&"established"==G.pc.state&&G.pc.getStats(function(ve){if(Q.pcStats=ve.reverse(),Q.audioStats=ve.find(function(ye){return"audio"==ye.mediaType&&(ye.id.indexOf("_send")>-1||ye.id.toLowerCase().indexOf("outbound")>-1)}),Q.videoStats=ve.find(function(ye){return"video"==ye.mediaType&&(ye.id.indexOf("_send")>-1||ye.id.toLowerCase().indexOf("outbound")>-1)}),Q.audioStats&&X&&X.audioStats){var ce=parseInt(Q.audioStats.bytesSent)-parseInt(X.audioStats.bytesSent);if(Q.audioStats.audioSendBytesDelta=ce,D.session.sendBytes+=ce,isFinite(ce)&&Q.audioStats.timestamp){var ge=Q.audioStats.timestamp.getTime()-X.audioStats.timestamp.getTime();Q.audioSendBitrate=Math.floor(8*ce/ge)}}if(Q.videoStats&&X&&X.videoStats){var Fe=parseInt(Q.videoStats.bytesSent)-parseInt(X.videoStats.bytesSent);Q.videoStats.videoSendBytesDelta=Fe,D.session.sendBytes+=Fe,isFinite(Fe)&&Q.videoStats.timestamp&&(ge=Q.videoStats.timestamp.getTime()-X.videoStats.timestamp.getTime(),Q.videoSendBitrate=Math.floor(8*Fe/ge)),D.isLocalVideoFreeze(Q.videoStats,X.videoStats)&&(Q.videoTotalFreezeTime++,Q.isVideoFreeze=!0),Q.videoStats.videoTotalFreezeTime=Q.videoTotalFreezeTime,Q.videoStats.videoTotalPlayDuration=Q.videoTotalPlayDuration,Q.videoStats.videoFreezeRate=Math.ceil(100*Q.videoTotalFreezeTime/Q.videoTotalPlayDuration),Q.videoStats.renderLocalWidth=G.videoWidth||Q.videoStats.googFrameWidthSent,Q.videoStats.renderLocalHeight=G.videoHeight||Q.videoStats.googFrameHeightSent}}))}),D.localStats=he,D.session.HTTPSendBytesDelta=Object(S.getHTTPSendBytes)()-D.session.HTTPSendBytes,D.session.HTTPSendBytes=Object(S.getHTTPSendBytes)(),D.session.HTTPRecvBytesDelta=Object(S.getHTTPRecvBytes)()-D.session.HTTPRecvBytes,D.session.HTTPRecvBytes=Object(S.getHTTPRecvBytes)(),D.gatewayClient.socket&&D.gatewayClient.socket.state===D.gatewayClient.CONNECTED){var F=D.gatewayClient.socket;D.session.WSSendBytesDelta=F.getSendBytes()-D.session.WSSendBytes,D.session.WSSendBytes=F.getSendBytes(),D.session.WSRecvBytesDelta=F.getRecvBytes()-D.session.WSRecvBytes,D.session.WSRecvBytes=F.getRecvBytes()}},1e3),D.gatewayClient.on("join",function(){D.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),D),j.configDistributManager=function(re){var D={};return D.client=re,D.client.gatewayClient&&D.client.gatewayClient.on("config-distribute",function(se){var ie=se.joinInfo,ae=se.config;if(ae){Object(s.isEmpty)(ae.uploadLog)||(Object(x.setParameter)("UPLOAD_LOG",ae.uploadLog),_.report.reportApiInvoke(ie.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:ae.uploadLog}})()),Object(s.isEmpty)(ae.dualStream)||(re.isDualStream=ae.dualStream,_.report.reportApiInvoke(ie.sid,{name:"_configDistribute",options:{feature:"dualStream",value:ae.dualStream}})()),Object(s.isEmpty)(ae.streamFallbackOption)||D.client.gatewayClient&&D.client.gatewayClient.on("stream-subscribed",function(he){var F=he.stream;F?(D.client.gatewayClient.setStreamFallbackOption(F,ae.streamFallbackOption),_.report.reportApiInvoke(ie.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:ae.streamFallbackOption,streamId:F.getId()}})()):_.report.reportApiInvoke(ie.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:ae.streamFallbackOption,streamId:F.getId(),err:"invalid stream"}})()});try{O.default.debug("[".concat(re.clientId,"] setParameter in distribution: ").concat(JSON.stringify(ae))),Object.keys(ae).map(function(he){return Object(x.setParameter)(he,ae[he])})}catch(he){O.default.debug("[".concat(re.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(ae)))}}}),D}(j),Object(b.addLiveStreamingCapability)(j,$),$.areaCode){var Pe=$.areaCode,pe=$.excludedArea,me=Object(L.getAreaCodeByConfig)({areaCode:Pe,excludedArea:pe});Object(x.setParameter)("AREA_SETTING",me);var Be=Object(L.getAreaDomainConfig)(me);Object.keys(Be).map(function(re){var D=Be[re];"LOG_UPLOAD_SERVER"==re||"EVENT_REPORT_DOMAIN"==re||"EVENT_REPORT_BACKUP_DOMAIN"==re||"NGINX"==re?Object(x.setParameter)(re,D[0]):Object(x.setParameter)(re,D)})}return Object(s.isEmpty)($.turnServer)||j.setTurnServer($.turnServer),Object(s.isEmpty)($.proxyServer)||j.setProxyServer($.proxyServer),"live"===j.mode&&(j.gatewayClient.role="audience"),"rtc"===j.mode&&(j.gatewayClient.role=Y),j.gatewayClient.on("onMultiIP",function(re){j.gatewayClient.closeGateway(),j.gatewayClient.socket=void 0,j.gatewayClient.hasChangeBGPAddress=!0,j.joinInfo.multiIP=re.option,j.gatewayClient.state=V.a.CONNECTING;var D=function(se){O.default.info("[".concat(j.clientId,"] Joining channel: ").concat(j.channel)),j.joinInfo.cid=se.cid,j.joinInfo.uid||(j.joinInfo.uid=se.uid),j.joinInfo.uni_lbs_ip=se.uni_lbs_ip,j.joinInfo.gatewayAddr=se.gateway_addr,j.onSuccess?j.gatewayClient.join(j.joinInfo,j.key,function(ie){O.default.info("[".concat(j.clientId,"] Join channel ").concat(j.channel," success"));var ae=j.onSuccess;j.onSuccess=null,j.onFailure=null,ae(ie)},j.onFailure):(j.gatewayClient.joinInfo=U()({},j.joinInfo),j.gatewayClient.rejoin())};j.joinInfo.stringUid&&!j.joinInfo.uid?(j.userAccountReq&&!j.userAccountReq.isFinished()&&j.userAccountReq.cancel(),j.userAccountReq=Object(K.getUserAccount)(joinInfo,j.gatewayClient),j.userAccountReq.then(function(se){O.default.error("getUserAccount Success ".concat(se.url," ").concat(joinInfo.stringUid," => ").concat(se.uid)),j.joinInfo.uid=se.uid,Object(K.getGatewayList)(j.joinInfo,D,j.onFailure)}).catch(function(se){O.default.error("getUserAccount rejected",se),j.onFailure(se)})):Object(K.getGatewayList)(j.joinInfo,D,j.onFailure)}),j.gatewayClient.on("rejoin-start",function(){j._renewSession(),_.report.sessionInit($.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:j.channel,appid:$.appId,mode:$.mode,succ:!0})}),j.gatewayClient.on("recover",function(){j._renewSession(),console.log("recover",$.sessionId),_.report.sessionInit($.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:j.channel,appid:$.appId,mode:$.mode,succ:!0})}),j.gatewayClient.on("rejoin",function(){var re=j.highStreamState;if(O.default.debug("[".concat(j.clientId,"] Client local stream preState: ").concat(re)),j.onSuccess){var D=j.onSuccess;j.onSuccess=null,j.onFailure=null,D(j.joinInfo.uid)}!j.highStream||0!==re&&1!==re||(O.default.info("[".concat(j.clientId,"] publish after rejoin")),j.highStreamState=2,j.lowStreamState=2,j.publish(j.highStream,function(se){se&&O.default.info("[".concat(j.clientId,"] "),se)}))}),j.gatewayClient.on("streamPublished",function(re){j.hasPublished||(j.hasPublished=!0,j.gatewayClient.dispatchEvent({type:"stream-published",stream:re.stream,proxy:re.proxy}))}),j.gatewayClient.on("pubP2PLost",function(re){O.default.debug("[".concat(j.clientId,"] Start reconnect local peerConnection: ").concat(j.highStream.getId())),j.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:j.highStream.getId()}),1===j.highStreamState&&(j.highStreamState=0,j.lowStreamState=0),j._unpublish(j.highStream,function(){j._publish(j.highStream,function(){O.default.debug("[".concat(j.clientId,"] Reconnect local peerConnection success: ").concat(j.highStream.getId())),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:j.highStream.getId(),success:!0,reason:""})},function(D){O.default.debug("[".concat(j.clientId,"] Reconnect local peerConnection failed: ").concat(D)),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:j.highStream.getId(),success:!1,reason:D})},!0)},function(D){O.default.debug("[".concat(j.clientId,"] Reconnect local peerConnection failed: ").concat(D)),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:j.highStream.getId(),success:!1,reason:D})},!0)}),j.gatewayClient.on("subP2PLost",function(re){O.default.debug("[".concat(j.clientId,"] Start reconnect remote peerConnection: ").concat(re.stream.getId()," ").concat(re.stream.subscribeOptions)),j.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:re.stream.getId()});var D=re.stream.subscribeOptions;console.log("Re-subscribe stream",D,re.stream),j.gatewayClient.unsubscribe(re.stream,function(){re.stream.subscribeOptions=D,j.gatewayClient.subscribe(re.stream,function(){O.default.debug("[".concat(j.clientId,"] Reconnect remote peerConnection success: ").concat(re.stream.getId())),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:re.stream.getId(),success:!0,reason:""})},function(se){O.default.debug("[".concat(j.clientId,"] Reconnect remote peerConnection failed: "),se),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:re.stream.getId(),success:!1,reason:se})})},function(se){O.default.debug("[".concat(j.clientId,"] Reconnect remote peerConnection failed: "),se),j.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:re.stream.getId(),success:!1,reason:se})})}),l.on("networkTypeChanged",function(re){j.gatewayClient&&j.gatewayClient.dispatchEvent(re);var D=U()({},re,{type:"network-type-changed"});j.gatewayClient.dispatchEvent(D)}),h.a.on("recordingDeviceChanged",function(re){j.gatewayClient&&j.gatewayClient.dispatchEvent(re);var D=U()({},re,{type:"recording-device-changed"});j.gatewayClient.dispatchEvent(D)}),h.a.on("playoutDeviceChanged",function(re){j.gatewayClient&&j.gatewayClient.dispatchEvent(re);var D=U()({},re,{type:"playout-device-changed"});j.gatewayClient.dispatchEvent(D)}),h.a.on("cameraChanged",function(re){j.gatewayClient&&j.gatewayClient.dispatchEvent(re);var D=U()({},re,{type:"camera-changed"});j.gatewayClient.dispatchEvent(D)}),j.gatewayClient.on("streamTypeChange",function(re){var D=U()({},re,{type:"stream-type-changed"});j.gatewayClient.dispatchEvent(D),_.report.reportApiInvoke($.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(re))}),j},fe=function($){return"h264_interop"===$?"h264":"vp8"},te=function($){return-1===g.indexOf($.mode)?W.default.INVALID_CLIENT_MODE:-1===E.indexOf($.codec)?W.default.INVALID_CLIENT_CODEC:"h264_interop"==$.mode&&"h264"!==$.codec&&W.default.CLIENT_MODE_CODEC_MISMATCH},oe=function($){switch($.mode){case"interop":case"h264_interop":$.mode="live";break;case"web-only":$.mode="rtc"}},le=h.a.getDevices,de=d.a.getScreenSources,A=JSON.parse(JSON.stringify(x.SUPPORT_RESOLUTION_LIST));q.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function($){var j=_.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});($=U()({},$||{})).codec||($.codec=fe($.mode));var ue=te($);if(ue)throw O.default.error("Invalid parameter setting MODE: ".concat($.mode," CODEC: ").concat($.codec," ERROR ").concat(ue)),j(ue),new Error(ue);return O.default.info("Creating client, MODE: ".concat($.mode," CODEC: ").concat($.codec)),oe($),j(null,$),ee($)},createStream:v.b,Logger:O.default,report:_.report,getDevices:le,getScreenSources:de,getParameter:x.getParameter,setParameter:x.setParameter,checkSystemRequirements:function(){var $=_.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),j=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,ue=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,Pe=window.WebSocket,pe=!!j&&!!ue&&!!Pe,me=!1;o.isChrome()&&o.getBrowserVersion()>=58&&"iOS"!==o.getBrowserOS()&&(me=!0),o.isFireFox()&&o.getBrowserVersion()>=56&&(me=!0),o.isOpera()&&o.getBrowserVersion()>=45&&(me=!0),o.isSafari()&&o.getBrowserVersion()>=11&&(me=!0),o.isEdge()&&(me=!0),(o.isWeChatBrowser()||o.isQQBrowser())&&"iOS"!==o.getBrowserOS()&&(me=!0),o.isSupportedPC()||o.isSupportedMobile()||(me=!1),O.default.debug(o.getBrowserInfo(),"isAPISupport: "+pe+", isVendorAndVersionSupport: "+me);var Be=pe&&me;return $(null,Be),Be},getSupportedCodec:m.getSupportedCodec,ChannelMediaRelayConfiguration:M.ChannelMediaRelayConfiguration,VERSION:x.VERSION,BUILD:x.BUILD,PROFILE_TABLE:A,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:L.AREAS,AREA_VERSION:"global"}}]).default},module.exports=q()},7977:(Z,q,N)=>{"use strict";const x=q;x.bignum=N(3854),x.define=N(9516).define,x.base=N(7813),x.constants=N(5459),x.decoders=N(196),x.encoders=N(1131)},9516:(Z,q,N)=>{"use strict";const x=N(1131),O=N(196),_=N(3894);function o(p,y){this.name=p,this.body=y,this.decoders={},this.encoders={}}q.define=function(y,v){return new o(y,v)},o.prototype._createNamed=function(y){const v=this.name;function h(d){this._initNamed(d,v)}return _(h,y),h.prototype._initNamed=function(m,M){y.call(this,m,M)},new h(this)},o.prototype._getDecoder=function(y){return this.decoders.hasOwnProperty(y=y||"der")||(this.decoders[y]=this._createNamed(O[y])),this.decoders[y]},o.prototype.decode=function(y,v,h){return this._getDecoder(v).decode(y,h)},o.prototype._getEncoder=function(y){return this.encoders.hasOwnProperty(y=y||"der")||(this.encoders[y]=this._createNamed(x[y])),this.encoders[y]},o.prototype.encode=function(y,v,h){return this._getEncoder(v).encode(y,h)}},2769:(Z,q,N)=>{"use strict";const x=N(3894),O=N(4919).b,_=N(2038).Buffer;function w(p,y){O.call(this,y),_.isBuffer(p)?(this.base=p,this.offset=0,this.length=p.length):this.error("Input not Buffer")}function o(p,y){if(Array.isArray(p))this.length=0,this.value=p.map(function(v){return o.isEncoderBuffer(v)||(v=new o(v,y)),this.length+=v.length,v},this);else if("number"==typeof p){if(!(0<=p&&p<=255))return y.error("non-byte EncoderBuffer value");this.value=p,this.length=1}else if("string"==typeof p)this.value=p,this.length=_.byteLength(p);else{if(!_.isBuffer(p))return y.error("Unsupported type: "+typeof p);this.value=p,this.length=p.length}}x(w,O),q.C=w,w.isDecoderBuffer=function(y){return y instanceof w||"object"==typeof y&&_.isBuffer(y.base)&&"DecoderBuffer"===y.constructor.name&&"number"==typeof y.offset&&"number"==typeof y.length&&"function"==typeof y.save&&"function"==typeof y.restore&&"function"==typeof y.isEmpty&&"function"==typeof y.readUInt8&&"function"==typeof y.skip&&"function"==typeof y.raw},w.prototype.save=function(){return{offset:this.offset,reporter:O.prototype.save.call(this)}},w.prototype.restore=function(y){const v=new w(this.base);return v.offset=y.offset,v.length=this.offset,this.offset=y.offset,O.prototype.restore.call(this,y.reporter),v},w.prototype.isEmpty=function(){return this.offset===this.length},w.prototype.readUInt8=function(y){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(y||"DecoderBuffer overrun")},w.prototype.skip=function(y,v){if(!(this.offset+y<=this.length))return this.error(v||"DecoderBuffer overrun");const h=new w(this.base);return h._reporterState=this._reporterState,h.offset=this.offset,h.length=this.offset+y,this.offset+=y,h},w.prototype.raw=function(y){return this.base.slice(y?y.offset:this.offset,this.length)},q.R=o,o.isEncoderBuffer=function(y){return y instanceof o||"object"==typeof y&&"EncoderBuffer"===y.constructor.name&&"number"==typeof y.length&&"function"==typeof y.join},o.prototype.join=function(y,v){return y||(y=_.alloc(this.length)),v||(v=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(h){h.join(y,v),v+=h.length}):("number"==typeof this.value?y[v]=this.value:"string"==typeof this.value?y.write(this.value,v):_.isBuffer(this.value)&&this.value.copy(y,v),v+=this.length)),y}},7813:(Z,q,N)=>{"use strict";const x=q;x.Reporter=N(4919).b,x.DecoderBuffer=N(2769).C,x.EncoderBuffer=N(2769).R,x.Node=N(1430)},1430:(Z,q,N)=>{"use strict";const x=N(4919).b,O=N(2769).R,_=N(2769).C,w=N(2391),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],p=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function v(d,m,M){const g={};this._baseState=g,g.name=M,g.enc=d,g.parent=m||null,g.children=null,g.tag=null,g.args=null,g.reverseArgs=null,g.choice=null,g.optional=!1,g.any=!1,g.obj=!1,g.use=null,g.useDecoder=null,g.key=null,g.default=null,g.explicit=null,g.implicit=null,g.contains=null,g.parent||(g.children=[],this._wrap())}Z.exports=v;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];v.prototype.clone=function(){const m=this._baseState,M={};h.forEach(function(E){M[E]=m[E]});const g=new this.constructor(M.parent);return g._baseState=M,g},v.prototype._wrap=function(){const m=this._baseState;p.forEach(function(M){this[M]=function(){const E=new this.constructor(this);return m.children.push(E),E[M].apply(E,arguments)}},this)},v.prototype._init=function(m){const M=this._baseState;w(null===M.parent),m.call(this),M.children=M.children.filter(function(g){return g._baseState.parent===this},this),w.equal(M.children.length,1,"Root node can have only one child")},v.prototype._useArgs=function(m){const M=this._baseState,g=m.filter(function(E){return E instanceof this.constructor},this);m=m.filter(function(E){return!(E instanceof this.constructor)},this),0!==g.length&&(w(null===M.children),M.children=g,g.forEach(function(E){E._baseState.parent=this},this)),0!==m.length&&(w(null===M.args),M.args=m,M.reverseArgs=m.map(function(E){if("object"!=typeof E||E.constructor!==Object)return E;const R={};return Object.keys(E).forEach(function(T){T==(0|T)&&(T|=0),R[E[T]]=T}),R}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(d){v.prototype[d]=function(){throw new Error(d+" not implemented for encoding: "+this._baseState.enc)}}),o.forEach(function(d){v.prototype[d]=function(){const M=this._baseState,g=Array.prototype.slice.call(arguments);return w(null===M.tag),M.tag=d,this._useArgs(g),this}}),v.prototype.use=function(m){w(m);const M=this._baseState;return w(null===M.use),M.use=m,this},v.prototype.optional=function(){return this._baseState.optional=!0,this},v.prototype.def=function(m){const M=this._baseState;return w(null===M.default),M.default=m,M.optional=!0,this},v.prototype.explicit=function(m){const M=this._baseState;return w(null===M.explicit&&null===M.implicit),M.explicit=m,this},v.prototype.implicit=function(m){const M=this._baseState;return w(null===M.explicit&&null===M.implicit),M.implicit=m,this},v.prototype.obj=function(){const m=this._baseState,M=Array.prototype.slice.call(arguments);return m.obj=!0,0!==M.length&&this._useArgs(M),this},v.prototype.key=function(m){const M=this._baseState;return w(null===M.key),M.key=m,this},v.prototype.any=function(){return this._baseState.any=!0,this},v.prototype.choice=function(m){const M=this._baseState;return w(null===M.choice),M.choice=m,this._useArgs(Object.keys(m).map(function(g){return m[g]})),this},v.prototype.contains=function(m){const M=this._baseState;return w(null===M.use),M.contains=m,this},v.prototype._decode=function(m,M){const g=this._baseState;if(null===g.parent)return m.wrapResult(g.children[0]._decode(m,M));let k,E=g.default,R=!0,T=null;if(null!==g.key&&(T=m.enterKey(g.key)),g.optional){let I=null;if(null!==g.explicit?I=g.explicit:null!==g.implicit?I=g.implicit:null!==g.tag&&(I=g.tag),null!==I||g.any){if(R=this._peekTag(m,I,g.any),m.isError(R))return R}else{const U=m.save();try{null===g.choice?this._decodeGeneric(g.tag,m,M):this._decodeChoice(m,M),R=!0}catch(V){R=!1}m.restore(U)}}if(g.obj&&R&&(k=m.enterObject()),R){if(null!==g.explicit){const U=this._decodeTag(m,g.explicit);if(m.isError(U))return U;m=U}const I=m.offset;if(null===g.use&&null===g.choice){let U;g.any&&(U=m.save());const V=this._decodeTag(m,null!==g.implicit?g.implicit:g.tag,g.any);if(m.isError(V))return V;g.any?E=m.raw(U):m=V}if(M&&M.track&&null!==g.tag&&M.track(m.path(),I,m.length,"tagged"),M&&M.track&&null!==g.tag&&M.track(m.path(),m.offset,m.length,"content"),g.any||(E=null===g.choice?this._decodeGeneric(g.tag,m,M):this._decodeChoice(m,M)),m.isError(E))return E;if(!g.any&&null===g.choice&&null!==g.children&&g.children.forEach(function(V){V._decode(m,M)}),g.contains&&("octstr"===g.tag||"bitstr"===g.tag)){const U=new _(E);E=this._getUse(g.contains,m._reporterState.obj)._decode(U,M)}}return g.obj&&R&&(E=m.leaveObject(k)),null===g.key||null===E&&!0!==R?null!==T&&m.exitKey(T):m.leaveKey(T,g.key,E),E},v.prototype._decodeGeneric=function(m,M,g){const E=this._baseState;return"seq"===m||"set"===m?null:"seqof"===m||"setof"===m?this._decodeList(M,m,E.args[0],g):/str$/.test(m)?this._decodeStr(M,m,g):"objid"===m&&E.args?this._decodeObjid(M,E.args[0],E.args[1],g):"objid"===m?this._decodeObjid(M,null,null,g):"gentime"===m||"utctime"===m?this._decodeTime(M,m,g):"null_"===m?this._decodeNull(M,g):"bool"===m?this._decodeBool(M,g):"objDesc"===m?this._decodeStr(M,m,g):"int"===m||"enum"===m?this._decodeInt(M,E.args&&E.args[0],g):null!==E.use?this._getUse(E.use,M._reporterState.obj)._decode(M,g):M.error("unknown tag: "+m)},v.prototype._getUse=function(m,M){const g=this._baseState;return g.useDecoder=this._use(m,M),w(null===g.useDecoder._baseState.parent),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},v.prototype._decodeChoice=function(m,M){const g=this._baseState;let E=null,R=!1;return Object.keys(g.choice).some(function(T){const k=m.save(),I=g.choice[T];try{const U=I._decode(m,M);if(m.isError(U))return!1;E={type:T,value:U},R=!0}catch(U){return m.restore(k),!1}return!0},this),R?E:m.error("Choice not matched")},v.prototype._createEncoderBuffer=function(m){return new O(m,this.reporter)},v.prototype._encode=function(m,M,g){const E=this._baseState;if(null!==E.default&&E.default===m)return;const R=this._encodeValue(m,M,g);return void 0===R||this._skipDefault(R,M,g)?void 0:R},v.prototype._encodeValue=function(m,M,g){const E=this._baseState;if(null===E.parent)return E.children[0]._encode(m,M||new x);let R=null;if(this.reporter=M,E.optional&&void 0===m){if(null===E.default)return;m=E.default}let T=null,k=!1;if(E.any)R=this._createEncoderBuffer(m);else if(E.choice)R=this._encodeChoice(m,M);else if(E.contains)T=this._getUse(E.contains,g)._encode(m,M),k=!0;else if(E.children)T=E.children.map(function(I){if("null_"===I._baseState.tag)return I._encode(null,M,m);if(null===I._baseState.key)return M.error("Child should have a key");const U=M.enterKey(I._baseState.key);if("object"!=typeof m)return M.error("Child expected, but input is not object");const V=I._encode(m[I._baseState.key],M,m);return M.leaveKey(U),V},this).filter(function(I){return I}),T=this._createEncoderBuffer(T);else if("seqof"===E.tag||"setof"===E.tag){if(!E.args||1!==E.args.length)return M.error("Too many args for : "+E.tag);if(!Array.isArray(m))return M.error("seqof/setof, but data is not Array");const I=this.clone();I._baseState.implicit=null,T=this._createEncoderBuffer(m.map(function(U){return this._getUse(this._baseState.args[0],m)._encode(U,M)},I))}else null!==E.use?R=this._getUse(E.use,g)._encode(m,M):(T=this._encodePrimitive(E.tag,m),k=!0);if(!E.any&&null===E.choice){const I=null!==E.implicit?E.implicit:E.tag,U=null===E.implicit?"universal":"context";null===I?null===E.use&&M.error("Tag could be omitted only for .use()"):null===E.use&&(R=this._encodeComposite(I,k,U,T))}return null!==E.explicit&&(R=this._encodeComposite(E.explicit,!1,"context",R)),R},v.prototype._encodeChoice=function(m,M){const g=this._baseState,E=g.choice[m.type];return E||w(!1,m.type+" not found in "+JSON.stringify(Object.keys(g.choice))),E._encode(m.value,M)},v.prototype._encodePrimitive=function(m,M){const g=this._baseState;if(/str$/.test(m))return this._encodeStr(M,m);if("objid"===m&&g.args)return this._encodeObjid(M,g.reverseArgs[0],g.args[1]);if("objid"===m)return this._encodeObjid(M,null,null);if("gentime"===m||"utctime"===m)return this._encodeTime(M,m);if("null_"===m)return this._encodeNull();if("int"===m||"enum"===m)return this._encodeInt(M,g.args&&g.reverseArgs[0]);if("bool"===m)return this._encodeBool(M);if("objDesc"===m)return this._encodeStr(M,m);throw new Error("Unsupported tag: "+m)},v.prototype._isNumstr=function(m){return/^[0-9 ]*$/.test(m)},v.prototype._isPrintstr=function(m){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(m)}},4919:(Z,q,N)=>{"use strict";const x=N(3894);function O(w){this._reporterState={obj:null,path:[],options:w||{},errors:[]}}function _(w,o){this.path=w,this.rethrow(o)}q.b=O,O.prototype.isError=function(o){return o instanceof _},O.prototype.save=function(){const o=this._reporterState;return{obj:o.obj,pathLen:o.path.length}},O.prototype.restore=function(o){const p=this._reporterState;p.obj=o.obj,p.path=p.path.slice(0,o.pathLen)},O.prototype.enterKey=function(o){return this._reporterState.path.push(o)},O.prototype.exitKey=function(o){const p=this._reporterState;p.path=p.path.slice(0,o-1)},O.prototype.leaveKey=function(o,p,y){const v=this._reporterState;this.exitKey(o),null!==v.obj&&(v.obj[p]=y)},O.prototype.path=function(){return this._reporterState.path.join("/")},O.prototype.enterObject=function(){const o=this._reporterState,p=o.obj;return o.obj={},p},O.prototype.leaveObject=function(o){const p=this._reporterState,y=p.obj;return p.obj=o,y},O.prototype.error=function(o){let p;const y=this._reporterState,v=o instanceof _;if(p=v?o:new _(y.path.map(function(h){return"["+JSON.stringify(h)+"]"}).join(""),o.message||o,o.stack),!y.options.partial)throw p;return v||y.errors.push(p),p},O.prototype.wrapResult=function(o){const p=this._reporterState;return p.options.partial?{result:this.isError(o)?null:o,errors:p.errors}:o},x(_,Error),_.prototype.rethrow=function(o){if(this.message=o+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,_),!this.stack)try{throw new Error(this.message)}catch(p){this.stack=p.stack}return this}},5496:(Z,q)=>{"use strict";function N(x){const O={};return Object.keys(x).forEach(function(_){(0|_)==_&&(_|=0),O[x[_]]=_}),O}q.tagClass={0:"universal",1:"application",2:"context",3:"private"},q.tagClassByName=N(q.tagClass),q.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},q.tagByName=N(q.tag)},5459:(Z,q,N)=>{"use strict";const x=q;x._reverse=function(_){const w={};return Object.keys(_).forEach(function(o){(0|o)==o&&(o|=0),w[_[o]]=o}),w},x.der=N(5496)},7127:(Z,q,N)=>{"use strict";const x=N(3894),O=N(3854),_=N(2769).C,w=N(1430),o=N(5496);function p(d){this.enc="der",this.name=d.name,this.entity=d,this.tree=new y,this.tree._init(d.body)}function y(d){w.call(this,"der",d)}function v(d,m){let M=d.readUInt8(m);if(d.isError(M))return M;const g=o.tagClass[M>>6],E=0==(32&M);if(31==(31&M)){let T=M;for(M=0;128==(128&T);){if(T=d.readUInt8(m),d.isError(T))return T;M<<=7,M|=127&T}}else M&=31;return{cls:g,primitive:E,tag:M,tagStr:o.tag[M]}}function h(d,m,M){let g=d.readUInt8(M);if(d.isError(g))return g;if(!m&&128===g)return null;if(0==(128&g))return g;const E=127&g;if(E>4)return d.error("length octect is too long");g=0;for(let R=0;R<E;R++){g<<=8;const T=d.readUInt8(M);if(d.isError(T))return T;g|=T}return g}Z.exports=p,p.prototype.decode=function(m,M){return _.isDecoderBuffer(m)||(m=new _(m,M)),this.tree._decode(m,M)},x(y,w),y.prototype._peekTag=function(m,M,g){if(m.isEmpty())return!1;const E=m.save(),R=v(m,'Failed to peek tag: "'+M+'"');return m.isError(R)?R:(m.restore(E),R.tag===M||R.tagStr===M||R.tagStr+"of"===M||g)},y.prototype._decodeTag=function(m,M,g){const E=v(m,'Failed to decode tag of "'+M+'"');if(m.isError(E))return E;let R=h(m,E.primitive,'Failed to get length of "'+M+'"');if(m.isError(R))return R;if(!g&&E.tag!==M&&E.tagStr!==M&&E.tagStr+"of"!==M)return m.error('Failed to match tag: "'+M+'"');if(E.primitive||null!==R)return m.skip(R,'Failed to match body of: "'+M+'"');const T=m.save(),k=this._skipUntilEnd(m,'Failed to skip indefinite length body: "'+this.tag+'"');return m.isError(k)?k:(R=m.offset-T.offset,m.restore(T),m.skip(R,'Failed to match body of: "'+M+'"'))},y.prototype._skipUntilEnd=function(m,M){for(;;){const g=v(m,M);if(m.isError(g))return g;const E=h(m,g.primitive,M);if(m.isError(E))return E;let R;if(R=g.primitive||null!==E?m.skip(E):this._skipUntilEnd(m,M),m.isError(R))return R;if("end"===g.tagStr)break}},y.prototype._decodeList=function(m,M,g,E){const R=[];for(;!m.isEmpty();){const T=this._peekTag(m,"end");if(m.isError(T))return T;const k=g.decode(m,"der",E);if(m.isError(k)&&T)break;R.push(k)}return R},y.prototype._decodeStr=function(m,M){if("bitstr"===M){const g=m.readUInt8();return m.isError(g)?g:{unused:g,data:m.raw()}}if("bmpstr"===M){const g=m.raw();if(g.length%2==1)return m.error("Decoding of string type: bmpstr length mismatch");let E="";for(let R=0;R<g.length/2;R++)E+=String.fromCharCode(g.readUInt16BE(2*R));return E}if("numstr"===M){const g=m.raw().toString("ascii");return this._isNumstr(g)?g:m.error("Decoding of string type: numstr unsupported characters")}if("octstr"===M)return m.raw();if("objDesc"===M)return m.raw();if("printstr"===M){const g=m.raw().toString("ascii");return this._isPrintstr(g)?g:m.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(M)?m.raw().toString():m.error("Decoding of string type: "+M+" unsupported")},y.prototype._decodeObjid=function(m,M,g){let E;const R=[];let T=0,k=0;for(;!m.isEmpty();)k=m.readUInt8(),T<<=7,T|=127&k,0==(128&k)&&(R.push(T),T=0);if(128&k&&R.push(T),E=g?R:[R[0]/40|0,R[0]%40].concat(R.slice(1)),M){let V=M[E.join(" ")];void 0===V&&(V=M[E.join(".")]),void 0!==V&&(E=V)}return E},y.prototype._decodeTime=function(m,M){const g=m.raw().toString();let E,R,T,k,I,U;if("gentime"===M)E=0|g.slice(0,4),R=0|g.slice(4,6),T=0|g.slice(6,8),k=0|g.slice(8,10),I=0|g.slice(10,12),U=0|g.slice(12,14);else{if("utctime"!==M)return m.error("Decoding "+M+" time is not supported yet");E=0|g.slice(0,2),R=0|g.slice(2,4),T=0|g.slice(4,6),k=0|g.slice(6,8),I=0|g.slice(8,10),U=0|g.slice(10,12),E=E<70?2e3+E:1900+E}return Date.UTC(E,R-1,T,k,I,U,0)},y.prototype._decodeNull=function(){return null},y.prototype._decodeBool=function(m){const M=m.readUInt8();return m.isError(M)?M:0!==M},y.prototype._decodeInt=function(m,M){const g=m.raw();let E=new O(g);return M&&(E=M[E.toString(10)]||E),E},y.prototype._use=function(m,M){return"function"==typeof m&&(m=m(M)),m._getDecoder("der").tree}},196:(Z,q,N)=>{"use strict";const x=q;x.der=N(7127),x.pem=N(9617)},9617:(Z,q,N)=>{"use strict";const x=N(3894),O=N(2038).Buffer,_=N(7127);function w(o){_.call(this,o),this.enc="pem"}x(w,_),Z.exports=w,w.prototype.decode=function(p,y){const v=p.toString().split(/[\r\n]+/g),h=y.label.toUpperCase(),d=/^-----(BEGIN|END) ([^-]+)-----$/;let m=-1,M=-1;for(let R=0;R<v.length;R++){const T=v[R].match(d);if(null!==T&&T[2]===h){if(-1!==m){if("END"!==T[1])break;M=R;break}if("BEGIN"!==T[1])break;m=R}}if(-1===m||-1===M)throw new Error("PEM section not found for: "+h);const g=v.slice(m+1,M).join("");g.replace(/[^a-z0-9+/=]+/gi,"");const E=O.from(g,"base64");return _.prototype.decode.call(this,E,y)}},6374:(Z,q,N)=>{"use strict";const x=N(3894),O=N(2038).Buffer,_=N(1430),w=N(5496);function o(h){this.enc="der",this.name=h.name,this.entity=h,this.tree=new p,this.tree._init(h.body)}function p(h){_.call(this,"der",h)}function y(h){return h<10?"0"+h:h}Z.exports=o,o.prototype.encode=function(d,m){return this.tree._encode(d,m).join()},x(p,_),p.prototype._encodeComposite=function(d,m,M,g){const E=function v(h,d,m,M){let g;if("seqof"===h?h="seq":"setof"===h&&(h="set"),w.tagByName.hasOwnProperty(h))g=w.tagByName[h];else{if("number"!=typeof h||(0|h)!==h)return M.error("Unknown tag: "+h);g=h}return g>=31?M.error("Multi-octet tag encoding unsupported"):(d||(g|=32),g|=w.tagClassByName[m||"universal"]<<6,g)}(d,m,M,this.reporter);if(g.length<128){const k=O.alloc(2);return k[0]=E,k[1]=g.length,this._createEncoderBuffer([k,g])}let R=1;for(let k=g.length;k>=256;k>>=8)R++;const T=O.alloc(2+R);T[0]=E,T[1]=128|R;for(let k=1+R,I=g.length;I>0;k--,I>>=8)T[k]=255&I;return this._createEncoderBuffer([T,g])},p.prototype._encodeStr=function(d,m){if("bitstr"===m)return this._createEncoderBuffer([0|d.unused,d.data]);if("bmpstr"===m){const M=O.alloc(2*d.length);for(let g=0;g<d.length;g++)M.writeUInt16BE(d.charCodeAt(g),2*g);return this._createEncoderBuffer(M)}return"numstr"===m?this._isNumstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===m?this._isPrintstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)||"objDesc"===m?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: "+m+" unsupported")},p.prototype._encodeObjid=function(d,m,M){if("string"==typeof d){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(d))return this.reporter.error("objid not found in values map");d=m[d].split(/[\s.]+/g);for(let T=0;T<d.length;T++)d[T]|=0}else if(Array.isArray(d)){d=d.slice();for(let T=0;T<d.length;T++)d[T]|=0}if(!Array.isArray(d))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(d));if(!M){if(d[1]>=40)return this.reporter.error("Second objid identifier OOB");d.splice(0,2,40*d[0]+d[1])}let g=0;for(let T=0;T<d.length;T++){let k=d[T];for(g++;k>=128;k>>=7)g++}const E=O.alloc(g);let R=E.length-1;for(let T=d.length-1;T>=0;T--){let k=d[T];for(E[R--]=127&k;(k>>=7)>0;)E[R--]=128|127&k}return this._createEncoderBuffer(E)},p.prototype._encodeTime=function(d,m){let M;const g=new Date(d);return"gentime"===m?M=[y(g.getUTCFullYear()),y(g.getUTCMonth()+1),y(g.getUTCDate()),y(g.getUTCHours()),y(g.getUTCMinutes()),y(g.getUTCSeconds()),"Z"].join(""):"utctime"===m?M=[y(g.getUTCFullYear()%100),y(g.getUTCMonth()+1),y(g.getUTCDate()),y(g.getUTCHours()),y(g.getUTCMinutes()),y(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(M,"octstr")},p.prototype._encodeNull=function(){return this._createEncoderBuffer("")},p.prototype._encodeInt=function(d,m){if("string"==typeof d){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(d))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(d));d=m[d]}if("number"!=typeof d&&!O.isBuffer(d)){const E=d.toArray();!d.sign&&128&E[0]&&E.unshift(0),d=O.from(E)}if(O.isBuffer(d)){let E=d.length;0===d.length&&E++;const R=O.alloc(E);return d.copy(R),0===d.length&&(R[0]=0),this._createEncoderBuffer(R)}if(d<128)return this._createEncoderBuffer(d);if(d<256)return this._createEncoderBuffer([0,d]);let M=1;for(let E=d;E>=256;E>>=8)M++;const g=new Array(M);for(let E=g.length-1;E>=0;E--)g[E]=255&d,d>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(O.from(g))},p.prototype._encodeBool=function(d){return this._createEncoderBuffer(d?255:0)},p.prototype._use=function(d,m){return"function"==typeof d&&(d=d(m)),d._getEncoder("der").tree},p.prototype._skipDefault=function(d,m,M){const g=this._baseState;let E;if(null===g.default)return!1;const R=d.join();if(void 0===g.defaultBuffer&&(g.defaultBuffer=this._encodeValue(g.default,m,M).join()),R.length!==g.defaultBuffer.length)return!1;for(E=0;E<R.length;E++)if(R[E]!==g.defaultBuffer[E])return!1;return!0}},1131:(Z,q,N)=>{"use strict";const x=q;x.der=N(6374),x.pem=N(3530)},3530:(Z,q,N)=>{"use strict";const x=N(3894),O=N(6374);function _(w){O.call(this,w),this.enc="pem"}x(_,O),Z.exports=_,_.prototype.encode=function(o,p){const v=O.prototype.encode.call(this,o).toString("base64"),h=["-----BEGIN "+p.label+"-----"];for(let d=0;d<v.length;d+=64)h.push(v.slice(d,d+64));return h.push("-----END "+p.label+"-----"),h.join("\n")}},3854:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(950).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},5343:(Z,q)=>{"use strict";q.byteLength=function y(g){var E=p(g),T=E[1];return 3*(E[0]+T)/4-T},q.toByteArray=function h(g){var E,W,R=p(g),T=R[0],k=R[1],I=new O(function v(g,E,R){return 3*(E+R)/4-R}(0,T,k)),U=0,V=k>0?T-4:T;for(W=0;W<V;W+=4)E=x[g.charCodeAt(W)]<<18|x[g.charCodeAt(W+1)]<<12|x[g.charCodeAt(W+2)]<<6|x[g.charCodeAt(W+3)],I[U++]=E>>16&255,I[U++]=E>>8&255,I[U++]=255&E;return 2===k&&(E=x[g.charCodeAt(W)]<<2|x[g.charCodeAt(W+1)]>>4,I[U++]=255&E),1===k&&(E=x[g.charCodeAt(W)]<<10|x[g.charCodeAt(W+1)]<<4|x[g.charCodeAt(W+2)]>>2,I[U++]=E>>8&255,I[U++]=255&E),I},q.fromByteArray=function M(g){for(var E,R=g.length,T=R%3,k=[],I=16383,U=0,V=R-T;U<V;U+=I)k.push(m(g,U,U+I>V?V:U+I));return 1===T?k.push(N[(E=g[R-1])>>2]+N[E<<4&63]+"=="):2===T&&k.push(N[(E=(g[R-2]<<8)+g[R-1])>>10]+N[E>>4&63]+N[E<<2&63]+"="),k.join("")};for(var N=[],x=[],O="undefined"!=typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,o=_.length;w<o;++w)N[w]=_[w],x[_.charCodeAt(w)]=w;function p(g){var E=g.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=g.indexOf("=");return-1===R&&(R=E),[R,R===E?0:4-R%4]}function d(g){return N[g>>18&63]+N[g>>12&63]+N[g>>6&63]+N[63&g]}function m(g,E,R){for(var k=[],I=E;I<R;I+=3)k.push(d((g[I]<<16&16711680)+(g[I+1]<<8&65280)+(255&g[I+2])));return k.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},8538:function(Z,q,N){!function(x,O){"use strict";function _(a,i){if(!a)throw new Error(i||"Assertion failed")}function w(a,i){a.super_=i;var s=function(){};s.prototype=i.prototype,a.prototype=new s,a.prototype.constructor=a}function o(a,i,s){if(o.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,null!==a&&(("le"===i||"be"===i)&&(s=i,i=10),this._init(a||0,i||10,s||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(6601).Buffer}catch(a){}function y(a,i){var s=a.charCodeAt(i);return s>=48&&s<=57?s-48:s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:void _(!1,"Invalid character in "+a)}function v(a,i,s){var l=y(a,s);return s-1>=i&&(l|=y(a,s-1)<<4),l}function h(a,i,s,l){for(var b=0,c=0,r=Math.min(a.length,s),f=i;f<r;f++){var L=a.charCodeAt(f)-48;b*=l,c=L>=49?L-49+10:L>=17?L-17+10:L,_(L>=0&&c<l,"Invalid character"),b+=c}return b}function d(a,i){a.words=i.words,a.length=i.length,a.negative=i.negative,a.red=i.red}if(o.isBN=function(i){return i instanceof o||null!==i&&"object"==typeof i&&i.constructor.wordSize===o.wordSize&&Array.isArray(i.words)},o.max=function(i,s){return i.cmp(s)>0?i:s},o.min=function(i,s){return i.cmp(s)<0?i:s},o.prototype._init=function(i,s,l){if("number"==typeof i)return this._initNumber(i,s,l);if("object"==typeof i)return this._initArray(i,s,l);"hex"===s&&(s=16),_(s===(0|s)&&s>=2&&s<=36);var b=0;"-"===(i=i.toString().replace(/\s+/g,""))[0]&&(b++,this.negative=1),b<i.length&&(16===s?this._parseHex(i,b,l):(this._parseBase(i,s,b),"le"===l&&this._initArray(this.toArray(),s,l)))},o.prototype._initNumber=function(i,s,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[67108863&i],this.length=1):i<4503599627370496?(this.words=[67108863&i,i/67108864&67108863],this.length=2):(_(i<9007199254740992),this.words=[67108863&i,i/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},o.prototype._initArray=function(i,s,l){if(_("number"==typeof i.length),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var c,r,f=0;if("be"===l)for(b=i.length-1,c=0;b>=0;b-=3)this.words[c]|=(r=i[b]|i[b-1]<<8|i[b-2]<<16)<<f&67108863,this.words[c+1]=r>>>26-f&67108863,(f+=24)>=26&&(f-=26,c++);else if("le"===l)for(b=0,c=0;b<i.length;b+=3)this.words[c]|=(r=i[b]|i[b+1]<<8|i[b+2]<<16)<<f&67108863,this.words[c+1]=r>>>26-f&67108863,(f+=24)>=26&&(f-=26,c++);return this._strip()},o.prototype._parseHex=function(i,s,l){this.length=Math.ceil((i.length-s)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var f,c=0,r=0;if("be"===l)for(b=i.length-1;b>=s;b-=2)f=v(i,s,b)<<c,this.words[r]|=67108863&f,c>=18?(c-=18,this.words[r+=1]|=f>>>26):c+=8;else for(b=(i.length-s)%2==0?s+1:s;b<i.length;b+=2)f=v(i,s,b)<<c,this.words[r]|=67108863&f,c>=18?(c-=18,this.words[r+=1]|=f>>>26):c+=8;this._strip()},o.prototype._parseBase=function(i,s,l){this.words=[0],this.length=1;for(var b=0,c=1;c<=67108863;c*=s)b++;b--,c=c/s|0;for(var r=i.length-l,f=r%b,L=Math.min(r,r-f)+l,C=0,H=l;H<L;H+=b)C=h(i,H,H+b,s),this.imuln(c),this.words[0]+C<67108864?this.words[0]+=C:this._iaddn(C);if(0!==f){var Y=1;for(C=h(i,H,i.length,s),H=0;H<f;H++)Y*=s;this.imuln(Y),this.words[0]+C<67108864?this.words[0]+=C:this._iaddn(C)}this._strip()},o.prototype.copy=function(i){i.words=new Array(this.length);for(var s=0;s<this.length;s++)i.words[s]=this.words[s];i.length=this.length,i.negative=this.negative,i.red=this.red},o.prototype._move=function(i){d(i,this)},o.prototype.clone=function(){var i=new o(null);return this.copy(i),i},o.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch(a){o.prototype.inspect=m}else o.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function k(a,i,s){s.negative=i.negative^a.negative;var l=a.length+i.length|0;s.length=l,l=l-1|0;var b=0|a.words[0],c=0|i.words[0],r=b*c,L=r/67108864|0;s.words[0]=67108863&r;for(var C=1;C<l;C++){for(var H=L>>>26,Y=67108863&L,ee=Math.min(C,i.length-1),ne=Math.max(0,C-a.length+1);ne<=ee;ne++)H+=(r=(b=0|a.words[C-ne|0])*(c=0|i.words[ne])+Y)/67108864|0,Y=67108863&r;s.words[C]=0|Y,L=0|H}return 0!==L?s.words[C]=0|L:s.length--,s._strip()}o.prototype.toString=function(i,s){var l;if(s=0|s||1,16===(i=i||10)||"hex"===i){l="";for(var b=0,c=0,r=0;r<this.length;r++){var f=this.words[r],L=(16777215&(f<<b|c)).toString(16);l=0!=(c=f>>>24-b&16777215)||r!==this.length-1?M[6-L.length]+L+l:L+l,(b+=2)>=26&&(b-=26,r--)}for(0!==c&&(l=c.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(i===(0|i)&&i>=2&&i<=36){var C=g[i],H=E[i];l="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var ee=Y.modrn(H).toString(i);l=(Y=Y.idivn(H)).isZero()?ee+l:M[C-ee.length]+ee+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var i=this.words[0];return 2===this.length?i+=67108864*this.words[1]:3===this.length&&1===this.words[2]?i+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-i:i},o.prototype.toJSON=function(){return this.toString(16,2)},p&&(o.prototype.toBuffer=function(i,s){return this.toArrayLike(p,i,s)}),o.prototype.toArray=function(i,s){return this.toArrayLike(Array,i,s)},o.prototype.toArrayLike=function(i,s,l){this._strip();var b=this.byteLength(),c=l||Math.max(1,b);_(b<=c,"byte array longer than desired length"),_(c>0,"Requested array length <= 0");var r=function(i,s){return i.allocUnsafe?i.allocUnsafe(s):new i(s)}(i,c);return this["_toArrayLike"+("le"===s?"LE":"BE")](r,b),r},o.prototype._toArrayLikeLE=function(i,s){for(var l=0,b=0,c=0,r=0;c<this.length;c++){var f=this.words[c]<<r|b;i[l++]=255&f,l<i.length&&(i[l++]=f>>8&255),l<i.length&&(i[l++]=f>>16&255),6===r?(l<i.length&&(i[l++]=f>>24&255),b=0,r=0):(b=f>>>24,r+=2)}if(l<i.length)for(i[l++]=b;l<i.length;)i[l++]=0},o.prototype._toArrayLikeBE=function(i,s){for(var l=i.length-1,b=0,c=0,r=0;c<this.length;c++){var f=this.words[c]<<r|b;i[l--]=255&f,l>=0&&(i[l--]=f>>8&255),l>=0&&(i[l--]=f>>16&255),6===r?(l>=0&&(i[l--]=f>>24&255),b=0,r=0):(b=f>>>24,r+=2)}if(l>=0)for(i[l--]=b;l>=0;)i[l--]=0},o.prototype._countBits=Math.clz32?function(i){return 32-Math.clz32(i)}:function(i){var s=i,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},o.prototype._zeroBits=function(i){if(0===i)return 26;var s=i,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},o.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(i+=l,26!==l)break}return i},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(i){return 0!==this.negative?this.abs().inotn(i).iaddn(1):this.clone()},o.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]|i.words[s];return this._strip()},o.prototype.ior=function(i){return _(0==(this.negative|i.negative)),this.iuor(i)},o.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},o.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},o.prototype.iuand=function(i){var s;s=this.length>i.length?i:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=s.length,this._strip()},o.prototype.iand=function(i){return _(0==(this.negative|i.negative)),this.iuand(i)},o.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},o.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},o.prototype.iuxor=function(i){var s,l;this.length>i.length?(s=this,l=i):(s=i,l=this);for(var b=0;b<l.length;b++)this.words[b]=s.words[b]^l.words[b];if(this!==s)for(;b<s.length;b++)this.words[b]=s.words[b];return this.length=s.length,this._strip()},o.prototype.ixor=function(i){return _(0==(this.negative|i.negative)),this.iuxor(i)},o.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},o.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},o.prototype.inotn=function(i){_("number"==typeof i&&i>=0);var s=0|Math.ceil(i/26),l=i%26;this._expand(s),l>0&&s--;for(var b=0;b<s;b++)this.words[b]=67108863&~this.words[b];return l>0&&(this.words[b]=~this.words[b]&67108863>>26-l),this._strip()},o.prototype.notn=function(i){return this.clone().inotn(i)},o.prototype.setn=function(i,s){_("number"==typeof i&&i>=0);var l=i/26|0,b=i%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<b:this.words[l]&~(1<<b),this._strip()},o.prototype.iadd=function(i){var s,l,b;if(0!==this.negative&&0===i.negative)return this.negative=0,s=this.isub(i),this.negative^=1,this._normSign();if(0===this.negative&&0!==i.negative)return i.negative=0,s=this.isub(i),i.negative=1,s._normSign();this.length>i.length?(l=this,b=i):(l=i,b=this);for(var c=0,r=0;r<b.length;r++)this.words[r]=67108863&(s=(0|l.words[r])+(0|b.words[r])+c),c=s>>>26;for(;0!==c&&r<l.length;r++)this.words[r]=67108863&(s=(0|l.words[r])+c),c=s>>>26;if(this.length=l.length,0!==c)this.words[this.length]=c,this.length++;else if(l!==this)for(;r<l.length;r++)this.words[r]=l.words[r];return this},o.prototype.add=function(i){var s;return 0!==i.negative&&0===this.negative?(i.negative=0,s=this.sub(i),i.negative^=1,s):0===i.negative&&0!==this.negative?(this.negative=0,s=i.sub(this),this.negative=1,s):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},o.prototype.isub=function(i){if(0!==i.negative){i.negative=0;var s=this.iadd(i);return i.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var b,c,l=this.cmp(i);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(b=this,c=i):(b=i,c=this);for(var r=0,f=0;f<c.length;f++)r=(s=(0|b.words[f])-(0|c.words[f])+r)>>26,this.words[f]=67108863&s;for(;0!==r&&f<b.length;f++)r=(s=(0|b.words[f])+r)>>26,this.words[f]=67108863&s;if(0===r&&f<b.length&&b!==this)for(;f<b.length;f++)this.words[f]=b.words[f];return this.length=Math.max(this.length,f),b!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(i){return this.clone().isub(i)};var I=function(i,s,l){var L,C,H,b=i.words,c=s.words,r=l.words,f=0,Y=0|b[0],ee=8191&Y,ne=Y>>>13,fe=0|b[1],te=8191&fe,oe=fe>>>13,le=0|b[2],de=8191&le,A=le>>>13,$=0|b[3],j=8191&$,ue=$>>>13,Pe=0|b[4],pe=8191&Pe,me=Pe>>>13,Be=0|b[5],re=8191&Be,D=Be>>>13,se=0|b[6],ie=8191&se,ae=se>>>13,he=0|b[7],F=8191&he,B=he>>>13,G=0|b[8],X=8191&G,Q=G>>>13,ve=0|b[9],ce=8191&ve,ge=ve>>>13,Fe=0|c[0],ye=8191&Fe,be=Fe>>>13,Ue=0|c[1],_e=8191&Ue,Ee=Ue>>>13,He=0|c[2],Se=8191&He,we=He>>>13,ot=0|c[3],Me=8191&ot,Re=ot>>>13,st=0|c[4],Ae=8191&st,Ie=st>>>13,ft=0|c[5],Te=8191&ft,xe=ft>>>13,ut=0|c[6],Oe=8191&ut,Ce=ut>>>13,ct=0|c[7],Ne=8191&ct,Le=ct>>>13,dt=0|c[8],ke=8191&dt,De=dt>>>13,at=0|c[9],Ve=8191&at,je=at>>>13;l.negative=i.negative^s.negative,l.length=19;var We=(f+(L=Math.imul(ee,ye))|0)+((8191&(C=(C=Math.imul(ee,be))+Math.imul(ne,ye)|0))<<13)|0;f=((H=Math.imul(ne,be))+(C>>>13)|0)+(We>>>26)|0,We&=67108863,L=Math.imul(te,ye),C=(C=Math.imul(te,be))+Math.imul(oe,ye)|0,H=Math.imul(oe,be);var Ge=(f+(L=L+Math.imul(ee,_e)|0)|0)+((8191&(C=(C=C+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0))<<13)|0;f=((H=H+Math.imul(ne,Ee)|0)+(C>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,L=Math.imul(de,ye),C=(C=Math.imul(de,be))+Math.imul(A,ye)|0,H=Math.imul(A,be),L=L+Math.imul(te,_e)|0,C=(C=C+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,H=H+Math.imul(oe,Ee)|0;var qe=(f+(L=L+Math.imul(ee,Se)|0)|0)+((8191&(C=(C=C+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0))<<13)|0;f=((H=H+Math.imul(ne,we)|0)+(C>>>13)|0)+(qe>>>26)|0,qe&=67108863,L=Math.imul(j,ye),C=(C=Math.imul(j,be))+Math.imul(ue,ye)|0,H=Math.imul(ue,be),L=L+Math.imul(de,_e)|0,C=(C=C+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,H=H+Math.imul(A,Ee)|0,L=L+Math.imul(te,Se)|0,C=(C=C+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,H=H+Math.imul(oe,we)|0;var ze=(f+(L=L+Math.imul(ee,Me)|0)|0)+((8191&(C=(C=C+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0))<<13)|0;f=((H=H+Math.imul(ne,Re)|0)+(C>>>13)|0)+(ze>>>26)|0,ze&=67108863,L=Math.imul(pe,ye),C=(C=Math.imul(pe,be))+Math.imul(me,ye)|0,H=Math.imul(me,be),L=L+Math.imul(j,_e)|0,C=(C=C+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,H=H+Math.imul(ue,Ee)|0,L=L+Math.imul(de,Se)|0,C=(C=C+Math.imul(de,we)|0)+Math.imul(A,Se)|0,H=H+Math.imul(A,we)|0,L=L+Math.imul(te,Me)|0,C=(C=C+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,H=H+Math.imul(oe,Re)|0;var Ke=(f+(L=L+Math.imul(ee,Ae)|0)|0)+((8191&(C=(C=C+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0))<<13)|0;f=((H=H+Math.imul(ne,Ie)|0)+(C>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,L=Math.imul(re,ye),C=(C=Math.imul(re,be))+Math.imul(D,ye)|0,H=Math.imul(D,be),L=L+Math.imul(pe,_e)|0,C=(C=C+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,H=H+Math.imul(me,Ee)|0,L=L+Math.imul(j,Se)|0,C=(C=C+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,H=H+Math.imul(ue,we)|0,L=L+Math.imul(de,Me)|0,C=(C=C+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,H=H+Math.imul(A,Re)|0,L=L+Math.imul(te,Ae)|0,C=(C=C+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,H=H+Math.imul(oe,Ie)|0;var Je=(f+(L=L+Math.imul(ee,Te)|0)|0)+((8191&(C=(C=C+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0))<<13)|0;f=((H=H+Math.imul(ne,xe)|0)+(C>>>13)|0)+(Je>>>26)|0,Je&=67108863,L=Math.imul(ie,ye),C=(C=Math.imul(ie,be))+Math.imul(ae,ye)|0,H=Math.imul(ae,be),L=L+Math.imul(re,_e)|0,C=(C=C+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,H=H+Math.imul(D,Ee)|0,L=L+Math.imul(pe,Se)|0,C=(C=C+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,H=H+Math.imul(me,we)|0,L=L+Math.imul(j,Me)|0,C=(C=C+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,H=H+Math.imul(ue,Re)|0,L=L+Math.imul(de,Ae)|0,C=(C=C+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,H=H+Math.imul(A,Ie)|0,L=L+Math.imul(te,Te)|0,C=(C=C+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,H=H+Math.imul(oe,xe)|0;var Ye=(f+(L=L+Math.imul(ee,Oe)|0)|0)+((8191&(C=(C=C+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0))<<13)|0;f=((H=H+Math.imul(ne,Ce)|0)+(C>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,L=Math.imul(F,ye),C=(C=Math.imul(F,be))+Math.imul(B,ye)|0,H=Math.imul(B,be),L=L+Math.imul(ie,_e)|0,C=(C=C+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,H=H+Math.imul(ae,Ee)|0,L=L+Math.imul(re,Se)|0,C=(C=C+Math.imul(re,we)|0)+Math.imul(D,Se)|0,H=H+Math.imul(D,we)|0,L=L+Math.imul(pe,Me)|0,C=(C=C+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,H=H+Math.imul(me,Re)|0,L=L+Math.imul(j,Ae)|0,C=(C=C+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,H=H+Math.imul(ue,Ie)|0,L=L+Math.imul(de,Te)|0,C=(C=C+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,H=H+Math.imul(A,xe)|0,L=L+Math.imul(te,Oe)|0,C=(C=C+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,H=H+Math.imul(oe,Ce)|0;var Xe=(f+(L=L+Math.imul(ee,Ne)|0)|0)+((8191&(C=(C=C+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0))<<13)|0;f=((H=H+Math.imul(ne,Le)|0)+(C>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,L=Math.imul(X,ye),C=(C=Math.imul(X,be))+Math.imul(Q,ye)|0,H=Math.imul(Q,be),L=L+Math.imul(F,_e)|0,C=(C=C+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,H=H+Math.imul(B,Ee)|0,L=L+Math.imul(ie,Se)|0,C=(C=C+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,H=H+Math.imul(ae,we)|0,L=L+Math.imul(re,Me)|0,C=(C=C+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,H=H+Math.imul(D,Re)|0,L=L+Math.imul(pe,Ae)|0,C=(C=C+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,H=H+Math.imul(me,Ie)|0,L=L+Math.imul(j,Te)|0,C=(C=C+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,H=H+Math.imul(ue,xe)|0,L=L+Math.imul(de,Oe)|0,C=(C=C+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,H=H+Math.imul(A,Ce)|0,L=L+Math.imul(te,Ne)|0,C=(C=C+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,H=H+Math.imul(oe,Le)|0;var Ze=(f+(L=L+Math.imul(ee,ke)|0)|0)+((8191&(C=(C=C+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;f=((H=H+Math.imul(ne,De)|0)+(C>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,L=Math.imul(ce,ye),C=(C=Math.imul(ce,be))+Math.imul(ge,ye)|0,H=Math.imul(ge,be),L=L+Math.imul(X,_e)|0,C=(C=C+Math.imul(X,Ee)|0)+Math.imul(Q,_e)|0,H=H+Math.imul(Q,Ee)|0,L=L+Math.imul(F,Se)|0,C=(C=C+Math.imul(F,we)|0)+Math.imul(B,Se)|0,H=H+Math.imul(B,we)|0,L=L+Math.imul(ie,Me)|0,C=(C=C+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,H=H+Math.imul(ae,Re)|0,L=L+Math.imul(re,Ae)|0,C=(C=C+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,H=H+Math.imul(D,Ie)|0,L=L+Math.imul(pe,Te)|0,C=(C=C+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,H=H+Math.imul(me,xe)|0,L=L+Math.imul(j,Oe)|0,C=(C=C+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,H=H+Math.imul(ue,Ce)|0,L=L+Math.imul(de,Ne)|0,C=(C=C+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,H=H+Math.imul(A,Le)|0,L=L+Math.imul(te,ke)|0,C=(C=C+Math.imul(te,De)|0)+Math.imul(oe,ke)|0,H=H+Math.imul(oe,De)|0;var Qe=(f+(L=L+Math.imul(ee,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(ee,je)|0)+Math.imul(ne,Ve)|0))<<13)|0;f=((H=H+Math.imul(ne,je)|0)+(C>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,L=Math.imul(ce,_e),C=(C=Math.imul(ce,Ee))+Math.imul(ge,_e)|0,H=Math.imul(ge,Ee),L=L+Math.imul(X,Se)|0,C=(C=C+Math.imul(X,we)|0)+Math.imul(Q,Se)|0,H=H+Math.imul(Q,we)|0,L=L+Math.imul(F,Me)|0,C=(C=C+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,H=H+Math.imul(B,Re)|0,L=L+Math.imul(ie,Ae)|0,C=(C=C+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,H=H+Math.imul(ae,Ie)|0,L=L+Math.imul(re,Te)|0,C=(C=C+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,H=H+Math.imul(D,xe)|0,L=L+Math.imul(pe,Oe)|0,C=(C=C+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,H=H+Math.imul(me,Ce)|0,L=L+Math.imul(j,Ne)|0,C=(C=C+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,H=H+Math.imul(ue,Le)|0,L=L+Math.imul(de,ke)|0,C=(C=C+Math.imul(de,De)|0)+Math.imul(A,ke)|0,H=H+Math.imul(A,De)|0;var $e=(f+(L=L+Math.imul(te,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(te,je)|0)+Math.imul(oe,Ve)|0))<<13)|0;f=((H=H+Math.imul(oe,je)|0)+(C>>>13)|0)+($e>>>26)|0,$e&=67108863,L=Math.imul(ce,Se),C=(C=Math.imul(ce,we))+Math.imul(ge,Se)|0,H=Math.imul(ge,we),L=L+Math.imul(X,Me)|0,C=(C=C+Math.imul(X,Re)|0)+Math.imul(Q,Me)|0,H=H+Math.imul(Q,Re)|0,L=L+Math.imul(F,Ae)|0,C=(C=C+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,H=H+Math.imul(B,Ie)|0,L=L+Math.imul(ie,Te)|0,C=(C=C+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,H=H+Math.imul(ae,xe)|0,L=L+Math.imul(re,Oe)|0,C=(C=C+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,H=H+Math.imul(D,Ce)|0,L=L+Math.imul(pe,Ne)|0,C=(C=C+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,H=H+Math.imul(me,Le)|0,L=L+Math.imul(j,ke)|0,C=(C=C+Math.imul(j,De)|0)+Math.imul(ue,ke)|0,H=H+Math.imul(ue,De)|0;var et=(f+(L=L+Math.imul(de,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(de,je)|0)+Math.imul(A,Ve)|0))<<13)|0;f=((H=H+Math.imul(A,je)|0)+(C>>>13)|0)+(et>>>26)|0,et&=67108863,L=Math.imul(ce,Me),C=(C=Math.imul(ce,Re))+Math.imul(ge,Me)|0,H=Math.imul(ge,Re),L=L+Math.imul(X,Ae)|0,C=(C=C+Math.imul(X,Ie)|0)+Math.imul(Q,Ae)|0,H=H+Math.imul(Q,Ie)|0,L=L+Math.imul(F,Te)|0,C=(C=C+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,H=H+Math.imul(B,xe)|0,L=L+Math.imul(ie,Oe)|0,C=(C=C+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,H=H+Math.imul(ae,Ce)|0,L=L+Math.imul(re,Ne)|0,C=(C=C+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,H=H+Math.imul(D,Le)|0,L=L+Math.imul(pe,ke)|0,C=(C=C+Math.imul(pe,De)|0)+Math.imul(me,ke)|0,H=H+Math.imul(me,De)|0;var tt=(f+(L=L+Math.imul(j,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(j,je)|0)+Math.imul(ue,Ve)|0))<<13)|0;f=((H=H+Math.imul(ue,je)|0)+(C>>>13)|0)+(tt>>>26)|0,tt&=67108863,L=Math.imul(ce,Ae),C=(C=Math.imul(ce,Ie))+Math.imul(ge,Ae)|0,H=Math.imul(ge,Ie),L=L+Math.imul(X,Te)|0,C=(C=C+Math.imul(X,xe)|0)+Math.imul(Q,Te)|0,H=H+Math.imul(Q,xe)|0,L=L+Math.imul(F,Oe)|0,C=(C=C+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,H=H+Math.imul(B,Ce)|0,L=L+Math.imul(ie,Ne)|0,C=(C=C+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,H=H+Math.imul(ae,Le)|0,L=L+Math.imul(re,ke)|0,C=(C=C+Math.imul(re,De)|0)+Math.imul(D,ke)|0,H=H+Math.imul(D,De)|0;var rt=(f+(L=L+Math.imul(pe,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(pe,je)|0)+Math.imul(me,Ve)|0))<<13)|0;f=((H=H+Math.imul(me,je)|0)+(C>>>13)|0)+(rt>>>26)|0,rt&=67108863,L=Math.imul(ce,Te),C=(C=Math.imul(ce,xe))+Math.imul(ge,Te)|0,H=Math.imul(ge,xe),L=L+Math.imul(X,Oe)|0,C=(C=C+Math.imul(X,Ce)|0)+Math.imul(Q,Oe)|0,H=H+Math.imul(Q,Ce)|0,L=L+Math.imul(F,Ne)|0,C=(C=C+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,H=H+Math.imul(B,Le)|0,L=L+Math.imul(ie,ke)|0,C=(C=C+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0,H=H+Math.imul(ae,De)|0;var it=(f+(L=L+Math.imul(re,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(re,je)|0)+Math.imul(D,Ve)|0))<<13)|0;f=((H=H+Math.imul(D,je)|0)+(C>>>13)|0)+(it>>>26)|0,it&=67108863,L=Math.imul(ce,Oe),C=(C=Math.imul(ce,Ce))+Math.imul(ge,Oe)|0,H=Math.imul(ge,Ce),L=L+Math.imul(X,Ne)|0,C=(C=C+Math.imul(X,Le)|0)+Math.imul(Q,Ne)|0,H=H+Math.imul(Q,Le)|0,L=L+Math.imul(F,ke)|0,C=(C=C+Math.imul(F,De)|0)+Math.imul(B,ke)|0,H=H+Math.imul(B,De)|0;var nt=(f+(L=L+Math.imul(ie,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(ie,je)|0)+Math.imul(ae,Ve)|0))<<13)|0;f=((H=H+Math.imul(ae,je)|0)+(C>>>13)|0)+(nt>>>26)|0,nt&=67108863,L=Math.imul(ce,Ne),C=(C=Math.imul(ce,Le))+Math.imul(ge,Ne)|0,H=Math.imul(ge,Le),L=L+Math.imul(X,ke)|0,C=(C=C+Math.imul(X,De)|0)+Math.imul(Q,ke)|0,H=H+Math.imul(Q,De)|0;var lt=(f+(L=L+Math.imul(F,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(F,je)|0)+Math.imul(B,Ve)|0))<<13)|0;f=((H=H+Math.imul(B,je)|0)+(C>>>13)|0)+(lt>>>26)|0,lt&=67108863,L=Math.imul(ce,ke),C=(C=Math.imul(ce,De))+Math.imul(ge,ke)|0,H=Math.imul(ge,De);var ht=(f+(L=L+Math.imul(X,Ve)|0)|0)+((8191&(C=(C=C+Math.imul(X,je)|0)+Math.imul(Q,Ve)|0))<<13)|0;f=((H=H+Math.imul(Q,je)|0)+(C>>>13)|0)+(ht>>>26)|0,ht&=67108863;var pt=(f+(L=Math.imul(ce,Ve))|0)+((8191&(C=(C=Math.imul(ce,je))+Math.imul(ge,Ve)|0))<<13)|0;return f=((H=Math.imul(ge,je))+(C>>>13)|0)+(pt>>>26)|0,pt&=67108863,r[0]=We,r[1]=Ge,r[2]=qe,r[3]=ze,r[4]=Ke,r[5]=Je,r[6]=Ye,r[7]=Xe,r[8]=Ze,r[9]=Qe,r[10]=$e,r[11]=et,r[12]=tt,r[13]=rt,r[14]=it,r[15]=nt,r[16]=lt,r[17]=ht,r[18]=pt,0!==f&&(r[19]=f,l.length++),l};function U(a,i,s){s.negative=i.negative^a.negative,s.length=a.length+i.length;for(var l=0,b=0,c=0;c<s.length-1;c++){var r=b;b=0;for(var f=67108863&l,L=Math.min(c,i.length-1),C=Math.max(0,c-a.length+1);C<=L;C++){var ne=(0|a.words[c-C])*(0|i.words[C]),fe=67108863&ne;f=67108863&(fe=fe+f|0),b+=(r=(r=r+(ne/67108864|0)|0)+(fe>>>26)|0)>>>26,r&=67108863}s.words[c]=f,l=r,r=b}return 0!==l?s.words[c]=l:s.length--,s._strip()}function V(a,i,s){return U(a,i,s)}function W(a,i){this.x=a,this.y=i}Math.imul||(I=k),o.prototype.mulTo=function(i,s){var b=this.length+i.length;return 10===this.length&&10===i.length?I(this,i,s):b<63?k(this,i,s):b<1024?U(this,i,s):V(this,i,s)},W.prototype.makeRBT=function(i){for(var s=new Array(i),l=o.prototype._countBits(i)-1,b=0;b<i;b++)s[b]=this.revBin(b,l,i);return s},W.prototype.revBin=function(i,s,l){if(0===i||i===l-1)return i;for(var b=0,c=0;c<s;c++)b|=(1&i)<<s-c-1,i>>=1;return b},W.prototype.permute=function(i,s,l,b,c,r){for(var f=0;f<r;f++)b[f]=s[i[f]],c[f]=l[i[f]]},W.prototype.transform=function(i,s,l,b,c,r){this.permute(r,i,s,l,b,c);for(var f=1;f<c;f<<=1)for(var L=f<<1,C=Math.cos(2*Math.PI/L),H=Math.sin(2*Math.PI/L),Y=0;Y<c;Y+=L)for(var ee=C,ne=H,fe=0;fe<f;fe++){var te=l[Y+fe],oe=b[Y+fe],le=l[Y+fe+f],de=b[Y+fe+f],A=ee*le-ne*de;de=ee*de+ne*le,l[Y+fe]=te+(le=A),b[Y+fe]=oe+de,l[Y+fe+f]=te-le,b[Y+fe+f]=oe-de,fe!==L&&(A=C*ee-H*ne,ne=C*ne+H*ee,ee=A)}},W.prototype.guessLen13b=function(i,s){var l=1|Math.max(s,i),b=1&l,c=0;for(l=l/2|0;l;l>>>=1)c++;return 1<<c+1+b},W.prototype.conjugate=function(i,s,l){if(!(l<=1))for(var b=0;b<l/2;b++){var c=i[b];i[b]=i[l-b-1],i[l-b-1]=c,c=s[b],s[b]=-s[l-b-1],s[l-b-1]=-c}},W.prototype.normalize13b=function(i,s){for(var l=0,b=0;b<s/2;b++){var c=8192*Math.round(i[2*b+1]/s)+Math.round(i[2*b]/s)+l;i[b]=67108863&c,l=c<67108864?0:c/67108864|0}return i},W.prototype.convert13b=function(i,s,l,b){for(var c=0,r=0;r<s;r++)l[2*r]=8191&(c+=0|i[r]),l[2*r+1]=8191&(c>>>=13),c>>>=13;for(r=2*s;r<b;++r)l[r]=0;_(0===c),_(0==(-8192&c))},W.prototype.stub=function(i){for(var s=new Array(i),l=0;l<i;l++)s[l]=0;return s},W.prototype.mulp=function(i,s,l){var b=2*this.guessLen13b(i.length,s.length),c=this.makeRBT(b),r=this.stub(b),f=new Array(b),L=new Array(b),C=new Array(b),H=new Array(b),Y=new Array(b),ee=new Array(b),ne=l.words;ne.length=b,this.convert13b(i.words,i.length,f,b),this.convert13b(s.words,s.length,H,b),this.transform(f,r,L,C,b,c),this.transform(H,r,Y,ee,b,c);for(var fe=0;fe<b;fe++){var te=L[fe]*Y[fe]-C[fe]*ee[fe];C[fe]=L[fe]*ee[fe]+C[fe]*Y[fe],L[fe]=te}return this.conjugate(L,C,b),this.transform(L,C,ne,r,b,c),this.conjugate(ne,r,b),this.normalize13b(ne,b),l.negative=i.negative^s.negative,l.length=i.length+s.length,l._strip()},o.prototype.mul=function(i){var s=new o(null);return s.words=new Array(this.length+i.length),this.mulTo(i,s)},o.prototype.mulf=function(i){var s=new o(null);return s.words=new Array(this.length+i.length),V(this,i,s)},o.prototype.imul=function(i){return this.clone().mulTo(i,this)},o.prototype.imuln=function(i){var s=i<0;s&&(i=-i),_("number"==typeof i),_(i<67108864);for(var l=0,b=0;b<this.length;b++){var c=(0|this.words[b])*i,r=(67108863&c)+(67108863&l);l>>=26,l+=c/67108864|0,l+=r>>>26,this.words[b]=67108863&r}return 0!==l&&(this.words[b]=l,this.length++),s?this.ineg():this},o.prototype.muln=function(i){return this.clone().imuln(i)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(i){var s=function T(a){for(var i=new Array(a.bitLength()),s=0;s<i.length;s++)i[s]=a.words[s/26|0]>>>s%26&1;return i}(i);if(0===s.length)return new o(1);for(var l=this,b=0;b<s.length&&0===s[b];b++,l=l.sqr());if(++b<s.length)for(var c=l.sqr();b<s.length;b++,c=c.sqr())0!==s[b]&&(l=l.mul(c));return l},o.prototype.iushln=function(i){_("number"==typeof i&&i>=0);var c,s=i%26,l=(i-s)/26,b=67108863>>>26-s<<26-s;if(0!==s){var r=0;for(c=0;c<this.length;c++){var f=this.words[c]&b;this.words[c]=(0|this.words[c])-f<<s|r,r=f>>>26-s}r&&(this.words[c]=r,this.length++)}if(0!==l){for(c=this.length-1;c>=0;c--)this.words[c+l]=this.words[c];for(c=0;c<l;c++)this.words[c]=0;this.length+=l}return this._strip()},o.prototype.ishln=function(i){return _(0===this.negative),this.iushln(i)},o.prototype.iushrn=function(i,s,l){var b;_("number"==typeof i&&i>=0),b=s?(s-s%26)/26:0;var c=i%26,r=Math.min((i-c)/26,this.length),f=67108863^67108863>>>c<<c,L=l;if(b-=r,b=Math.max(0,b),L){for(var C=0;C<r;C++)L.words[C]=this.words[C];L.length=r}if(0!==r)if(this.length>r)for(this.length-=r,C=0;C<this.length;C++)this.words[C]=this.words[C+r];else this.words[0]=0,this.length=1;var H=0;for(C=this.length-1;C>=0&&(0!==H||C>=b);C--){var Y=0|this.words[C];this.words[C]=H<<26-c|Y>>>c,H=Y&f}return L&&0!==H&&(L.words[L.length++]=H),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(i,s,l){return _(0===this.negative),this.iushrn(i,s,l)},o.prototype.shln=function(i){return this.clone().ishln(i)},o.prototype.ushln=function(i){return this.clone().iushln(i)},o.prototype.shrn=function(i){return this.clone().ishrn(i)},o.prototype.ushrn=function(i){return this.clone().iushrn(i)},o.prototype.testn=function(i){_("number"==typeof i&&i>=0);var s=i%26,l=(i-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},o.prototype.imaskn=function(i){_("number"==typeof i&&i>=0);var s=i%26,l=(i-s)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this._strip())},o.prototype.maskn=function(i){return this.clone().imaskn(i)},o.prototype.iaddn=function(i){return _("number"==typeof i),_(i<67108864),i<0?this.isubn(-i):0!==this.negative?1===this.length&&(0|this.words[0])<=i?(this.words[0]=i-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},o.prototype._iaddn=function(i){this.words[0]+=i;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},o.prototype.isubn=function(i){if(_("number"==typeof i),_(i<67108864),i<0)return this.iaddn(-i);if(0!==this.negative)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this._strip()},o.prototype.addn=function(i){return this.clone().iaddn(i)},o.prototype.subn=function(i){return this.clone().isubn(i)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(i,s,l){var c;this._expand(i.length+l);var r,f=0;for(c=0;c<i.length;c++){r=(0|this.words[c+l])+f;var L=(0|i.words[c])*s;f=((r-=67108863&L)>>26)-(L/67108864|0),this.words[c+l]=67108863&r}for(;c<this.length-l;c++)f=(r=(0|this.words[c+l])+f)>>26,this.words[c+l]=67108863&r;if(0===f)return this._strip();for(_(-1===f),f=0,c=0;c<this.length;c++)f=(r=-(0|this.words[c])+f)>>26,this.words[c]=67108863&r;return this.negative=1,this._strip()},o.prototype._wordDiv=function(i,s){var l,b=this.clone(),c=i,r=0|c.words[c.length-1];0!=(l=26-this._countBits(r))&&(c=c.ushln(l),b.iushln(l),r=0|c.words[c.length-1]);var C,L=b.length-c.length;if("mod"!==s){(C=new o(null)).length=L+1,C.words=new Array(C.length);for(var H=0;H<C.length;H++)C.words[H]=0}var Y=b.clone()._ishlnsubmul(c,1,L);0===Y.negative&&(b=Y,C&&(C.words[L]=1));for(var ee=L-1;ee>=0;ee--){var ne=67108864*(0|b.words[c.length+ee])+(0|b.words[c.length+ee-1]);for(ne=Math.min(ne/r|0,67108863),b._ishlnsubmul(c,ne,ee);0!==b.negative;)ne--,b.negative=0,b._ishlnsubmul(c,1,ee),b.isZero()||(b.negative^=1);C&&(C.words[ee]=ne)}return C&&C._strip(),b._strip(),"div"!==s&&0!==l&&b.iushrn(l),{div:C||null,mod:b}},o.prototype.divmod=function(i,s,l){return _(!i.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===i.negative?(r=this.neg().divmod(i,s),"mod"!==s&&(b=r.div.neg()),"div"!==s&&(c=r.mod.neg(),l&&0!==c.negative&&c.iadd(i)),{div:b,mod:c}):0===this.negative&&0!==i.negative?(r=this.divmod(i.neg(),s),"mod"!==s&&(b=r.div.neg()),{div:b,mod:r.mod}):0!=(this.negative&i.negative)?(r=this.neg().divmod(i.neg(),s),"div"!==s&&(c=r.mod.neg(),l&&0!==c.negative&&c.isub(i)),{div:r.div,mod:c}):i.length>this.length||this.cmp(i)<0?{div:new o(0),mod:this}:1===i.length?"div"===s?{div:this.divn(i.words[0]),mod:null}:"mod"===s?{div:null,mod:new o(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new o(this.modrn(i.words[0]))}:this._wordDiv(i,s);var b,c,r},o.prototype.div=function(i){return this.divmod(i,"div",!1).div},o.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},o.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},o.prototype.divRound=function(i){var s=this.divmod(i);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(i):s.mod,b=i.ushrn(1),c=i.andln(1),r=l.cmp(b);return r<0||1===c&&0===r?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},o.prototype.modrn=function(i){var s=i<0;s&&(i=-i),_(i<=67108863);for(var l=(1<<26)%i,b=0,c=this.length-1;c>=0;c--)b=(l*b+(0|this.words[c]))%i;return s?-b:b},o.prototype.modn=function(i){return this.modrn(i)},o.prototype.idivn=function(i){var s=i<0;s&&(i=-i),_(i<=67108863);for(var l=0,b=this.length-1;b>=0;b--){var c=(0|this.words[b])+67108864*l;this.words[b]=c/i|0,l=c%i}return this._strip(),s?this.ineg():this},o.prototype.divn=function(i){return this.clone().idivn(i)},o.prototype.egcd=function(i){_(0===i.negative),_(!i.isZero());var s=this,l=i.clone();s=0!==s.negative?s.umod(i):s.clone();for(var b=new o(1),c=new o(0),r=new o(0),f=new o(1),L=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++L;for(var C=l.clone(),H=s.clone();!s.isZero();){for(var Y=0,ee=1;0==(s.words[0]&ee)&&Y<26;++Y,ee<<=1);if(Y>0)for(s.iushrn(Y);Y-- >0;)(b.isOdd()||c.isOdd())&&(b.iadd(C),c.isub(H)),b.iushrn(1),c.iushrn(1);for(var ne=0,fe=1;0==(l.words[0]&fe)&&ne<26;++ne,fe<<=1);if(ne>0)for(l.iushrn(ne);ne-- >0;)(r.isOdd()||f.isOdd())&&(r.iadd(C),f.isub(H)),r.iushrn(1),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),b.isub(r),c.isub(f)):(l.isub(s),r.isub(b),f.isub(c))}return{a:r,b:f,gcd:l.iushln(L)}},o.prototype._invmp=function(i){_(0===i.negative),_(!i.isZero());var Y,s=this,l=i.clone();s=0!==s.negative?s.umod(i):s.clone();for(var b=new o(1),c=new o(0),r=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var f=0,L=1;0==(s.words[0]&L)&&f<26;++f,L<<=1);if(f>0)for(s.iushrn(f);f-- >0;)b.isOdd()&&b.iadd(r),b.iushrn(1);for(var C=0,H=1;0==(l.words[0]&H)&&C<26;++C,H<<=1);if(C>0)for(l.iushrn(C);C-- >0;)c.isOdd()&&c.iadd(r),c.iushrn(1);s.cmp(l)>=0?(s.isub(l),b.isub(c)):(l.isub(s),c.isub(b))}return(Y=0===s.cmpn(1)?b:c).cmpn(0)<0&&Y.iadd(i),Y},o.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var s=this.clone(),l=i.clone();s.negative=0,l.negative=0;for(var b=0;s.isEven()&&l.isEven();b++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var c=s.cmp(l);if(c<0){var r=s;s=l,l=r}else if(0===c||0===l.cmpn(1))break;s.isub(l)}return l.iushln(b)},o.prototype.invm=function(i){return this.egcd(i).a.umod(i)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(i){return this.words[0]&i},o.prototype.bincn=function(i){_("number"==typeof i);var s=i%26,l=(i-s)/26,b=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=b,this;for(var c=b,r=l;0!==c&&r<this.length;r++){var f=0|this.words[r];c=(f+=c)>>>26,this.words[r]=f&=67108863}return 0!==c&&(this.words[r]=c,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(i){var l,s=i<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this._strip(),this.length>1)l=1;else{s&&(i=-i),_(i<=67108863,"Number is too big");var b=0|this.words[0];l=b===i?0:b<i?-1:1}return 0!==this.negative?0|-l:l},o.prototype.cmp=function(i){if(0!==this.negative&&0===i.negative)return-1;if(0===this.negative&&0!==i.negative)return 1;var s=this.ucmp(i);return 0!==this.negative?0|-s:s},o.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var b=0|this.words[l],c=0|i.words[l];if(b!==c){b<c?s=-1:b>c&&(s=1);break}}return s},o.prototype.gtn=function(i){return 1===this.cmpn(i)},o.prototype.gt=function(i){return 1===this.cmp(i)},o.prototype.gten=function(i){return this.cmpn(i)>=0},o.prototype.gte=function(i){return this.cmp(i)>=0},o.prototype.ltn=function(i){return-1===this.cmpn(i)},o.prototype.lt=function(i){return-1===this.cmp(i)},o.prototype.lten=function(i){return this.cmpn(i)<=0},o.prototype.lte=function(i){return this.cmp(i)<=0},o.prototype.eqn=function(i){return 0===this.cmpn(i)},o.prototype.eq=function(i){return 0===this.cmp(i)},o.red=function(i){return new t(i)},o.prototype.toRed=function(i){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),i.convertTo(this)._forceRed(i)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(i){return this.red=i,this},o.prototype.forceRed=function(i){return _(!this.red,"Already a number in reduction context"),this._forceRed(i)},o.prototype.redAdd=function(i){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},o.prototype.redIAdd=function(i){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},o.prototype.redSub=function(i){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},o.prototype.redISub=function(i){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},o.prototype.redShl=function(i){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},o.prototype.redMul=function(i){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},o.prototype.redIMul=function(i){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(i){return _(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var J={k256:null,p224:null,p192:null,p25519:null};function K(a,i){this.name=a,this.p=new o(i,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function P(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function z(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function u(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function t(a){if("string"==typeof a){var i=o._prime(a);this.m=i.p,this.prime=i}else _(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}function n(a){t.call(this,a),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}K.prototype._tmp=function(){var i=new o(null);return i.words=new Array(Math.ceil(this.n/13)),i},K.prototype.ireduce=function(i){var l,s=i;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var b=l<this.n?-1:s.ucmp(this.p);return 0===b?(s.words[0]=0,s.length=1):b>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},K.prototype.split=function(i,s){i.iushrn(this.n,0,s)},K.prototype.imulK=function(i){return i.imul(this.k)},w(P,K),P.prototype.split=function(i,s){for(var l=4194303,b=Math.min(i.length,9),c=0;c<b;c++)s.words[c]=i.words[c];if(s.length=b,i.length<=9)return i.words[0]=0,void(i.length=1);var r=i.words[9];for(s.words[s.length++]=r&l,c=10;c<i.length;c++){var f=0|i.words[c];i.words[c-10]=(f&l)<<4|r>>>22,r=f}i.words[c-10]=r>>>=22,i.length-=0===r&&i.length>10?10:9},P.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var s=0,l=0;l<i.length;l++){var b=0|i.words[l];i.words[l]=67108863&(s+=977*b),s=64*b+(s/67108864|0)}return 0===i.words[i.length-1]&&(i.length--,0===i.words[i.length-1]&&i.length--),i},w(S,K),w(z,K),w(u,K),u.prototype.imulK=function(i){for(var s=0,l=0;l<i.length;l++){var b=19*(0|i.words[l])+s,c=67108863&b;b>>>=26,i.words[l]=c,s=b}return 0!==s&&(i.words[i.length++]=s),i},o._prime=function(i){if(J[i])return J[i];var s;if("k256"===i)s=new P;else if("p224"===i)s=new S;else if("p192"===i)s=new z;else{if("p25519"!==i)throw new Error("Unknown prime "+i);s=new u}return J[i]=s,s},t.prototype._verify1=function(i){_(0===i.negative,"red works only with positives"),_(i.red,"red works only with red numbers")},t.prototype._verify2=function(i,s){_(0==(i.negative|s.negative),"red works only with positives"),_(i.red&&i.red===s.red,"red works only with red numbers")},t.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(d(i,i.umod(this.m)._forceRed(this)),i)},t.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},t.prototype.add=function(i,s){this._verify2(i,s);var l=i.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},t.prototype.iadd=function(i,s){this._verify2(i,s);var l=i.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},t.prototype.sub=function(i,s){this._verify2(i,s);var l=i.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},t.prototype.isub=function(i,s){this._verify2(i,s);var l=i.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},t.prototype.shl=function(i,s){return this._verify1(i),this.imod(i.ushln(s))},t.prototype.imul=function(i,s){return this._verify2(i,s),this.imod(i.imul(s))},t.prototype.mul=function(i,s){return this._verify2(i,s),this.imod(i.mul(s))},t.prototype.isqr=function(i){return this.imul(i,i.clone())},t.prototype.sqr=function(i){return this.mul(i,i)},t.prototype.sqrt=function(i){if(i.isZero())return i.clone();var s=this.m.andln(3);if(_(s%2==1),3===s){var l=this.m.add(new o(1)).iushrn(2);return this.pow(i,l)}for(var b=this.m.subn(1),c=0;!b.isZero()&&0===b.andln(1);)c++,b.iushrn(1);_(!b.isZero());var r=new o(1).toRed(this),f=r.redNeg(),L=this.m.subn(1).iushrn(1),C=this.m.bitLength();for(C=new o(2*C*C).toRed(this);0!==this.pow(C,L).cmp(f);)C.redIAdd(f);for(var H=this.pow(C,b),Y=this.pow(i,b.addn(1).iushrn(1)),ee=this.pow(i,b),ne=c;0!==ee.cmp(r);){for(var fe=ee,te=0;0!==fe.cmp(r);te++)fe=fe.redSqr();_(te<ne);var oe=this.pow(H,new o(1).iushln(ne-te-1));Y=Y.redMul(oe),H=oe.redSqr(),ee=ee.redMul(H),ne=te}return Y},t.prototype.invm=function(i){var s=i._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},t.prototype.pow=function(i,s){if(s.isZero())return new o(1).toRed(this);if(0===s.cmpn(1))return i.clone();var b=new Array(16);b[0]=new o(1).toRed(this),b[1]=i;for(var c=2;c<b.length;c++)b[c]=this.mul(b[c-1],i);var r=b[0],f=0,L=0,C=s.bitLength()%26;for(0===C&&(C=26),c=s.length-1;c>=0;c--){for(var H=s.words[c],Y=C-1;Y>=0;Y--){var ee=H>>Y&1;r!==b[0]&&(r=this.sqr(r)),0!==ee||0!==f?(f<<=1,f|=ee,(4==++L||0===c&&0===Y)&&(r=this.mul(r,b[f]),L=0,f=0)):L=0}C=26}return r},t.prototype.convertTo=function(i){var s=i.umod(this.m);return s===i?s.clone():s},t.prototype.convertFrom=function(i){var s=i.clone();return s.red=null,s},o.mont=function(i){return new n(i)},w(n,t),n.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},n.prototype.convertFrom=function(i){var s=this.imod(i.mul(this.rinv));return s.red=null,s},n.prototype.imul=function(i,s){if(i.isZero()||s.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(s),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=l.isub(b).iushrn(this.shift),r=c;return c.cmp(this.m)>=0?r=c.isub(this.m):c.cmpn(0)<0&&(r=c.iadd(this.m)),r._forceRed(this)},n.prototype.mul=function(i,s){if(i.isZero()||s.isZero())return new o(0)._forceRed(this);var l=i.mul(s),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=l.isub(b).iushrn(this.shift),r=c;return c.cmp(this.m)>=0?r=c.isub(this.m):c.cmpn(0)<0&&(r=c.iadd(this.m)),r._forceRed(this)},n.prototype.invm=function(i){return this.imod(i._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},7950:(Z,q,N)=>{var x;function O(w){this.rand=w}if(Z.exports=function(o){return x||(x=new O(null)),x.generate(o)},Z.exports.Rand=O,O.prototype.generate=function(o){return this._rand(o)},O.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var p=new Uint8Array(o),y=0;y<p.length;y++)p[y]=this.rand.getByte();return p},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?O.prototype._rand=function(o){var p=new Uint8Array(o);return self.crypto.getRandomValues(p),p}:self.msCrypto&&self.msCrypto.getRandomValues?O.prototype._rand=function(o){var p=new Uint8Array(o);return self.msCrypto.getRandomValues(p),p}:"object"==typeof window&&(O.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _=N(1348);if("function"!=typeof _.randomBytes)throw new Error("Not supported");O.prototype._rand=function(o){return _.randomBytes(o)}}catch(w){}},1899:(Z,q,N)=>{var x=N(3502).Buffer;function O(v){x.isBuffer(v)||(v=x.from(v));for(var h=v.length/4|0,d=new Array(h),m=0;m<h;m++)d[m]=v.readUInt32BE(4*m);return d}function _(v){for(;0<v.length;v++)v[0]=0}function w(v,h,d,m,M){for(var W,J,K,P,g=d[0],E=d[1],R=d[2],T=d[3],k=v[0]^h[0],I=v[1]^h[1],U=v[2]^h[2],V=v[3]^h[3],S=4,z=1;z<M;z++)W=g[k>>>24]^E[I>>>16&255]^R[U>>>8&255]^T[255&V]^h[S++],J=g[I>>>24]^E[U>>>16&255]^R[V>>>8&255]^T[255&k]^h[S++],K=g[U>>>24]^E[V>>>16&255]^R[k>>>8&255]^T[255&I]^h[S++],P=g[V>>>24]^E[k>>>16&255]^R[I>>>8&255]^T[255&U]^h[S++],k=W,I=J,U=K,V=P;return W=(m[k>>>24]<<24|m[I>>>16&255]<<16|m[U>>>8&255]<<8|m[255&V])^h[S++],J=(m[I>>>24]<<24|m[U>>>16&255]<<16|m[V>>>8&255]<<8|m[255&k])^h[S++],K=(m[U>>>24]<<24|m[V>>>16&255]<<16|m[k>>>8&255]<<8|m[255&I])^h[S++],P=(m[V>>>24]<<24|m[k>>>16&255]<<16|m[I>>>8&255]<<8|m[255&U])^h[S++],[W>>>=0,J>>>=0,K>>>=0,P>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],p=function(){for(var v=new Array(256),h=0;h<256;h++)v[h]=h<128?h<<1:h<<1^283;for(var d=[],m=[],M=[[],[],[],[]],g=[[],[],[],[]],E=0,R=0,T=0;T<256;++T){var k=R^R<<1^R<<2^R<<3^R<<4;d[E]=k=k>>>8^255&k^99,m[k]=E;var I=v[E],U=v[I],V=v[U],W=257*v[k]^16843008*k;M[0][E]=W<<24|W>>>8,M[1][E]=W<<16|W>>>16,M[2][E]=W<<8|W>>>24,M[3][E]=W,g[0][k]=(W=16843009*V^65537*U^257*I^16843008*E)<<24|W>>>8,g[1][k]=W<<16|W>>>16,g[2][k]=W<<8|W>>>24,g[3][k]=W,0===E?E=R=1:(E=I^v[v[v[V^I]]],R^=v[v[R]])}return{SBOX:d,INV_SBOX:m,SUB_MIX:M,INV_SUB_MIX:g}}();function y(v){this._key=O(v),this._reset()}y.blockSize=16,y.keySize=32,y.prototype.blockSize=y.blockSize,y.prototype.keySize=y.keySize,y.prototype._reset=function(){for(var v=this._key,h=v.length,d=h+6,m=4*(d+1),M=[],g=0;g<h;g++)M[g]=v[g];for(g=h;g<m;g++){var E=M[g-1];g%h==0?(E=p.SBOX[(E=E<<8|E>>>24)>>>24]<<24|p.SBOX[E>>>16&255]<<16|p.SBOX[E>>>8&255]<<8|p.SBOX[255&E],E^=o[g/h|0]<<24):h>6&&g%h==4&&(E=p.SBOX[E>>>24]<<24|p.SBOX[E>>>16&255]<<16|p.SBOX[E>>>8&255]<<8|p.SBOX[255&E]),M[g]=M[g-h]^E}for(var R=[],T=0;T<m;T++){var k=m-T,I=M[k-(T%4?0:4)];R[T]=T<4||k<=4?I:p.INV_SUB_MIX[0][p.SBOX[I>>>24]]^p.INV_SUB_MIX[1][p.SBOX[I>>>16&255]]^p.INV_SUB_MIX[2][p.SBOX[I>>>8&255]]^p.INV_SUB_MIX[3][p.SBOX[255&I]]}this._nRounds=d,this._keySchedule=M,this._invKeySchedule=R},y.prototype.encryptBlockRaw=function(v){return w(v=O(v),this._keySchedule,p.SUB_MIX,p.SBOX,this._nRounds)},y.prototype.encryptBlock=function(v){var h=this.encryptBlockRaw(v),d=x.allocUnsafe(16);return d.writeUInt32BE(h[0],0),d.writeUInt32BE(h[1],4),d.writeUInt32BE(h[2],8),d.writeUInt32BE(h[3],12),d},y.prototype.decryptBlock=function(v){var h=(v=O(v))[1];v[1]=v[3],v[3]=h;var d=w(v,this._invKeySchedule,p.INV_SUB_MIX,p.INV_SBOX,this._nRounds),m=x.allocUnsafe(16);return m.writeUInt32BE(d[0],0),m.writeUInt32BE(d[3],4),m.writeUInt32BE(d[2],8),m.writeUInt32BE(d[1],12),m},y.prototype.scrub=function(){_(this._keySchedule),_(this._invKeySchedule),_(this._key)},Z.exports.AES=y},9382:(Z,q,N)=>{var x=N(1899),O=N(3502).Buffer,_=N(1052),w=N(3894),o=N(8857),p=N(8789),y=N(7968);function d(m,M,g,E){_.call(this);var R=O.alloc(4,0);this._cipher=new x.AES(M);var T=this._cipher.encryptBlock(R);this._ghash=new o(T),g=function h(m,M,g){if(12===M.length)return m._finID=O.concat([M,O.from([0,0,0,1])]),O.concat([M,O.from([0,0,0,2])]);var E=new o(g),R=M.length,T=R%16;E.update(M),T&&E.update(O.alloc(T=16-T,0)),E.update(O.alloc(8,0));var k=8*R,I=O.alloc(8);I.writeUIntBE(k,0,8),E.update(I),m._finID=E.state;var U=O.from(m._finID);return y(U),U}(this,g,T),this._prev=O.from(g),this._cache=O.allocUnsafe(0),this._secCache=O.allocUnsafe(0),this._decrypt=E,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}w(d,_),d.prototype._update=function(m){if(!this._called&&this._alen){var M=16-this._alen%16;M<16&&(M=O.alloc(M,0),this._ghash.update(M))}this._called=!0;var g=this._mode.encrypt(this,m);return this._ghash.update(this._decrypt?m:g),this._len+=m.length,g},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=p(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function v(m,M){var g=0;m.length!==M.length&&g++;for(var E=Math.min(m.length,M.length),R=0;R<E;++R)g+=m[R]^M[R];return g}(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!O.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(M){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=M},d.prototype.setAAD=function(M){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(M),this._alen+=M.length},Z.exports=d},4330:(Z,q,N)=>{var x=N(6900),O=N(856),_=N(4946);q.createCipher=q.Cipher=x.createCipher,q.createCipheriv=q.Cipheriv=x.createCipheriv,q.createDecipher=q.Decipher=O.createDecipher,q.createDecipheriv=q.Decipheriv=O.createDecipheriv,q.listCiphers=q.getCiphers=function w(){return Object.keys(_)}},856:(Z,q,N)=>{var x=N(9382),O=N(3502).Buffer,_=N(9171),w=N(8441),o=N(1052),p=N(1899),y=N(347);function h(E,R,T){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new p.AES(R),this._prev=O.from(T),this._mode=E,this._autopadding=!0}function d(){this.cache=O.allocUnsafe(0)}function M(E,R,T){var k=_[E.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof T&&(T=O.from(T)),"GCM"!==k.mode&&T.length!==k.iv)throw new TypeError("invalid iv length "+T.length);if("string"==typeof R&&(R=O.from(R)),R.length!==k.key/8)throw new TypeError("invalid key length "+R.length);return"stream"===k.type?new w(k.module,R,T,!0):"auth"===k.type?new x(k.module,R,T,!0):new h(k.module,R,T)}N(3894)(h,o),h.prototype._update=function(E){this._cache.add(E);for(var R,T,k=[];R=this._cache.get(this._autopadding);)T=this._mode.decrypt(this,R),k.push(T);return O.concat(k)},h.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return function m(E){var R=E[15];if(R<1||R>16)throw new Error("unable to decrypt data");for(var T=-1;++T<R;)if(E[T+(16-R)]!==R)throw new Error("unable to decrypt data");if(16!==R)return E.slice(0,16-R)}(this._mode.decrypt(this,E));if(E)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this},d.prototype.add=function(E){this.cache=O.concat([this.cache,E])},d.prototype.get=function(E){var R;if(E){if(this.cache.length>16)return R=this.cache.slice(0,16),this.cache=this.cache.slice(16),R}else if(this.cache.length>=16)return R=this.cache.slice(0,16),this.cache=this.cache.slice(16),R;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},q.createDecipher=function g(E,R){var T=_[E.toLowerCase()];if(!T)throw new TypeError("invalid suite type");var k=y(R,!1,T.key,T.iv);return M(E,k.key,k.iv)},q.createDecipheriv=M},6900:(Z,q,N)=>{var x=N(9171),O=N(9382),_=N(3502).Buffer,w=N(8441),o=N(1052),p=N(1899),y=N(347);function h(E,R,T){o.call(this),this._cache=new m,this._cipher=new p.AES(R),this._prev=_.from(T),this._mode=E,this._autopadding=!0}N(3894)(h,o),h.prototype._update=function(E){this._cache.add(E);for(var R,T,k=[];R=this._cache.get();)T=this._mode.encrypt(this,R),k.push(T);return _.concat(k)};var d=_.alloc(16,16);function m(){this.cache=_.allocUnsafe(0)}function M(E,R,T){var k=x[E.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof R&&(R=_.from(R)),R.length!==k.key/8)throw new TypeError("invalid key length "+R.length);if("string"==typeof T&&(T=_.from(T)),"GCM"!==k.mode&&T.length!==k.iv)throw new TypeError("invalid iv length "+T.length);return"stream"===k.type?new w(k.module,R,T):"auth"===k.type?new O(k.module,R,T):new h(k.module,R,T)}h.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return E=this._mode.encrypt(this,E),this._cipher.scrub(),E;if(!E.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this},m.prototype.add=function(E){this.cache=_.concat([this.cache,E])},m.prototype.get=function(){if(this.cache.length>15){var E=this.cache.slice(0,16);return this.cache=this.cache.slice(16),E}return null},m.prototype.flush=function(){for(var E=16-this.cache.length,R=_.allocUnsafe(E),T=-1;++T<E;)R.writeUInt8(E,T);return _.concat([this.cache,R])},q.createCipheriv=M,q.createCipher=function g(E,R){var T=x[E.toLowerCase()];if(!T)throw new TypeError("invalid suite type");var k=y(R,!1,T.key,T.iv);return M(E,k.key,k.iv)}},8857:(Z,q,N)=>{var x=N(3502).Buffer,O=x.alloc(16,0);function w(p){var y=x.allocUnsafe(16);return y.writeUInt32BE(p[0]>>>0,0),y.writeUInt32BE(p[1]>>>0,4),y.writeUInt32BE(p[2]>>>0,8),y.writeUInt32BE(p[3]>>>0,12),y}function o(p){this.h=p,this.state=x.alloc(16,0),this.cache=x.allocUnsafe(0)}o.prototype.ghash=function(p){for(var y=-1;++y<p.length;)this.state[y]^=p[y];this._multiply()},o.prototype._multiply=function(){for(var v,d,p=function _(p){return[p.readUInt32BE(0),p.readUInt32BE(4),p.readUInt32BE(8),p.readUInt32BE(12)]}(this.h),y=[0,0,0,0],m=-1;++m<128;){for(0!=(this.state[~~(m/8)]&1<<7-m%8)&&(y[0]^=p[0],y[1]^=p[1],y[2]^=p[2],y[3]^=p[3]),d=0!=(1&p[3]),v=3;v>0;v--)p[v]=p[v]>>>1|(1&p[v-1])<<31;p[0]=p[0]>>>1,d&&(p[0]=p[0]^225<<24)}this.state=w(y)},o.prototype.update=function(p){this.cache=x.concat([this.cache,p]);for(var y;this.cache.length>=16;)y=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(y)},o.prototype.final=function(p,y){return this.cache.length&&this.ghash(x.concat([this.cache,O],16)),this.ghash(w([0,p,0,y])),this.state},Z.exports=o},7968:Z=>{Z.exports=function q(N){for(var O,x=N.length;x--;){if(255!==(O=N.readUInt8(x))){O++,N.writeUInt8(O,x);break}N.writeUInt8(0,x)}}},4903:(Z,q,N)=>{var x=N(8789);q.encrypt=function(O,_){var w=x(_,O._prev);return O._prev=O._cipher.encryptBlock(w),O._prev},q.decrypt=function(O,_){var w=O._prev;O._prev=_;var o=O._cipher.decryptBlock(_);return x(o,w)}},9885:(Z,q,N)=>{var x=N(3502).Buffer,O=N(8789);function _(w,o,p){var y=o.length,v=O(o,w._cache);return w._cache=w._cache.slice(y),w._prev=x.concat([w._prev,p?o:v]),v}q.encrypt=function(w,o,p){for(var v,y=x.allocUnsafe(0);o.length;){if(0===w._cache.length&&(w._cache=w._cipher.encryptBlock(w._prev),w._prev=x.allocUnsafe(0)),!(w._cache.length<=o.length)){y=x.concat([y,_(w,o,p)]);break}y=x.concat([y,_(w,o.slice(0,v=w._cache.length),p)]),o=o.slice(v)}return y}},6531:(Z,q,N)=>{var x=N(3502).Buffer;function O(w,o,p){for(var m,M,v=-1,d=0;++v<8;)d+=(128&(M=w._cipher.encryptBlock(w._prev)[0]^(m=o&1<<7-v?128:0)))>>v%8,w._prev=_(w._prev,p?m:M);return d}function _(w,o){var p=w.length,y=-1,v=x.allocUnsafe(w.length);for(w=x.concat([w,x.from([o])]);++y<p;)v[y]=w[y]<<1|w[y+1]>>7;return v}q.encrypt=function(w,o,p){for(var y=o.length,v=x.allocUnsafe(y),h=-1;++h<y;)v[h]=O(w,o[h],p);return v}},1641:(Z,q,N)=>{var x=N(3502).Buffer;function O(_,w,o){var y=_._cipher.encryptBlock(_._prev)[0]^w;return _._prev=x.concat([_._prev.slice(1),x.from([o?w:y])]),y}q.encrypt=function(_,w,o){for(var p=w.length,y=x.allocUnsafe(p),v=-1;++v<p;)y[v]=O(_,w[v],o);return y}},1150:(Z,q,N)=>{var x=N(8789),O=N(3502).Buffer,_=N(7968);function w(p){var y=p._cipher.encryptBlockRaw(p._prev);return _(p._prev),y}q.encrypt=function(p,y){var v=Math.ceil(y.length/16),h=p._cache.length;p._cache=O.concat([p._cache,O.allocUnsafe(16*v)]);for(var d=0;d<v;d++){var m=w(p),M=h+16*d;p._cache.writeUInt32BE(m[0],M+0),p._cache.writeUInt32BE(m[1],M+4),p._cache.writeUInt32BE(m[2],M+8),p._cache.writeUInt32BE(m[3],M+12)}var g=p._cache.slice(0,y.length);return p._cache=p._cache.slice(y.length),x(y,g)}},1704:(Z,q)=>{q.encrypt=function(N,x){return N._cipher.encryptBlock(x)},q.decrypt=function(N,x){return N._cipher.decryptBlock(x)}},9171:(Z,q,N)=>{var x={ECB:N(1704),CBC:N(4903),CFB:N(9885),CFB8:N(1641),CFB1:N(6531),OFB:N(6816),CTR:N(1150),GCM:N(1150)},O=N(4946);for(var _ in O)O[_].module=x[O[_].mode];Z.exports=O},6816:(Z,q,N)=>{var x=N(8789);function O(_){return _._prev=_._cipher.encryptBlock(_._prev),_._prev}q.encrypt=function(_,w){for(;_._cache.length<w.length;)_._cache=Buffer.concat([_._cache,O(_)]);var o=_._cache.slice(0,w.length);return _._cache=_._cache.slice(w.length),x(w,o)}},8441:(Z,q,N)=>{var x=N(1899),O=N(3502).Buffer,_=N(1052);function o(p,y,v,h){_.call(this),this._cipher=new x.AES(y),this._prev=O.from(v),this._cache=O.allocUnsafe(0),this._secCache=O.allocUnsafe(0),this._decrypt=h,this._mode=p}N(3894)(o,_),o.prototype._update=function(p){return this._mode.encrypt(this,p,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},Z.exports=o},5255:(Z,q,N)=>{var x=N(9004),O=N(4330),_=N(9171),w=N(1115),o=N(347);function v(m,M,g){if(m=m.toLowerCase(),_[m])return O.createCipheriv(m,M,g);if(w[m])return new x({key:M,iv:g,mode:m});throw new TypeError("invalid suite type")}function h(m,M,g){if(m=m.toLowerCase(),_[m])return O.createDecipheriv(m,M,g);if(w[m])return new x({key:M,iv:g,mode:m,decrypt:!0});throw new TypeError("invalid suite type")}q.createCipher=q.Cipher=function p(m,M){var g,E;if(m=m.toLowerCase(),_[m])g=_[m].key,E=_[m].iv;else{if(!w[m])throw new TypeError("invalid suite type");g=8*w[m].key,E=w[m].iv}var R=o(M,!1,g,E);return v(m,R.key,R.iv)},q.createCipheriv=q.Cipheriv=v,q.createDecipher=q.Decipher=function y(m,M){var g,E;if(m=m.toLowerCase(),_[m])g=_[m].key,E=_[m].iv;else{if(!w[m])throw new TypeError("invalid suite type");g=8*w[m].key,E=w[m].iv}var R=o(M,!1,g,E);return h(m,R.key,R.iv)},q.createDecipheriv=q.Decipheriv=h,q.listCiphers=q.getCiphers=function d(){return Object.keys(w).concat(O.getCiphers())}},9004:(Z,q,N)=>{var x=N(1052),O=N(3684),_=N(3894),w=N(3502).Buffer,o={"des-ede3-cbc":O.CBC.instantiate(O.EDE),"des-ede3":O.EDE,"des-ede-cbc":O.CBC.instantiate(O.EDE),"des-ede":O.EDE,"des-cbc":O.CBC.instantiate(O.DES),"des-ecb":O.DES};function p(y){x.call(this);var d,v=y.mode.toLowerCase(),h=o[v];d=y.decrypt?"decrypt":"encrypt";var m=y.key;w.isBuffer(m)||(m=w.from(m)),("des-ede"===v||"des-ede-cbc"===v)&&(m=w.concat([m,m.slice(0,8)]));var M=y.iv;w.isBuffer(M)||(M=w.from(M)),this._des=h.create({key:m,iv:M,type:d})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],Z.exports=p,_(p,x),p.prototype._update=function(y){return w.from(this._des.update(y))},p.prototype._final=function(){return w.from(this._des.final())}},1115:(Z,q)=>{q["des-ecb"]={key:8,iv:0},q["des-cbc"]=q.des={key:8,iv:8},q["des-ede3-cbc"]=q.des3={key:24,iv:8},q["des-ede3"]={key:24,iv:0},q["des-ede-cbc"]={key:16,iv:8},q["des-ede"]={key:16,iv:0}},8466:(Z,q,N)=>{var x=N(8538),O=N(3753);function w(p){var v,y=p.modulus.byteLength();do{v=new x(O(y))}while(v.cmp(p.modulus)>=0||!v.umod(p.prime1)||!v.umod(p.prime2));return v}function o(p,y){var v=function _(p){var y=w(p);return{blinder:y.toRed(x.mont(p.modulus)).redPow(new x(p.publicExponent)).fromRed(),unblinder:y.invm(p.modulus)}}(y),h=y.modulus.byteLength(),d=new x(p).mul(v.blinder).umod(y.modulus),m=d.toRed(x.mont(y.prime1)),M=d.toRed(x.mont(y.prime2)),g=y.coefficient,E=y.prime1,R=y.prime2,T=m.redPow(y.exponent1).fromRed(),k=M.redPow(y.exponent2).fromRed(),I=T.isub(k).imul(g).umod(E).imul(R);return k.iadd(I).imul(v.unblinder).umod(y.modulus).toArrayLike(Buffer,"be",h)}o.getr=w,Z.exports=o},7793:(Z,q,N)=>{Z.exports=N(5207)},3923:(Z,q,N)=>{var x=N(8446).Buffer,O=N(6386),_=N(5685),w=N(3894),o=N(9947),p=N(3946),y=N(5207);function v(M){_.Writable.call(this);var g=y[M];if(!g)throw new Error("Unknown message digest");this._hashType=g.hash,this._hash=O(g.hash),this._tag=g.id,this._signType=g.sign}function h(M){_.Writable.call(this);var g=y[M];if(!g)throw new Error("Unknown message digest");this._hash=O(g.hash),this._tag=g.id,this._signType=g.sign}function d(M){return new v(M)}function m(M){return new h(M)}Object.keys(y).forEach(function(M){y[M].id=x.from(y[M].id,"hex"),y[M.toLowerCase()]=y[M]}),w(v,_.Writable),v.prototype._write=function(g,E,R){this._hash.update(g),R()},v.prototype.update=function(g,E){return"string"==typeof g&&(g=x.from(g,E)),this._hash.update(g),this},v.prototype.sign=function(g,E){this.end();var R=this._hash.digest(),T=o(R,g,this._hashType,this._signType,this._tag);return E?T.toString(E):T},w(h,_.Writable),h.prototype._write=function(g,E,R){this._hash.update(g),R()},h.prototype.update=function(g,E){return"string"==typeof g&&(g=x.from(g,E)),this._hash.update(g),this},h.prototype.verify=function(g,E,R){"string"==typeof E&&(E=x.from(E,R)),this.end();var T=this._hash.digest();return p(E,T,g,this._signType,this._tag)},Z.exports={Sign:d,Verify:m,createSign:d,createVerify:m}},9947:(Z,q,N)=>{var x=N(8446).Buffer,O=N(4529),_=N(8466),w=N(7715).ec,o=N(8538),p=N(2772),y=N(1308);function M(k,I,U,V){if((k=x.from(k.toArray())).length<I.byteLength()){var W=x.alloc(I.byteLength()-k.length);k=x.concat([W,k])}var J=U.length,K=function E(k,I){k=(k=g(k,I)).mod(I);var U=x.from(k.toArray());if(U.length<I.byteLength()){var V=x.alloc(I.byteLength()-U.length);U=x.concat([V,U])}return U}(U,I),P=x.alloc(J);P.fill(1);var S=x.alloc(J);return S=O(V,S).update(P).update(x.from([0])).update(k).update(K).digest(),P=O(V,S).update(P).digest(),{k:S=O(V,S).update(P).update(x.from([1])).update(k).update(K).digest(),v:P=O(V,S).update(P).digest()}}function g(k,I){var U=new o(k),V=(k.length<<3)-I.bitLength();return V>0&&U.ishrn(V),U}function R(k,I,U){var V,W;do{for(V=x.alloc(0);8*V.length<k.bitLength();)I.v=O(U,I.k).update(I.v).digest(),V=x.concat([V,I.v]);W=g(V,k),I.k=O(U,I.k).update(I.v).update(x.from([0])).digest(),I.v=O(U,I.k).update(I.v).digest()}while(-1!==W.cmp(k));return W}function T(k,I,U,V){return k.toRed(o.mont(U)).redPow(I).fromRed().mod(V)}Z.exports=function v(k,I,U,V,W){var J=p(I);if(J.curve){if("ecdsa"!==V&&"ecdsa/rsa"!==V)throw new Error("wrong private key type");return function h(k,I){var U=y[I.curve.join(".")];if(!U)throw new Error("unknown curve "+I.curve.join("."));var J=new w(U).keyFromPrivate(I.privateKey).sign(k);return x.from(J.toDER())}(k,J)}if("dsa"===J.type){if("dsa"!==V)throw new Error("wrong private key type");return function d(k,I,U){for(var S,V=I.params.priv_key,W=I.params.p,J=I.params.q,K=I.params.g,P=new o(0),z=g(k,J).mod(J),u=!1,t=M(V,J,k,U);!1===u;)P=T(K,S=R(J,t,U),W,J),0===(u=S.invm(J).imul(z.add(V.mul(P))).mod(J)).cmpn(0)&&(u=!1,P=new o(0));return function m(k,I){k=k.toArray(),I=I.toArray(),128&k[0]&&(k=[0].concat(k)),128&I[0]&&(I=[0].concat(I));var V=[48,k.length+I.length+4,2,k.length];return V=V.concat(k,[2,I.length],I),x.from(V)}(P,u)}(k,J,U)}if("rsa"!==V&&"ecdsa/rsa"!==V)throw new Error("wrong private key type");k=x.concat([W,k]);for(var K=J.modulus.byteLength(),P=[0,1];k.length+P.length+1<K;)P.push(255);P.push(0);for(var S=-1;++S<k.length;)P.push(k[S]);return _(P,J)},Z.exports.getKey=M,Z.exports.makeKey=R},3946:(Z,q,N)=>{var x=N(8446).Buffer,O=N(8538),_=N(7715).ec,w=N(2772),o=N(1308);function h(d,m){if(d.cmpn(0)<=0)throw new Error("invalid sig");if(d.cmp(m)>=m)throw new Error("invalid sig")}Z.exports=function p(d,m,M,g,E){var R=w(M);if("ec"===R.type){if("ecdsa"!==g&&"ecdsa/rsa"!==g)throw new Error("wrong public key type");return function y(d,m,M){var g=o[M.data.algorithm.curve.join(".")];if(!g)throw new Error("unknown curve "+M.data.algorithm.curve.join("."));return new _(g).verify(m,d,M.data.subjectPrivateKey.data)}(d,m,R)}if("dsa"===R.type){if("dsa"!==g)throw new Error("wrong public key type");return function v(d,m,M){var g=M.data.p,E=M.data.q,R=M.data.g,T=M.data.pub_key,k=w.signature.decode(d,"der"),I=k.s,U=k.r;h(I,E),h(U,E);var V=O.mont(g),W=I.invm(E);return 0===R.toRed(V).redPow(new O(m).mul(W).mod(E)).fromRed().mul(T.toRed(V).redPow(U.mul(W).mod(E)).fromRed()).mod(g).mod(E).cmp(U)}(d,m,R)}if("rsa"!==g&&"ecdsa/rsa"!==g)throw new Error("wrong public key type");m=x.concat([E,m]);for(var T=R.modulus.byteLength(),k=[1],I=0;m.length+k.length+2<T;)k.push(255),I++;k.push(0);for(var U=-1;++U<m.length;)k.push(m[U]);k=x.from(k);var V=O.mont(R.modulus);d=(d=new O(d).toRed(V)).redPow(new O(R.publicExponent)),d=x.from(d.fromRed().toArray());var W=I<8?1:0;for(T=Math.min(d.length,k.length),d.length!==k.length&&(W=1),U=-1;++U<T;)W|=d[U]^k[U];return 0===W}},8446:(Z,q,N)=>{var x=N(3172),O=x.Buffer;function _(o,p){for(var y in o)p[y]=o[y]}function w(o,p,y){return O(o,p,y)}O.from&&O.alloc&&O.allocUnsafe&&O.allocUnsafeSlow?Z.exports=x:(_(x,q),q.Buffer=w),w.prototype=Object.create(O.prototype),_(O,w),w.from=function(o,p,y){if("number"==typeof o)throw new TypeError("Argument must not be a number");return O(o,p,y)},w.alloc=function(o,p,y){if("number"!=typeof o)throw new TypeError("Argument must be a number");var v=O(o);return void 0!==p?"string"==typeof y?v.fill(p,y):v.fill(p):v.fill(0),v},w.allocUnsafe=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return O(o)},w.allocUnsafeSlow=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return x.SlowBuffer(o)}},8789:Z=>{Z.exports=function(N,x){for(var O=Math.min(N.length,x.length),_=new Buffer(O),w=0;w<O;++w)_[w]=N[w]^x[w];return _}},3172:(Z,q,N)=>{"use strict";const x=N(5343),O=N(8461),_="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;q.Buffer=y,q.SlowBuffer=function I(F){return+F!=F&&(F=0),y.alloc(+F)},q.INSPECT_MAX_BYTES=50;const w=2147483647;function p(F){if(F>w)throw new RangeError('The value "'+F+'" is invalid for option "size"');const B=new Uint8Array(F);return Object.setPrototypeOf(B,y.prototype),B}function y(F,B,G){if("number"==typeof F){if("string"==typeof B)throw new TypeError('The "string" argument must be of type string. Received type number');return m(F)}return v(F,B,G)}function v(F,B,G){if("string"==typeof F)return function M(F,B){if(("string"!=typeof B||""===B)&&(B="utf8"),!y.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const G=0|U(F,B);let X=p(G);const Q=X.write(F,B);return Q!==G&&(X=X.slice(0,Q)),X}(F,B);if(ArrayBuffer.isView(F))return function E(F){if(D(F,Uint8Array)){const B=new Uint8Array(F);return R(B.buffer,B.byteOffset,B.byteLength)}return g(F)}(F);if(null==F)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(D(F,ArrayBuffer)||F&&D(F.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(F,SharedArrayBuffer)||F&&D(F.buffer,SharedArrayBuffer)))return R(F,B,G);if("number"==typeof F)throw new TypeError('The "value" argument must not be of type number. Received type number');const X=F.valueOf&&F.valueOf();if(null!=X&&X!==F)return y.from(X,B,G);const Q=function T(F){if(y.isBuffer(F)){const B=0|k(F.length),G=p(B);return 0===G.length||F.copy(G,0,0,B),G}return void 0!==F.length?"number"!=typeof F.length||se(F.length)?p(0):g(F):"Buffer"===F.type&&Array.isArray(F.data)?g(F.data):void 0}(F);if(Q)return Q;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof F[Symbol.toPrimitive])return y.from(F[Symbol.toPrimitive]("string"),B,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}function h(F){if("number"!=typeof F)throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function m(F){return h(F),p(F<0?0:0|k(F))}function g(F){const B=F.length<0?0:0|k(F.length),G=p(B);for(let X=0;X<B;X+=1)G[X]=255&F[X];return G}function R(F,B,G){if(B<0||F.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<B+(G||0))throw new RangeError('"length" is outside of buffer bounds');let X;return X=void 0===B&&void 0===G?new Uint8Array(F):void 0===G?new Uint8Array(F,B):new Uint8Array(F,B,G),Object.setPrototypeOf(X,y.prototype),X}function k(F){if(F>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|F}function U(F,B){if(y.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||D(F,ArrayBuffer))return F.byteLength;if("string"!=typeof F)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const G=F.length,X=arguments.length>2&&!0===arguments[2];if(!X&&0===G)return 0;let Q=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Pe(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return Be(F).length;default:if(Q)return X?-1:Pe(F).length;B=(""+B).toLowerCase(),Q=!0}}function V(F,B,G){let X=!1;if((void 0===B||B<0)&&(B=0),B>this.length||((void 0===G||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(B>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return c(this,B,G);case"utf8":case"utf-8":return a(this,B,G);case"ascii":return l(this,B,G);case"latin1":case"binary":return b(this,B,G);case"base64":return n(this,B,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,B,G);default:if(X)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),X=!0}}function W(F,B,G){const X=F[B];F[B]=F[G],F[G]=X}function J(F,B,G,X,Q){if(0===F.length)return-1;if("string"==typeof G?(X=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),se(G=+G)&&(G=Q?0:F.length-1),G<0&&(G=F.length+G),G>=F.length){if(Q)return-1;G=F.length-1}else if(G<0){if(!Q)return-1;G=0}if("string"==typeof B&&(B=y.from(B,X)),y.isBuffer(B))return 0===B.length?-1:K(F,B,G,X,Q);if("number"==typeof B)return B&=255,"function"==typeof Uint8Array.prototype.indexOf?Q?Uint8Array.prototype.indexOf.call(F,B,G):Uint8Array.prototype.lastIndexOf.call(F,B,G):K(F,[B],G,X,Q);throw new TypeError("val must be string, number or Buffer")}function K(F,B,G,X,Q){let ye,ve=1,ce=F.length,ge=B.length;if(void 0!==X&&("ucs2"===(X=String(X).toLowerCase())||"ucs-2"===X||"utf16le"===X||"utf-16le"===X)){if(F.length<2||B.length<2)return-1;ve=2,ce/=2,ge/=2,G/=2}function Fe(be,Ue){return 1===ve?be[Ue]:be.readUInt16BE(Ue*ve)}if(Q){let be=-1;for(ye=G;ye<ce;ye++)if(Fe(F,ye)===Fe(B,-1===be?0:ye-be)){if(-1===be&&(be=ye),ye-be+1===ge)return be*ve}else-1!==be&&(ye-=ye-be),be=-1}else for(G+ge>ce&&(G=ce-ge),ye=G;ye>=0;ye--){let be=!0;for(let Ue=0;Ue<ge;Ue++)if(Fe(F,ye+Ue)!==Fe(B,Ue)){be=!1;break}if(be)return ye}return-1}function P(F,B,G,X){G=Number(G)||0;const Q=F.length-G;X?(X=Number(X))>Q&&(X=Q):X=Q;const ve=B.length;let ce;for(X>ve/2&&(X=ve/2),ce=0;ce<X;++ce){const ge=parseInt(B.substr(2*ce,2),16);if(se(ge))return ce;F[G+ce]=ge}return ce}function S(F,B,G,X){return re(Pe(B,F.length-G),F,G,X)}function z(F,B,G,X){return re(function pe(F){const B=[];for(let G=0;G<F.length;++G)B.push(255&F.charCodeAt(G));return B}(B),F,G,X)}function u(F,B,G,X){return re(Be(B),F,G,X)}function t(F,B,G,X){return re(function me(F,B){let G,X,Q;const ve=[];for(let ce=0;ce<F.length&&!((B-=2)<0);++ce)G=F.charCodeAt(ce),X=G>>8,Q=G%256,ve.push(Q),ve.push(X);return ve}(B,F.length-G),F,G,X)}function n(F,B,G){return x.fromByteArray(0===B&&G===F.length?F:F.slice(B,G))}function a(F,B,G){G=Math.min(F.length,G);const X=[];let Q=B;for(;Q<G;){const ve=F[Q];let ce=null,ge=ve>239?4:ve>223?3:ve>191?2:1;if(Q+ge<=G){let Fe,ye,be,Ue;switch(ge){case 1:ve<128&&(ce=ve);break;case 2:Fe=F[Q+1],128==(192&Fe)&&(Ue=(31&ve)<<6|63&Fe,Ue>127&&(ce=Ue));break;case 3:Fe=F[Q+1],ye=F[Q+2],128==(192&Fe)&&128==(192&ye)&&(Ue=(15&ve)<<12|(63&Fe)<<6|63&ye,Ue>2047&&(Ue<55296||Ue>57343)&&(ce=Ue));break;case 4:Fe=F[Q+1],ye=F[Q+2],be=F[Q+3],128==(192&Fe)&&128==(192&ye)&&128==(192&be)&&(Ue=(15&ve)<<18|(63&Fe)<<12|(63&ye)<<6|63&be,Ue>65535&&Ue<1114112&&(ce=Ue))}}null===ce?(ce=65533,ge=1):ce>65535&&(ce-=65536,X.push(ce>>>10&1023|55296),ce=56320|1023&ce),X.push(ce),Q+=ge}return function s(F){const B=F.length;if(B<=i)return String.fromCharCode.apply(String,F);let G="",X=0;for(;X<B;)G+=String.fromCharCode.apply(String,F.slice(X,X+=i));return G}(X)}q.kMaxLength=w,!(y.TYPED_ARRAY_SUPPORT=function o(){try{const F=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(F,B),42===F.foo()}catch(F){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(F,B,G){return v(F,B,G)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(F,B,G){return function d(F,B,G){return h(F),F<=0?p(F):void 0!==B?"string"==typeof G?p(F).fill(B,G):p(F).fill(B):p(F)}(F,B,G)},y.allocUnsafe=function(F){return m(F)},y.allocUnsafeSlow=function(F){return m(F)},y.isBuffer=function(B){return null!=B&&!0===B._isBuffer&&B!==y.prototype},y.compare=function(B,G){if(D(B,Uint8Array)&&(B=y.from(B,B.offset,B.byteLength)),D(G,Uint8Array)&&(G=y.from(G,G.offset,G.byteLength)),!y.isBuffer(B)||!y.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===G)return 0;let X=B.length,Q=G.length;for(let ve=0,ce=Math.min(X,Q);ve<ce;++ve)if(B[ve]!==G[ve]){X=B[ve],Q=G[ve];break}return X<Q?-1:Q<X?1:0},y.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(B,G){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(0===B.length)return y.alloc(0);let X;if(void 0===G)for(G=0,X=0;X<B.length;++X)G+=B[X].length;const Q=y.allocUnsafe(G);let ve=0;for(X=0;X<B.length;++X){let ce=B[X];if(D(ce,Uint8Array))ve+ce.length>Q.length?(y.isBuffer(ce)||(ce=y.from(ce)),ce.copy(Q,ve)):Uint8Array.prototype.set.call(Q,ce,ve);else{if(!y.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(Q,ve)}ve+=ce.length}return Q},y.byteLength=U,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<B;G+=2)W(this,G,G+1);return this},y.prototype.swap32=function(){const B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<B;G+=4)W(this,G,G+3),W(this,G+1,G+2);return this},y.prototype.swap64=function(){const B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<B;G+=8)W(this,G,G+7),W(this,G+1,G+6),W(this,G+2,G+5),W(this,G+3,G+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const B=this.length;return 0===B?"":0===arguments.length?a(this,0,B):V.apply(this,arguments)},y.prototype.equals=function(B){if(!y.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||0===y.compare(this,B)},y.prototype.inspect=function(){let B="";const G=q.INSPECT_MAX_BYTES;return B=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(B+=" ... "),"<Buffer "+B+">"},_&&(y.prototype[_]=y.prototype.inspect),y.prototype.compare=function(B,G,X,Q,ve){if(D(B,Uint8Array)&&(B=y.from(B,B.offset,B.byteLength)),!y.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(void 0===G&&(G=0),void 0===X&&(X=B?B.length:0),void 0===Q&&(Q=0),void 0===ve&&(ve=this.length),G<0||X>B.length||Q<0||ve>this.length)throw new RangeError("out of range index");if(Q>=ve&&G>=X)return 0;if(Q>=ve)return-1;if(G>=X)return 1;if(this===B)return 0;let ce=(ve>>>=0)-(Q>>>=0),ge=(X>>>=0)-(G>>>=0);const Fe=Math.min(ce,ge),ye=this.slice(Q,ve),be=B.slice(G,X);for(let Ue=0;Ue<Fe;++Ue)if(ye[Ue]!==be[Ue]){ce=ye[Ue],ge=be[Ue];break}return ce<ge?-1:ge<ce?1:0},y.prototype.includes=function(B,G,X){return-1!==this.indexOf(B,G,X)},y.prototype.indexOf=function(B,G,X){return J(this,B,G,X,!0)},y.prototype.lastIndexOf=function(B,G,X){return J(this,B,G,X,!1)},y.prototype.write=function(B,G,X,Q){if(void 0===G)Q="utf8",X=this.length,G=0;else if(void 0===X&&"string"==typeof G)Q=G,X=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G>>>=0,isFinite(X)?(X>>>=0,void 0===Q&&(Q="utf8")):(Q=X,X=void 0)}const ve=this.length-G;if((void 0===X||X>ve)&&(X=ve),B.length>0&&(X<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let ce=!1;for(;;)switch(Q){case"hex":return P(this,B,G,X);case"utf8":case"utf-8":return S(this,B,G,X);case"ascii":case"latin1":case"binary":return z(this,B,G,X);case"base64":return u(this,B,G,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t(this,B,G,X);default:if(ce)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),ce=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const i=4096;function l(F,B,G){let X="";G=Math.min(F.length,G);for(let Q=B;Q<G;++Q)X+=String.fromCharCode(127&F[Q]);return X}function b(F,B,G){let X="";G=Math.min(F.length,G);for(let Q=B;Q<G;++Q)X+=String.fromCharCode(F[Q]);return X}function c(F,B,G){const X=F.length;(!B||B<0)&&(B=0),(!G||G<0||G>X)&&(G=X);let Q="";for(let ve=B;ve<G;++ve)Q+=ie[F[ve]];return Q}function r(F,B,G){const X=F.slice(B,G);let Q="";for(let ve=0;ve<X.length-1;ve+=2)Q+=String.fromCharCode(X[ve]+256*X[ve+1]);return Q}function f(F,B,G){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+B>G)throw new RangeError("Trying to access beyond buffer length")}function L(F,B,G,X,Q,ve){if(!y.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Q||B<ve)throw new RangeError('"value" argument is out of bounds');if(G+X>F.length)throw new RangeError("Index out of range")}function C(F,B,G,X,Q){de(B,X,Q,F,G,7);let ve=Number(B&BigInt(4294967295));F[G++]=ve,ve>>=8,F[G++]=ve,ve>>=8,F[G++]=ve,ve>>=8,F[G++]=ve;let ce=Number(B>>BigInt(32)&BigInt(4294967295));return F[G++]=ce,ce>>=8,F[G++]=ce,ce>>=8,F[G++]=ce,ce>>=8,F[G++]=ce,G}function H(F,B,G,X,Q){de(B,X,Q,F,G,7);let ve=Number(B&BigInt(4294967295));F[G+7]=ve,ve>>=8,F[G+6]=ve,ve>>=8,F[G+5]=ve,ve>>=8,F[G+4]=ve;let ce=Number(B>>BigInt(32)&BigInt(4294967295));return F[G+3]=ce,ce>>=8,F[G+2]=ce,ce>>=8,F[G+1]=ce,ce>>=8,F[G]=ce,G+8}function Y(F,B,G,X,Q,ve){if(G+X>F.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function ee(F,B,G,X,Q){return B=+B,G>>>=0,Q||Y(F,0,G,4),O.write(F,B,G,X,23,4),G+4}function ne(F,B,G,X,Q){return B=+B,G>>>=0,Q||Y(F,0,G,8),O.write(F,B,G,X,52,8),G+8}y.prototype.slice=function(B,G){const X=this.length;(B=~~B)<0?(B+=X)<0&&(B=0):B>X&&(B=X),(G=void 0===G?X:~~G)<0?(G+=X)<0&&(G=0):G>X&&(G=X),G<B&&(G=B);const Q=this.subarray(B,G);return Object.setPrototypeOf(Q,y.prototype),Q},y.prototype.readUintLE=y.prototype.readUIntLE=function(B,G,X){B>>>=0,G>>>=0,X||f(B,G,this.length);let Q=this[B],ve=1,ce=0;for(;++ce<G&&(ve*=256);)Q+=this[B+ce]*ve;return Q},y.prototype.readUintBE=y.prototype.readUIntBE=function(B,G,X){B>>>=0,G>>>=0,X||f(B,G,this.length);let Q=this[B+--G],ve=1;for(;G>0&&(ve*=256);)Q+=this[B+--G]*ve;return Q},y.prototype.readUint8=y.prototype.readUInt8=function(B,G){return B>>>=0,G||f(B,1,this.length),this[B]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(B,G){return B>>>=0,G||f(B,2,this.length),this[B]|this[B+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(B,G){return B>>>=0,G||f(B,2,this.length),this[B]<<8|this[B+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(B,G){return B>>>=0,G||f(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(B,G){return B>>>=0,G||f(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},y.prototype.readBigUInt64LE=ae(function(B){A(B>>>=0,"offset");const G=this[B],X=this[B+7];(void 0===G||void 0===X)&&$(B,this.length-8);const Q=G+256*this[++B]+65536*this[++B]+this[++B]*2**24,ve=this[++B]+256*this[++B]+65536*this[++B]+X*2**24;return BigInt(Q)+(BigInt(ve)<<BigInt(32))}),y.prototype.readBigUInt64BE=ae(function(B){A(B>>>=0,"offset");const G=this[B],X=this[B+7];(void 0===G||void 0===X)&&$(B,this.length-8);const Q=G*2**24+65536*this[++B]+256*this[++B]+this[++B],ve=this[++B]*2**24+65536*this[++B]+256*this[++B]+X;return(BigInt(Q)<<BigInt(32))+BigInt(ve)}),y.prototype.readIntLE=function(B,G,X){B>>>=0,G>>>=0,X||f(B,G,this.length);let Q=this[B],ve=1,ce=0;for(;++ce<G&&(ve*=256);)Q+=this[B+ce]*ve;return ve*=128,Q>=ve&&(Q-=Math.pow(2,8*G)),Q},y.prototype.readIntBE=function(B,G,X){B>>>=0,G>>>=0,X||f(B,G,this.length);let Q=G,ve=1,ce=this[B+--Q];for(;Q>0&&(ve*=256);)ce+=this[B+--Q]*ve;return ve*=128,ce>=ve&&(ce-=Math.pow(2,8*G)),ce},y.prototype.readInt8=function(B,G){return B>>>=0,G||f(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},y.prototype.readInt16LE=function(B,G){B>>>=0,G||f(B,2,this.length);const X=this[B]|this[B+1]<<8;return 32768&X?4294901760|X:X},y.prototype.readInt16BE=function(B,G){B>>>=0,G||f(B,2,this.length);const X=this[B+1]|this[B]<<8;return 32768&X?4294901760|X:X},y.prototype.readInt32LE=function(B,G){return B>>>=0,G||f(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},y.prototype.readInt32BE=function(B,G){return B>>>=0,G||f(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},y.prototype.readBigInt64LE=ae(function(B){A(B>>>=0,"offset");const G=this[B],X=this[B+7];return(void 0===G||void 0===X)&&$(B,this.length-8),(BigInt(this[B+4]+256*this[B+5]+65536*this[B+6]+(X<<24))<<BigInt(32))+BigInt(G+256*this[++B]+65536*this[++B]+this[++B]*2**24)}),y.prototype.readBigInt64BE=ae(function(B){A(B>>>=0,"offset");const G=this[B],X=this[B+7];(void 0===G||void 0===X)&&$(B,this.length-8);const Q=(G<<24)+65536*this[++B]+256*this[++B]+this[++B];return(BigInt(Q)<<BigInt(32))+BigInt(this[++B]*2**24+65536*this[++B]+256*this[++B]+X)}),y.prototype.readFloatLE=function(B,G){return B>>>=0,G||f(B,4,this.length),O.read(this,B,!0,23,4)},y.prototype.readFloatBE=function(B,G){return B>>>=0,G||f(B,4,this.length),O.read(this,B,!1,23,4)},y.prototype.readDoubleLE=function(B,G){return B>>>=0,G||f(B,8,this.length),O.read(this,B,!0,52,8)},y.prototype.readDoubleBE=function(B,G){return B>>>=0,G||f(B,8,this.length),O.read(this,B,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(B,G,X,Q){B=+B,G>>>=0,X>>>=0,Q||L(this,B,G,X,Math.pow(2,8*X)-1,0);let ve=1,ce=0;for(this[G]=255&B;++ce<X&&(ve*=256);)this[G+ce]=B/ve&255;return G+X},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(B,G,X,Q){B=+B,G>>>=0,X>>>=0,Q||L(this,B,G,X,Math.pow(2,8*X)-1,0);let ve=X-1,ce=1;for(this[G+ve]=255&B;--ve>=0&&(ce*=256);)this[G+ve]=B/ce&255;return G+X},y.prototype.writeUint8=y.prototype.writeUInt8=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,1,255,0),this[G]=255&B,G+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,2,65535,0),this[G]=255&B,this[G+1]=B>>>8,G+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,2,65535,0),this[G]=B>>>8,this[G+1]=255&B,G+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,4,4294967295,0),this[G+3]=B>>>24,this[G+2]=B>>>16,this[G+1]=B>>>8,this[G]=255&B,G+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,4,4294967295,0),this[G]=B>>>24,this[G+1]=B>>>16,this[G+2]=B>>>8,this[G+3]=255&B,G+4},y.prototype.writeBigUInt64LE=ae(function(B,G=0){return C(this,B,G,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=ae(function(B,G=0){return H(this,B,G,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(B,G,X,Q){if(B=+B,G>>>=0,!Q){const Fe=Math.pow(2,8*X-1);L(this,B,G,X,Fe-1,-Fe)}let ve=0,ce=1,ge=0;for(this[G]=255&B;++ve<X&&(ce*=256);)B<0&&0===ge&&0!==this[G+ve-1]&&(ge=1),this[G+ve]=(B/ce>>0)-ge&255;return G+X},y.prototype.writeIntBE=function(B,G,X,Q){if(B=+B,G>>>=0,!Q){const Fe=Math.pow(2,8*X-1);L(this,B,G,X,Fe-1,-Fe)}let ve=X-1,ce=1,ge=0;for(this[G+ve]=255&B;--ve>=0&&(ce*=256);)B<0&&0===ge&&0!==this[G+ve+1]&&(ge=1),this[G+ve]=(B/ce>>0)-ge&255;return G+X},y.prototype.writeInt8=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,1,127,-128),B<0&&(B=255+B+1),this[G]=255&B,G+1},y.prototype.writeInt16LE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,2,32767,-32768),this[G]=255&B,this[G+1]=B>>>8,G+2},y.prototype.writeInt16BE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,2,32767,-32768),this[G]=B>>>8,this[G+1]=255&B,G+2},y.prototype.writeInt32LE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,4,2147483647,-2147483648),this[G]=255&B,this[G+1]=B>>>8,this[G+2]=B>>>16,this[G+3]=B>>>24,G+4},y.prototype.writeInt32BE=function(B,G,X){return B=+B,G>>>=0,X||L(this,B,G,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[G]=B>>>24,this[G+1]=B>>>16,this[G+2]=B>>>8,this[G+3]=255&B,G+4},y.prototype.writeBigInt64LE=ae(function(B,G=0){return C(this,B,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=ae(function(B,G=0){return H(this,B,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(B,G,X){return ee(this,B,G,!0,X)},y.prototype.writeFloatBE=function(B,G,X){return ee(this,B,G,!1,X)},y.prototype.writeDoubleLE=function(B,G,X){return ne(this,B,G,!0,X)},y.prototype.writeDoubleBE=function(B,G,X){return ne(this,B,G,!1,X)},y.prototype.copy=function(B,G,X,Q){if(!y.isBuffer(B))throw new TypeError("argument should be a Buffer");if(X||(X=0),!Q&&0!==Q&&(Q=this.length),G>=B.length&&(G=B.length),G||(G=0),Q>0&&Q<X&&(Q=X),Q===X||0===B.length||0===this.length)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),B.length-G<Q-X&&(Q=B.length-G+X);const ve=Q-X;return this===B&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(G,X,Q):Uint8Array.prototype.set.call(B,this.subarray(X,Q),G),ve},y.prototype.fill=function(B,G,X,Q){if("string"==typeof B){if("string"==typeof G?(Q=G,G=0,X=this.length):"string"==typeof X&&(Q=X,X=this.length),void 0!==Q&&"string"!=typeof Q)throw new TypeError("encoding must be a string");if("string"==typeof Q&&!y.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===B.length){const ce=B.charCodeAt(0);("utf8"===Q&&ce<128||"latin1"===Q)&&(B=ce)}}else"number"==typeof B?B&=255:"boolean"==typeof B&&(B=Number(B));if(G<0||this.length<G||this.length<X)throw new RangeError("Out of range index");if(X<=G)return this;let ve;if(G>>>=0,X=void 0===X?this.length:X>>>0,B||(B=0),"number"==typeof B)for(ve=G;ve<X;++ve)this[ve]=B;else{const ce=y.isBuffer(B)?B:y.from(B,Q),ge=ce.length;if(0===ge)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(ve=0;ve<X-G;++ve)this[ve+G]=ce[ve%ge]}return this};const fe={};function te(F,B,G){fe[F]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${F}]`,delete this.name}get code(){return F}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${F}]: ${this.message}`}}}function oe(F){let B="",G=F.length;const X="-"===F[0]?1:0;for(;G>=X+4;G-=3)B=`_${F.slice(G-3,G)}${B}`;return`${F.slice(0,G)}${B}`}function de(F,B,G,X,Q,ve){if(F>G||F<B){const ce="bigint"==typeof B?"n":"";let ge;throw ge=ve>3?0===B||B===BigInt(0)?`>= 0${ce} and < 2${ce} ** ${8*(ve+1)}${ce}`:`>= -(2${ce} ** ${8*(ve+1)-1}${ce}) and < 2 ** ${8*(ve+1)-1}${ce}`:`>= ${B}${ce} and <= ${G}${ce}`,new fe.ERR_OUT_OF_RANGE("value",ge,F)}!function le(F,B,G){A(B,"offset"),(void 0===F[B]||void 0===F[B+G])&&$(B,F.length-(G+1))}(X,Q,ve)}function A(F,B){if("number"!=typeof F)throw new fe.ERR_INVALID_ARG_TYPE(B,"number",F)}function $(F,B,G){throw Math.floor(F)!==F?(A(F,G),new fe.ERR_OUT_OF_RANGE(G||"offset","an integer",F)):B<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(G||"offset",`>= ${G?1:0} and <= ${B}`,F)}te("ERR_BUFFER_OUT_OF_BOUNDS",function(F){return F?`${F} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),te("ERR_INVALID_ARG_TYPE",function(F,B){return`The "${F}" argument must be of type number. Received type ${typeof B}`},TypeError),te("ERR_OUT_OF_RANGE",function(F,B,G){let X=`The value of "${F}" is out of range.`,Q=G;return Number.isInteger(G)&&Math.abs(G)>2**32?Q=oe(String(G)):"bigint"==typeof G&&(Q=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(Q=oe(Q)),Q+="n"),X+=` It must be ${B}. Received ${Q}`,X},RangeError);const j=/[^+/0-9A-Za-z-_]/g;function Pe(F,B){let G;B=B||1/0;const X=F.length;let Q=null;const ve=[];for(let ce=0;ce<X;++ce){if(G=F.charCodeAt(ce),G>55295&&G<57344){if(!Q){if(G>56319){(B-=3)>-1&&ve.push(239,191,189);continue}if(ce+1===X){(B-=3)>-1&&ve.push(239,191,189);continue}Q=G;continue}if(G<56320){(B-=3)>-1&&ve.push(239,191,189),Q=G;continue}G=65536+(Q-55296<<10|G-56320)}else Q&&(B-=3)>-1&&ve.push(239,191,189);if(Q=null,G<128){if((B-=1)<0)break;ve.push(G)}else if(G<2048){if((B-=2)<0)break;ve.push(G>>6|192,63&G|128)}else if(G<65536){if((B-=3)<0)break;ve.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;ve.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return ve}function Be(F){return x.toByteArray(function ue(F){if((F=(F=F.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(F))}function re(F,B,G,X){let Q;for(Q=0;Q<X&&!(Q+G>=B.length||Q>=F.length);++Q)B[Q+G]=F[Q];return Q}function D(F,B){return F instanceof B||null!=F&&null!=F.constructor&&null!=F.constructor.name&&F.constructor.name===B.name}function se(F){return F!=F}const ie=function(){const F="0123456789abcdef",B=new Array(256);for(let G=0;G<16;++G){const X=16*G;for(let Q=0;Q<16;++Q)B[X+Q]=F[G]+F[Q]}return B}();function ae(F){return"undefined"==typeof BigInt?he:F}function he(){throw new Error("BigInt not supported")}},1052:(Z,q,N)=>{var x=N(3502).Buffer,O=N(295).Transform,_=N(3054).s;function o(p){O.call(this),this.hashMode="string"==typeof p,this.hashMode?this[p]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}N(3894)(o,O),o.prototype.update=function(p,y,v){"string"==typeof p&&(p=x.from(p,y));var h=this._update(p);return this.hashMode?this:(v&&(h=this._toString(h,v)),h)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(p,y,v){var h;try{this.hashMode?this._update(p):this.push(this._update(p))}catch(d){h=d}finally{v(h)}},o.prototype._flush=function(p){var y;try{this.push(this.__final())}catch(v){y=v}p(y)},o.prototype._finalOrDigest=function(p){var y=this.__final()||x.alloc(0);return p&&(y=this._toString(y,p,!0)),y},o.prototype._toString=function(p,y,v){if(this._decoder||(this._decoder=new _(y),this._encoding=y),this._encoding!==y)throw new Error("can't switch encodings");var h=this._decoder.write(p);return v&&(h+=this._decoder.end()),h},Z.exports=o},4626:(Z,q)=>{!function(x){x.version="1.2.0";var _=function O(){for(var v=0,h=new Array(256),d=0;256!=d;++d)h[d]=v=1&(v=1&(v=1&(v=1&(v=1&(v=1&(v=1&(v=1&(v=d)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1)?-306674912^v>>>1:v>>>1;return"undefined"!=typeof Int32Array?new Int32Array(h):h}();x.table=_,x.bstr=function w(v,h){for(var d=-1^h,m=v.length-1,M=0;M<m;)d=(d=d>>>8^_[255&(d^v.charCodeAt(M++))])>>>8^_[255&(d^v.charCodeAt(M++))];return M===m&&(d=d>>>8^_[255&(d^v.charCodeAt(M))]),-1^d},x.buf=function o(v,h){if(v.length>1e4)return function p(v,h){for(var d=-1^h,m=v.length-7,M=0;M<m;)d=(d=(d=(d=(d=(d=(d=(d=d>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])];for(;M<m+7;)d=d>>>8^_[255&(d^v[M++])];return-1^d}(v,h);for(var d=-1^h,m=v.length-3,M=0;M<m;)d=(d=(d=(d=d>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])])>>>8^_[255&(d^v[M++])];for(;M<m+3;)d=d>>>8^_[255&(d^v[M++])];return-1^d},x.str=function y(v,h){for(var g,E,d=-1^h,m=0,M=v.length;m<M;)(g=v.charCodeAt(m++))<128?d=d>>>8^_[255&(d^g)]:g<2048?d=(d=d>>>8^_[255&(d^(192|g>>6&31))])>>>8^_[255&(d^(128|63&g))]:g>=55296&&g<57344?(g=64+(1023&g),E=1023&v.charCodeAt(m++),d=(d=(d=(d=d>>>8^_[255&(d^(240|g>>8&7))])>>>8^_[255&(d^(128|g>>2&63))])>>>8^_[255&(d^(128|E>>6&15|(3&g)<<4))])>>>8^_[255&(d^(128|63&E))]):d=(d=(d=d>>>8^_[255&(d^(224|g>>12&15))])>>>8^_[255&(d^(128|g>>6&63))])>>>8^_[255&(d^(128|63&g))];return-1^d}}("undefined"==typeof DO_NOT_EXPORT_CRC?q:{})},4746:(Z,q,N)=>{var x=N(7715),O=N(6422);Z.exports=function(y){return new w(y)};var _={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function w(p){this.curveType=_[p],this.curveType||(this.curveType={name:p}),this.curve=new x.ec(this.curveType.name),this.keys=void 0}function o(p,y,v){Array.isArray(p)||(p=p.toArray());var h=new Buffer(p);if(v&&h.length<v){var d=new Buffer(v-h.length);d.fill(0),h=Buffer.concat([d,h])}return y?h.toString(y):h}_.p224=_.secp224r1,_.p256=_.secp256r1=_.prime256v1,_.p192=_.secp192r1=_.prime192v1,_.p384=_.secp384r1,_.p521=_.secp521r1,w.prototype.generateKeys=function(p,y){return this.keys=this.curve.genKeyPair(),this.getPublicKey(p,y)},w.prototype.computeSecret=function(p,y,v){return y=y||"utf8",Buffer.isBuffer(p)||(p=new Buffer(p,y)),o(this.curve.keyFromPublic(p).getPublic().mul(this.keys.getPrivate()).getX(),v,this.curveType.byteLength)},w.prototype.getPublicKey=function(p,y){var v=this.keys.getPublic("compressed"===y,!0);return"hybrid"===y&&(v[0]=v[v.length-1]%2?7:6),o(v,p)},w.prototype.getPrivateKey=function(p){return o(this.keys.getPrivate(),p)},w.prototype.setPublicKey=function(p,y){return y=y||"utf8",Buffer.isBuffer(p)||(p=new Buffer(p,y)),this.keys._importPublic(p),this},w.prototype.setPrivateKey=function(p,y){y=y||"utf8",Buffer.isBuffer(p)||(p=new Buffer(p,y));var v=new O(p);return v=v.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(v),this}},6422:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(8623).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},6386:(Z,q,N)=>{"use strict";var x=N(3894),O=N(8095),_=N(5634),w=N(5244),o=N(1052);function p(y){o.call(this,"digest"),this._hash=y}x(p,o),p.prototype._update=function(y){this._hash.update(y)},p.prototype._final=function(){return this._hash.digest()},Z.exports=function(v){return"md5"===(v=v.toLowerCase())?new O:"rmd160"===v||"ripemd160"===v?new _:new p(w(v))}},5640:(Z,q,N)=>{var x=N(8095);Z.exports=function(O){return(new x).update(O).digest()}},4529:(Z,q,N)=>{"use strict";var x=N(3894),O=N(7309),_=N(1052),w=N(3502).Buffer,o=N(5640),p=N(5634),y=N(5244),v=w.alloc(128);function h(d,m){_.call(this,"digest"),"string"==typeof m&&(m=w.from(m));var M="sha512"===d||"sha384"===d?128:64;this._alg=d,this._key=m,m.length>M?m=("rmd160"===d?new p:y(d)).update(m).digest():m.length<M&&(m=w.concat([m,v],M));for(var E=this._ipad=w.allocUnsafe(M),R=this._opad=w.allocUnsafe(M),T=0;T<M;T++)E[T]=54^m[T],R[T]=92^m[T];this._hash="rmd160"===d?new p:y(d),this._hash.update(E)}x(h,_),h.prototype._update=function(d){this._hash.update(d)},h.prototype._final=function(){var d=this._hash.digest();return("rmd160"===this._alg?new p:y(this._alg)).update(this._opad).update(d).digest()},Z.exports=function(m,M){return"rmd160"===(m=m.toLowerCase())||"ripemd160"===m?new h("rmd160",M):"md5"===m?new O(o,M):new h(m,M)}},7309:(Z,q,N)=>{"use strict";var x=N(3894),O=N(3502).Buffer,_=N(1052),w=O.alloc(128),o=64;function p(y,v){_.call(this,"digest"),"string"==typeof v&&(v=O.from(v)),this._alg=y,this._key=v,v.length>o?v=y(v):v.length<o&&(v=O.concat([v,w],o));for(var h=this._ipad=O.allocUnsafe(o),d=this._opad=O.allocUnsafe(o),m=0;m<o;m++)h[m]=54^v[m],d[m]=92^v[m];this._hash=[h]}x(p,_),p.prototype._update=function(y){this._hash.push(y)},p.prototype._final=function(){var y=this._alg(O.concat(this._hash));return this._alg(O.concat([this._opad,y]))},Z.exports=p},1348:(Z,q,N)=>{"use strict";q.randomBytes=q.rng=q.pseudoRandomBytes=q.prng=N(3753),q.createHash=q.Hash=N(6386),q.createHmac=q.Hmac=N(4529);var x=N(7793),O=Object.keys(x),_=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(O);q.getHashes=function(){return _};var w=N(9357);q.pbkdf2=w.pbkdf2,q.pbkdf2Sync=w.pbkdf2Sync;var o=N(5255);q.Cipher=o.Cipher,q.createCipher=o.createCipher,q.Cipheriv=o.Cipheriv,q.createCipheriv=o.createCipheriv,q.Decipher=o.Decipher,q.createDecipher=o.createDecipher,q.Decipheriv=o.Decipheriv,q.createDecipheriv=o.createDecipheriv,q.getCiphers=o.getCiphers,q.listCiphers=o.listCiphers;var p=N(8829);q.DiffieHellmanGroup=p.DiffieHellmanGroup,q.createDiffieHellmanGroup=p.createDiffieHellmanGroup,q.getDiffieHellman=p.getDiffieHellman,q.createDiffieHellman=p.createDiffieHellman,q.DiffieHellman=p.DiffieHellman;var y=N(3923);q.createSign=y.createSign,q.Sign=y.Sign,q.createVerify=y.createVerify,q.Verify=y.Verify,q.createECDH=N(4746);var v=N(3701);q.publicEncrypt=v.publicEncrypt,q.privateEncrypt=v.privateEncrypt,q.publicDecrypt=v.publicDecrypt,q.privateDecrypt=v.privateDecrypt;var h=N(4275);q.randomFill=h.randomFill,q.randomFillSync=h.randomFillSync,q.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},q.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},5418:(Z,q,N)=>{q.UINT32=N(5778),N(2354)},5778:function(Z,q){var x;!function(O){function o(h,d){return this instanceof o?(this._low=0,this._high=0,this.remainder=null,void 0===d?y.call(this,h):"string"==typeof h?v.call(this,h,d):void p.call(this,h,d)):new o(h,d)}function p(h,d){return this._low=0|h,this._high=0|d,this}function y(h){return this._low=65535&h,this._high=h>>>16,this}function v(h,d){var m=parseInt(h,d||10);return this._low=65535&m,this._high=m>>>16,this}o(Math.pow(36,5)),o(Math.pow(16,7)),o(Math.pow(10,9)),o(Math.pow(2,30)),o(36),o(16),o(10),o(2),o.prototype.fromBits=p,o.prototype.fromNumber=y,o.prototype.fromString=v,o.prototype.toNumber=function(){return 65536*this._high+this._low},o.prototype.toString=function(h){return this.toNumber().toString(h||10)},o.prototype.add=function(h){var d=this._low+h._low,m=d>>>16;return m+=this._high+h._high,this._low=65535&d,this._high=65535&m,this},o.prototype.subtract=function(h){return this.add(h.clone().negate())},o.prototype.multiply=function(h){var E,R,m=this._low,g=h._low;return E=(R=m*g)>>>16,E+=this._high*g,E&=65535,E+=m*h._high,this._low=65535&R,this._high=65535&E,this},o.prototype.div=function(h){if(0==h._low&&0==h._high)throw Error("division by zero");if(0==h._high&&1==h._low)return this.remainder=new o(0),this;if(h.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(h))return this.remainder=new o(0),this._low=1,this._high=0,this;for(var d=h.clone(),m=-1;!this.lt(d);)d.shiftLeft(1,!0),m++;for(this.remainder=this.clone(),this._low=0,this._high=0;m>=0;m--)d.shiftRight(1),this.remainder.lt(d)||(this.remainder.subtract(d),m>=16?this._high|=1<<m-16:this._low|=1<<m);return this},o.prototype.negate=function(){var h=1+(65535&~this._low);return this._low=65535&h,this._high=~this._high+(h>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(h){return this._low==h._low&&this._high==h._high},o.prototype.greaterThan=o.prototype.gt=function(h){return this._high>h._high||!(this._high<h._high)&&this._low>h._low},o.prototype.lessThan=o.prototype.lt=function(h){return this._high<h._high||!(this._high>h._high)&&this._low<h._low},o.prototype.or=function(h){return this._low|=h._low,this._high|=h._high,this},o.prototype.and=function(h){return this._low&=h._low,this._high&=h._high,this},o.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},o.prototype.xor=function(h){return this._low^=h._low,this._high^=h._high,this},o.prototype.shiftRight=o.prototype.shiftr=function(h){return h>16?(this._low=this._high>>h-16,this._high=0):16==h?(this._low=this._high,this._high=0):(this._low=this._low>>h|this._high<<16-h&65535,this._high>>=h),this},o.prototype.shiftLeft=o.prototype.shiftl=function(h,d){return h>16?(this._high=this._low<<h-16,this._low=0,d||(this._high&=65535)):16==h?(this._high=this._low,this._low=0):(this._high=this._high<<h|this._low>>16-h,this._low=this._low<<h&65535,d||(this._high&=65535)),this},o.prototype.rotateLeft=o.prototype.rotl=function(h){var d=this._high<<16|this._low;return this._low=65535&(d=d<<h|d>>>32-h),this._high=d>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(h){var d=this._high<<16|this._low;return this._low=65535&(d=d>>>h|d<<32-h),this._high=d>>>16,this},o.prototype.clone=function(){return new o(this._low,this._high)},void 0!==(x=function(){return o}.apply(q,[]))&&(Z.exports=x)}()},2354:function(Z,q){var x;!function(O){var _={16:o(Math.pow(16,5)),10:o(Math.pow(10,5)),2:o(Math.pow(2,5))},w={16:o(16),10:o(10),2:o(2)};function o(h,d,m,M){return this instanceof o?(this.remainder=null,"string"==typeof h?v.call(this,h,d):void 0===d?y.call(this,h):void p.apply(this,arguments)):new o(h,d,m,M)}function p(h,d,m,M){return void 0===m?(this._a00=65535&h,this._a16=h>>>16,this._a32=65535&d,this._a48=d>>>16,this):(this._a00=0|h,this._a16=0|d,this._a32=0|m,this._a48=0|M,this)}function y(h){return this._a00=65535&h,this._a16=h>>>16,this._a32=0,this._a48=0,this}function v(h,d){d=d||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var m=_[d]||new o(Math.pow(d,5)),M=0,g=h.length;M<g;M+=5){var E=Math.min(5,g-M),R=parseInt(h.slice(M,M+E),d);this.multiply(E<5?new o(Math.pow(d,E)):m).add(new o(R))}return this}o.prototype.fromBits=p,o.prototype.fromNumber=y,o.prototype.fromString=v,o.prototype.toNumber=function(){return 65536*this._a16+this._a00},o.prototype.toString=function(h){var d=w[h=h||10]||new o(h);if(!this.gt(d))return this.toNumber().toString(h);for(var m=this.clone(),M=new Array(64),g=63;g>=0&&(m.div(d),M[g]=m.remainder.toNumber().toString(h),m.gt(d));g--);return M[g-1]=m.toNumber().toString(h),M.join("")},o.prototype.add=function(h){var d=this._a00+h._a00,m=d>>>16,M=(m+=this._a16+h._a16)>>>16,g=(M+=this._a32+h._a32)>>>16;return g+=this._a48+h._a48,this._a00=65535&d,this._a16=65535&m,this._a32=65535&M,this._a48=65535&g,this},o.prototype.subtract=function(h){return this.add(h.clone().negate())},o.prototype.multiply=function(h){var d=this._a00,m=this._a16,M=this._a32,E=h._a00,R=h._a16,T=h._a32,I=d*E,U=I>>>16,V=(U+=d*R)>>>16;U&=65535,V+=(U+=m*E)>>>16;var W=(V+=d*T)>>>16;return V&=65535,W+=(V+=m*R)>>>16,V&=65535,W+=(V+=M*E)>>>16,W+=d*h._a48,W&=65535,W+=m*T,W&=65535,W+=M*R,W&=65535,W+=this._a48*E,this._a00=65535&I,this._a16=65535&U,this._a32=65535&V,this._a48=65535&W,this},o.prototype.div=function(h){if(0==h._a16&&0==h._a32&&0==h._a48){if(0==h._a00)throw Error("division by zero");if(1==h._a00)return this.remainder=new o(0),this}if(h.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(h))return this.remainder=new o(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var d=h.clone(),m=-1;!this.lt(d);)d.shiftLeft(1,!0),m++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;m>=0;m--)d.shiftRight(1),this.remainder.lt(d)||(this.remainder.subtract(d),m>=48?this._a48|=1<<m-48:m>=32?this._a32|=1<<m-32:m>=16?this._a16|=1<<m-16:this._a00|=1<<m);return this},o.prototype.negate=function(){var h=1+(65535&~this._a00);return this._a00=65535&h,this._a16=65535&(h=(65535&~this._a16)+(h>>>16)),this._a32=65535&(h=(65535&~this._a32)+(h>>>16)),this._a48=~this._a48+(h>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(h){return this._a48==h._a48&&this._a00==h._a00&&this._a32==h._a32&&this._a16==h._a16},o.prototype.greaterThan=o.prototype.gt=function(h){return this._a48>h._a48||!(this._a48<h._a48)&&(this._a32>h._a32||!(this._a32<h._a32)&&(this._a16>h._a16||!(this._a16<h._a16)&&this._a00>h._a00))},o.prototype.lessThan=o.prototype.lt=function(h){return this._a48<h._a48||!(this._a48>h._a48)&&(this._a32<h._a32||!(this._a32>h._a32)&&(this._a16<h._a16||!(this._a16>h._a16)&&this._a00<h._a00))},o.prototype.or=function(h){return this._a00|=h._a00,this._a16|=h._a16,this._a32|=h._a32,this._a48|=h._a48,this},o.prototype.and=function(h){return this._a00&=h._a00,this._a16&=h._a16,this._a32&=h._a32,this._a48&=h._a48,this},o.prototype.xor=function(h){return this._a00^=h._a00,this._a16^=h._a16,this._a32^=h._a32,this._a48^=h._a48,this},o.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},o.prototype.shiftRight=o.prototype.shiftr=function(h){return(h%=64)>=48?(this._a00=this._a48>>h-48,this._a16=0,this._a32=0,this._a48=0):h>=32?(this._a00=65535&(this._a32>>(h-=32)|this._a48<<16-h),this._a16=this._a48>>h&65535,this._a32=0,this._a48=0):h>=16?(this._a00=65535&(this._a16>>(h-=16)|this._a32<<16-h),this._a16=65535&(this._a32>>h|this._a48<<16-h),this._a32=this._a48>>h&65535,this._a48=0):(this._a00=65535&(this._a00>>h|this._a16<<16-h),this._a16=65535&(this._a16>>h|this._a32<<16-h),this._a32=65535&(this._a32>>h|this._a48<<16-h),this._a48=this._a48>>h&65535),this},o.prototype.shiftLeft=o.prototype.shiftl=function(h,d){return(h%=64)>=48?(this._a48=this._a00<<h-48,this._a32=0,this._a16=0,this._a00=0):h>=32?(this._a48=this._a16<<(h-=32)|this._a00>>16-h,this._a32=this._a00<<h&65535,this._a16=0,this._a00=0):h>=16?(this._a48=this._a32<<(h-=16)|this._a16>>16-h,this._a32=65535&(this._a16<<h|this._a00>>16-h),this._a16=this._a00<<h&65535,this._a00=0):(this._a48=this._a48<<h|this._a32>>16-h,this._a32=65535&(this._a32<<h|this._a16>>16-h),this._a16=65535&(this._a16<<h|this._a00>>16-h),this._a00=this._a00<<h&65535),d||(this._a48&=65535),this},o.prototype.rotateLeft=o.prototype.rotl=function(h){if(0==(h%=64))return this;if(h>=32){var d=this._a00;if(this._a00=this._a32,this._a32=d,d=this._a48,this._a48=this._a16,this._a16=d,32==h)return this;h-=32}var m=this._a48<<16|this._a32,M=this._a16<<16|this._a00,g=m<<h|M>>>32-h,E=M<<h|m>>>32-h;return this._a00=65535&E,this._a16=E>>>16,this._a32=65535&g,this._a48=g>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(h){if(0==(h%=64))return this;if(h>=32){var d=this._a00;if(this._a00=this._a32,this._a32=d,d=this._a48,this._a48=this._a16,this._a16=d,32==h)return this;h-=32}var m=this._a48<<16|this._a32,M=this._a16<<16|this._a00,g=m>>>h|M<<32-h,E=M>>>h|m<<32-h;return this._a00=65535&E,this._a16=E>>>16,this._a32=65535&g,this._a48=g>>>16,this},o.prototype.clone=function(){return new o(this._a00,this._a16,this._a32,this._a48)},void 0!==(x=function(){return o}.apply(q,[]))&&(Z.exports=x)}()},3684:(Z,q,N)=>{"use strict";q.utils=N(7451),q.Cipher=N(8170),q.DES=N(4631),q.CBC=N(9454),q.EDE=N(1862)},9454:(Z,q,N)=>{"use strict";var x=N(2391),O=N(3894),_={};function w(p){x.equal(p.length,8,"Invalid IV length"),this.iv=new Array(8);for(var y=0;y<this.iv.length;y++)this.iv[y]=p[y]}q.instantiate=function o(p){function y(m){p.call(this,m),this._cbcInit()}O(y,p);for(var v=Object.keys(_),h=0;h<v.length;h++){var d=v[h];y.prototype[d]=_[d]}return y.create=function(M){return new y(M)},y},_._cbcInit=function(){var y=new w(this.options.iv);this._cbcState=y},_._update=function(y,v,h,d){var M=this.constructor.super_.prototype,g=this._cbcState.iv;if("encrypt"===this.type){for(var E=0;E<this.blockSize;E++)g[E]^=y[v+E];for(M._update.call(this,g,0,h,d),E=0;E<this.blockSize;E++)g[E]=h[d+E]}else{for(M._update.call(this,y,v,h,d),E=0;E<this.blockSize;E++)h[d+E]^=g[E];for(E=0;E<this.blockSize;E++)g[E]=y[v+E]}}},8170:(Z,q,N)=>{"use strict";var x=N(2391);function O(_){this.options=_,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}Z.exports=O,O.prototype._init=function(){},O.prototype.update=function(w){return 0===w.length?[]:"decrypt"===this.type?this._updateDecrypt(w):this._updateEncrypt(w)},O.prototype._buffer=function(w,o){for(var p=Math.min(this.buffer.length-this.bufferOff,w.length-o),y=0;y<p;y++)this.buffer[this.bufferOff+y]=w[o+y];return this.bufferOff+=p,p},O.prototype._flushBuffer=function(w,o){return this._update(this.buffer,0,w,o),this.bufferOff=0,this.blockSize},O.prototype._updateEncrypt=function(w){var o=0,p=0,v=new Array(((this.bufferOff+w.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(o+=this._buffer(w,o),this.bufferOff===this.buffer.length&&(p+=this._flushBuffer(v,p)));for(var h=w.length-(w.length-o)%this.blockSize;o<h;o+=this.blockSize)this._update(w,o,v,p),p+=this.blockSize;for(;o<w.length;o++,this.bufferOff++)this.buffer[this.bufferOff]=w[o];return v},O.prototype._updateDecrypt=function(w){for(var o=0,p=0,y=Math.ceil((this.bufferOff+w.length)/this.blockSize)-1,v=new Array(y*this.blockSize);y>0;y--)o+=this._buffer(w,o),p+=this._flushBuffer(v,p);return o+=this._buffer(w,o),v},O.prototype.final=function(w){var o,p;return w&&(o=this.update(w)),p="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),o?o.concat(p):p},O.prototype._pad=function(w,o){if(0===o)return!1;for(;o<w.length;)w[o++]=0;return!0},O.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var w=new Array(this.blockSize);return this._update(this.buffer,0,w,0),w},O.prototype._unpad=function(w){return w},O.prototype._finalDecrypt=function(){x.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var w=new Array(this.blockSize);return this._flushBuffer(w,0),this._unpad(w)}},4631:(Z,q,N)=>{"use strict";var x=N(2391),O=N(3894),_=N(7451),w=N(8170);function o(){this.tmp=new Array(2),this.keys=null}function p(v){w.call(this,v);var h=new o;this._desState=h,this.deriveKeys(h,v.key)}O(p,w),Z.exports=p,p.create=function(h){return new p(h)};var y=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];p.prototype.deriveKeys=function(h,d){h.keys=new Array(32),x.equal(d.length,this.blockSize,"Invalid key length");var m=_.readUInt32BE(d,0),M=_.readUInt32BE(d,4);_.pc1(m,M,h.tmp,0),m=h.tmp[0],M=h.tmp[1];for(var g=0;g<h.keys.length;g+=2){var E=y[g>>>1];m=_.r28shl(m,E),M=_.r28shl(M,E),_.pc2(m,M,h.keys,g)}},p.prototype._update=function(h,d,m,M){var g=this._desState,E=_.readUInt32BE(h,d),R=_.readUInt32BE(h,d+4);_.ip(E,R,g.tmp,0),E=g.tmp[0],R=g.tmp[1],"encrypt"===this.type?this._encrypt(g,E,R,g.tmp,0):this._decrypt(g,E,R,g.tmp,0),R=g.tmp[1],_.writeUInt32BE(m,E=g.tmp[0],M),_.writeUInt32BE(m,R,M+4)},p.prototype._pad=function(h,d){for(var m=h.length-d,M=d;M<h.length;M++)h[M]=m;return!0},p.prototype._unpad=function(h){for(var d=h[h.length-1],m=h.length-d;m<h.length;m++)x.equal(h[m],d);return h.slice(0,h.length-d)},p.prototype._encrypt=function(h,d,m,M,g){for(var E=d,R=m,T=0;T<h.keys.length;T+=2){var k=h.keys[T],I=h.keys[T+1];_.expand(R,h.tmp,0);var U=_.substitute(k^=h.tmp[0],I^=h.tmp[1]),W=R;R=(E^_.permute(U))>>>0,E=W}_.rip(R,E,M,g)},p.prototype._decrypt=function(h,d,m,M,g){for(var E=m,R=d,T=h.keys.length-2;T>=0;T-=2){var k=h.keys[T],I=h.keys[T+1];_.expand(E,h.tmp,0);var U=_.substitute(k^=h.tmp[0],I^=h.tmp[1]),W=E;E=(R^_.permute(U))>>>0,R=W}_.rip(E,R,M,g)}},1862:(Z,q,N)=>{"use strict";var x=N(2391),O=N(3894),_=N(8170),w=N(4631);function o(y,v){x.equal(v.length,24,"Invalid key length");var h=v.slice(0,8),d=v.slice(8,16),m=v.slice(16,24);this.ciphers="encrypt"===y?[w.create({type:"encrypt",key:h}),w.create({type:"decrypt",key:d}),w.create({type:"encrypt",key:m})]:[w.create({type:"decrypt",key:m}),w.create({type:"encrypt",key:d}),w.create({type:"decrypt",key:h})]}function p(y){_.call(this,y);var v=new o(this.type,this.options.key);this._edeState=v}O(p,_),Z.exports=p,p.create=function(v){return new p(v)},p.prototype._update=function(v,h,d,m){var M=this._edeState;M.ciphers[0]._update(v,h,d,m),M.ciphers[1]._update(d,m,d,m),M.ciphers[2]._update(d,m,d,m)},p.prototype._pad=w.prototype._pad,p.prototype._unpad=w.prototype._unpad},7451:(Z,q)=>{"use strict";q.readUInt32BE=function(w,o){return(w[0+o]<<24|w[1+o]<<16|w[2+o]<<8|w[3+o])>>>0},q.writeUInt32BE=function(w,o,p){w[0+p]=o>>>24,w[1+p]=o>>>16&255,w[2+p]=o>>>8&255,w[3+p]=255&o},q.ip=function(w,o,p,y){for(var v=0,h=0,d=6;d>=0;d-=2){for(var m=0;m<=24;m+=8)v<<=1,v|=o>>>m+d&1;for(m=0;m<=24;m+=8)v<<=1,v|=w>>>m+d&1}for(d=6;d>=0;d-=2){for(m=1;m<=25;m+=8)h<<=1,h|=o>>>m+d&1;for(m=1;m<=25;m+=8)h<<=1,h|=w>>>m+d&1}p[y+0]=v>>>0,p[y+1]=h>>>0},q.rip=function(w,o,p,y){for(var v=0,h=0,d=0;d<4;d++)for(var m=24;m>=0;m-=8)v<<=1,v|=o>>>m+d&1,v<<=1,v|=w>>>m+d&1;for(d=4;d<8;d++)for(m=24;m>=0;m-=8)h<<=1,h|=o>>>m+d&1,h<<=1,h|=w>>>m+d&1;p[y+0]=v>>>0,p[y+1]=h>>>0},q.pc1=function(w,o,p,y){for(var v=0,h=0,d=7;d>=5;d--){for(var m=0;m<=24;m+=8)v<<=1,v|=o>>m+d&1;for(m=0;m<=24;m+=8)v<<=1,v|=w>>m+d&1}for(m=0;m<=24;m+=8)v<<=1,v|=o>>m+d&1;for(d=1;d<=3;d++){for(m=0;m<=24;m+=8)h<<=1,h|=o>>m+d&1;for(m=0;m<=24;m+=8)h<<=1,h|=w>>m+d&1}for(m=0;m<=24;m+=8)h<<=1,h|=w>>m+d&1;p[y+0]=v>>>0,p[y+1]=h>>>0},q.r28shl=function(w,o){return w<<o&268435455|w>>>28-o};var N=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];q.pc2=function(w,o,p,y){for(var v=0,h=0,d=N.length>>>1,m=0;m<d;m++)v<<=1,v|=w>>>N[m]&1;for(m=d;m<N.length;m++)h<<=1,h|=o>>>N[m]&1;p[y+0]=v>>>0,p[y+1]=h>>>0},q.expand=function(w,o,p){var y=0,v=0;y=(1&w)<<5|w>>>27;for(var h=23;h>=15;h-=4)y<<=6,y|=w>>>h&63;for(h=11;h>=3;h-=4)v|=w>>>h&63,v<<=6;v|=(31&w)<<1|w>>>31,o[p+0]=y>>>0,o[p+1]=v>>>0};var x=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];q.substitute=function(w,o){for(var p=0,y=0;y<4;y++)p<<=4,p|=x[64*y+(w>>>18-6*y&63)];for(y=0;y<4;y++)p<<=4,p|=x[256+64*y+(o>>>18-6*y&63)];return p>>>0};var O=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];q.permute=function(w){for(var o=0,p=0;p<O.length;p++)o<<=1,o|=w>>>O[p]&1;return o>>>0},q.padSplit=function(w,o,p){for(var y=w.toString(2);y.length<o;)y="0"+y;for(var v=[],h=0;h<o;h+=p)v.push(y.slice(h,h+p));return v.join(" ")}},8829:(Z,q,N)=>{var x=N(5563),O=N(9799),_=N(1419),o={binary:!0,hex:!0,base64:!0};q.DiffieHellmanGroup=q.createDiffieHellmanGroup=q.getDiffieHellman=function w(y){var v=new Buffer(O[y].prime,"hex"),h=new Buffer(O[y].gen,"hex");return new _(v,h)},q.createDiffieHellman=q.DiffieHellman=function p(y,v,h,d){return Buffer.isBuffer(v)||void 0===o[v]?p(y,"binary",v,h):(v=v||"binary",d=d||"binary",h=h||new Buffer([2]),Buffer.isBuffer(h)||(h=new Buffer(h,d)),"number"==typeof y?new _(x(y,h),h,!0):(Buffer.isBuffer(y)||(y=new Buffer(y,v)),new _(y,h,!0)))}},1419:(Z,q,N)=>{var x=N(8313),_=new(N(7079)),w=new x(24),o=new x(11),p=new x(10),y=new x(3),v=new x(7),h=N(5563),d=N(3753);function m(k,I){return I=I||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,I)),this._pub=new x(k),this}function M(k,I){return I=I||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,I)),this._priv=new x(k),this}Z.exports=R;var g={};function R(k,I,U){this.setGenerator(I),this.__prime=new x(k),this._prime=x.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,U?(this.setPublicKey=m,this.setPrivateKey=M):this._primeCode=8}function T(k,I){var U=new Buffer(k.toArray());return I?U.toString(I):U}Object.defineProperty(R.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function E(k,I){var U=I.toString("hex"),V=[U,k.toString(16)].join("_");if(V in g)return g[V];var J,W=0;if(k.isEven()||!h.simpleSieve||!h.fermatTest(k)||!_.test(k))return W+=1,g[V]=W+="02"===U||"05"===U?8:4,W;switch(_.test(k.shrn(1))||(W+=2),U){case"02":k.mod(w).cmp(o)&&(W+=8);break;case"05":(J=k.mod(p)).cmp(y)&&J.cmp(v)&&(W+=8);break;default:W+=4}return g[V]=W,W}(this.__prime,this.__gen)),this._primeCode}}),R.prototype.generateKeys=function(){return this._priv||(this._priv=new x(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},R.prototype.computeSecret=function(k){var I=(k=(k=new x(k)).toRed(this._prime)).redPow(this._priv).fromRed(),U=new Buffer(I.toArray()),V=this.getPrime();if(U.length<V.length){var W=new Buffer(V.length-U.length);W.fill(0),U=Buffer.concat([W,U])}return U},R.prototype.getPublicKey=function(I){return T(this._pub,I)},R.prototype.getPrivateKey=function(I){return T(this._priv,I)},R.prototype.getPrime=function(k){return T(this.__prime,k)},R.prototype.getGenerator=function(k){return T(this._gen,k)},R.prototype.setGenerator=function(k,I){return I=I||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,I)),this.__gen=k,this._gen=new x(k),this}},5563:(Z,q,N)=>{var x=N(3753);Z.exports=W,W.simpleSieve=U,W.fermatTest=V;var O=N(8313),_=new O(24),o=new(N(7079)),p=new O(1),y=new O(2),v=new O(5),m=(new O(16),new O(8),new O(10)),M=new O(3),E=(new O(7),new O(11)),R=new O(4),k=(new O(12),null);function U(J){for(var K=function I(){if(null!==k)return k;var K=[];K[0]=2;for(var P=1,S=3;S<1048576;S+=2){for(var z=Math.ceil(Math.sqrt(S)),u=0;u<P&&K[u]<=z&&S%K[u]!=0;u++);P!==u&&K[u]<=z||(K[P++]=S)}return k=K,K}(),P=0;P<K.length;P++)if(0===J.modn(K[P]))return 0===J.cmpn(K[P]);return!0}function V(J){var K=O.mont(J);return 0===y.toRed(K).redPow(J.subn(1)).fromRed().cmpn(1)}function W(J,K){if(J<16)return new O(2===K||5===K?[140,123]:[140,39]);K=new O(K);for(var P,S;;){for(P=new O(x(Math.ceil(J/8)));P.bitLength()>J;)P.ishrn(1);if(P.isEven()&&P.iadd(p),P.testn(1)||P.iadd(y),K.cmp(y)){if(!K.cmp(v))for(;P.mod(m).cmp(M);)P.iadd(R)}else for(;P.mod(_).cmp(E);)P.iadd(R);if(U(S=P.shrn(1))&&U(P)&&V(S)&&V(P)&&o.test(S)&&o.test(P))return P}}},8313:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(7748).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},7715:(Z,q,N)=>{"use strict";var x=q;x.version=N(8597).i8,x.utils=N(1970),x.rand=N(7950),x.curve=N(6270),x.curves=N(2916),x.ec=N(7626),x.eddsa=N(1885)},7902:(Z,q,N)=>{"use strict";var x=N(7433),O=N(1970),_=O.getNAF,w=O.getJSF,o=O.assert;function p(v,h){this.type=v,this.p=new x(h.p,16),this.red=h.prime?x.red(h.prime):x.mont(this.p),this.zero=new x(0).toRed(this.red),this.one=new x(1).toRed(this.red),this.two=new x(2).toRed(this.red),this.n=h.n&&new x(h.n,16),this.g=h.g&&this.pointFromJSON(h.g,h.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var d=this.n&&this.p.div(this.n);!d||d.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function y(v,h){this.curve=v,this.type=h,this.precomputed=null}Z.exports=p,p.prototype.point=function(){throw new Error("Not implemented")},p.prototype.validate=function(){throw new Error("Not implemented")},p.prototype._fixedNafMul=function(h,d){o(h.precomputed);var m=h._getDoubles(),M=_(d,1,this._bitLength),g=(1<<m.step+1)-(m.step%2==0?2:1);g/=3;var R,T,E=[];for(R=0;R<M.length;R+=m.step){T=0;for(var k=R+m.step-1;k>=R;k--)T=(T<<1)+M[k];E.push(T)}for(var I=this.jpoint(null,null,null),U=this.jpoint(null,null,null),V=g;V>0;V--){for(R=0;R<E.length;R++)(T=E[R])===V?U=U.mixedAdd(m.points[R]):T===-V&&(U=U.mixedAdd(m.points[R].neg()));I=I.add(U)}return I.toP()},p.prototype._wnafMul=function(h,d){for(var m=4,M=h._getNAFPoints(m),g=M.points,E=_(d,m=M.wnd,this._bitLength),R=this.jpoint(null,null,null),T=E.length-1;T>=0;T--){for(var k=0;T>=0&&0===E[T];T--)k++;if(T>=0&&k++,R=R.dblp(k),T<0)break;var I=E[T];o(0!==I),R="affine"===h.type?R.mixedAdd(I>0?g[I-1>>1]:g[-I-1>>1].neg()):R.add(I>0?g[I-1>>1]:g[-I-1>>1].neg())}return"affine"===h.type?R.toP():R},p.prototype._wnafMulAdd=function(h,d,m,M,g){var I,U,V,E=this._wnafT1,R=this._wnafT2,T=this._wnafT3,k=0;for(I=0;I<M;I++){var W=(V=d[I])._getNAFPoints(h);E[I]=W.wnd,R[I]=W.points}for(I=M-1;I>=1;I-=2){var J=I-1,K=I;if(1===E[J]&&1===E[K]){var P=[d[J],null,null,d[K]];0===d[J].y.cmp(d[K].y)?(P[1]=d[J].add(d[K]),P[2]=d[J].toJ().mixedAdd(d[K].neg())):0===d[J].y.cmp(d[K].y.redNeg())?(P[1]=d[J].toJ().mixedAdd(d[K]),P[2]=d[J].add(d[K].neg())):(P[1]=d[J].toJ().mixedAdd(d[K]),P[2]=d[J].toJ().mixedAdd(d[K].neg()));var S=[-3,-1,-5,-7,0,7,5,1,3],z=w(m[J],m[K]);for(k=Math.max(z[0].length,k),T[J]=new Array(k),T[K]=new Array(k),U=0;U<k;U++)T[J][U]=S[3*(1+(0|z[0][U]))+(1+(0|z[1][U]))],T[K][U]=0,R[J]=P}else T[J]=_(m[J],E[J],this._bitLength),T[K]=_(m[K],E[K],this._bitLength),k=Math.max(T[J].length,k),k=Math.max(T[K].length,k)}var n=this.jpoint(null,null,null),a=this._wnafT4;for(I=k;I>=0;I--){for(var i=0;I>=0;){var s=!0;for(U=0;U<M;U++)a[U]=0|T[U][I],0!==a[U]&&(s=!1);if(!s)break;i++,I--}if(I>=0&&i++,n=n.dblp(i),I<0)break;for(U=0;U<M;U++){var l=a[U];0!==l&&(l>0?V=R[U][l-1>>1]:l<0&&(V=R[U][-l-1>>1].neg()),n="affine"===V.type?n.mixedAdd(V):n.add(V))}}for(I=0;I<M;I++)R[I]=null;return g?n:n.toP()},p.BasePoint=y,y.prototype.eq=function(){throw new Error("Not implemented")},y.prototype.validate=function(){return this.curve.validate(this)},p.prototype.decodePoint=function(h,d){h=O.toArray(h,d);var m=this.p.byteLength();if((4===h[0]||6===h[0]||7===h[0])&&h.length-1==2*m)return 6===h[0]?o(h[h.length-1]%2==0):7===h[0]&&o(h[h.length-1]%2==1),this.point(h.slice(1,1+m),h.slice(1+m,1+2*m));if((2===h[0]||3===h[0])&&h.length-1===m)return this.pointFromX(h.slice(1,1+m),3===h[0]);throw new Error("Unknown point format")},y.prototype.encodeCompressed=function(h){return this.encode(h,!0)},y.prototype._encode=function(h){var d=this.curve.p.byteLength(),m=this.getX().toArray("be",d);return h?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",d))},y.prototype.encode=function(h,d){return O.encode(this._encode(d),h)},y.prototype.precompute=function(h){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,h),d.beta=this._getBeta(),this.precomputed=d,this},y.prototype._hasDoubles=function(h){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((h.bitLength()+1)/d.step)},y.prototype._getDoubles=function(h,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var m=[this],M=this,g=0;g<d;g+=h){for(var E=0;E<h;E++)M=M.dbl();m.push(M)}return{step:h,points:m}},y.prototype._getNAFPoints=function(h){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],m=(1<<h)-1,M=1===m?null:this.dbl(),g=1;g<m;g++)d[g]=d[g-1].add(M);return{wnd:h,points:d}},y.prototype._getBeta=function(){return null},y.prototype.dblp=function(h){for(var d=this,m=0;m<h;m++)d=d.dbl();return d}},3835:(Z,q,N)=>{"use strict";var x=N(1970),O=N(7433),_=N(3894),w=N(7902),o=x.assert;function p(v){this.twisted=1!=(0|v.a),this.mOneA=this.twisted&&-1==(0|v.a),this.extended=this.mOneA,w.call(this,"edwards",v),this.a=new O(v.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new O(v.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new O(v.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|v.c)}function y(v,h,d,m,M){w.BasePoint.call(this,v,"projective"),null===h&&null===d&&null===m?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new O(h,16),this.y=new O(d,16),this.z=m?new O(m,16):this.curve.one,this.t=M&&new O(M,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}_(p,w),Z.exports=p,p.prototype._mulA=function(h){return this.mOneA?h.redNeg():this.a.redMul(h)},p.prototype._mulC=function(h){return this.oneC?h:this.c.redMul(h)},p.prototype.jpoint=function(h,d,m,M){return this.point(h,d,m,M)},p.prototype.pointFromX=function(h,d){(h=new O(h,16)).red||(h=h.toRed(this.red));var m=h.redSqr(),M=this.c2.redSub(this.a.redMul(m)),g=this.one.redSub(this.c2.redMul(this.d).redMul(m)),E=M.redMul(g.redInvm()),R=E.redSqrt();if(0!==R.redSqr().redSub(E).cmp(this.zero))throw new Error("invalid point");var T=R.fromRed().isOdd();return(d&&!T||!d&&T)&&(R=R.redNeg()),this.point(h,R)},p.prototype.pointFromY=function(h,d){(h=new O(h,16)).red||(h=h.toRed(this.red));var m=h.redSqr(),M=m.redSub(this.c2),g=m.redMul(this.d).redMul(this.c2).redSub(this.a),E=M.redMul(g.redInvm());if(0===E.cmp(this.zero)){if(d)throw new Error("invalid point");return this.point(this.zero,h)}var R=E.redSqrt();if(0!==R.redSqr().redSub(E).cmp(this.zero))throw new Error("invalid point");return R.fromRed().isOdd()!==d&&(R=R.redNeg()),this.point(R,h)},p.prototype.validate=function(h){if(h.isInfinity())return!0;h.normalize();var d=h.x.redSqr(),m=h.y.redSqr(),M=d.redMul(this.a).redAdd(m),g=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(m)));return 0===M.cmp(g)},_(y,w.BasePoint),p.prototype.pointFromJSON=function(h){return y.fromJSON(this,h)},p.prototype.point=function(h,d,m,M){return new y(this,h,d,m,M)},y.fromJSON=function(h,d){return new y(h,d[0],d[1],d[2])},y.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},y.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},y.prototype._extDbl=function(){var h=this.x.redSqr(),d=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var M=this.curve._mulA(h),g=this.x.redAdd(this.y).redSqr().redISub(h).redISub(d),E=M.redAdd(d),R=E.redSub(m),T=M.redSub(d),k=g.redMul(R),I=E.redMul(T),U=g.redMul(T),V=R.redMul(E);return this.curve.point(k,I,V,U)},y.prototype._projDbl=function(){var M,g,E,R,T,k,h=this.x.redAdd(this.y).redSqr(),d=this.x.redSqr(),m=this.y.redSqr();if(this.curve.twisted){var I=(R=this.curve._mulA(d)).redAdd(m);this.zOne?(M=h.redSub(d).redSub(m).redMul(I.redSub(this.curve.two)),g=I.redMul(R.redSub(m)),E=I.redSqr().redSub(I).redSub(I)):(T=this.z.redSqr(),k=I.redSub(T).redISub(T),M=h.redSub(d).redISub(m).redMul(k),g=I.redMul(R.redSub(m)),E=I.redMul(k))}else R=d.redAdd(m),T=this.curve._mulC(this.z).redSqr(),k=R.redSub(T).redSub(T),M=this.curve._mulC(h.redISub(R)).redMul(k),g=this.curve._mulC(R).redMul(d.redISub(m)),E=R.redMul(k);return this.curve.point(M,g,E)},y.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},y.prototype._extAdd=function(h){var d=this.y.redSub(this.x).redMul(h.y.redSub(h.x)),m=this.y.redAdd(this.x).redMul(h.y.redAdd(h.x)),M=this.t.redMul(this.curve.dd).redMul(h.t),g=this.z.redMul(h.z.redAdd(h.z)),E=m.redSub(d),R=g.redSub(M),T=g.redAdd(M),k=m.redAdd(d),I=E.redMul(R),U=T.redMul(k),V=E.redMul(k),W=R.redMul(T);return this.curve.point(I,U,W,V)},y.prototype._projAdd=function(h){var U,V,d=this.z.redMul(h.z),m=d.redSqr(),M=this.x.redMul(h.x),g=this.y.redMul(h.y),E=this.curve.d.redMul(M).redMul(g),R=m.redSub(E),T=m.redAdd(E),k=this.x.redAdd(this.y).redMul(h.x.redAdd(h.y)).redISub(M).redISub(g),I=d.redMul(R).redMul(k);return this.curve.twisted?(U=d.redMul(T).redMul(g.redSub(this.curve._mulA(M))),V=R.redMul(T)):(U=d.redMul(T).redMul(g.redSub(M)),V=this.curve._mulC(R).redMul(T)),this.curve.point(I,U,V)},y.prototype.add=function(h){return this.isInfinity()?h:h.isInfinity()?this:this.curve.extended?this._extAdd(h):this._projAdd(h)},y.prototype.mul=function(h){return this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve._wnafMul(this,h)},y.prototype.mulAdd=function(h,d,m){return this.curve._wnafMulAdd(1,[this,d],[h,m],2,!1)},y.prototype.jmulAdd=function(h,d,m){return this.curve._wnafMulAdd(1,[this,d],[h,m],2,!0)},y.prototype.normalize=function(){if(this.zOne)return this;var h=this.z.redInvm();return this.x=this.x.redMul(h),this.y=this.y.redMul(h),this.t&&(this.t=this.t.redMul(h)),this.z=this.curve.one,this.zOne=!0,this},y.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},y.prototype.getX=function(){return this.normalize(),this.x.fromRed()},y.prototype.getY=function(){return this.normalize(),this.y.fromRed()},y.prototype.eq=function(h){return this===h||0===this.getX().cmp(h.getX())&&0===this.getY().cmp(h.getY())},y.prototype.eqXToP=function(h){var d=h.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;for(var m=h.clone(),M=this.curve.redN.redMul(this.z);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(d.redIAdd(M),0===this.x.cmp(d))return!0}},y.prototype.toP=y.prototype.normalize,y.prototype.mixedAdd=y.prototype.add},6270:(Z,q,N)=>{"use strict";var x=q;x.base=N(7902),x.short=N(1781),x.mont=N(7064),x.edwards=N(3835)},7064:(Z,q,N)=>{"use strict";var x=N(7433),O=N(3894),_=N(7902),w=N(1970);function o(y){_.call(this,"mont",y),this.a=new x(y.a,16).toRed(this.red),this.b=new x(y.b,16).toRed(this.red),this.i4=new x(4).toRed(this.red).redInvm(),this.two=new x(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function p(y,v,h){_.BasePoint.call(this,y,"projective"),null===v&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new x(v,16),this.z=new x(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}O(o,_),Z.exports=o,o.prototype.validate=function(v){var h=v.normalize().x,d=h.redSqr(),m=d.redMul(h).redAdd(d.redMul(this.a)).redAdd(h);return 0===m.redSqrt().redSqr().cmp(m)},O(p,_.BasePoint),o.prototype.decodePoint=function(v,h){return this.point(w.toArray(v,h),1)},o.prototype.point=function(v,h){return new p(this,v,h)},o.prototype.pointFromJSON=function(v){return p.fromJSON(this,v)},p.prototype.precompute=function(){},p.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},p.fromJSON=function(v,h){return new p(v,h[0],h[1]||v.one)},p.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},p.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},p.prototype.dbl=function(){var h=this.x.redAdd(this.z).redSqr(),m=this.x.redSub(this.z).redSqr(),M=h.redSub(m),g=h.redMul(m),E=M.redMul(m.redAdd(this.curve.a24.redMul(M)));return this.curve.point(g,E)},p.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.diffAdd=function(v,h){var d=this.x.redAdd(this.z),m=this.x.redSub(this.z),M=v.x.redAdd(v.z),E=v.x.redSub(v.z).redMul(d),R=M.redMul(m),T=h.z.redMul(E.redAdd(R).redSqr()),k=h.x.redMul(E.redISub(R).redSqr());return this.curve.point(T,k)},p.prototype.mul=function(v){for(var h=v.clone(),d=this,m=this.curve.point(null,null),g=[];0!==h.cmpn(0);h.iushrn(1))g.push(h.andln(1));for(var E=g.length-1;E>=0;E--)0===g[E]?(d=d.diffAdd(m,this),m=m.dbl()):(m=d.diffAdd(m,this),d=d.dbl());return m},p.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},p.prototype.eq=function(v){return 0===this.getX().cmp(v.getX())},p.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},p.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},1781:(Z,q,N)=>{"use strict";var x=N(1970),O=N(7433),_=N(3894),w=N(7902),o=x.assert;function p(h){w.call(this,"short",h),this.a=new O(h.a,16).toRed(this.red),this.b=new O(h.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(h),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function y(h,d,m,M){w.BasePoint.call(this,h,"affine"),null===d&&null===m?(this.x=null,this.y=null,this.inf=!0):(this.x=new O(d,16),this.y=new O(m,16),M&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function v(h,d,m,M){w.BasePoint.call(this,h,"jacobian"),null===d&&null===m&&null===M?(this.x=this.curve.one,this.y=this.curve.one,this.z=new O(0)):(this.x=new O(d,16),this.y=new O(m,16),this.z=new O(M,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_(p,w),Z.exports=p,p.prototype._getEndomorphism=function(d){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var m,M;if(d.beta)m=new O(d.beta,16).toRed(this.red);else{var g=this._getEndoRoots(this.p);m=(m=g[0].cmp(g[1])<0?g[0]:g[1]).toRed(this.red)}if(d.lambda)M=new O(d.lambda,16);else{var E=this._getEndoRoots(this.n);0===this.g.mul(E[0]).x.cmp(this.g.x.redMul(m))?M=E[0]:o(0===this.g.mul(M=E[1]).x.cmp(this.g.x.redMul(m)))}return{beta:m,lambda:M,basis:d.basis?d.basis.map(function(T){return{a:new O(T.a,16),b:new O(T.b,16)}}):this._getEndoBasis(M)}}},p.prototype._getEndoRoots=function(d){var m=d===this.p?this.red:O.mont(d),M=new O(2).toRed(m).redInvm(),g=M.redNeg(),E=new O(3).toRed(m).redNeg().redSqrt().redMul(M);return[g.redAdd(E).fromRed(),g.redSub(E).fromRed()]},p.prototype._getEndoBasis=function(d){for(var I,U,V,W,J,K,P,z,u,m=this.n.ushrn(Math.floor(this.n.bitLength()/2)),M=d,g=this.n.clone(),E=new O(1),R=new O(0),T=new O(0),k=new O(1),S=0;0!==M.cmpn(0);){var t=g.div(M);z=g.sub(t.mul(M)),u=T.sub(t.mul(E));var n=k.sub(t.mul(R));if(!V&&z.cmp(m)<0)I=P.neg(),U=E,V=z.neg(),W=u;else if(V&&2==++S)break;P=z,g=M,M=z,T=E,E=u,k=R,R=n}J=z.neg(),K=u;var a=V.sqr().add(W.sqr());return J.sqr().add(K.sqr()).cmp(a)>=0&&(J=I,K=U),V.negative&&(V=V.neg(),W=W.neg()),J.negative&&(J=J.neg(),K=K.neg()),[{a:V,b:W},{a:J,b:K}]},p.prototype._endoSplit=function(d){var m=this.endo.basis,M=m[0],g=m[1],E=g.b.mul(d).divRound(this.n),R=M.b.neg().mul(d).divRound(this.n),T=E.mul(M.a),k=R.mul(g.a),I=E.mul(M.b),U=R.mul(g.b);return{k1:d.sub(T).sub(k),k2:I.add(U).neg()}},p.prototype.pointFromX=function(d,m){(d=new O(d,16)).red||(d=d.toRed(this.red));var M=d.redSqr().redMul(d).redIAdd(d.redMul(this.a)).redIAdd(this.b),g=M.redSqrt();if(0!==g.redSqr().redSub(M).cmp(this.zero))throw new Error("invalid point");var E=g.fromRed().isOdd();return(m&&!E||!m&&E)&&(g=g.redNeg()),this.point(d,g)},p.prototype.validate=function(d){if(d.inf)return!0;var m=d.x,M=d.y,g=this.a.redMul(m),E=m.redSqr().redMul(m).redIAdd(g).redIAdd(this.b);return 0===M.redSqr().redISub(E).cmpn(0)},p.prototype._endoWnafMulAdd=function(d,m,M){for(var g=this._endoWnafT1,E=this._endoWnafT2,R=0;R<d.length;R++){var T=this._endoSplit(m[R]),k=d[R],I=k._getBeta();T.k1.negative&&(T.k1.ineg(),k=k.neg(!0)),T.k2.negative&&(T.k2.ineg(),I=I.neg(!0)),g[2*R]=k,g[2*R+1]=I,E[2*R]=T.k1,E[2*R+1]=T.k2}for(var U=this._wnafMulAdd(1,g,E,2*R,M),V=0;V<2*R;V++)g[V]=null,E[V]=null;return U},_(y,w.BasePoint),p.prototype.point=function(d,m,M){return new y(this,d,m,M)},p.prototype.pointFromJSON=function(d,m){return y.fromJSON(this,d,m)},y.prototype._getBeta=function(){if(this.curve.endo){var d=this.precomputed;if(d&&d.beta)return d.beta;var m=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(d){var M=this.curve,g=function(E){return M.point(E.x.redMul(M.endo.beta),E.y)};d.beta=m,m.precomputed={beta:null,naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(g)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(g)}}}return m}},y.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},y.fromJSON=function(d,m,M){"string"==typeof m&&(m=JSON.parse(m));var g=d.point(m[0],m[1],M);if(!m[2])return g;function E(T){return d.point(T[0],T[1],M)}var R=m[2];return g.precomputed={beta:null,doubles:R.doubles&&{step:R.doubles.step,points:[g].concat(R.doubles.points.map(E))},naf:R.naf&&{wnd:R.naf.wnd,points:[g].concat(R.naf.points.map(E))}},g},y.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},y.prototype.isInfinity=function(){return this.inf},y.prototype.add=function(d){if(this.inf)return d;if(d.inf)return this;if(this.eq(d))return this.dbl();if(this.neg().eq(d))return this.curve.point(null,null);if(0===this.x.cmp(d.x))return this.curve.point(null,null);var m=this.y.redSub(d.y);0!==m.cmpn(0)&&(m=m.redMul(this.x.redSub(d.x).redInvm()));var M=m.redSqr().redISub(this.x).redISub(d.x),g=m.redMul(this.x.redSub(M)).redISub(this.y);return this.curve.point(M,g)},y.prototype.dbl=function(){if(this.inf)return this;var d=this.y.redAdd(this.y);if(0===d.cmpn(0))return this.curve.point(null,null);var m=this.curve.a,M=this.x.redSqr(),g=d.redInvm(),E=M.redAdd(M).redIAdd(M).redIAdd(m).redMul(g),R=E.redSqr().redISub(this.x.redAdd(this.x)),T=E.redMul(this.x.redSub(R)).redISub(this.y);return this.curve.point(R,T)},y.prototype.getX=function(){return this.x.fromRed()},y.prototype.getY=function(){return this.y.fromRed()},y.prototype.mul=function(d){return d=new O(d,16),this.isInfinity()?this:this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve.endo?this.curve._endoWnafMulAdd([this],[d]):this.curve._wnafMul(this,d)},y.prototype.mulAdd=function(d,m,M){var g=[this,m],E=[d,M];return this.curve.endo?this.curve._endoWnafMulAdd(g,E):this.curve._wnafMulAdd(1,g,E,2)},y.prototype.jmulAdd=function(d,m,M){var g=[this,m],E=[d,M];return this.curve.endo?this.curve._endoWnafMulAdd(g,E,!0):this.curve._wnafMulAdd(1,g,E,2,!0)},y.prototype.eq=function(d){return this===d||this.inf===d.inf&&(this.inf||0===this.x.cmp(d.x)&&0===this.y.cmp(d.y))},y.prototype.neg=function(d){if(this.inf)return this;var m=this.curve.point(this.x,this.y.redNeg());if(d&&this.precomputed){var M=this.precomputed,g=function(E){return E.neg()};m.precomputed={naf:M.naf&&{wnd:M.naf.wnd,points:M.naf.points.map(g)},doubles:M.doubles&&{step:M.doubles.step,points:M.doubles.points.map(g)}}}return m},y.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},_(v,w.BasePoint),p.prototype.jpoint=function(d,m,M){return new v(this,d,m,M)},v.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var d=this.z.redInvm(),m=d.redSqr(),M=this.x.redMul(m),g=this.y.redMul(m).redMul(d);return this.curve.point(M,g)},v.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},v.prototype.add=function(d){if(this.isInfinity())return d;if(d.isInfinity())return this;var m=d.z.redSqr(),M=this.z.redSqr(),g=this.x.redMul(m),E=d.x.redMul(M),R=this.y.redMul(m.redMul(d.z)),T=d.y.redMul(M.redMul(this.z)),k=g.redSub(E),I=R.redSub(T);if(0===k.cmpn(0))return 0!==I.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var U=k.redSqr(),V=U.redMul(k),W=g.redMul(U),J=I.redSqr().redIAdd(V).redISub(W).redISub(W),K=I.redMul(W.redISub(J)).redISub(R.redMul(V)),P=this.z.redMul(d.z).redMul(k);return this.curve.jpoint(J,K,P)},v.prototype.mixedAdd=function(d){if(this.isInfinity())return d.toJ();if(d.isInfinity())return this;var m=this.z.redSqr(),M=this.x,g=d.x.redMul(m),E=this.y,R=d.y.redMul(m).redMul(this.z),T=M.redSub(g),k=E.redSub(R);if(0===T.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var I=T.redSqr(),U=I.redMul(T),V=M.redMul(I),W=k.redSqr().redIAdd(U).redISub(V).redISub(V),J=k.redMul(V.redISub(W)).redISub(E.redMul(U)),K=this.z.redMul(T);return this.curve.jpoint(W,J,K)},v.prototype.dblp=function(d){if(0===d)return this;if(this.isInfinity())return this;if(!d)return this.dbl();var m;if(this.curve.zeroA||this.curve.threeA){var M=this;for(m=0;m<d;m++)M=M.dbl();return M}var g=this.curve.a,E=this.curve.tinv,R=this.x,T=this.y,k=this.z,I=k.redSqr().redSqr(),U=T.redAdd(T);for(m=0;m<d;m++){var V=R.redSqr(),W=U.redSqr(),J=W.redSqr(),K=V.redAdd(V).redIAdd(V).redIAdd(g.redMul(I)),P=R.redMul(W),S=K.redSqr().redISub(P.redAdd(P)),z=P.redISub(S),u=K.redMul(z);u=u.redIAdd(u).redISub(J);var t=U.redMul(k);m+1<d&&(I=I.redMul(J)),R=S,k=t,U=u}return this.curve.jpoint(R,U.redMul(E),k)},v.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},v.prototype._zeroDbl=function(){var d,m,M;if(this.zOne){var g=this.x.redSqr(),E=this.y.redSqr(),R=E.redSqr(),T=this.x.redAdd(E).redSqr().redISub(g).redISub(R);T=T.redIAdd(T);var k=g.redAdd(g).redIAdd(g),I=k.redSqr().redISub(T).redISub(T),U=R.redIAdd(R);U=(U=U.redIAdd(U)).redIAdd(U),d=I,m=k.redMul(T.redISub(I)).redISub(U),M=this.y.redAdd(this.y)}else{var V=this.x.redSqr(),W=this.y.redSqr(),J=W.redSqr(),K=this.x.redAdd(W).redSqr().redISub(V).redISub(J);K=K.redIAdd(K);var P=V.redAdd(V).redIAdd(V),S=P.redSqr(),z=J.redIAdd(J);z=(z=z.redIAdd(z)).redIAdd(z),d=S.redISub(K).redISub(K),m=P.redMul(K.redISub(d)).redISub(z),M=(M=this.y.redMul(this.z)).redIAdd(M)}return this.curve.jpoint(d,m,M)},v.prototype._threeDbl=function(){var d,m,M;if(this.zOne){var g=this.x.redSqr(),E=this.y.redSqr(),R=E.redSqr(),T=this.x.redAdd(E).redSqr().redISub(g).redISub(R);T=T.redIAdd(T);var k=g.redAdd(g).redIAdd(g).redIAdd(this.curve.a),I=k.redSqr().redISub(T).redISub(T);d=I;var U=R.redIAdd(R);U=(U=U.redIAdd(U)).redIAdd(U),m=k.redMul(T.redISub(I)).redISub(U),M=this.y.redAdd(this.y)}else{var V=this.z.redSqr(),W=this.y.redSqr(),J=this.x.redMul(W),K=this.x.redSub(V).redMul(this.x.redAdd(V));K=K.redAdd(K).redIAdd(K);var P=J.redIAdd(J),S=(P=P.redIAdd(P)).redAdd(P);d=K.redSqr().redISub(S),M=this.y.redAdd(this.z).redSqr().redISub(W).redISub(V);var z=W.redSqr();z=(z=(z=z.redIAdd(z)).redIAdd(z)).redIAdd(z),m=K.redMul(P.redISub(d)).redISub(z)}return this.curve.jpoint(d,m,M)},v.prototype._dbl=function(){var d=this.curve.a,m=this.x,M=this.y,g=this.z,E=g.redSqr().redSqr(),R=m.redSqr(),T=M.redSqr(),k=R.redAdd(R).redIAdd(R).redIAdd(d.redMul(E)),I=m.redAdd(m),U=(I=I.redIAdd(I)).redMul(T),V=k.redSqr().redISub(U.redAdd(U)),W=U.redISub(V),J=T.redSqr();J=(J=(J=J.redIAdd(J)).redIAdd(J)).redIAdd(J);var K=k.redMul(W).redISub(J),P=M.redAdd(M).redMul(g);return this.curve.jpoint(V,K,P)},v.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var d=this.x.redSqr(),m=this.y.redSqr(),M=this.z.redSqr(),g=m.redSqr(),E=d.redAdd(d).redIAdd(d),R=E.redSqr(),T=this.x.redAdd(m).redSqr().redISub(d).redISub(g),k=(T=(T=(T=T.redIAdd(T)).redAdd(T).redIAdd(T)).redISub(R)).redSqr(),I=g.redIAdd(g);I=(I=(I=I.redIAdd(I)).redIAdd(I)).redIAdd(I);var U=E.redIAdd(T).redSqr().redISub(R).redISub(k).redISub(I),V=m.redMul(U);V=(V=V.redIAdd(V)).redIAdd(V);var W=this.x.redMul(k).redISub(V);W=(W=W.redIAdd(W)).redIAdd(W);var J=this.y.redMul(U.redMul(I.redISub(U)).redISub(T.redMul(k)));J=(J=(J=J.redIAdd(J)).redIAdd(J)).redIAdd(J);var K=this.z.redAdd(T).redSqr().redISub(M).redISub(k);return this.curve.jpoint(W,J,K)},v.prototype.mul=function(d,m){return d=new O(d,m),this.curve._wnafMul(this,d)},v.prototype.eq=function(d){if("affine"===d.type)return this.eq(d.toJ());if(this===d)return!0;var m=this.z.redSqr(),M=d.z.redSqr();if(0!==this.x.redMul(M).redISub(d.x.redMul(m)).cmpn(0))return!1;var g=m.redMul(this.z),E=M.redMul(d.z);return 0===this.y.redMul(E).redISub(d.y.redMul(g)).cmpn(0)},v.prototype.eqXToP=function(d){var m=this.z.redSqr(),M=d.toRed(this.curve.red).redMul(m);if(0===this.x.cmp(M))return!0;for(var g=d.clone(),E=this.curve.redN.redMul(m);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(M.redIAdd(E),0===this.x.cmp(M))return!0}},v.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},v.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},2916:(Z,q,N)=>{"use strict";var v,x=q,O=N(7084),_=N(6270),o=N(1970).assert;function p(h){this.curve="short"===h.type?new _.short(h):"edwards"===h.type?new _.edwards(h):new _.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function y(h,d){Object.defineProperty(x,h,{configurable:!0,enumerable:!0,get:function(){var m=new p(d);return Object.defineProperty(x,h,{configurable:!0,enumerable:!0,value:m}),m}})}x.PresetCurve=p,y("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:O.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),y("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:O.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),y("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:O.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),y("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:O.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),y("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:O.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),y("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:O.sha256,gRed:!1,g:["9"]}),y("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:O.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{v=N(5150)}catch(h){v=void 0}y("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:O.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v]})},7626:(Z,q,N)=>{"use strict";var x=N(7433),O=N(2438),_=N(1970),w=N(2916),o=N(7950),p=_.assert,y=N(1259),v=N(5957);function h(d){if(!(this instanceof h))return new h(d);"string"==typeof d&&(p(Object.prototype.hasOwnProperty.call(w,d),"Unknown curve "+d),d=w[d]),d instanceof w.PresetCurve&&(d={curve:d}),this.curve=d.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=d.curve.g,this.g.precompute(d.curve.n.bitLength()+1),this.hash=d.hash||d.curve.hash}Z.exports=h,h.prototype.keyPair=function(m){return new y(this,m)},h.prototype.keyFromPrivate=function(m,M){return y.fromPrivate(this,m,M)},h.prototype.keyFromPublic=function(m,M){return y.fromPublic(this,m,M)},h.prototype.genKeyPair=function(m){m||(m={});for(var M=new O({hash:this.hash,pers:m.pers,persEnc:m.persEnc||"utf8",entropy:m.entropy||o(this.hash.hmacStrength),entropyEnc:m.entropy&&m.entropyEnc||"utf8",nonce:this.n.toArray()}),g=this.n.byteLength(),E=this.n.sub(new x(2));;){var R=new x(M.generate(g));if(!(R.cmp(E)>0))return R.iaddn(1),this.keyFromPrivate(R)}},h.prototype._truncateToN=function(m,M){var g=8*m.byteLength()-this.n.bitLength();return g>0&&(m=m.ushrn(g)),!M&&m.cmp(this.n)>=0?m.sub(this.n):m},h.prototype.sign=function(m,M,g,E){"object"==typeof g&&(E=g,g=null),E||(E={}),M=this.keyFromPrivate(M,g),m=this._truncateToN(new x(m,16));for(var R=this.n.byteLength(),T=M.getPrivate().toArray("be",R),k=m.toArray("be",R),I=new O({hash:this.hash,entropy:T,nonce:k,pers:E.pers,persEnc:E.persEnc||"utf8"}),U=this.n.sub(new x(1)),V=0;;V++){var W=E.k?E.k(V):new x(I.generate(this.n.byteLength()));if(!((W=this._truncateToN(W,!0)).cmpn(1)<=0||W.cmp(U)>=0)){var J=this.g.mul(W);if(!J.isInfinity()){var K=J.getX(),P=K.umod(this.n);if(0!==P.cmpn(0)){var S=W.invm(this.n).mul(P.mul(M.getPrivate()).iadd(m));if(0!==(S=S.umod(this.n)).cmpn(0)){var z=(J.getY().isOdd()?1:0)|(0!==K.cmp(P)?2:0);return E.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),z^=1),new v({r:P,s:S,recoveryParam:z})}}}}}},h.prototype.verify=function(m,M,g,E){m=this._truncateToN(new x(m,16)),g=this.keyFromPublic(g,E);var R=(M=new v(M,"hex")).r,T=M.s;if(R.cmpn(1)<0||R.cmp(this.n)>=0||T.cmpn(1)<0||T.cmp(this.n)>=0)return!1;var V,k=T.invm(this.n),I=k.mul(m).umod(this.n),U=k.mul(R).umod(this.n);return this.curve._maxwellTrick?!(V=this.g.jmulAdd(I,g.getPublic(),U)).isInfinity()&&V.eqXToP(R):!(V=this.g.mulAdd(I,g.getPublic(),U)).isInfinity()&&0===V.getX().umod(this.n).cmp(R)},h.prototype.recoverPubKey=function(d,m,M,g){p((3&M)===M,"The recovery param is more than two bits"),m=new v(m,g);var E=this.n,R=new x(d),T=m.r,k=m.s,I=1&M,U=M>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&U)throw new Error("Unable to find sencond key candinate");T=this.curve.pointFromX(U?T.add(this.curve.n):T,I);var V=m.r.invm(E),W=E.sub(R).mul(V).umod(E),J=k.mul(V).umod(E);return this.g.mulAdd(W,T,J)},h.prototype.getKeyRecoveryParam=function(d,m,M,g){if(null!==(m=new v(m,g)).recoveryParam)return m.recoveryParam;for(var E=0;E<4;E++){var R;try{R=this.recoverPubKey(d,m,E)}catch(T){continue}if(R.eq(M))return E}throw new Error("Unable to find valid recovery factor")}},1259:(Z,q,N)=>{"use strict";var x=N(7433),_=N(1970).assert;function w(o,p){this.ec=o,this.priv=null,this.pub=null,p.priv&&this._importPrivate(p.priv,p.privEnc),p.pub&&this._importPublic(p.pub,p.pubEnc)}Z.exports=w,w.fromPublic=function(p,y,v){return y instanceof w?y:new w(p,{pub:y,pubEnc:v})},w.fromPrivate=function(p,y,v){return y instanceof w?y:new w(p,{priv:y,privEnc:v})},w.prototype.validate=function(){var p=this.getPublic();return p.isInfinity()?{result:!1,reason:"Invalid public key"}:p.validate()?p.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},w.prototype.getPublic=function(p,y){return"string"==typeof p&&(y=p,p=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),y?this.pub.encode(y,p):this.pub},w.prototype.getPrivate=function(p){return"hex"===p?this.priv.toString(16,2):this.priv},w.prototype._importPrivate=function(p,y){this.priv=new x(p,y||16),this.priv=this.priv.umod(this.ec.curve.n)},w.prototype._importPublic=function(p,y){if(p.x||p.y)return"mont"===this.ec.curve.type?_(p.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&_(p.x&&p.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(p.x,p.y));this.pub=this.ec.curve.decodePoint(p,y)},w.prototype.derive=function(p){return p.validate()||_(p.validate(),"public point not validated"),p.mul(this.priv).getX()},w.prototype.sign=function(p,y,v){return this.ec.sign(p,this,y,v)},w.prototype.verify=function(p,y){return this.ec.verify(p,y,this)},w.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},5957:(Z,q,N)=>{"use strict";var x=N(7433),O=N(1970),_=O.assert;function w(h,d){if(h instanceof w)return h;this._importDER(h,d)||(_(h.r&&h.s,"Signature without r or s"),this.r=new x(h.r,16),this.s=new x(h.s,16),this.recoveryParam=void 0===h.recoveryParam?null:h.recoveryParam)}function o(){this.place=0}function p(h,d){var m=h[d.place++];if(!(128&m))return m;var M=15&m;if(0===M||M>4)return!1;for(var g=0,E=0,R=d.place;E<M;E++,R++)g<<=8,g|=h[R],g>>>=0;return!(g<=127)&&(d.place=R,g)}function y(h){for(var d=0,m=h.length-1;!h[d]&&!(128&h[d+1])&&d<m;)d++;return 0===d?h:h.slice(d)}function v(h,d){if(d<128)h.push(d);else{var m=1+(Math.log(d)/Math.LN2>>>3);for(h.push(128|m);--m;)h.push(d>>>(m<<3)&255);h.push(d)}}Z.exports=w,w.prototype._importDER=function(d,m){d=O.toArray(d,m);var M=new o;if(48!==d[M.place++])return!1;var g=p(d,M);if(!1===g||g+M.place!==d.length||2!==d[M.place++])return!1;var E=p(d,M);if(!1===E)return!1;var R=d.slice(M.place,E+M.place);if(M.place+=E,2!==d[M.place++])return!1;var T=p(d,M);if(!1===T||d.length!==T+M.place)return!1;var k=d.slice(M.place,T+M.place);if(0===R[0]){if(!(128&R[1]))return!1;R=R.slice(1)}if(0===k[0]){if(!(128&k[1]))return!1;k=k.slice(1)}return this.r=new x(R),this.s=new x(k),this.recoveryParam=null,!0},w.prototype.toDER=function(d){var m=this.r.toArray(),M=this.s.toArray();for(128&m[0]&&(m=[0].concat(m)),128&M[0]&&(M=[0].concat(M)),m=y(m),M=y(M);!(M[0]||128&M[1]);)M=M.slice(1);var g=[2];v(g,m.length),(g=g.concat(m)).push(2),v(g,M.length);var E=g.concat(M),R=[48];return v(R,E.length),R=R.concat(E),O.encode(R,d)}},1885:(Z,q,N)=>{"use strict";var x=N(7084),O=N(2916),_=N(1970),w=_.assert,o=_.parseBytes,p=N(7535),y=N(8241);function v(h){if(w("ed25519"===h,"only tested with ed25519 so far"),!(this instanceof v))return new v(h);this.curve=h=O[h].curve,this.g=h.g,this.g.precompute(h.n.bitLength()+1),this.pointClass=h.point().constructor,this.encodingLength=Math.ceil(h.n.bitLength()/8),this.hash=x.sha512}Z.exports=v,v.prototype.sign=function(d,m){d=o(d);var M=this.keyFromSecret(m),g=this.hashInt(M.messagePrefix(),d),E=this.g.mul(g),R=this.encodePoint(E),T=this.hashInt(R,M.pubBytes(),d).mul(M.priv()),k=g.add(T).umod(this.curve.n);return this.makeSignature({R:E,S:k,Rencoded:R})},v.prototype.verify=function(d,m,M){d=o(d),m=this.makeSignature(m);var g=this.keyFromPublic(M),E=this.hashInt(m.Rencoded(),g.pubBytes(),d),R=this.g.mul(m.S());return m.R().add(g.pub().mul(E)).eq(R)},v.prototype.hashInt=function(){for(var d=this.hash(),m=0;m<arguments.length;m++)d.update(arguments[m]);return _.intFromLE(d.digest()).umod(this.curve.n)},v.prototype.keyFromPublic=function(d){return p.fromPublic(this,d)},v.prototype.keyFromSecret=function(d){return p.fromSecret(this,d)},v.prototype.makeSignature=function(d){return d instanceof y?d:new y(this,d)},v.prototype.encodePoint=function(d){var m=d.getY().toArray("le",this.encodingLength);return m[this.encodingLength-1]|=d.getX().isOdd()?128:0,m},v.prototype.decodePoint=function(d){var m=(d=_.parseBytes(d)).length-1,M=d.slice(0,m).concat(-129&d[m]),g=0!=(128&d[m]),E=_.intFromLE(M);return this.curve.pointFromY(E,g)},v.prototype.encodeInt=function(d){return d.toArray("le",this.encodingLength)},v.prototype.decodeInt=function(d){return _.intFromLE(d)},v.prototype.isPoint=function(d){return d instanceof this.pointClass}},7535:(Z,q,N)=>{"use strict";var x=N(1970),O=x.assert,_=x.parseBytes,w=x.cachedProperty;function o(p,y){this.eddsa=p,this._secret=_(y.secret),p.isPoint(y.pub)?this._pub=y.pub:this._pubBytes=_(y.pub)}o.fromPublic=function(y,v){return v instanceof o?v:new o(y,{pub:v})},o.fromSecret=function(y,v){return v instanceof o?v:new o(y,{secret:v})},o.prototype.secret=function(){return this._secret},w(o,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),w(o,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),w(o,"privBytes",function(){var y=this.eddsa,v=this.hash(),h=y.encodingLength-1,d=v.slice(0,y.encodingLength);return d[0]&=248,d[h]&=127,d[h]|=64,d}),w(o,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),w(o,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),w(o,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),o.prototype.sign=function(y){return O(this._secret,"KeyPair can only verify"),this.eddsa.sign(y,this)},o.prototype.verify=function(y,v){return this.eddsa.verify(y,v,this)},o.prototype.getSecret=function(y){return O(this._secret,"KeyPair is public only"),x.encode(this.secret(),y)},o.prototype.getPublic=function(y){return x.encode(this.pubBytes(),y)},Z.exports=o},8241:(Z,q,N)=>{"use strict";var x=N(7433),O=N(1970),_=O.assert,w=O.cachedProperty,o=O.parseBytes;function p(y,v){this.eddsa=y,"object"!=typeof v&&(v=o(v)),Array.isArray(v)&&(v={R:v.slice(0,y.encodingLength),S:v.slice(y.encodingLength)}),_(v.R&&v.S,"Signature without R or S"),y.isPoint(v.R)&&(this._R=v.R),v.S instanceof x&&(this._S=v.S),this._Rencoded=Array.isArray(v.R)?v.R:v.Rencoded,this._Sencoded=Array.isArray(v.S)?v.S:v.Sencoded}w(p,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),w(p,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),w(p,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),w(p,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),p.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},p.prototype.toHex=function(){return O.encode(this.toBytes(),"hex").toUpperCase()},Z.exports=p},5150:Z=>{Z.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},1970:(Z,q,N)=>{"use strict";var x=q,O=N(7433),_=N(2391),w=N(8195);x.assert=_,x.toArray=w.toArray,x.zero2=w.zero2,x.toHex=w.toHex,x.encode=w.encode,x.getNAF=function o(d,m,M){var g=new Array(Math.max(d.bitLength(),M)+1);g.fill(0);for(var E=1<<m+1,R=d.clone(),T=0;T<g.length;T++){var k,I=R.andln(E-1);R.isOdd()?R.isubn(k=I>(E>>1)-1?(E>>1)-I:I):k=0,g[T]=k,R.iushrn(1)}return g},x.getJSF=function p(d,m){var M=[[],[]];d=d.clone(),m=m.clone();for(var R,g=0,E=0;d.cmpn(-g)>0||m.cmpn(-E)>0;){var I,U,T=d.andln(3)+g&3,k=m.andln(3)+E&3;3===T&&(T=-1),3===k&&(k=-1),I=0==(1&T)?0:3!=(R=d.andln(7)+g&7)&&5!==R||2!==k?T:-T,M[0].push(I),U=0==(1&k)?0:3!=(R=m.andln(7)+E&7)&&5!==R||2!==T?k:-k,M[1].push(U),2*g===I+1&&(g=1-g),2*E===U+1&&(E=1-E),d.iushrn(1),m.iushrn(1)}return M},x.cachedProperty=function y(d,m,M){var g="_"+m;d.prototype[m]=function(){return void 0!==this[g]?this[g]:this[g]=M.call(this)}},x.parseBytes=function v(d){return"string"==typeof d?x.toArray(d,"hex"):d},x.intFromLE=function h(d){return new O(d,"hex","le")}},7433:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(5568).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},9069:Z=>{"use strict";var x,q="object"==typeof Reflect?Reflect:null,N=q&&"function"==typeof q.apply?q.apply:function(V,W,J){return Function.prototype.apply.call(V,W,J)};x=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:function(V){return Object.getOwnPropertyNames(V)};var _=Number.isNaN||function(V){return V!=V};function w(){w.init.call(this)}Z.exports=w,Z.exports.once=function T(U,V){return new Promise(function(W,J){function K(S){U.removeListener(V,P),J(S)}function P(){"function"==typeof U.removeListener&&U.removeListener("error",K),W([].slice.call(arguments))}I(U,V,P,{once:!0}),"error"!==V&&function k(U,V,W){"function"==typeof U.on&&I(U,"error",V,W)}(U,K,{once:!0})})},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var o=10;function p(U){if("function"!=typeof U)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}function y(U){return void 0===U._maxListeners?w.defaultMaxListeners:U._maxListeners}function v(U,V,W,J){var K,P,S;if(p(W),void 0===(P=U._events)?(P=U._events=Object.create(null),U._eventsCount=0):(void 0!==P.newListener&&(U.emit("newListener",V,W.listener?W.listener:W),P=U._events),S=P[V]),void 0===S)S=P[V]=W,++U._eventsCount;else if("function"==typeof S?S=P[V]=J?[W,S]:[S,W]:J?S.unshift(W):S.push(W),(K=y(U))>0&&S.length>K&&!S.warned){S.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=U,z.type=V,z.count=S.length,function O(U){console&&console.warn&&console.warn(U)}(z)}return U}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(U,V,W){var J={fired:!1,wrapFn:void 0,target:U,type:V,listener:W},K=h.bind(J);return K.listener=W,J.wrapFn=K,K}function m(U,V,W){var J=U._events;if(void 0===J)return[];var K=J[V];return void 0===K?[]:"function"==typeof K?W?[K.listener||K]:[K]:W?function R(U){for(var V=new Array(U.length),W=0;W<V.length;++W)V[W]=U[W].listener||U[W];return V}(K):g(K,K.length)}function M(U){var V=this._events;if(void 0!==V){var W=V[U];if("function"==typeof W)return 1;if(void 0!==W)return W.length}return 0}function g(U,V){for(var W=new Array(V),J=0;J<V;++J)W[J]=U[J];return W}function I(U,V,W,J){if("function"==typeof U.on)J.once?U.once(V,W):U.on(V,W);else{if("function"!=typeof U.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U);U.addEventListener(V,function K(P){J.once&&U.removeEventListener(V,K),W(P)})}}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(U){if("number"!=typeof U||U<0||_(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");o=U}}),w.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(V){if("number"!=typeof V||V<0||_(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this},w.prototype.getMaxListeners=function(){return y(this)},w.prototype.emit=function(V){for(var W=[],J=1;J<arguments.length;J++)W.push(arguments[J]);var K="error"===V,P=this._events;if(void 0!==P)K=K&&void 0===P.error;else if(!K)return!1;if(K){var S;if(W.length>0&&(S=W[0]),S instanceof Error)throw S;var z=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw z.context=S,z}var u=P[V];if(void 0===u)return!1;if("function"==typeof u)N(u,this,W);else{var t=u.length,n=g(u,t);for(J=0;J<t;++J)N(n[J],this,W)}return!0},w.prototype.on=w.prototype.addListener=function(V,W){return v(this,V,W,!1)},w.prototype.prependListener=function(V,W){return v(this,V,W,!0)},w.prototype.once=function(V,W){return p(W),this.on(V,d(this,V,W)),this},w.prototype.prependOnceListener=function(V,W){return p(W),this.prependListener(V,d(this,V,W)),this},w.prototype.off=w.prototype.removeListener=function(V,W){var J,K,P,S,z;if(p(W),void 0===(K=this._events))return this;if(void 0===(J=K[V]))return this;if(J===W||J.listener===W)0==--this._eventsCount?this._events=Object.create(null):(delete K[V],K.removeListener&&this.emit("removeListener",V,J.listener||W));else if("function"!=typeof J){for(P=-1,S=J.length-1;S>=0;S--)if(J[S]===W||J[S].listener===W){z=J[S].listener,P=S;break}if(P<0)return this;0===P?J.shift():function E(U,V){for(;V+1<U.length;V++)U[V]=U[V+1];U.pop()}(J,P),1===J.length&&(K[V]=J[0]),void 0!==K.removeListener&&this.emit("removeListener",V,z||W)}return this},w.prototype.removeAllListeners=function(V){var W,J,K;if(void 0===(J=this._events))return this;if(void 0===J.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==J[V]&&(0==--this._eventsCount?this._events=Object.create(null):delete J[V]),this;if(0===arguments.length){var S,P=Object.keys(J);for(K=0;K<P.length;++K)"removeListener"!==(S=P[K])&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(W=J[V]))this.removeListener(V,W);else if(void 0!==W)for(K=W.length-1;K>=0;K--)this.removeListener(V,W[K]);return this},w.prototype.listeners=function(V){return m(this,V,!0)},w.prototype.rawListeners=function(V){return m(this,V,!1)},w.listenerCount=function(U,V){return"function"==typeof U.listenerCount?U.listenerCount(V):M.call(U,V)},w.prototype.listenerCount=M,w.prototype.eventNames=function(){return this._eventsCount>0?x(this._events):[]}},347:(Z,q,N)=>{var x=N(3502).Buffer,O=N(8095);Z.exports=function _(w,o,p,y){if(x.isBuffer(w)||(w=x.from(w,"binary")),o&&(x.isBuffer(o)||(o=x.from(o,"binary")),8!==o.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var v=p/8,h=x.alloc(v),d=x.alloc(y||0),m=x.alloc(0);v>0||y>0;){var M=new O;M.update(m),M.update(w),o&&M.update(o),m=M.digest();var g=0;if(v>0){var E=h.length-v;g=Math.min(v,m.length),m.copy(h,E,0,g),v-=g}if(g<m.length&&y>0){var R=d.length-y,T=Math.min(y,m.length-g);m.copy(d,R,g,g+T),y-=T}}return m.fill(0),{key:h,iv:d}}},9650:(Z,q,N)=>{"use strict";var x=N(8444).Buffer,O=N(5685).Transform;function o(p){O.call(this),this._block=x.allocUnsafe(p),this._blockSize=p,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}N(3894)(o,O),o.prototype._transform=function(p,y,v){var h=null;try{this.update(p,y)}catch(d){h=d}v(h)},o.prototype._flush=function(p){var y=null;try{this.push(this.digest())}catch(v){y=v}p(y)},o.prototype.update=function(p,y){if(function w(p,y){if(!x.isBuffer(p)&&"string"!=typeof p)throw new TypeError(y+" must be a string or a buffer")}(p,"Data"),this._finalized)throw new Error("Digest already called");x.isBuffer(p)||(p=x.from(p,y));for(var v=this._block,h=0;this._blockOffset+p.length-h>=this._blockSize;){for(var d=this._blockOffset;d<this._blockSize;)v[d++]=p[h++];this._update(),this._blockOffset=0}for(;h<p.length;)v[this._blockOffset++]=p[h++];for(var m=0,M=8*p.length;M>0;++m)this._length[m]+=M,(M=this._length[m]/4294967296|0)>0&&(this._length[m]-=4294967296*M);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(p){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var y=this._digest();void 0!==p&&(y=y.toString(p)),this._block.fill(0),this._blockOffset=0;for(var v=0;v<4;++v)this._length[v]=0;return y},o.prototype._digest=function(){throw new Error("_digest is not implemented")},Z.exports=o},8444:(Z,q,N)=>{var x=N(3172),O=x.Buffer;function _(o,p){for(var y in o)p[y]=o[y]}function w(o,p,y){return O(o,p,y)}O.from&&O.alloc&&O.allocUnsafe&&O.allocUnsafeSlow?Z.exports=x:(_(x,q),q.Buffer=w),w.prototype=Object.create(O.prototype),_(O,w),w.from=function(o,p,y){if("number"==typeof o)throw new TypeError("Argument must not be a number");return O(o,p,y)},w.alloc=function(o,p,y){if("number"!=typeof o)throw new TypeError("Argument must be a number");var v=O(o);return void 0!==p?"string"==typeof y?v.fill(p,y):v.fill(p):v.fill(0),v},w.allocUnsafe=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return O(o)},w.allocUnsafeSlow=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return x.SlowBuffer(o)}},7084:(Z,q,N)=>{var x=q;x.utils=N(9299),x.common=N(3800),x.sha=N(4962),x.ripemd=N(9458),x.hmac=N(2194),x.sha1=x.sha.sha1,x.sha256=x.sha.sha256,x.sha224=x.sha.sha224,x.sha384=x.sha.sha384,x.sha512=x.sha.sha512,x.ripemd160=x.ripemd.ripemd160},3800:(Z,q,N)=>{"use strict";var x=N(9299),O=N(2391);function _(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}q.BlockHash=_,_.prototype.update=function(o,p){if(o=x.toArray(o,p),this.pending=this.pending?this.pending.concat(o):o,this.pendingTotal+=o.length,this.pending.length>=this._delta8){var y=(o=this.pending).length%this._delta8;this.pending=o.slice(o.length-y,o.length),0===this.pending.length&&(this.pending=null),o=x.join32(o,0,o.length-y,this.endian);for(var v=0;v<o.length;v+=this._delta32)this._update(o,v,v+this._delta32)}return this},_.prototype.digest=function(o){return this.update(this._pad()),O(null===this.pending),this._digest(o)},_.prototype._pad=function(){var o=this.pendingTotal,p=this._delta8,y=p-(o+this.padLength)%p,v=new Array(y+this.padLength);v[0]=128;for(var h=1;h<y;h++)v[h]=0;if(o<<=3,"big"===this.endian){for(var d=8;d<this.padLength;d++)v[h++]=0;v[h++]=0,v[h++]=0,v[h++]=0,v[h++]=0,v[h++]=o>>>24&255,v[h++]=o>>>16&255,v[h++]=o>>>8&255,v[h++]=255&o}else for(v[h++]=255&o,v[h++]=o>>>8&255,v[h++]=o>>>16&255,v[h++]=o>>>24&255,v[h++]=0,v[h++]=0,v[h++]=0,v[h++]=0,d=8;d<this.padLength;d++)v[h++]=0;return v}},2194:(Z,q,N)=>{"use strict";var x=N(9299),O=N(2391);function _(w,o,p){if(!(this instanceof _))return new _(w,o,p);this.Hash=w,this.blockSize=w.blockSize/8,this.outSize=w.outSize/8,this.inner=null,this.outer=null,this._init(x.toArray(o,p))}Z.exports=_,_.prototype._init=function(o){o.length>this.blockSize&&(o=(new this.Hash).update(o).digest()),O(o.length<=this.blockSize);for(var p=o.length;p<this.blockSize;p++)o.push(0);for(p=0;p<o.length;p++)o[p]^=54;for(this.inner=(new this.Hash).update(o),p=0;p<o.length;p++)o[p]^=106;this.outer=(new this.Hash).update(o)},_.prototype.update=function(o,p){return this.inner.update(o,p),this},_.prototype.digest=function(o){return this.outer.update(this.inner.digest()),this.outer.digest(o)}},9458:(Z,q,N)=>{"use strict";var x=N(9299),O=N(3800),_=x.rotl32,w=x.sum32,o=x.sum32_3,p=x.sum32_4,y=O.BlockHash;function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(T,k,I,U){return T<=15?k^I^U:T<=31?k&I|~k&U:T<=47?(k|~I)^U:T<=63?k&U|I&~U:k^(I|~U)}function m(T){return T<=15?1352829926:T<=31?1548603684:T<=47?1836072691:T<=63?2053994217:0}x.inherits(v,y),q.ripemd160=v,v.blockSize=512,v.outSize=160,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(k,I){for(var U=this.h[0],V=this.h[1],W=this.h[2],J=this.h[3],K=this.h[4],P=U,S=V,z=W,u=J,t=K,n=0;n<80;n++){var a=w(_(p(U,h(n,V,W,J),k[M[n]+I],(T=n)<=15?0:T<=31?1518500249:T<=47?1859775393:T<=63?2400959708:2840853838),E[n]),K);U=K,K=J,J=_(W,10),W=V,V=a,a=w(_(p(P,h(79-n,S,z,u),k[g[n]+I],m(n)),R[n]),t),P=t,t=u,u=_(z,10),z=S,S=a}var T;a=o(this.h[1],W,u),this.h[1]=o(this.h[2],J,t),this.h[2]=o(this.h[3],K,P),this.h[3]=o(this.h[4],U,S),this.h[4]=o(this.h[0],V,z),this.h[0]=a},v.prototype._digest=function(k){return"hex"===k?x.toHex32(this.h,"little"):x.split32(this.h,"little")};var M=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],R=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},4962:(Z,q,N)=>{"use strict";q.sha1=N(9007),q.sha224=N(55),q.sha256=N(9342),q.sha384=N(8634),q.sha512=N(39)},9007:(Z,q,N)=>{"use strict";var x=N(9299),O=N(3800),_=N(3113),w=x.rotl32,o=x.sum32,p=x.sum32_5,y=_.ft_1,v=O.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;v.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}x.inherits(d,v),Z.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(M,g){for(var E=this.W,R=0;R<16;R++)E[R]=M[g+R];for(;R<E.length;R++)E[R]=w(E[R-3]^E[R-8]^E[R-14]^E[R-16],1);var T=this.h[0],k=this.h[1],I=this.h[2],U=this.h[3],V=this.h[4];for(R=0;R<E.length;R++){var W=~~(R/20),J=p(w(T,5),y(W,k,I,U),V,E[R],h[W]);V=U,U=I,I=w(k,30),k=T,T=J}this.h[0]=o(this.h[0],T),this.h[1]=o(this.h[1],k),this.h[2]=o(this.h[2],I),this.h[3]=o(this.h[3],U),this.h[4]=o(this.h[4],V)},d.prototype._digest=function(M){return"hex"===M?x.toHex32(this.h,"big"):x.split32(this.h,"big")}},55:(Z,q,N)=>{"use strict";var x=N(9299),O=N(9342);function _(){if(!(this instanceof _))return new _;O.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}x.inherits(_,O),Z.exports=_,_.blockSize=512,_.outSize=224,_.hmacStrength=192,_.padLength=64,_.prototype._digest=function(o){return"hex"===o?x.toHex32(this.h.slice(0,7),"big"):x.split32(this.h.slice(0,7),"big")}},9342:(Z,q,N)=>{"use strict";var x=N(9299),O=N(3800),_=N(3113),w=N(2391),o=x.sum32,p=x.sum32_4,y=x.sum32_5,v=_.ch32,h=_.maj32,d=_.s0_256,m=_.s1_256,M=_.g0_256,g=_.g1_256,E=O.BlockHash,R=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function T(){if(!(this instanceof T))return new T;E.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=R,this.W=new Array(64)}x.inherits(T,E),Z.exports=T,T.blockSize=512,T.outSize=256,T.hmacStrength=192,T.padLength=64,T.prototype._update=function(I,U){for(var V=this.W,W=0;W<16;W++)V[W]=I[U+W];for(;W<V.length;W++)V[W]=p(g(V[W-2]),V[W-7],M(V[W-15]),V[W-16]);var J=this.h[0],K=this.h[1],P=this.h[2],S=this.h[3],z=this.h[4],u=this.h[5],t=this.h[6],n=this.h[7];for(w(this.k.length===V.length),W=0;W<V.length;W++){var a=y(n,m(z),v(z,u,t),this.k[W],V[W]),i=o(d(J),h(J,K,P));n=t,t=u,u=z,z=o(S,a),S=P,P=K,K=J,J=o(a,i)}this.h[0]=o(this.h[0],J),this.h[1]=o(this.h[1],K),this.h[2]=o(this.h[2],P),this.h[3]=o(this.h[3],S),this.h[4]=o(this.h[4],z),this.h[5]=o(this.h[5],u),this.h[6]=o(this.h[6],t),this.h[7]=o(this.h[7],n)},T.prototype._digest=function(I){return"hex"===I?x.toHex32(this.h,"big"):x.split32(this.h,"big")}},8634:(Z,q,N)=>{"use strict";var x=N(9299),O=N(39);function _(){if(!(this instanceof _))return new _;O.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}x.inherits(_,O),Z.exports=_,_.blockSize=1024,_.outSize=384,_.hmacStrength=192,_.padLength=128,_.prototype._digest=function(o){return"hex"===o?x.toHex32(this.h.slice(0,12),"big"):x.split32(this.h.slice(0,12),"big")}},39:(Z,q,N)=>{"use strict";var x=N(9299),O=N(3800),_=N(2391),w=x.rotr64_hi,o=x.rotr64_lo,p=x.shr64_hi,y=x.shr64_lo,v=x.sum64,h=x.sum64_hi,d=x.sum64_lo,m=x.sum64_4_hi,M=x.sum64_4_lo,g=x.sum64_5_hi,E=x.sum64_5_lo,R=O.BlockHash,T=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function k(){if(!(this instanceof k))return new k;R.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=T,this.W=new Array(160)}function I(a,i,s,l,b){var c=a&s^~a&b;return c<0&&(c+=4294967296),c}function U(a,i,s,l,b,c){var r=i&l^~i&c;return r<0&&(r+=4294967296),r}function V(a,i,s,l,b){var c=a&s^a&b^s&b;return c<0&&(c+=4294967296),c}function W(a,i,s,l,b,c){var r=i&l^i&c^l&c;return r<0&&(r+=4294967296),r}function J(a,i){var c=w(a,i,28)^w(i,a,2)^w(i,a,7);return c<0&&(c+=4294967296),c}function K(a,i){var c=o(a,i,28)^o(i,a,2)^o(i,a,7);return c<0&&(c+=4294967296),c}function P(a,i){var c=w(a,i,14)^w(a,i,18)^w(i,a,9);return c<0&&(c+=4294967296),c}function S(a,i){var c=o(a,i,14)^o(a,i,18)^o(i,a,9);return c<0&&(c+=4294967296),c}function z(a,i){var c=w(a,i,1)^w(a,i,8)^p(a,i,7);return c<0&&(c+=4294967296),c}function u(a,i){var c=o(a,i,1)^o(a,i,8)^y(a,i,7);return c<0&&(c+=4294967296),c}function t(a,i){var c=w(a,i,19)^w(i,a,29)^p(a,i,6);return c<0&&(c+=4294967296),c}function n(a,i){var c=o(a,i,19)^o(i,a,29)^y(a,i,6);return c<0&&(c+=4294967296),c}x.inherits(k,R),Z.exports=k,k.blockSize=1024,k.outSize=512,k.hmacStrength=192,k.padLength=128,k.prototype._prepareBlock=function(i,s){for(var l=this.W,b=0;b<32;b++)l[b]=i[s+b];for(;b<l.length;b+=2){var c=t(l[b-4],l[b-3]),r=n(l[b-4],l[b-3]),f=l[b-14],L=l[b-13],C=z(l[b-30],l[b-29]),H=u(l[b-30],l[b-29]),Y=l[b-32],ee=l[b-31];l[b]=m(c,r,f,L,C,H,Y,ee),l[b+1]=M(c,r,f,L,C,H,Y,ee)}},k.prototype._update=function(i,s){this._prepareBlock(i,s);var l=this.W,b=this.h[0],c=this.h[1],r=this.h[2],f=this.h[3],L=this.h[4],C=this.h[5],H=this.h[6],Y=this.h[7],ee=this.h[8],ne=this.h[9],fe=this.h[10],te=this.h[11],oe=this.h[12],le=this.h[13],de=this.h[14],A=this.h[15];_(this.k.length===l.length);for(var $=0;$<l.length;$+=2){var j=de,ue=A,Pe=P(ee,ne),pe=S(ee,ne),me=I(ee,0,fe,0,oe),Be=U(0,ne,0,te,0,le),re=this.k[$],D=this.k[$+1],se=l[$],ie=l[$+1],ae=g(j,ue,Pe,pe,me,Be,re,D,se,ie),he=E(j,ue,Pe,pe,me,Be,re,D,se,ie);j=J(b,c),ue=K(b,c),Pe=V(b,0,r,0,L),pe=W(0,c,0,f,0,C);var F=h(j,ue,Pe,pe),B=d(j,ue,Pe,pe);de=oe,A=le,oe=fe,le=te,fe=ee,te=ne,ee=h(H,Y,ae,he),ne=d(Y,Y,ae,he),H=L,Y=C,L=r,C=f,r=b,f=c,b=h(ae,he,F,B),c=d(ae,he,F,B)}v(this.h,0,b,c),v(this.h,2,r,f),v(this.h,4,L,C),v(this.h,6,H,Y),v(this.h,8,ee,ne),v(this.h,10,fe,te),v(this.h,12,oe,le),v(this.h,14,de,A)},k.prototype._digest=function(i){return"hex"===i?x.toHex32(this.h,"big"):x.split32(this.h,"big")}},3113:(Z,q,N)=>{"use strict";var O=N(9299).rotr32;function w(m,M,g){return m&M^~m&g}function o(m,M,g){return m&M^m&g^M&g}function p(m,M,g){return m^M^g}q.ft_1=function _(m,M,g,E){return 0===m?w(M,g,E):1===m||3===m?p(M,g,E):2===m?o(M,g,E):void 0},q.ch32=w,q.maj32=o,q.p32=p,q.s0_256=function y(m){return O(m,2)^O(m,13)^O(m,22)},q.s1_256=function v(m){return O(m,6)^O(m,11)^O(m,25)},q.g0_256=function h(m){return O(m,7)^O(m,18)^m>>>3},q.g1_256=function d(m){return O(m,17)^O(m,19)^m>>>10}},9299:(Z,q,N)=>{"use strict";var x=N(2391),O=N(3894);function _(n,a){return!(55296!=(64512&n.charCodeAt(a))||a<0||a+1>=n.length)&&56320==(64512&n.charCodeAt(a+1))}function p(n){return(n>>>24|n>>>8&65280|n<<8&16711680|(255&n)<<24)>>>0}function v(n){return 1===n.length?"0"+n:n}function h(n){return 7===n.length?"0"+n:6===n.length?"00"+n:5===n.length?"000"+n:4===n.length?"0000"+n:3===n.length?"00000"+n:2===n.length?"000000"+n:1===n.length?"0000000"+n:n}q.inherits=O,q.toArray=function w(n,a){if(Array.isArray(n))return n.slice();if(!n)return[];var i=[];if("string"==typeof n)if(a){if("hex"===a)for((n=n.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(n="0"+n),l=0;l<n.length;l+=2)i.push(parseInt(n[l]+n[l+1],16))}else for(var s=0,l=0;l<n.length;l++){var b=n.charCodeAt(l);b<128?i[s++]=b:b<2048?(i[s++]=b>>6|192,i[s++]=63&b|128):_(n,l)?(b=65536+((1023&b)<<10)+(1023&n.charCodeAt(++l)),i[s++]=b>>18|240,i[s++]=b>>12&63|128,i[s++]=b>>6&63|128,i[s++]=63&b|128):(i[s++]=b>>12|224,i[s++]=b>>6&63|128,i[s++]=63&b|128)}else for(l=0;l<n.length;l++)i[l]=0|n[l];return i},q.toHex=function o(n){for(var a="",i=0;i<n.length;i++)a+=v(n[i].toString(16));return a},q.htonl=p,q.toHex32=function y(n,a){for(var i="",s=0;s<n.length;s++){var l=n[s];"little"===a&&(l=p(l)),i+=h(l.toString(16))}return i},q.zero2=v,q.zero8=h,q.join32=function d(n,a,i,s){var l=i-a;x(l%4==0);for(var b=new Array(l/4),c=0,r=a;c<b.length;c++,r+=4)b[c]=("big"===s?n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]:n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r])>>>0;return b},q.split32=function m(n,a){for(var i=new Array(4*n.length),s=0,l=0;s<n.length;s++,l+=4){var b=n[s];"big"===a?(i[l]=b>>>24,i[l+1]=b>>>16&255,i[l+2]=b>>>8&255,i[l+3]=255&b):(i[l+3]=b>>>24,i[l+2]=b>>>16&255,i[l+1]=b>>>8&255,i[l]=255&b)}return i},q.rotr32=function M(n,a){return n>>>a|n<<32-a},q.rotl32=function g(n,a){return n<<a|n>>>32-a},q.sum32=function E(n,a){return n+a>>>0},q.sum32_3=function R(n,a,i){return n+a+i>>>0},q.sum32_4=function T(n,a,i,s){return n+a+i+s>>>0},q.sum32_5=function k(n,a,i,s,l){return n+a+i+s+l>>>0},q.sum64=function I(n,a,i,s){var c=s+n[a+1]>>>0;n[a]=(c<s?1:0)+i+n[a]>>>0,n[a+1]=c},q.sum64_hi=function U(n,a,i,s){return(a+s>>>0<a?1:0)+n+i>>>0},q.sum64_lo=function V(n,a,i,s){return a+s>>>0},q.sum64_4_hi=function W(n,a,i,s,l,b,c,r){var f=0,L=a;return f+=(L=L+s>>>0)<a?1:0,f+=(L=L+b>>>0)<b?1:0,n+i+l+c+(f+=(L=L+r>>>0)<r?1:0)>>>0},q.sum64_4_lo=function J(n,a,i,s,l,b,c,r){return a+s+b+r>>>0},q.sum64_5_hi=function K(n,a,i,s,l,b,c,r,f,L){var C=0,H=a;return C+=(H=H+s>>>0)<a?1:0,C+=(H=H+b>>>0)<b?1:0,C+=(H=H+r>>>0)<r?1:0,n+i+l+c+f+(C+=(H=H+L>>>0)<L?1:0)>>>0},q.sum64_5_lo=function P(n,a,i,s,l,b,c,r,f,L){return a+s+b+r+L>>>0},q.rotr64_hi=function S(n,a,i){return(a<<32-i|n>>>i)>>>0},q.rotr64_lo=function z(n,a,i){return(n<<32-i|a>>>i)>>>0},q.shr64_hi=function u(n,a,i){return n>>>i},q.shr64_lo=function t(n,a,i){return(n<<32-i|a>>>i)>>>0}},2438:(Z,q,N)=>{"use strict";var x=N(7084),O=N(8195),_=N(2391);function w(o){if(!(this instanceof w))return new w(o);this.hash=o.hash,this.predResist=!!o.predResist,this.outLen=this.hash.outSize,this.minEntropy=o.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var p=O.toArray(o.entropy,o.entropyEnc||"hex"),y=O.toArray(o.nonce,o.nonceEnc||"hex"),v=O.toArray(o.pers,o.persEnc||"hex");_(p.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(p,y,v)}Z.exports=w,w.prototype._init=function(p,y,v){var h=p.concat(y).concat(v);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(h),this._reseed=1,this.reseedInterval=281474976710656},w.prototype._hmac=function(){return new x.hmac(this.hash,this.K)},w.prototype._update=function(p){var y=this._hmac().update(this.V).update([0]);p&&(y=y.update(p)),this.K=y.digest(),this.V=this._hmac().update(this.V).digest(),p&&(this.K=this._hmac().update(this.V).update([1]).update(p).digest(),this.V=this._hmac().update(this.V).digest())},w.prototype.reseed=function(p,y,v,h){"string"!=typeof y&&(h=v,v=y,y=null),p=O.toArray(p,y),v=O.toArray(v,h),_(p.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(p.concat(v||[])),this._reseed=1},w.prototype.generate=function(p,y,v,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof y&&(h=v,v=y,y=null),v&&(v=O.toArray(v,h||"hex"),this._update(v));for(var d=[];d.length<p;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var m=d.slice(0,p);return this._update(v),this._reseed++,O.encode(m,y)}},8461:(Z,q)=>{q.read=function(N,x,O,_,w){var o,p,y=8*w-_-1,v=(1<<y)-1,h=v>>1,d=-7,m=O?w-1:0,M=O?-1:1,g=N[x+m];for(m+=M,o=g&(1<<-d)-1,g>>=-d,d+=y;d>0;o=256*o+N[x+m],m+=M,d-=8);for(p=o&(1<<-d)-1,o>>=-d,d+=_;d>0;p=256*p+N[x+m],m+=M,d-=8);if(0===o)o=1-h;else{if(o===v)return p?NaN:1/0*(g?-1:1);p+=Math.pow(2,_),o-=h}return(g?-1:1)*p*Math.pow(2,o-_)},q.write=function(N,x,O,_,w,o){var p,y,v,h=8*o-w-1,d=(1<<h)-1,m=d>>1,M=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,g=_?0:o-1,E=_?1:-1,R=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(y=isNaN(x)?1:0,p=d):(p=Math.floor(Math.log(x)/Math.LN2),x*(v=Math.pow(2,-p))<1&&(p--,v*=2),(x+=p+m>=1?M/v:M*Math.pow(2,1-m))*v>=2&&(p++,v/=2),p+m>=d?(y=0,p=d):p+m>=1?(y=(x*v-1)*Math.pow(2,w),p+=m):(y=x*Math.pow(2,m-1)*Math.pow(2,w),p=0));w>=8;N[O+g]=255&y,g+=E,y/=256,w-=8);for(p=p<<w|y,h+=w;h>0;N[O+g]=255&p,g+=E,p/=256,h-=8);N[O+g-E]|=128*R}},3894:Z=>{Z.exports="function"==typeof Object.create?function(N,x){x&&(N.super_=x,N.prototype=Object.create(x.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}))}:function(N,x){if(x){N.super_=x;var O=function(){};O.prototype=x.prototype,N.prototype=new O,N.prototype.constructor=N}}},8095:(Z,q,N)=>{"use strict";var x=N(3894),O=N(9650),_=N(3502).Buffer,w=new Array(16);function o(){O.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function p(m,M){return m<<M|m>>>32-M}function y(m,M,g,E,R,T,k){return p(m+(M&g|~M&E)+R+T|0,k)+M|0}function v(m,M,g,E,R,T,k){return p(m+(M&E|g&~E)+R+T|0,k)+M|0}function h(m,M,g,E,R,T,k){return p(m+(M^g^E)+R+T|0,k)+M|0}function d(m,M,g,E,R,T,k){return p(m+(g^(M|~E))+R+T|0,k)+M|0}x(o,O),o.prototype._update=function(){for(var m=w,M=0;M<16;++M)m[M]=this._block.readInt32LE(4*M);var g=this._a,E=this._b,R=this._c,T=this._d;g=y(g,E,R,T,m[0],3614090360,7),T=y(T,g,E,R,m[1],3905402710,12),R=y(R,T,g,E,m[2],606105819,17),E=y(E,R,T,g,m[3],3250441966,22),g=y(g,E,R,T,m[4],4118548399,7),T=y(T,g,E,R,m[5],1200080426,12),R=y(R,T,g,E,m[6],2821735955,17),E=y(E,R,T,g,m[7],4249261313,22),g=y(g,E,R,T,m[8],1770035416,7),T=y(T,g,E,R,m[9],2336552879,12),R=y(R,T,g,E,m[10],4294925233,17),E=y(E,R,T,g,m[11],2304563134,22),g=y(g,E,R,T,m[12],1804603682,7),T=y(T,g,E,R,m[13],4254626195,12),R=y(R,T,g,E,m[14],2792965006,17),g=v(g,E=y(E,R,T,g,m[15],1236535329,22),R,T,m[1],4129170786,5),T=v(T,g,E,R,m[6],3225465664,9),R=v(R,T,g,E,m[11],643717713,14),E=v(E,R,T,g,m[0],3921069994,20),g=v(g,E,R,T,m[5],3593408605,5),T=v(T,g,E,R,m[10],38016083,9),R=v(R,T,g,E,m[15],3634488961,14),E=v(E,R,T,g,m[4],3889429448,20),g=v(g,E,R,T,m[9],568446438,5),T=v(T,g,E,R,m[14],3275163606,9),R=v(R,T,g,E,m[3],4107603335,14),E=v(E,R,T,g,m[8],1163531501,20),g=v(g,E,R,T,m[13],2850285829,5),T=v(T,g,E,R,m[2],4243563512,9),R=v(R,T,g,E,m[7],1735328473,14),g=h(g,E=v(E,R,T,g,m[12],2368359562,20),R,T,m[5],4294588738,4),T=h(T,g,E,R,m[8],2272392833,11),R=h(R,T,g,E,m[11],1839030562,16),E=h(E,R,T,g,m[14],4259657740,23),g=h(g,E,R,T,m[1],2763975236,4),T=h(T,g,E,R,m[4],1272893353,11),R=h(R,T,g,E,m[7],4139469664,16),E=h(E,R,T,g,m[10],3200236656,23),g=h(g,E,R,T,m[13],681279174,4),T=h(T,g,E,R,m[0],3936430074,11),R=h(R,T,g,E,m[3],3572445317,16),E=h(E,R,T,g,m[6],76029189,23),g=h(g,E,R,T,m[9],3654602809,4),T=h(T,g,E,R,m[12],3873151461,11),R=h(R,T,g,E,m[15],530742520,16),g=d(g,E=h(E,R,T,g,m[2],3299628645,23),R,T,m[0],4096336452,6),T=d(T,g,E,R,m[7],1126891415,10),R=d(R,T,g,E,m[14],2878612391,15),E=d(E,R,T,g,m[5],4237533241,21),g=d(g,E,R,T,m[12],1700485571,6),T=d(T,g,E,R,m[3],2399980690,10),R=d(R,T,g,E,m[10],4293915773,15),E=d(E,R,T,g,m[1],2240044497,21),g=d(g,E,R,T,m[8],1873313359,6),T=d(T,g,E,R,m[15],4264355552,10),R=d(R,T,g,E,m[6],2734768916,15),E=d(E,R,T,g,m[13],1309151649,21),g=d(g,E,R,T,m[4],4149444226,6),T=d(T,g,E,R,m[11],3174756917,10),R=d(R,T,g,E,m[2],718787259,15),E=d(E,R,T,g,m[9],3951481745,21),this._a=this._a+g|0,this._b=this._b+E|0,this._c=this._c+R|0,this._d=this._d+T|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var m=_.allocUnsafe(16);return m.writeInt32LE(this._a,0),m.writeInt32LE(this._b,4),m.writeInt32LE(this._c,8),m.writeInt32LE(this._d,12),m},Z.exports=o},7079:(Z,q,N)=>{var x=N(1378),O=N(7950);function _(w){this.rand=w||new O.Rand}Z.exports=_,_.create=function(o){return new _(o)},_.prototype._randbelow=function(o){var p=o.bitLength(),y=Math.ceil(p/8);do{var v=new x(this.rand.generate(y))}while(v.cmp(o)>=0);return v},_.prototype._randrange=function(o,p){var y=p.sub(o);return o.add(this._randbelow(y))},_.prototype.test=function(o,p,y){var v=o.bitLength(),h=x.mont(o),d=new x(1).toRed(h);p||(p=Math.max(1,v/48|0));for(var m=o.subn(1),M=0;!m.testn(M);M++);for(var g=o.shrn(M),E=m.toRed(h);p>0;p--){var T=this._randrange(new x(2),m);y&&y(T);var k=T.toRed(h).redPow(g);if(0!==k.cmp(d)&&0!==k.cmp(E)){for(var I=1;I<M;I++){if(0===(k=k.redSqr()).cmp(d))return!1;if(0===k.cmp(E))break}if(I===M)return!1}}return!0},_.prototype.getDivisor=function(o,p){var y=o.bitLength(),v=x.mont(o),h=new x(1).toRed(v);p||(p=Math.max(1,y/48|0));for(var d=o.subn(1),m=0;!d.testn(m);m++);for(var M=o.shrn(m),g=d.toRed(v);p>0;p--){var E=this._randrange(new x(2),d),R=o.gcd(E);if(0!==R.cmpn(1))return R;var T=E.toRed(v).redPow(M);if(0!==T.cmp(h)&&0!==T.cmp(g)){for(var k=1;k<m;k++){if(0===(T=T.redSqr()).cmp(h))return T.fromRed().subn(1).gcd(o);if(0===T.cmp(g))break}if(k===m)return(T=T.redSqr()).fromRed().subn(1).gcd(o)}}return!1}},1378:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(6619).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},2391:Z=>{function q(N,x){if(!N)throw new Error(x||"Assertion failed")}Z.exports=q,q.equal=function(x,O,_){if(x!=O)throw new Error(_||"Assertion failed: "+x+" != "+O)}},8195:(Z,q)=>{"use strict";var N=q;function O(w){return 1===w.length?"0"+w:w}function _(w){for(var o="",p=0;p<w.length;p++)o+=O(w[p].toString(16));return o}N.toArray=function x(w,o){if(Array.isArray(w))return w.slice();if(!w)return[];var p=[];if("string"!=typeof w){for(var y=0;y<w.length;y++)p[y]=0|w[y];return p}if("hex"===o)for((w=w.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(w="0"+w),y=0;y<w.length;y+=2)p.push(parseInt(w[y]+w[y+1],16));else for(y=0;y<w.length;y++){var v=w.charCodeAt(y),h=v>>8,d=255&v;h?p.push(h,d):p.push(d)}return p},N.zero2=O,N.toHex=_,N.encode=function(o,p){return"hex"===p?_(o):o}},2999:(Z,q,N)=>{"use strict";var x=N(7977);q.certificate=N(2390);var O=x.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});q.RSAPrivateKey=O;var _=x.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});q.RSAPublicKey=_;var w=x.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});q.PublicKey=w;var o=x.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),p=x.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});q.PrivateKey=p;var y=x.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});q.EncryptedPrivateKey=y;var v=x.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});q.DSAPrivateKey=v,q.DSAparam=x.define("DSAparam",function(){this.int()});var h=x.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())});q.ECPrivateKey=h;var d=x.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});q.signature=x.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},2390:(Z,q,N)=>{"use strict";var x=N(7977),O=x.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),_=x.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),w=x.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=x.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(w),this.key("subjectPublicKey").bitstr())}),p=x.define("RelativeDistinguishedName",function(){this.setof(_)}),y=x.define("RDNSequence",function(){this.seqof(p)}),v=x.define("Name",function(){this.choice({rdnSequence:this.use(y)})}),h=x.define("Validity",function(){this.seq().obj(this.key("notBefore").use(O),this.key("notAfter").use(O))}),d=x.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),m=x.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(w),this.key("issuer").use(v),this.key("validity").use(h),this.key("subject").use(v),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),M=x.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(m),this.key("signatureAlgorithm").use(w),this.key("signatureValue").bitstr())});Z.exports=M},5269:(Z,q,N)=>{var x=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,O=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,w=N(347),o=N(4330),p=N(3502).Buffer;Z.exports=function(y,v){var m,h=y.toString(),d=h.match(x);if(d){var g="aes"+d[1],E=p.from(d[2],"hex"),R=p.from(d[3].replace(/[\r\n]/g,""),"base64"),T=w(v,E.slice(0,8),parseInt(d[1],10)).key,k=[],I=o.createDecipheriv(g,T,E);k.push(I.update(R)),k.push(I.final()),m=p.concat(k)}else{var M=h.match(_);m=p.from(M[2].replace(/[\r\n]/g,""),"base64")}return{tag:h.match(O)[1],data:m}}},2772:(Z,q,N)=>{var x=N(2999),O=N(2562),_=N(5269),w=N(4330),o=N(9357),p=N(3502).Buffer;function y(h){var d;"object"==typeof h&&!p.isBuffer(h)&&(d=h.passphrase,h=h.key),"string"==typeof h&&(h=p.from(h));var E,R,m=_(h,d),M=m.tag,g=m.data;switch(M){case"CERTIFICATE":R=x.certificate.decode(g,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(R||(R=x.PublicKey.decode(g,"der")),E=R.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return x.RSAPublicKey.decode(R.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return R.subjectPrivateKey=R.subjectPublicKey,{type:"ec",data:R};case"1.2.840.10040.4.1":return R.algorithm.params.pub_key=x.DSAparam.decode(R.subjectPublicKey.data,"der"),{type:"dsa",data:R.algorithm.params};default:throw new Error("unknown key id "+E)}case"ENCRYPTED PRIVATE KEY":g=function v(h,d){var m=h.algorithm.decrypt.kde.kdeparams.salt,M=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),g=O[h.algorithm.decrypt.cipher.algo.join(".")],E=h.algorithm.decrypt.cipher.iv,R=h.subjectPrivateKey,T=parseInt(g.split("-")[1],10)/8,k=o.pbkdf2Sync(d,m,M,T,"sha1"),I=w.createDecipheriv(g,k,E),U=[];return U.push(I.update(R)),U.push(I.final()),p.concat(U)}(g=x.EncryptedPrivateKey.decode(g,"der"),d);case"PRIVATE KEY":switch(E=(R=x.PrivateKey.decode(g,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return x.RSAPrivateKey.decode(R.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:R.algorithm.curve,privateKey:x.ECPrivateKey.decode(R.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return R.algorithm.params.priv_key=x.DSAparam.decode(R.subjectPrivateKey,"der"),{type:"dsa",params:R.algorithm.params};default:throw new Error("unknown key id "+E)}case"RSA PUBLIC KEY":return x.RSAPublicKey.decode(g,"der");case"RSA PRIVATE KEY":return x.RSAPrivateKey.decode(g,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:x.DSAPrivateKey.decode(g,"der")};case"EC PRIVATE KEY":return{curve:(g=x.ECPrivateKey.decode(g,"der")).parameters.value,privateKey:g.privateKey};default:throw new Error("unknown key type "+M)}}Z.exports=y,y.signature=x.signature},9357:(Z,q,N)=>{q.pbkdf2=N(415),q.pbkdf2Sync=N(7472)},415:(Z,q,N)=>{var p,m,x=N(3502).Buffer,O=N(2697),_=N(8867),w=N(7472),o=N(4566),y=global.crypto&&global.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function M(){return m||(m=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function g(R,T,k,I,U){return y.importKey("raw",R,{name:"PBKDF2"},!1,["deriveBits"]).then(function(V){return y.deriveBits({name:"PBKDF2",salt:T,iterations:k,hash:{name:U}},V,I<<3)}).then(function(V){return x.from(V)})}Z.exports=function(R,T,k,I,U,V){"function"==typeof U&&(V=U,U=void 0);var W=v[(U=U||"sha1").toLowerCase()];if(W&&"function"==typeof global.Promise){if(O(k,I),R=o(R,_,"Password"),T=o(T,_,"Salt"),"function"!=typeof V)throw new Error("No callback provided to pbkdf2");!function E(R,T){R.then(function(k){M()(function(){T(null,k)})},function(k){M()(function(){T(k)})})}(function d(R){if(global.process&&!global.process.browser||!y||!y.importKey||!y.deriveBits)return Promise.resolve(!1);if(void 0!==h[R])return h[R];var T=g(p=p||x.alloc(8),p,10,128,R).then(function(){return!0}).catch(function(){return!1});return h[R]=T,T}(W).then(function(J){return J?g(R,T,k,I,W):w(R,T,k,I,U)}),V)}else M()(function(){var J;try{J=w(R,T,k,I,U)}catch(K){return V(K)}V(null,J)})}},8867:Z=>{var q;q=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",Z.exports=q},2697:Z=>{var q=Math.pow(2,30)-1;Z.exports=function(N,x){if("number"!=typeof N)throw new TypeError("Iterations not a number");if(N<0)throw new TypeError("Bad iterations");if("number"!=typeof x)throw new TypeError("Key length not a number");if(x<0||x>q||x!=x)throw new TypeError("Bad key length")}},7472:(Z,q,N)=>{var x=N(5640),O=N(5634),_=N(5244),w=N(3502).Buffer,o=N(2697),p=N(8867),y=N(4566),v=w.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(g,E,R){var T=function m(g){return"rmd160"===g||"ripemd160"===g?function R(T){return(new O).update(T).digest()}:"md5"===g?x:function E(T){return _(g).update(T).digest()}}(g),k="sha512"===g||"sha384"===g?128:64;E.length>k?E=T(E):E.length<k&&(E=w.concat([E,v],k));for(var I=w.allocUnsafe(k+h[g]),U=w.allocUnsafe(k+h[g]),V=0;V<k;V++)I[V]=54^E[V],U[V]=92^E[V];var W=w.allocUnsafe(k+R+4);I.copy(W,0,0,k),this.ipad1=W,this.ipad2=I,this.opad=U,this.alg=g,this.blocksize=k,this.hash=T,this.size=h[g]}d.prototype.run=function(g,E){return g.copy(E,this.blocksize),this.hash(E).copy(this.opad,this.blocksize),this.hash(this.opad)},Z.exports=function M(g,E,R,T,k){o(R,T);var I=new d(k=k||"sha1",g=y(g,p,"Password"),(E=y(E,p,"Salt")).length),U=w.allocUnsafe(T),V=w.allocUnsafe(E.length+4);E.copy(V,0,0,E.length);for(var W=0,J=h[k],K=Math.ceil(T/J),P=1;P<=K;P++){V.writeUInt32BE(P,E.length);for(var S=I.run(V,I.ipad1),z=S,u=1;u<R;u++){z=I.run(z,I.ipad2);for(var t=0;t<J;t++)S[t]^=z[t]}S.copy(U,W),W+=J}return U}},4566:(Z,q,N)=>{var x=N(3502).Buffer;Z.exports=function(O,_,w){if(x.isBuffer(O))return O;if("string"==typeof O)return x.from(O,_);if(ArrayBuffer.isView(O))return x.from(O.buffer);throw new TypeError(w+" must be a string, a Buffer, a typed array or a DataView")}},3701:(Z,q,N)=>{q.publicEncrypt=N(6562),q.privateDecrypt=N(6705),q.privateEncrypt=function(O,_){return q.publicEncrypt(O,_,!0)},q.publicDecrypt=function(O,_){return q.privateDecrypt(O,_,!0)}},6945:(Z,q,N)=>{var x=N(6386),O=N(3502).Buffer;function _(w){var o=O.allocUnsafe(4);return o.writeUInt32BE(w,0),o}Z.exports=function(w,o){for(var v,p=O.alloc(0),y=0;p.length<o;)v=_(y++),p=O.concat([p,x("sha1").update(w).update(v).digest()]);return p.slice(0,o)}},2057:function(Z,q,N){!function(x,O){"use strict";function _(u,t){if(!u)throw new Error(t||"Assertion failed")}function w(u,t){u.super_=t;var n=function(){};n.prototype=t.prototype,u.prototype=new n,u.prototype.constructor=u}function o(u,t,n){if(o.isBN(u))return u;this.negative=0,this.words=null,this.length=0,this.red=null,null!==u&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(u||0,t||10,n||"be"))}var p;"object"==typeof x?x.exports=o:O.BN=o,o.BN=o,o.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:N(7108).Buffer}catch(u){}function y(u,t){var n=u.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(u,t,n){var a=y(u,n);return n-1>=t&&(a|=y(u,n-1)<<4),a}function h(u,t,n,a){for(var i=0,s=Math.min(u.length,n),l=t;l<s;l++){var b=u.charCodeAt(l)-48;i*=a,i+=b>=49?b-49+10:b>=17?b-17+10:b}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,n){return t.cmp(n)>0?t:n},o.min=function(t,n){return t.cmp(n)<0?t:n},o.prototype._init=function(t,n,a){if("number"==typeof t)return this._initNumber(t,n,a);if("object"==typeof t)return this._initArray(t,n,a);"hex"===n&&(n=16),_(n===(0|n)&&n>=2&&n<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===n?this._parseHex(t,i,a):(this._parseBase(t,n,i),"le"===a&&this._initArray(this.toArray(),n,a)))},o.prototype._initNumber=function(t,n,a){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(_(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),n,a)},o.prototype._initArray=function(t,n,a){if(_("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,l,b=0;if("be"===a)for(i=t.length-1,s=0;i>=0;i-=3)this.words[s]|=(l=t[i]|t[i-1]<<8|t[i-2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);else if("le"===a)for(i=0,s=0;i<t.length;i+=3)this.words[s]|=(l=t[i]|t[i+1]<<8|t[i+2]<<16)<<b&67108863,this.words[s+1]=l>>>26-b&67108863,(b+=24)>=26&&(b-=26,s++);return this.strip()},o.prototype._parseHex=function(t,n,a){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var b,s=0,l=0;if("be"===a)for(i=t.length-1;i>=n;i-=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;else for(i=(t.length-n)%2==0?n+1:n;i<t.length;i+=2)b=v(t,n,i)<<s,this.words[l]|=67108863&b,s>=18?(s-=18,this.words[l+=1]|=b>>>26):s+=8;this.strip()},o.prototype._parseBase=function(t,n,a){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;for(var l=t.length-a,b=l%i,c=Math.min(l,l-b)+a,r=0,f=a;f<c;f+=i)r=h(t,f,f+i,n),this.imuln(s),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==b){var L=1;for(r=h(t,f,t.length,n),f=0;f<b;f++)L*=n;this.imuln(L),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(u,t,n){n.negative=t.negative^u.negative;var a=u.length+t.length|0;n.length=a,a=a-1|0;var i=0|u.words[0],s=0|t.words[0],l=i*s,c=l/67108864|0;n.words[0]=67108863&l;for(var r=1;r<a;r++){for(var f=c>>>26,L=67108863&c,C=Math.min(r,t.length-1),H=Math.max(0,r-u.length+1);H<=C;H++)f+=(l=(i=0|u.words[r-H|0])*(s=0|t.words[H])+L)/67108864|0,L=67108863&l;n.words[r]=0|L,c=0|f}return 0!==c?n.words[r]=0|c:n.length--,n.strip()}o.prototype.toString=function(t,n){var a;if(n=0|n||1,16===(t=t||10)||"hex"===t){a="";for(var i=0,s=0,l=0;l<this.length;l++){var b=this.words[l],c=(16777215&(b<<i|s)).toString(16);a=0!=(s=b>>>24-i&16777215)||l!==this.length-1?d[6-c.length]+c+a:c+a,(i+=2)>=26&&(i-=26,l--)}for(0!==s&&(a=s.toString(16)+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(t===(0|t)&&t>=2&&t<=36){var r=m[t],f=M[t];a="";var L=this.clone();for(L.negative=0;!L.isZero();){var C=L.modn(f).toString(t);a=(L=L.idivn(f)).isZero()?C+a:d[r-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%n!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}_(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,n){return _(void 0!==p),this.toArrayLike(p,t,n)},o.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},o.prototype.toArrayLike=function(t,n,a){var i=this.byteLength(),s=a||Math.max(1,i);_(i<=s,"byte array longer than desired length"),_(s>0,"Requested array length <= 0"),this.strip();var c,r,l="le"===n,b=new t(s),f=this.clone();if(l){for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[r]=c;for(;r<s;r++)b[r]=0}else{for(r=0;r<s-i;r++)b[r]=0;for(r=0;!f.isZero();r++)c=f.andln(255),f.iushrn(8),b[s-r-1]=c}return b},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,a=0;return n>=4096&&(a+=13,n>>>=13),n>=64&&(a+=7,n>>>=7),n>=8&&(a+=4,n>>>=4),n>=2&&(a+=2,n>>>=2),a+n},o.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,a=0;return 0==(8191&n)&&(a+=13,n>>>=13),0==(127&n)&&(a+=7,n>>>=7),0==(15&n)&&(a+=4,n>>>=4),0==(3&n)&&(a+=2,n>>>=2),0==(1&n)&&a++,a},o.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var a=this._zeroBits(this.words[n]);if(t+=a,26!==a)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},o.prototype.ior=function(t){return _(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var a=0;a<n.length;a++)this.words[a]=this.words[a]&t.words[a];return this.length=n.length,this.strip()},o.prototype.iand=function(t){return _(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var n,a;this.length>t.length?(n=this,a=t):(n=t,a=this);for(var i=0;i<a.length;i++)this.words[i]=n.words[i]^a.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},o.prototype.ixor=function(t){return _(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){_("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),a=t%26;this._expand(n),a>0&&n--;for(var i=0;i<n;i++)this.words[i]=67108863&~this.words[i];return a>0&&(this.words[i]=~this.words[i]&67108863>>26-a),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,n){_("number"==typeof t&&t>=0);var a=t/26|0,i=t%26;return this._expand(a+1),this.words[a]=n?this.words[a]|1<<i:this.words[a]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var n,a,i;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(a=this,i=t):(a=t,i=this);for(var s=0,l=0;l<i.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+(0|i.words[l])+s),s=n>>>26;for(;0!==s&&l<a.length;l++)this.words[l]=67108863&(n=(0|a.words[l])+s),s=n>>>26;if(this.length=a.length,0!==s)this.words[this.length]=s,this.length++;else if(a!==this)for(;l<a.length;l++)this.words[l]=a.words[l];return this},o.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,s,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=t):(i=t,s=this);for(var l=0,b=0;b<s.length;b++)l=(n=(0|i.words[b])-(0|s.words[b])+l)>>26,this.words[b]=67108863&n;for(;0!==l&&b<i.length;b++)l=(n=(0|i.words[b])+l)>>26,this.words[b]=67108863&n;if(0===l&&b<i.length&&i!==this)for(;b<i.length;b++)this.words[b]=i.words[b];return this.length=Math.max(this.length,b),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var R=function(t,n,a){var c,r,f,i=t.words,s=n.words,l=a.words,b=0,L=0|i[0],C=8191&L,H=L>>>13,Y=0|i[1],ee=8191&Y,ne=Y>>>13,fe=0|i[2],te=8191&fe,oe=fe>>>13,le=0|i[3],de=8191&le,A=le>>>13,$=0|i[4],j=8191&$,ue=$>>>13,Pe=0|i[5],pe=8191&Pe,me=Pe>>>13,Be=0|i[6],re=8191&Be,D=Be>>>13,se=0|i[7],ie=8191&se,ae=se>>>13,he=0|i[8],F=8191&he,B=he>>>13,G=0|i[9],X=8191&G,Q=G>>>13,ve=0|s[0],ce=8191&ve,ge=ve>>>13,Fe=0|s[1],ye=8191&Fe,be=Fe>>>13,Ue=0|s[2],_e=8191&Ue,Ee=Ue>>>13,He=0|s[3],Se=8191&He,we=He>>>13,ot=0|s[4],Me=8191&ot,Re=ot>>>13,st=0|s[5],Ae=8191&st,Ie=st>>>13,ft=0|s[6],Te=8191&ft,xe=ft>>>13,ut=0|s[7],Oe=8191&ut,Ce=ut>>>13,ct=0|s[8],Ne=8191&ct,Le=ct>>>13,dt=0|s[9],ke=8191&dt,De=dt>>>13;a.negative=t.negative^n.negative,a.length=19;var at=(b+(c=Math.imul(C,ce))|0)+((8191&(r=(r=Math.imul(C,ge))+Math.imul(H,ce)|0))<<13)|0;b=((f=Math.imul(H,ge))+(r>>>13)|0)+(at>>>26)|0,at&=67108863,c=Math.imul(ee,ce),r=(r=Math.imul(ee,ge))+Math.imul(ne,ce)|0,f=Math.imul(ne,ge);var Ve=(b+(c=c+Math.imul(C,ye)|0)|0)+((8191&(r=(r=r+Math.imul(C,be)|0)+Math.imul(H,ye)|0))<<13)|0;b=((f=f+Math.imul(H,be)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,c=Math.imul(te,ce),r=(r=Math.imul(te,ge))+Math.imul(oe,ce)|0,f=Math.imul(oe,ge),c=c+Math.imul(ee,ye)|0,r=(r=r+Math.imul(ee,be)|0)+Math.imul(ne,ye)|0,f=f+Math.imul(ne,be)|0;var je=(b+(c=c+Math.imul(C,_e)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ee)|0)+Math.imul(H,_e)|0))<<13)|0;b=((f=f+Math.imul(H,Ee)|0)+(r>>>13)|0)+(je>>>26)|0,je&=67108863,c=Math.imul(de,ce),r=(r=Math.imul(de,ge))+Math.imul(A,ce)|0,f=Math.imul(A,ge),c=c+Math.imul(te,ye)|0,r=(r=r+Math.imul(te,be)|0)+Math.imul(oe,ye)|0,f=f+Math.imul(oe,be)|0,c=c+Math.imul(ee,_e)|0,r=(r=r+Math.imul(ee,Ee)|0)+Math.imul(ne,_e)|0,f=f+Math.imul(ne,Ee)|0;var We=(b+(c=c+Math.imul(C,Se)|0)|0)+((8191&(r=(r=r+Math.imul(C,we)|0)+Math.imul(H,Se)|0))<<13)|0;b=((f=f+Math.imul(H,we)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,c=Math.imul(j,ce),r=(r=Math.imul(j,ge))+Math.imul(ue,ce)|0,f=Math.imul(ue,ge),c=c+Math.imul(de,ye)|0,r=(r=r+Math.imul(de,be)|0)+Math.imul(A,ye)|0,f=f+Math.imul(A,be)|0,c=c+Math.imul(te,_e)|0,r=(r=r+Math.imul(te,Ee)|0)+Math.imul(oe,_e)|0,f=f+Math.imul(oe,Ee)|0,c=c+Math.imul(ee,Se)|0,r=(r=r+Math.imul(ee,we)|0)+Math.imul(ne,Se)|0,f=f+Math.imul(ne,we)|0;var Ge=(b+(c=c+Math.imul(C,Me)|0)|0)+((8191&(r=(r=r+Math.imul(C,Re)|0)+Math.imul(H,Me)|0))<<13)|0;b=((f=f+Math.imul(H,Re)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,c=Math.imul(pe,ce),r=(r=Math.imul(pe,ge))+Math.imul(me,ce)|0,f=Math.imul(me,ge),c=c+Math.imul(j,ye)|0,r=(r=r+Math.imul(j,be)|0)+Math.imul(ue,ye)|0,f=f+Math.imul(ue,be)|0,c=c+Math.imul(de,_e)|0,r=(r=r+Math.imul(de,Ee)|0)+Math.imul(A,_e)|0,f=f+Math.imul(A,Ee)|0,c=c+Math.imul(te,Se)|0,r=(r=r+Math.imul(te,we)|0)+Math.imul(oe,Se)|0,f=f+Math.imul(oe,we)|0,c=c+Math.imul(ee,Me)|0,r=(r=r+Math.imul(ee,Re)|0)+Math.imul(ne,Me)|0,f=f+Math.imul(ne,Re)|0;var qe=(b+(c=c+Math.imul(C,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ie)|0)+Math.imul(H,Ae)|0))<<13)|0;b=((f=f+Math.imul(H,Ie)|0)+(r>>>13)|0)+(qe>>>26)|0,qe&=67108863,c=Math.imul(re,ce),r=(r=Math.imul(re,ge))+Math.imul(D,ce)|0,f=Math.imul(D,ge),c=c+Math.imul(pe,ye)|0,r=(r=r+Math.imul(pe,be)|0)+Math.imul(me,ye)|0,f=f+Math.imul(me,be)|0,c=c+Math.imul(j,_e)|0,r=(r=r+Math.imul(j,Ee)|0)+Math.imul(ue,_e)|0,f=f+Math.imul(ue,Ee)|0,c=c+Math.imul(de,Se)|0,r=(r=r+Math.imul(de,we)|0)+Math.imul(A,Se)|0,f=f+Math.imul(A,we)|0,c=c+Math.imul(te,Me)|0,r=(r=r+Math.imul(te,Re)|0)+Math.imul(oe,Me)|0,f=f+Math.imul(oe,Re)|0,c=c+Math.imul(ee,Ae)|0,r=(r=r+Math.imul(ee,Ie)|0)+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,Ie)|0;var ze=(b+(c=c+Math.imul(C,Te)|0)|0)+((8191&(r=(r=r+Math.imul(C,xe)|0)+Math.imul(H,Te)|0))<<13)|0;b=((f=f+Math.imul(H,xe)|0)+(r>>>13)|0)+(ze>>>26)|0,ze&=67108863,c=Math.imul(ie,ce),r=(r=Math.imul(ie,ge))+Math.imul(ae,ce)|0,f=Math.imul(ae,ge),c=c+Math.imul(re,ye)|0,r=(r=r+Math.imul(re,be)|0)+Math.imul(D,ye)|0,f=f+Math.imul(D,be)|0,c=c+Math.imul(pe,_e)|0,r=(r=r+Math.imul(pe,Ee)|0)+Math.imul(me,_e)|0,f=f+Math.imul(me,Ee)|0,c=c+Math.imul(j,Se)|0,r=(r=r+Math.imul(j,we)|0)+Math.imul(ue,Se)|0,f=f+Math.imul(ue,we)|0,c=c+Math.imul(de,Me)|0,r=(r=r+Math.imul(de,Re)|0)+Math.imul(A,Me)|0,f=f+Math.imul(A,Re)|0,c=c+Math.imul(te,Ae)|0,r=(r=r+Math.imul(te,Ie)|0)+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,Ie)|0,c=c+Math.imul(ee,Te)|0,r=(r=r+Math.imul(ee,xe)|0)+Math.imul(ne,Te)|0,f=f+Math.imul(ne,xe)|0;var Ke=(b+(c=c+Math.imul(C,Oe)|0)|0)+((8191&(r=(r=r+Math.imul(C,Ce)|0)+Math.imul(H,Oe)|0))<<13)|0;b=((f=f+Math.imul(H,Ce)|0)+(r>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,c=Math.imul(F,ce),r=(r=Math.imul(F,ge))+Math.imul(B,ce)|0,f=Math.imul(B,ge),c=c+Math.imul(ie,ye)|0,r=(r=r+Math.imul(ie,be)|0)+Math.imul(ae,ye)|0,f=f+Math.imul(ae,be)|0,c=c+Math.imul(re,_e)|0,r=(r=r+Math.imul(re,Ee)|0)+Math.imul(D,_e)|0,f=f+Math.imul(D,Ee)|0,c=c+Math.imul(pe,Se)|0,r=(r=r+Math.imul(pe,we)|0)+Math.imul(me,Se)|0,f=f+Math.imul(me,we)|0,c=c+Math.imul(j,Me)|0,r=(r=r+Math.imul(j,Re)|0)+Math.imul(ue,Me)|0,f=f+Math.imul(ue,Re)|0,c=c+Math.imul(de,Ae)|0,r=(r=r+Math.imul(de,Ie)|0)+Math.imul(A,Ae)|0,f=f+Math.imul(A,Ie)|0,c=c+Math.imul(te,Te)|0,r=(r=r+Math.imul(te,xe)|0)+Math.imul(oe,Te)|0,f=f+Math.imul(oe,xe)|0,c=c+Math.imul(ee,Oe)|0,r=(r=r+Math.imul(ee,Ce)|0)+Math.imul(ne,Oe)|0,f=f+Math.imul(ne,Ce)|0;var Je=(b+(c=c+Math.imul(C,Ne)|0)|0)+((8191&(r=(r=r+Math.imul(C,Le)|0)+Math.imul(H,Ne)|0))<<13)|0;b=((f=f+Math.imul(H,Le)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863,c=Math.imul(X,ce),r=(r=Math.imul(X,ge))+Math.imul(Q,ce)|0,f=Math.imul(Q,ge),c=c+Math.imul(F,ye)|0,r=(r=r+Math.imul(F,be)|0)+Math.imul(B,ye)|0,f=f+Math.imul(B,be)|0,c=c+Math.imul(ie,_e)|0,r=(r=r+Math.imul(ie,Ee)|0)+Math.imul(ae,_e)|0,f=f+Math.imul(ae,Ee)|0,c=c+Math.imul(re,Se)|0,r=(r=r+Math.imul(re,we)|0)+Math.imul(D,Se)|0,f=f+Math.imul(D,we)|0,c=c+Math.imul(pe,Me)|0,r=(r=r+Math.imul(pe,Re)|0)+Math.imul(me,Me)|0,f=f+Math.imul(me,Re)|0,c=c+Math.imul(j,Ae)|0,r=(r=r+Math.imul(j,Ie)|0)+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,Ie)|0,c=c+Math.imul(de,Te)|0,r=(r=r+Math.imul(de,xe)|0)+Math.imul(A,Te)|0,f=f+Math.imul(A,xe)|0,c=c+Math.imul(te,Oe)|0,r=(r=r+Math.imul(te,Ce)|0)+Math.imul(oe,Oe)|0,f=f+Math.imul(oe,Ce)|0,c=c+Math.imul(ee,Ne)|0,r=(r=r+Math.imul(ee,Le)|0)+Math.imul(ne,Ne)|0,f=f+Math.imul(ne,Le)|0;var Ye=(b+(c=c+Math.imul(C,ke)|0)|0)+((8191&(r=(r=r+Math.imul(C,De)|0)+Math.imul(H,ke)|0))<<13)|0;b=((f=f+Math.imul(H,De)|0)+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,c=Math.imul(X,ye),r=(r=Math.imul(X,be))+Math.imul(Q,ye)|0,f=Math.imul(Q,be),c=c+Math.imul(F,_e)|0,r=(r=r+Math.imul(F,Ee)|0)+Math.imul(B,_e)|0,f=f+Math.imul(B,Ee)|0,c=c+Math.imul(ie,Se)|0,r=(r=r+Math.imul(ie,we)|0)+Math.imul(ae,Se)|0,f=f+Math.imul(ae,we)|0,c=c+Math.imul(re,Me)|0,r=(r=r+Math.imul(re,Re)|0)+Math.imul(D,Me)|0,f=f+Math.imul(D,Re)|0,c=c+Math.imul(pe,Ae)|0,r=(r=r+Math.imul(pe,Ie)|0)+Math.imul(me,Ae)|0,f=f+Math.imul(me,Ie)|0,c=c+Math.imul(j,Te)|0,r=(r=r+Math.imul(j,xe)|0)+Math.imul(ue,Te)|0,f=f+Math.imul(ue,xe)|0,c=c+Math.imul(de,Oe)|0,r=(r=r+Math.imul(de,Ce)|0)+Math.imul(A,Oe)|0,f=f+Math.imul(A,Ce)|0,c=c+Math.imul(te,Ne)|0,r=(r=r+Math.imul(te,Le)|0)+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Le)|0;var Xe=(b+(c=c+Math.imul(ee,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ee,De)|0)+Math.imul(ne,ke)|0))<<13)|0;b=((f=f+Math.imul(ne,De)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul(X,_e),r=(r=Math.imul(X,Ee))+Math.imul(Q,_e)|0,f=Math.imul(Q,Ee),c=c+Math.imul(F,Se)|0,r=(r=r+Math.imul(F,we)|0)+Math.imul(B,Se)|0,f=f+Math.imul(B,we)|0,c=c+Math.imul(ie,Me)|0,r=(r=r+Math.imul(ie,Re)|0)+Math.imul(ae,Me)|0,f=f+Math.imul(ae,Re)|0,c=c+Math.imul(re,Ae)|0,r=(r=r+Math.imul(re,Ie)|0)+Math.imul(D,Ae)|0,f=f+Math.imul(D,Ie)|0,c=c+Math.imul(pe,Te)|0,r=(r=r+Math.imul(pe,xe)|0)+Math.imul(me,Te)|0,f=f+Math.imul(me,xe)|0,c=c+Math.imul(j,Oe)|0,r=(r=r+Math.imul(j,Ce)|0)+Math.imul(ue,Oe)|0,f=f+Math.imul(ue,Ce)|0,c=c+Math.imul(de,Ne)|0,r=(r=r+Math.imul(de,Le)|0)+Math.imul(A,Ne)|0,f=f+Math.imul(A,Le)|0;var Ze=(b+(c=c+Math.imul(te,ke)|0)|0)+((8191&(r=(r=r+Math.imul(te,De)|0)+Math.imul(oe,ke)|0))<<13)|0;b=((f=f+Math.imul(oe,De)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,c=Math.imul(X,Se),r=(r=Math.imul(X,we))+Math.imul(Q,Se)|0,f=Math.imul(Q,we),c=c+Math.imul(F,Me)|0,r=(r=r+Math.imul(F,Re)|0)+Math.imul(B,Me)|0,f=f+Math.imul(B,Re)|0,c=c+Math.imul(ie,Ae)|0,r=(r=r+Math.imul(ie,Ie)|0)+Math.imul(ae,Ae)|0,f=f+Math.imul(ae,Ie)|0,c=c+Math.imul(re,Te)|0,r=(r=r+Math.imul(re,xe)|0)+Math.imul(D,Te)|0,f=f+Math.imul(D,xe)|0,c=c+Math.imul(pe,Oe)|0,r=(r=r+Math.imul(pe,Ce)|0)+Math.imul(me,Oe)|0,f=f+Math.imul(me,Ce)|0,c=c+Math.imul(j,Ne)|0,r=(r=r+Math.imul(j,Le)|0)+Math.imul(ue,Ne)|0,f=f+Math.imul(ue,Le)|0;var Qe=(b+(c=c+Math.imul(de,ke)|0)|0)+((8191&(r=(r=r+Math.imul(de,De)|0)+Math.imul(A,ke)|0))<<13)|0;b=((f=f+Math.imul(A,De)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(X,Me),r=(r=Math.imul(X,Re))+Math.imul(Q,Me)|0,f=Math.imul(Q,Re),c=c+Math.imul(F,Ae)|0,r=(r=r+Math.imul(F,Ie)|0)+Math.imul(B,Ae)|0,f=f+Math.imul(B,Ie)|0,c=c+Math.imul(ie,Te)|0,r=(r=r+Math.imul(ie,xe)|0)+Math.imul(ae,Te)|0,f=f+Math.imul(ae,xe)|0,c=c+Math.imul(re,Oe)|0,r=(r=r+Math.imul(re,Ce)|0)+Math.imul(D,Oe)|0,f=f+Math.imul(D,Ce)|0,c=c+Math.imul(pe,Ne)|0,r=(r=r+Math.imul(pe,Le)|0)+Math.imul(me,Ne)|0,f=f+Math.imul(me,Le)|0;var $e=(b+(c=c+Math.imul(j,ke)|0)|0)+((8191&(r=(r=r+Math.imul(j,De)|0)+Math.imul(ue,ke)|0))<<13)|0;b=((f=f+Math.imul(ue,De)|0)+(r>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(X,Ae),r=(r=Math.imul(X,Ie))+Math.imul(Q,Ae)|0,f=Math.imul(Q,Ie),c=c+Math.imul(F,Te)|0,r=(r=r+Math.imul(F,xe)|0)+Math.imul(B,Te)|0,f=f+Math.imul(B,xe)|0,c=c+Math.imul(ie,Oe)|0,r=(r=r+Math.imul(ie,Ce)|0)+Math.imul(ae,Oe)|0,f=f+Math.imul(ae,Ce)|0,c=c+Math.imul(re,Ne)|0,r=(r=r+Math.imul(re,Le)|0)+Math.imul(D,Ne)|0,f=f+Math.imul(D,Le)|0;var et=(b+(c=c+Math.imul(pe,ke)|0)|0)+((8191&(r=(r=r+Math.imul(pe,De)|0)+Math.imul(me,ke)|0))<<13)|0;b=((f=f+Math.imul(me,De)|0)+(r>>>13)|0)+(et>>>26)|0,et&=67108863,c=Math.imul(X,Te),r=(r=Math.imul(X,xe))+Math.imul(Q,Te)|0,f=Math.imul(Q,xe),c=c+Math.imul(F,Oe)|0,r=(r=r+Math.imul(F,Ce)|0)+Math.imul(B,Oe)|0,f=f+Math.imul(B,Ce)|0,c=c+Math.imul(ie,Ne)|0,r=(r=r+Math.imul(ie,Le)|0)+Math.imul(ae,Ne)|0,f=f+Math.imul(ae,Le)|0;var tt=(b+(c=c+Math.imul(re,ke)|0)|0)+((8191&(r=(r=r+Math.imul(re,De)|0)+Math.imul(D,ke)|0))<<13)|0;b=((f=f+Math.imul(D,De)|0)+(r>>>13)|0)+(tt>>>26)|0,tt&=67108863,c=Math.imul(X,Oe),r=(r=Math.imul(X,Ce))+Math.imul(Q,Oe)|0,f=Math.imul(Q,Ce),c=c+Math.imul(F,Ne)|0,r=(r=r+Math.imul(F,Le)|0)+Math.imul(B,Ne)|0,f=f+Math.imul(B,Le)|0;var rt=(b+(c=c+Math.imul(ie,ke)|0)|0)+((8191&(r=(r=r+Math.imul(ie,De)|0)+Math.imul(ae,ke)|0))<<13)|0;b=((f=f+Math.imul(ae,De)|0)+(r>>>13)|0)+(rt>>>26)|0,rt&=67108863,c=Math.imul(X,Ne),r=(r=Math.imul(X,Le))+Math.imul(Q,Ne)|0,f=Math.imul(Q,Le);var it=(b+(c=c+Math.imul(F,ke)|0)|0)+((8191&(r=(r=r+Math.imul(F,De)|0)+Math.imul(B,ke)|0))<<13)|0;b=((f=f+Math.imul(B,De)|0)+(r>>>13)|0)+(it>>>26)|0,it&=67108863;var nt=(b+(c=Math.imul(X,ke))|0)+((8191&(r=(r=Math.imul(X,De))+Math.imul(Q,ke)|0))<<13)|0;return b=((f=Math.imul(Q,De))+(r>>>13)|0)+(nt>>>26)|0,nt&=67108863,l[0]=at,l[1]=Ve,l[2]=je,l[3]=We,l[4]=Ge,l[5]=qe,l[6]=ze,l[7]=Ke,l[8]=Je,l[9]=Ye,l[10]=Xe,l[11]=Ze,l[12]=Qe,l[13]=$e,l[14]=et,l[15]=tt,l[16]=rt,l[17]=it,l[18]=nt,0!==b&&(l[19]=b,a.length++),a};function k(u,t,n){return(new I).mulp(u,t,n)}function I(u,t){this.x=u,this.y=t}Math.imul||(R=E),o.prototype.mulTo=function(t,n){var a,i=this.length+t.length;return a=10===this.length&&10===t.length?R(this,t,n):i<63?E(this,t,n):i<1024?function T(u,t,n){n.negative=t.negative^u.negative,n.length=u.length+t.length;for(var a=0,i=0,s=0;s<n.length-1;s++){var l=i;i=0;for(var b=67108863&a,c=Math.min(s,t.length-1),r=Math.max(0,s-u.length+1);r<=c;r++){var H=(0|u.words[s-r])*(0|t.words[r]),Y=67108863&H;b=67108863&(Y=Y+b|0),i+=(l=(l=l+(H/67108864|0)|0)+(Y>>>26)|0)>>>26,l&=67108863}n.words[s]=b,a=l,l=i}return 0!==a?n.words[s]=a:n.length--,n.strip()}(this,t,n):k(this,t,n),a},I.prototype.makeRBT=function(t){for(var n=new Array(t),a=o.prototype._countBits(t)-1,i=0;i<t;i++)n[i]=this.revBin(i,a,t);return n},I.prototype.revBin=function(t,n,a){if(0===t||t===a-1)return t;for(var i=0,s=0;s<n;s++)i|=(1&t)<<n-s-1,t>>=1;return i},I.prototype.permute=function(t,n,a,i,s,l){for(var b=0;b<l;b++)i[b]=n[t[b]],s[b]=a[t[b]]},I.prototype.transform=function(t,n,a,i,s,l){this.permute(l,t,n,a,i,s);for(var b=1;b<s;b<<=1)for(var c=b<<1,r=Math.cos(2*Math.PI/c),f=Math.sin(2*Math.PI/c),L=0;L<s;L+=c)for(var C=r,H=f,Y=0;Y<b;Y++){var ee=a[L+Y],ne=i[L+Y],fe=a[L+Y+b],te=i[L+Y+b],oe=C*fe-H*te;te=C*te+H*fe,a[L+Y]=ee+(fe=oe),i[L+Y]=ne+te,a[L+Y+b]=ee-fe,i[L+Y+b]=ne-te,Y!==c&&(oe=r*C-f*H,H=r*H+f*C,C=oe)}},I.prototype.guessLen13b=function(t,n){var a=1|Math.max(n,t),i=1&a,s=0;for(a=a/2|0;a;a>>>=1)s++;return 1<<s+1+i},I.prototype.conjugate=function(t,n,a){if(!(a<=1))for(var i=0;i<a/2;i++){var s=t[i];t[i]=t[a-i-1],t[a-i-1]=s,s=n[i],n[i]=-n[a-i-1],n[a-i-1]=-s}},I.prototype.normalize13b=function(t,n){for(var a=0,i=0;i<n/2;i++){var s=8192*Math.round(t[2*i+1]/n)+Math.round(t[2*i]/n)+a;t[i]=67108863&s,a=s<67108864?0:s/67108864|0}return t},I.prototype.convert13b=function(t,n,a,i){for(var s=0,l=0;l<n;l++)a[2*l]=8191&(s+=0|t[l]),a[2*l+1]=8191&(s>>>=13),s>>>=13;for(l=2*n;l<i;++l)a[l]=0;_(0===s),_(0==(-8192&s))},I.prototype.stub=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=0;return n},I.prototype.mulp=function(t,n,a){var i=2*this.guessLen13b(t.length,n.length),s=this.makeRBT(i),l=this.stub(i),b=new Array(i),c=new Array(i),r=new Array(i),f=new Array(i),L=new Array(i),C=new Array(i),H=a.words;H.length=i,this.convert13b(t.words,t.length,b,i),this.convert13b(n.words,n.length,f,i),this.transform(b,l,c,r,i,s),this.transform(f,l,L,C,i,s);for(var Y=0;Y<i;Y++){var ee=c[Y]*L[Y]-r[Y]*C[Y];r[Y]=c[Y]*C[Y]+r[Y]*L[Y],c[Y]=ee}return this.conjugate(c,r,i),this.transform(c,r,H,l,i,s),this.conjugate(H,l,i),this.normalize13b(H,i),a.negative=t.negative^n.negative,a.length=t.length+n.length,a.strip()},o.prototype.mul=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},o.prototype.mulf=function(t){var n=new o(null);return n.words=new Array(this.length+t.length),k(this,t,n)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){_("number"==typeof t),_(t<67108864);for(var n=0,a=0;a<this.length;a++){var i=(0|this.words[a])*t,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var n=function g(u){for(var t=new Array(u.bitLength()),n=0;n<t.length;n++){var i=n%26;t[n]=(u.words[n/26|0]&1<<i)>>>i}return t}(t);if(0===n.length)return new o(1);for(var a=this,i=0;i<n.length&&0===n[i];i++,a=a.sqr());if(++i<n.length)for(var s=a.sqr();i<n.length;i++,s=s.sqr())0!==n[i]&&(a=a.mul(s));return a},o.prototype.iushln=function(t){_("number"==typeof t&&t>=0);var s,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(s=0;s<this.length;s++){var b=this.words[s]&i;this.words[s]=(0|this.words[s])-b<<n|l,l=b>>>26-n}l&&(this.words[s]=l,this.length++)}if(0!==a){for(s=this.length-1;s>=0;s--)this.words[s+a]=this.words[s];for(s=0;s<a;s++)this.words[s]=0;this.length+=a}return this.strip()},o.prototype.ishln=function(t){return _(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,n,a){var i;_("number"==typeof t&&t>=0),i=n?(n-n%26)/26:0;var s=t%26,l=Math.min((t-s)/26,this.length),b=67108863^67108863>>>s<<s,c=a;if(i-=l,i=Math.max(0,i),c){for(var r=0;r<l;r++)c.words[r]=this.words[r];c.length=l}if(0!==l)if(this.length>l)for(this.length-=l,r=0;r<this.length;r++)this.words[r]=this.words[r+l];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(0!==f||r>=i);r--){var L=0|this.words[r];this.words[r]=f<<26-s|L>>>s,f=L&b}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,n,a){return _(0===this.negative),this.iushrn(t,n,a)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return!(this.length<=a||!(this.words[a]&1<<n))},o.prototype.imaskn=function(t){_("number"==typeof t&&t>=0);var n=t%26,a=(t-n)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=a?this:(0!==n&&a++,this.length=Math.min(a,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return _("number"==typeof t),_(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},o.prototype.isubn=function(t){if(_("number"==typeof t),_(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,n,a){var s;this._expand(t.length+a);var l,b=0;for(s=0;s<t.length;s++){l=(0|this.words[s+a])+b;var c=(0|t.words[s])*n;b=((l-=67108863&c)>>26)-(c/67108864|0),this.words[s+a]=67108863&l}for(;s<this.length-a;s++)b=(l=(0|this.words[s+a])+b)>>26,this.words[s+a]=67108863&l;if(0===b)return this.strip();for(_(-1===b),b=0,s=0;s<this.length;s++)b=(l=-(0|this.words[s])+b)>>26,this.words[s]=67108863&l;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,n){var a,i=this.clone(),s=t,l=0|s.words[s.length-1];0!=(a=26-this._countBits(l))&&(s=s.ushln(a),i.iushln(a),l=0|s.words[s.length-1]);var r,c=i.length-s.length;if("mod"!==n){(r=new o(null)).length=c+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var L=i.clone()._ishlnsubmul(s,1,c);0===L.negative&&(i=L,r&&(r.words[c]=1));for(var C=c-1;C>=0;C--){var H=67108864*(0|i.words[s.length+C])+(0|i.words[s.length+C-1]);for(H=Math.min(H/l|0,67108863),i._ishlnsubmul(s,H,C);0!==i.negative;)H--,i.negative=0,i._ishlnsubmul(s,1,C),i.isZero()||(i.negative^=1);r&&(r.words[C]=H)}return r&&r.strip(),i.strip(),"div"!==n&&0!==a&&i.iushrn(a),{div:r||null,mod:i}},o.prototype.divmod=function(t,n,a){return _(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(i=l.div.neg()),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(s=l.mod.neg(),a&&0!==s.negative&&s.isub(t)),{div:l.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,n);var i,s,l},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var a=0!==n.div.negative?n.mod.isub(t):n.mod,i=t.ushrn(1),s=t.andln(1),l=a.cmp(i);return l<0||1===s&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},o.prototype.modn=function(t){_(t<=67108863);for(var n=(1<<26)%t,a=0,i=this.length-1;i>=0;i--)a=(n*a+(0|this.words[i]))%t;return a},o.prototype.idivn=function(t){_(t<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var i=(0|this.words[a])+67108864*n;this.words[a]=i/t|0,n=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){_(0===t.negative),_(!t.isZero());var n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=new o(0),b=new o(1),c=0;n.isEven()&&a.isEven();)n.iushrn(1),a.iushrn(1),++c;for(var r=a.clone(),f=n.clone();!n.isZero();){for(var L=0,C=1;0==(n.words[0]&C)&&L<26;++L,C<<=1);if(L>0)for(n.iushrn(L);L-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(r),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var H=0,Y=1;0==(a.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(a.iushrn(H);H-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(r),b.isub(f)),l.iushrn(1),b.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(l),s.isub(b)):(a.isub(n),l.isub(i),b.isub(s))}return{a:l,b,gcd:a.iushln(c)}},o.prototype._invmp=function(t){_(0===t.negative),_(!t.isZero());var L,n=this,a=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var i=new o(1),s=new o(0),l=a.clone();n.cmpn(1)>0&&a.cmpn(1)>0;){for(var b=0,c=1;0==(n.words[0]&c)&&b<26;++b,c<<=1);if(b>0)for(n.iushrn(b);b-- >0;)i.isOdd()&&i.iadd(l),i.iushrn(1);for(var r=0,f=1;0==(a.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(a.iushrn(r);r-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);n.cmp(a)>=0?(n.isub(a),i.isub(s)):(a.isub(n),s.isub(i))}return(L=0===n.cmpn(1)?i:s).cmpn(0)<0&&L.iadd(t),L},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),a=t.clone();n.negative=0,a.negative=0;for(var i=0;n.isEven()&&a.isEven();i++)n.iushrn(1),a.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;a.isEven();)a.iushrn(1);var s=n.cmp(a);if(s<0){var l=n;n=a,a=l}else if(0===s||0===a.cmpn(1))break;n.isub(a)}return a.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){_("number"==typeof t);var n=t%26,a=(t-n)/26,i=1<<n;if(this.length<=a)return this._expand(a+1),this.words[a]|=i,this;for(var s=i,l=a;0!==s&&l<this.length;l++){var b=0|this.words[l];s=(b+=s)>>>26,this.words[l]=b&=67108863}return 0!==s&&(this.words[l]=s,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var a,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)a=1;else{n&&(t=-t),_(t<=67108863,"Number is too big");var i=0|this.words[0];a=i===t?0:i<t?-1:1}return 0!==this.negative?0|-a:a},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,a=this.length-1;a>=0;a--){var i=0|this.words[a],s=0|t.words[a];if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return _(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return _(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var U={k256:null,p224:null,p192:null,p25519:null};function V(u,t){this.name=u,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function J(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(u){if("string"==typeof u){var t=o._prime(u);this.m=t.p,this.prime=t}else _(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null}function z(u){S.call(this,u),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}V.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},V.prototype.ireduce=function(t){var a,n=t;do{this.split(n,this.tmp),a=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(a>this.n);var i=a<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},V.prototype.split=function(t,n){t.iushrn(this.n,0,n)},V.prototype.imulK=function(t){return t.imul(this.k)},w(W,V),W.prototype.split=function(t,n){for(var a=4194303,i=Math.min(t.length,9),s=0;s<i;s++)n.words[s]=t.words[s];if(n.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&a,s=10;s<t.length;s++){var b=0|t.words[s];t.words[s-10]=(b&a)<<4|l>>>22,l=b}t.words[s-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},W.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,a=0;a<t.length;a++){var i=0|t.words[a];t.words[a]=67108863&(n+=977*i),n=64*i+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},w(J,V),w(K,V),w(P,V),P.prototype.imulK=function(t){for(var n=0,a=0;a<t.length;a++){var i=19*(0|t.words[a])+n,s=67108863&i;i>>>=26,t.words[a]=s,n=i}return 0!==n&&(t.words[t.length++]=n),t},o._prime=function(t){if(U[t])return U[t];var n;if("k256"===t)n=new W;else if("p224"===t)n=new J;else if("p192"===t)n=new K;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new P}return U[t]=n,n},S.prototype._verify1=function(t){_(0===t.negative,"red works only with positives"),_(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,n){_(0==(t.negative|n.negative),"red works only with positives"),_(t.red&&t.red===n.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,n){this._verify2(t,n);var a=t.add(n);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},S.prototype.iadd=function(t,n){this._verify2(t,n);var a=t.iadd(n);return a.cmp(this.m)>=0&&a.isub(this.m),a},S.prototype.sub=function(t,n){this._verify2(t,n);var a=t.sub(n);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},S.prototype.isub=function(t,n){this._verify2(t,n);var a=t.isub(n);return a.cmpn(0)<0&&a.iadd(this.m),a},S.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},S.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},S.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(_(n%2==1),3===n){var a=this.m.add(new o(1)).iushrn(2);return this.pow(t,a)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);_(!i.isZero());var l=new o(1).toRed(this),b=l.redNeg(),c=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new o(2*r*r).toRed(this);0!==this.pow(r,c).cmp(b);)r.redIAdd(b);for(var f=this.pow(r,i),L=this.pow(t,i.addn(1).iushrn(1)),C=this.pow(t,i),H=s;0!==C.cmp(l);){for(var Y=C,ee=0;0!==Y.cmp(l);ee++)Y=Y.redSqr();_(ee<H);var ne=this.pow(f,new o(1).iushln(H-ee-1));L=L.redMul(ne),f=ne.redSqr(),C=C.redMul(f),H=ee}return L},S.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},S.prototype.pow=function(t,n){if(n.isZero())return new o(1).toRed(this);if(0===n.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var l=i[0],b=0,c=0,r=n.bitLength()%26;for(0===r&&(r=26),s=n.length-1;s>=0;s--){for(var f=n.words[s],L=r-1;L>=0;L--){var C=f>>L&1;l!==i[0]&&(l=this.sqr(l)),0!==C||0!==b?(b<<=1,b|=C,(4==++c||0===s&&0===L)&&(l=this.mul(l,i[b]),c=0,b=0)):c=0}r=26}return l},S.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},S.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},o.mont=function(t){return new z(t)},w(z,S),z.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},z.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},z.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var a=t.imul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new o(0)._forceRed(this);var a=t.mul(n),i=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=a.isub(i).iushrn(this.shift),l=s;return s.cmp(this.m)>=0?l=s.isub(this.m):s.cmpn(0)<0&&(l=s.iadd(this.m)),l._forceRed(this)},z.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Z=N.nmd(Z),this)},6705:(Z,q,N)=>{var x=N(2772),O=N(6945),_=N(9401),w=N(2057),o=N(8466),p=N(6386),y=N(8651),v=N(3502).Buffer;Z.exports=function(g,E,R){var T;T=g.padding?g.padding:R?1:4;var U,k=x(g),I=k.modulus.byteLength();if(E.length>I||new w(E).cmp(k.modulus)>=0)throw new Error("decryption error");U=R?y(new w(E),k):o(E,k);var V=v.alloc(I-U.length);if(U=v.concat([V,U],I),4===T)return function h(M,g){var E=M.modulus.byteLength(),R=p("sha1").update(v.alloc(0)).digest(),T=R.length;if(0!==g[0])throw new Error("decryption error");var k=g.slice(1,T+1),I=g.slice(T+1),U=_(k,O(I,T)),V=_(I,O(U,E-T-1));if(function m(M,g){M=v.from(M),g=v.from(g);var E=0,R=M.length;M.length!==g.length&&(E++,R=Math.min(M.length,g.length));for(var T=-1;++T<R;)E+=M[T]^g[T];return E}(R,V.slice(0,T)))throw new Error("decryption error");for(var W=T;0===V[W];)W++;if(1!==V[W++])throw new Error("decryption error");return V.slice(W)}(k,U);if(1===T)return function d(M,g,E){for(var R=g.slice(0,2),T=2,k=0;0!==g[T++];)if(T>=g.length){k++;break}var I=g.slice(2,T-1);if(("0002"!==R.toString("hex")&&!E||"0001"!==R.toString("hex")&&E)&&k++,I.length<8&&k++,k)throw new Error("decryption error");return g.slice(T)}(0,U,R);if(3===T)return U;throw new Error("unknown padding")}},6562:(Z,q,N)=>{var x=N(2772),O=N(3753),_=N(6386),w=N(6945),o=N(9401),p=N(2057),y=N(8651),v=N(8466),h=N(3502).Buffer;Z.exports=function(E,R,T){var k;k=E.padding?E.padding:T?1:4;var U,I=x(E);if(4===k)U=function d(g,E){var R=g.modulus.byteLength(),T=E.length,k=_("sha1").update(h.alloc(0)).digest(),I=k.length,U=2*I;if(T>R-U-2)throw new Error("message too long");var V=h.alloc(R-T-U-2),W=R-I-1,J=O(I),K=o(h.concat([k,V,h.alloc(1,1),E],W),w(J,W)),P=o(J,w(K,I));return new p(h.concat([h.alloc(1),P,K],R))}(I,R);else if(1===k)U=function m(g,E,R){var I,T=E.length,k=g.modulus.byteLength();if(T>k-11)throw new Error("message too long");return I=R?h.alloc(k-T-3,255):function M(g){for(var I,E=h.allocUnsafe(g),R=0,T=O(2*g),k=0;R<g;)k===T.length&&(T=O(2*g),k=0),(I=T[k++])&&(E[R++]=I);return E}(k-T-3),new p(h.concat([h.from([0,R?1:2]),I,h.alloc(1),E],k))}(I,R,T);else{if(3!==k)throw new Error("unknown padding");if((U=new p(R)).cmp(I.modulus)>=0)throw new Error("data too long for modulus")}return T?v(U,I):y(U,I)}},8651:(Z,q,N)=>{var x=N(2057),O=N(3502).Buffer;Z.exports=function _(w,o){return O.from(w.toRed(x.mont(o.modulus)).redPow(new x(o.publicExponent)).fromRed().toArray())}},9401:Z=>{Z.exports=function(N,x){for(var O=N.length,_=-1;++_<O;)N[_]^=x[_];return N}},3753:(Z,q,N)=>{"use strict";var x=65536,w=N(3502).Buffer,o=global.crypto||global.msCrypto;Z.exports=o&&o.getRandomValues?function p(y,v){if(y>4294967295)throw new RangeError("requested too many random bytes");var h=w.allocUnsafe(y);if(y>0)if(y>x)for(var d=0;d<y;d+=x)o.getRandomValues(h.slice(d,d+x));else o.getRandomValues(h);return"function"==typeof v?process.nextTick(function(){v(null,h)}):h}:function _(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},4275:(Z,q,N)=>{"use strict";function x(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var O=N(3502),_=N(3753),w=O.Buffer,o=O.kMaxLength,p=global.crypto||global.msCrypto,y=Math.pow(2,32)-1;function v(g,E){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>y||g<0)throw new TypeError("offset must be a uint32");if(g>o||g>E)throw new RangeError("offset out of range")}function h(g,E,R){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>y||g<0)throw new TypeError("size must be a uint32");if(g+E>R||g>o)throw new RangeError("buffer too small")}function m(g,E,R,T){if(process.browser){var I=new Uint8Array(g.buffer,E,R);return p.getRandomValues(I),T?void process.nextTick(function(){T(null,g)}):g}if(!T)return _(R).copy(g,E),g;_(R,function(V,W){if(V)return T(V);W.copy(g,E),T(null,g)})}p&&p.getRandomValues||!process.browser?(q.randomFill=function d(g,E,R,T){if(!(w.isBuffer(g)||g instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof E)T=E,E=0,R=g.length;else if("function"==typeof R)T=R,R=g.length-E;else if("function"!=typeof T)throw new TypeError('"cb" argument must be a function');return v(E,g.length),h(R,E,g.length),m(g,E,R,T)},q.randomFillSync=function M(g,E,R){if(void 0===E&&(E=0),!(w.isBuffer(g)||g instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return v(E,g.length),void 0===R&&(R=g.length-E),h(R,E,g.length),m(g,E,R)}):(q.randomFill=x,q.randomFillSync=x)},891:Z=>{"use strict";var N={};function x(p,y,v){v||(v=Error);var d=function(m){function M(g,E,R){return m.call(this,function h(m,M,g){return"string"==typeof y?y:y(m,M,g)}(g,E,R))||this}return function q(p,y){p.prototype=Object.create(y.prototype),p.prototype.constructor=p,p.__proto__=y}(M,m),M}(v);d.prototype.name=v.name,d.prototype.code=p,N[p]=d}function O(p,y){if(Array.isArray(p)){var v=p.length;return p=p.map(function(h){return String(h)}),v>2?"one of ".concat(y," ").concat(p.slice(0,v-1).join(", "),", or ")+p[v-1]:2===v?"one of ".concat(y," ").concat(p[0]," or ").concat(p[1]):"of ".concat(y," ").concat(p[0])}return"of ".concat(y," ").concat(String(p))}x("ERR_INVALID_OPT_VALUE",function(p,y){return'The value "'+y+'" is invalid for option "'+p+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(p,y,v){var h,d;if("string"==typeof y&&function _(p,y,v){return p.substr(!v||v<0?0:+v,y.length)===y}(y,"not ")?(h="must not be",y=y.replace(/^not /,"")):h="must be",function w(p,y,v){return(void 0===v||v>p.length)&&(v=p.length),p.substring(v-y.length,v)===y}(p," argument"))d="The ".concat(p," ").concat(h," ").concat(O(y,"type"));else{var m=function o(p,y,v){return"number"!=typeof v&&(v=0),!(v+y.length>p.length)&&-1!==p.indexOf(y,v)}(p,".")?"property":"argument";d='The "'.concat(p,'" ').concat(m," ").concat(h," ").concat(O(y,"type"))}return d+". Received type ".concat(typeof v)},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Z.exports.q=N},1339:(Z,q,N)=>{"use strict";var x=Object.keys||function(d){var m=[];for(var M in d)m.push(M);return m};Z.exports=y;var O=N(3154),_=N(520);N(3894)(y,O);for(var w=x(_.prototype),o=0;o<w.length;o++){var p=w[o];y.prototype[p]||(y.prototype[p]=_.prototype[p])}function y(d){if(!(this instanceof y))return new y(d);O.call(this,d),_.call(this,d),this.allowHalfOpen=!0,d&&(!1===d.readable&&(this.readable=!1),!1===d.writable&&(this.writable=!1),!1===d.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",v)))}function v(){this._writableState.ended||process.nextTick(h,this)}function h(d){d.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})},6071:(Z,q,N)=>{"use strict";Z.exports=O;var x=N(6025);function O(_){if(!(this instanceof O))return new O(_);x.call(this,_)}N(3894)(O,x),O.prototype._transform=function(_,w,o){o(null,_)}},3154:(Z,q,N)=>{"use strict";var x;Z.exports=u,u.ReadableState=z,N(9069);var d,_=function($,j){return $.listeners(j).length},w=N(4970),o=N(3172).Buffer,p=global.Uint8Array||function(){},h=N(4616);d=h&&h.debuglog?h.debuglog("stream"):function(){};var V,W,J,m=N(5019),M=N(1920),E=N(7102).getHighWaterMark,R=N(891).q,T=R.ERR_INVALID_ARG_TYPE,k=R.ERR_STREAM_PUSH_AFTER_EOF,I=R.ERR_METHOD_NOT_IMPLEMENTED,U=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;N(3894)(u,w);var K=M.errorOrDestroy,P=["error","close","destroy","pause","resume"];function z(A,$,j){x=x||N(1339),"boolean"!=typeof j&&(j=$ instanceof x),this.objectMode=!!(A=A||{}).objectMode,j&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=E(this,A,"readableHighWaterMark",j),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(V||(V=N(3054).s),this.decoder=new V(A.encoding),this.encoding=A.encoding)}function u(A){if(x=x||N(1339),!(this instanceof u))return new u(A);this._readableState=new z(A,this,this instanceof x),this.readable=!0,A&&("function"==typeof A.read&&(this._read=A.read),"function"==typeof A.destroy&&(this._destroy=A.destroy)),w.call(this)}function t(A,$,j,ue,Pe){d("readableAddChunk",$);var me,pe=A._readableState;if(null===$)pe.reading=!1,function b(A,$){if(d("onEofChunk"),!$.ended){if($.decoder){var j=$.decoder.end();j&&j.length&&($.buffer.push(j),$.length+=$.objectMode?1:j.length)}$.ended=!0,$.sync?c(A):($.needReadable=!1,$.emittedReadable||($.emittedReadable=!0,r(A)))}}(A,pe);else if(Pe||(me=function a(A,$){var j;return!function v(A){return o.isBuffer(A)||A instanceof p}($)&&"string"!=typeof $&&void 0!==$&&!A.objectMode&&(j=new T("chunk",["string","Buffer","Uint8Array"],$)),j}(pe,$)),me)K(A,me);else if(pe.objectMode||$&&$.length>0)if("string"!=typeof $&&!pe.objectMode&&Object.getPrototypeOf($)!==o.prototype&&($=function y(A){return o.from(A)}($)),ue)pe.endEmitted?K(A,new U):n(A,pe,$,!0);else if(pe.ended)K(A,new k);else{if(pe.destroyed)return!1;pe.reading=!1,pe.decoder&&!j?($=pe.decoder.write($),pe.objectMode||0!==$.length?n(A,pe,$,!1):f(A,pe)):n(A,pe,$,!1)}else ue||(pe.reading=!1,f(A,pe));return!pe.ended&&(pe.length<pe.highWaterMark||0===pe.length)}function n(A,$,j,ue){$.flowing&&0===$.length&&!$.sync?($.awaitDrain=0,A.emit("data",j)):($.length+=$.objectMode?1:j.length,ue?$.buffer.unshift(j):$.buffer.push(j),$.needReadable&&c(A)),f(A,$)}Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function($){!this._readableState||(this._readableState.destroyed=$)}}),u.prototype.destroy=M.destroy,u.prototype._undestroy=M.undestroy,u.prototype._destroy=function(A,$){$(A)},u.prototype.push=function(A,$){var ue,j=this._readableState;return j.objectMode?ue=!0:"string"==typeof A&&(($=$||j.defaultEncoding)!==j.encoding&&(A=o.from(A,$),$=""),ue=!0),t(this,A,$,!1,ue)},u.prototype.unshift=function(A){return t(this,A,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(A){V||(V=N(3054).s);var $=new V(A);this._readableState.decoder=$,this._readableState.encoding=this._readableState.decoder.encoding;for(var j=this._readableState.buffer.head,ue="";null!==j;)ue+=$.write(j.data),j=j.next;return this._readableState.buffer.clear(),""!==ue&&this._readableState.buffer.push(ue),this._readableState.length=ue.length,this};var i=1073741824;function l(A,$){return A<=0||0===$.length&&$.ended?0:$.objectMode?1:A!=A?$.flowing&&$.length?$.buffer.head.data.length:$.length:(A>$.highWaterMark&&($.highWaterMark=function s(A){return A>=i?A=i:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}(A)),A<=$.length?A:$.ended?$.length:($.needReadable=!0,0))}function c(A){var $=A._readableState;d("emitReadable",$.needReadable,$.emittedReadable),$.needReadable=!1,$.emittedReadable||(d("emitReadable",$.flowing),$.emittedReadable=!0,process.nextTick(r,A))}function r(A){var $=A._readableState;d("emitReadable_",$.destroyed,$.length,$.ended),!$.destroyed&&($.length||$.ended)&&(A.emit("readable"),$.emittedReadable=!1),$.needReadable=!$.flowing&&!$.ended&&$.length<=$.highWaterMark,fe(A)}function f(A,$){$.readingMore||($.readingMore=!0,process.nextTick(L,A,$))}function L(A,$){for(;!$.reading&&!$.ended&&($.length<$.highWaterMark||$.flowing&&0===$.length);){var j=$.length;if(d("maybeReadMore read 0"),A.read(0),j===$.length)break}$.readingMore=!1}function H(A){var $=A._readableState;$.readableListening=A.listenerCount("readable")>0,$.resumeScheduled&&!$.paused?$.flowing=!0:A.listenerCount("data")>0&&A.resume()}function Y(A){d("readable nexttick read 0"),A.read(0)}function ne(A,$){d("resume",$.reading),$.reading||A.read(0),$.resumeScheduled=!1,A.emit("resume"),fe(A),$.flowing&&!$.reading&&A.read(0)}function fe(A){var $=A._readableState;for(d("flow",$.flowing);$.flowing&&null!==A.read(););}function te(A,$){return 0===$.length?null:($.objectMode?j=$.buffer.shift():!A||A>=$.length?(j=$.decoder?$.buffer.join(""):1===$.buffer.length?$.buffer.first():$.buffer.concat($.length),$.buffer.clear()):j=$.buffer.consume(A,$.decoder),j);var j}function oe(A){var $=A._readableState;d("endReadable",$.endEmitted),$.endEmitted||($.ended=!0,process.nextTick(le,$,A))}function le(A,$){if(d("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&0===A.length&&(A.endEmitted=!0,$.readable=!1,$.emit("end"),A.autoDestroy)){var j=$._writableState;(!j||j.autoDestroy&&j.finished)&&$.destroy()}}function de(A,$){for(var j=0,ue=A.length;j<ue;j++)if(A[j]===$)return j;return-1}u.prototype.read=function(A){d("read",A),A=parseInt(A,10);var $=this._readableState,j=A;if(0!==A&&($.emittedReadable=!1),0===A&&$.needReadable&&((0!==$.highWaterMark?$.length>=$.highWaterMark:$.length>0)||$.ended))return d("read: emitReadable",$.length,$.ended),0===$.length&&$.ended?oe(this):c(this),null;if(0===(A=l(A,$))&&$.ended)return 0===$.length&&oe(this),null;var Pe,ue=$.needReadable;return d("need readable",ue),(0===$.length||$.length-A<$.highWaterMark)&&d("length less than watermark",ue=!0),$.ended||$.reading?d("reading or ended",ue=!1):ue&&(d("do read"),$.reading=!0,$.sync=!0,0===$.length&&($.needReadable=!0),this._read($.highWaterMark),$.sync=!1,$.reading||(A=l(j,$))),null===(Pe=A>0?te(A,$):null)?($.needReadable=$.length<=$.highWaterMark,A=0):($.length-=A,$.awaitDrain=0),0===$.length&&($.ended||($.needReadable=!0),j!==A&&$.ended&&oe(this)),null!==Pe&&this.emit("data",Pe),Pe},u.prototype._read=function(A){K(this,new I("_read()"))},u.prototype.pipe=function(A,$){var j=this,ue=this._readableState;switch(ue.pipesCount){case 0:ue.pipes=A;break;case 1:ue.pipes=[ue.pipes,A];break;default:ue.pipes.push(A)}ue.pipesCount+=1,d("pipe count=%d opts=%j",ue.pipesCount,$);var pe=$&&!1===$.end||A===process.stdout||A===process.stderr?B:Be;function Be(){d("onend"),A.end()}ue.endEmitted?process.nextTick(pe):j.once("end",pe),A.on("unpipe",function me(G,X){d("onunpipe"),G===j&&X&&!1===X.hasUnpiped&&(X.hasUnpiped=!0,function se(){d("cleanup"),A.removeListener("close",he),A.removeListener("finish",F),A.removeListener("drain",re),A.removeListener("error",ae),A.removeListener("unpipe",me),j.removeListener("end",Be),j.removeListener("end",B),j.removeListener("data",ie),D=!0,ue.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&re()}())});var re=function C(A){return function(){var j=A._readableState;d("pipeOnDrain",j.awaitDrain),j.awaitDrain&&j.awaitDrain--,0===j.awaitDrain&&_(A,"data")&&(j.flowing=!0,fe(A))}}(j);A.on("drain",re);var D=!1;function ie(G){d("ondata");var X=A.write(G);d("dest.write",X),!1===X&&((1===ue.pipesCount&&ue.pipes===A||ue.pipesCount>1&&-1!==de(ue.pipes,A))&&!D&&(d("false write response, pause",ue.awaitDrain),ue.awaitDrain++),j.pause())}function ae(G){d("onerror",G),B(),A.removeListener("error",ae),0===_(A,"error")&&K(A,G)}function he(){A.removeListener("finish",F),B()}function F(){d("onfinish"),A.removeListener("close",he),B()}function B(){d("unpipe"),j.unpipe(A)}return j.on("data",ie),function S(A,$,j){if("function"==typeof A.prependListener)return A.prependListener($,j);A._events&&A._events[$]?Array.isArray(A._events[$])?A._events[$].unshift(j):A._events[$]=[j,A._events[$]]:A.on($,j)}(A,"error",ae),A.once("close",he),A.once("finish",F),A.emit("pipe",j),ue.flowing||(d("pipe resume"),j.resume()),A},u.prototype.unpipe=function(A){var $=this._readableState,j={hasUnpiped:!1};if(0===$.pipesCount)return this;if(1===$.pipesCount)return A&&A!==$.pipes||(A||(A=$.pipes),$.pipes=null,$.pipesCount=0,$.flowing=!1,A&&A.emit("unpipe",this,j)),this;if(!A){var ue=$.pipes,Pe=$.pipesCount;$.pipes=null,$.pipesCount=0,$.flowing=!1;for(var pe=0;pe<Pe;pe++)ue[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var me=de($.pipes,A);return-1===me||($.pipes.splice(me,1),$.pipesCount-=1,1===$.pipesCount&&($.pipes=$.pipes[0]),A.emit("unpipe",this,j)),this},u.prototype.addListener=u.prototype.on=function(A,$){var j=w.prototype.on.call(this,A,$),ue=this._readableState;return"data"===A?(ue.readableListening=this.listenerCount("readable")>0,!1!==ue.flowing&&this.resume()):"readable"===A&&!ue.endEmitted&&!ue.readableListening&&(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,d("on readable",ue.length,ue.reading),ue.length?c(this):ue.reading||process.nextTick(Y,this)),j},u.prototype.removeListener=function(A,$){var j=w.prototype.removeListener.call(this,A,$);return"readable"===A&&process.nextTick(H,this),j},u.prototype.removeAllListeners=function(A){var $=w.prototype.removeAllListeners.apply(this,arguments);return("readable"===A||void 0===A)&&process.nextTick(H,this),$},u.prototype.resume=function(){var A=this._readableState;return A.flowing||(d("resume"),A.flowing=!A.readableListening,function ee(A,$){$.resumeScheduled||($.resumeScheduled=!0,process.nextTick(ne,A,$))}(this,A)),A.paused=!1,this},u.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},u.prototype.wrap=function(A){var $=this,j=this._readableState,ue=!1;for(var Pe in A.on("end",function(){if(d("wrapped end"),j.decoder&&!j.ended){var me=j.decoder.end();me&&me.length&&$.push(me)}$.push(null)}),A.on("data",function(me){d("wrapped data"),j.decoder&&(me=j.decoder.write(me)),j.objectMode&&null==me||!(j.objectMode||me&&me.length)||$.push(me)||(ue=!0,A.pause())}),A)void 0===this[Pe]&&"function"==typeof A[Pe]&&(this[Pe]=function(Be){return function(){return A[Be].apply(A,arguments)}}(Pe));for(var pe=0;pe<P.length;pe++)A.on(P[pe],this.emit.bind(this,P[pe]));return this._read=function(me){d("wrapped _read",me),ue&&(ue=!1,A.resume())},this},"function"==typeof Symbol&&(u.prototype[Symbol.asyncIterator]=function(){return void 0===W&&(W=N(3872)),W(this)}),Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(u.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(u.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),u._fromList=te,Object.defineProperty(u.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(u.from=function(A,$){return void 0===J&&(J=N(7412)),J(u,A,$)})},6025:(Z,q,N)=>{"use strict";Z.exports=v;var x=N(891).q,O=x.ERR_METHOD_NOT_IMPLEMENTED,_=x.ERR_MULTIPLE_CALLBACK,w=x.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=x.ERR_TRANSFORM_WITH_LENGTH_0,p=N(1339);function y(m,M){var g=this._transformState;g.transforming=!1;var E=g.writecb;if(null===E)return this.emit("error",new _);g.writechunk=null,g.writecb=null,null!=M&&this.push(M),E(m);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function v(m){if(!(this instanceof v))return new v(m);p.call(this,m),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&("function"==typeof m.transform&&(this._transform=m.transform),"function"==typeof m.flush&&(this._flush=m.flush)),this.on("prefinish",h)}function h(){var m=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(M,g){d(m,M,g)})}function d(m,M,g){if(M)return m.emit("error",M);if(null!=g&&m.push(g),m._writableState.length)throw new o;if(m._transformState.transforming)throw new w;return m.push(null)}N(3894)(v,p),v.prototype.push=function(m,M){return this._transformState.needTransform=!1,p.prototype.push.call(this,m,M)},v.prototype._transform=function(m,M,g){g(new O("_transform()"))},v.prototype._write=function(m,M,g){var E=this._transformState;if(E.writecb=g,E.writechunk=m,E.writeencoding=M,!E.transforming){var R=this._readableState;(E.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},v.prototype._read=function(m){var M=this._transformState;null===M.writechunk||M.transforming?M.needTransform=!0:(M.transforming=!0,this._transform(M.writechunk,M.writeencoding,M.afterTransform))},v.prototype._destroy=function(m,M){p.prototype._destroy.call(this,m,function(g){M(g)})}},520:(Z,q,N)=>{"use strict";function O(fe){var te=this;this.next=null,this.entry=null,this.finish=function(){!function ne(fe,te,oe){var le=fe.entry;for(fe.entry=null;le;){var de=le.callback;te.pendingcb--,de(oe),le=le.next}te.corkedRequestsFree.next=fe}(te,fe)}}var _;Z.exports=z,z.WritableState=P;var S,w={deprecate:N(4364)},o=N(4970),p=N(3172).Buffer,y=global.Uint8Array||function(){},d=N(1920),M=N(7102).getHighWaterMark,g=N(891).q,E=g.ERR_INVALID_ARG_TYPE,R=g.ERR_METHOD_NOT_IMPLEMENTED,T=g.ERR_MULTIPLE_CALLBACK,k=g.ERR_STREAM_CANNOT_PIPE,I=g.ERR_STREAM_DESTROYED,U=g.ERR_STREAM_NULL_VALUES,V=g.ERR_STREAM_WRITE_AFTER_END,W=g.ERR_UNKNOWN_ENCODING,J=d.errorOrDestroy;function K(){}function P(fe,te,oe){_=_||N(1339),"boolean"!=typeof oe&&(oe=te instanceof _),this.objectMode=!!(fe=fe||{}).objectMode,oe&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=M(this,fe,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===fe.decodeStrings),this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){!function b(fe,te){var oe=fe._writableState,le=oe.sync,de=oe.writecb;if("function"!=typeof de)throw new T;if(function l(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(oe),te)!function s(fe,te,oe,le,de){--te.pendingcb,oe?(process.nextTick(de,le),process.nextTick(Y,fe,te),fe._writableState.errorEmitted=!0,J(fe,le)):(de(le),fe._writableState.errorEmitted=!0,J(fe,le),Y(fe,te))}(fe,oe,le,te,de);else{var A=L(oe)||fe.destroyed;!A&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&f(fe,oe),le?process.nextTick(c,fe,oe,A,de):c(fe,oe,A,de)}}(te,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new O(this)}function z(fe){var te=this instanceof(_=_||N(1339));if(!te&&!S.call(z,this))return new z(fe);this._writableState=new P(fe,this,te),this.writable=!0,fe&&("function"==typeof fe.write&&(this._write=fe.write),"function"==typeof fe.writev&&(this._writev=fe.writev),"function"==typeof fe.destroy&&(this._destroy=fe.destroy),"function"==typeof fe.final&&(this._final=fe.final)),o.call(this)}function i(fe,te,oe,le,de,A,$){te.writelen=le,te.writecb=$,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new I("write")):oe?fe._writev(de,te.onwrite):fe._write(de,A,te.onwrite),te.sync=!1}function c(fe,te,oe,le){oe||function r(fe,te){0===te.length&&te.needDrain&&(te.needDrain=!1,fe.emit("drain"))}(fe,te),te.pendingcb--,le(),Y(fe,te)}function f(fe,te){te.bufferProcessing=!0;var oe=te.bufferedRequest;if(fe._writev&&oe&&oe.next){var de=new Array(te.bufferedRequestCount),A=te.corkedRequestsFree;A.entry=oe;for(var $=0,j=!0;oe;)de[$]=oe,oe.isBuf||(j=!1),oe=oe.next,$+=1;de.allBuffers=j,i(fe,te,!0,te.length,de,"",A.finish),te.pendingcb++,te.lastBufferedRequest=null,A.next?(te.corkedRequestsFree=A.next,A.next=null):te.corkedRequestsFree=new O(te),te.bufferedRequestCount=0}else{for(;oe;){var ue=oe.chunk;if(i(fe,te,!1,te.objectMode?1:ue.length,ue,oe.encoding,oe.callback),oe=oe.next,te.bufferedRequestCount--,te.writing)break}null===oe&&(te.lastBufferedRequest=null)}te.bufferedRequest=oe,te.bufferProcessing=!1}function L(fe){return fe.ending&&0===fe.length&&null===fe.bufferedRequest&&!fe.finished&&!fe.writing}function C(fe,te){fe._final(function(oe){te.pendingcb--,oe&&J(fe,oe),te.prefinished=!0,fe.emit("prefinish"),Y(fe,te)})}function Y(fe,te){var oe=L(te);if(oe&&(function H(fe,te){!te.prefinished&&!te.finalCalled&&("function"!=typeof fe._final||te.destroyed?(te.prefinished=!0,fe.emit("prefinish")):(te.pendingcb++,te.finalCalled=!0,process.nextTick(C,fe,te)))}(fe,te),0===te.pendingcb&&(te.finished=!0,fe.emit("finish"),te.autoDestroy))){var le=fe._readableState;(!le||le.autoDestroy&&le.endEmitted)&&fe.destroy()}return oe}N(3894)(z,o),P.prototype.getBuffer=function(){for(var te=this.bufferedRequest,oe=[];te;)oe.push(te),te=te.next;return oe},function(){try{Object.defineProperty(P.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(fe){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(te){return!!S.call(this,te)||this===z&&te&&te._writableState instanceof P}})):S=function(te){return te instanceof this},z.prototype.pipe=function(){J(this,new k)},z.prototype.write=function(fe,te,oe){var le=this._writableState,de=!1,A=!le.objectMode&&function h(fe){return p.isBuffer(fe)||fe instanceof y}(fe);return A&&!p.isBuffer(fe)&&(fe=function v(fe){return p.from(fe)}(fe)),"function"==typeof te&&(oe=te,te=null),A?te="buffer":te||(te=le.defaultEncoding),"function"!=typeof oe&&(oe=K),le.ending?function u(fe,te){var oe=new V;J(fe,oe),process.nextTick(te,oe)}(this,oe):(A||function t(fe,te,oe,le){var de;return null===oe?de=new U:"string"!=typeof oe&&!te.objectMode&&(de=new E("chunk",["string","Buffer"],oe)),!de||(J(fe,de),process.nextTick(le,de),!1)}(this,le,fe,oe))&&(le.pendingcb++,de=function a(fe,te,oe,le,de,A){if(!oe){var $=function n(fe,te,oe){return!fe.objectMode&&!1!==fe.decodeStrings&&"string"==typeof te&&(te=p.from(te,oe)),te}(te,le,de);le!==$&&(oe=!0,de="buffer",le=$)}var j=te.objectMode?1:le.length;te.length+=j;var ue=te.length<te.highWaterMark;if(ue||(te.needDrain=!0),te.writing||te.corked){var Pe=te.lastBufferedRequest;te.lastBufferedRequest={chunk:le,encoding:de,isBuf:oe,callback:A,next:null},Pe?Pe.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else i(fe,te,!1,j,le,de,A);return ue}(this,le,A,fe,te,oe)),de},z.prototype.cork=function(){this._writableState.corked++},z.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&f(this,fe))},z.prototype.setDefaultEncoding=function(te){if("string"==typeof te&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new W(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),z.prototype._write=function(fe,te,oe){oe(new R("_write()"))},z.prototype._writev=null,z.prototype.end=function(fe,te,oe){var le=this._writableState;return"function"==typeof fe?(oe=fe,fe=null,te=null):"function"==typeof te&&(oe=te,te=null),null!=fe&&this.write(fe,te),le.corked&&(le.corked=1,this.uncork()),le.ending||function ee(fe,te,oe){te.ending=!0,Y(fe,te),oe&&(te.finished?process.nextTick(oe):fe.once("finish",oe)),te.ended=!0,fe.writable=!1}(this,le,oe),this},Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(te){!this._writableState||(this._writableState.destroyed=te)}}),z.prototype.destroy=d.destroy,z.prototype._undestroy=d.undestroy,z.prototype._destroy=function(fe,te){te(fe)}},3872:(Z,q,N)=>{"use strict";var x;function O(I,U,V){return U in I?Object.defineProperty(I,U,{value:V,enumerable:!0,configurable:!0,writable:!0}):I[U]=V,I}var _=N(7542),w=Symbol("lastResolve"),o=Symbol("lastReject"),p=Symbol("error"),y=Symbol("ended"),v=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function m(I,U){return{value:I,done:U}}function M(I){var U=I[w];if(null!==U){var V=I[d].read();null!==V&&(I[v]=null,I[w]=null,I[o]=null,U(m(V,!1)))}}function g(I){process.nextTick(M,I)}var R=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((O(x={get stream(){return this[d]},next:function(){var U=this,V=this[p];if(null!==V)return Promise.reject(V);if(this[y])return Promise.resolve(m(void 0,!0));if(this[d].destroyed)return new Promise(function(P,S){process.nextTick(function(){U[p]?S(U[p]):P(m(void 0,!0))})});var J,W=this[v];if(W)J=new Promise(function E(I,U){return function(V,W){I.then(function(){U[y]?V(m(void 0,!0)):U[h](V,W)},W)}}(W,this));else{var K=this[d].read();if(null!==K)return Promise.resolve(m(K,!1));J=new Promise(this[h])}return this[v]=J,J}},Symbol.asyncIterator,function(){return this}),O(x,"return",function(){var U=this;return new Promise(function(V,W){U[d].destroy(null,function(J){J?W(J):V(m(void 0,!0))})})}),x),R);Z.exports=function(U){var V,W=Object.create(T,(O(V={},d,{value:U,writable:!0}),O(V,w,{value:null,writable:!0}),O(V,o,{value:null,writable:!0}),O(V,p,{value:null,writable:!0}),O(V,y,{value:U._readableState.endEmitted,writable:!0}),O(V,h,{value:function(K,P){var S=W[d].read();S?(W[v]=null,W[w]=null,W[o]=null,K(m(S,!1))):(W[w]=K,W[o]=P)},writable:!0}),V));return W[v]=null,_(U,function(J){if(J&&"ERR_STREAM_PREMATURE_CLOSE"!==J.code){var K=W[o];return null!==K&&(W[v]=null,W[w]=null,W[o]=null,K(J)),void(W[p]=J)}var P=W[w];null!==P&&(W[v]=null,W[w]=null,W[o]=null,P(m(void 0,!0))),W[y]=!0}),U.on("readable",g.bind(null,W)),W}},5019:(Z,q,N)=>{"use strict";function x(g,E){var R=Object.keys(g);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);E&&(T=T.filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable})),R.push.apply(R,T)}return R}function _(g,E,R){return E in g?Object.defineProperty(g,E,{value:R,enumerable:!0,configurable:!0,writable:!0}):g[E]=R,g}function o(g,E){for(var R=0;R<E.length;R++){var T=E[R];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}var v=N(3172).Buffer,d=N(2361).inspect,m=d&&d.custom||"inspect";function M(g,E,R){v.prototype.copy.call(g,E,R)}Z.exports=function(){function g(){(function w(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,g),this.head=null,this.tail=null,this.length=0}return function p(g,E,R){E&&o(g.prototype,E),R&&o(g,R)}(g,[{key:"push",value:function(R){var T={data:R,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length}},{key:"unshift",value:function(R){var T={data:R,next:this.head};0===this.length&&(this.tail=T),this.head=T,++this.length}},{key:"shift",value:function(){if(0!==this.length){var R=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(0===this.length)return"";for(var T=this.head,k=""+T.data;T=T.next;)k+=R+T.data;return k}},{key:"concat",value:function(R){if(0===this.length)return v.alloc(0);for(var T=v.allocUnsafe(R>>>0),k=this.head,I=0;k;)M(k.data,T,I),I+=k.data.length,k=k.next;return T}},{key:"consume",value:function(R,T){var k;return R<this.head.data.length?(k=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):k=R===this.head.data.length?this.shift():T?this._getString(R):this._getBuffer(R),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var T=this.head,k=1,I=T.data;for(R-=I.length;T=T.next;){var U=T.data,V=R>U.length?U.length:R;if(I+=V===U.length?U:U.slice(0,R),0==(R-=V)){V===U.length?(++k,this.head=T.next?T.next:this.tail=null):(this.head=T,T.data=U.slice(V));break}++k}return this.length-=k,I}},{key:"_getBuffer",value:function(R){var T=v.allocUnsafe(R),k=this.head,I=1;for(k.data.copy(T),R-=k.data.length;k=k.next;){var U=k.data,V=R>U.length?U.length:R;if(U.copy(T,T.length-R,0,V),0==(R-=V)){V===U.length?(++I,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=U.slice(V));break}++I}return this.length-=I,T}},{key:m,value:function(R,T){return d(this,function O(g){for(var E=1;E<arguments.length;E++){var R=null!=arguments[E]?arguments[E]:{};E%2?x(Object(R),!0).forEach(function(T){_(g,T,R[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(R)):x(Object(R)).forEach(function(T){Object.defineProperty(g,T,Object.getOwnPropertyDescriptor(R,T))})}return g}({},T,{depth:0,customInspect:!1}))}}]),g}()},1920:Z=>{"use strict";function N(o,p){_(o,p),x(o)}function x(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function _(o,p){o.emit("error",p)}Z.exports={destroy:function q(o,p){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(_,this,o)):process.nextTick(_,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(d){!p&&d?y._writableState?y._writableState.errorEmitted?process.nextTick(x,y):(y._writableState.errorEmitted=!0,process.nextTick(N,y,d)):process.nextTick(N,y,d):p?(process.nextTick(x,y),p(d)):process.nextTick(x,y)}),this)},undestroy:function O(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function w(o,p){var y=o._readableState,v=o._writableState;y&&y.autoDestroy||v&&v.autoDestroy?o.destroy(p):o.emit("error",p)}}},7542:(Z,q,N)=>{"use strict";var x=N(891).q.ERR_STREAM_PREMATURE_CLOSE;function _(){}Z.exports=function o(p,y,v){if("function"==typeof y)return o(p,null,y);y||(y={}),v=function O(p){var y=!1;return function(){if(!y){y=!0;for(var v=arguments.length,h=new Array(v),d=0;d<v;d++)h[d]=arguments[d];p.apply(this,h)}}}(v||_);var h=y.readable||!1!==y.readable&&p.readable,d=y.writable||!1!==y.writable&&p.writable,m=function(){p.writable||g()},M=p._writableState&&p._writableState.finished,g=function(){d=!1,M=!0,h||v.call(p)},E=p._readableState&&p._readableState.endEmitted,R=function(){h=!1,E=!0,d||v.call(p)},T=function(V){v.call(p,V)},k=function(){var V;return h&&!E?((!p._readableState||!p._readableState.ended)&&(V=new x),v.call(p,V)):d&&!M?((!p._writableState||!p._writableState.ended)&&(V=new x),v.call(p,V)):void 0},I=function(){p.req.on("finish",g)};return function w(p){return p.setHeader&&"function"==typeof p.abort}(p)?(p.on("complete",g),p.on("abort",k),p.req?I():p.on("request",I)):d&&!p._writableState&&(p.on("end",m),p.on("close",m)),p.on("end",R),p.on("finish",g),!1!==y.error&&p.on("error",T),p.on("close",k),function(){p.removeListener("complete",g),p.removeListener("abort",k),p.removeListener("request",I),p.req&&p.req.removeListener("finish",g),p.removeListener("end",m),p.removeListener("close",m),p.removeListener("finish",g),p.removeListener("end",R),p.removeListener("error",T),p.removeListener("close",k)}}},7412:Z=>{Z.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(Z,q,N)=>{"use strict";var x,_=N(891).q,w=_.ERR_MISSING_ARGS,o=_.ERR_STREAM_DESTROYED;function p(g){if(g)throw g}function v(g,E,R,T){T=function O(g){var E=!1;return function(){E||(E=!0,g.apply(void 0,arguments))}}(T);var k=!1;g.on("close",function(){k=!0}),void 0===x&&(x=N(7542)),x(g,{readable:E,writable:R},function(U){if(U)return T(U);k=!0,T()});var I=!1;return function(U){if(!k&&!I){if(I=!0,function y(g){return g.setHeader&&"function"==typeof g.abort}(g))return g.abort();if("function"==typeof g.destroy)return g.destroy();T(U||new o("pipe"))}}}function h(g){g()}function d(g,E){return g.pipe(E)}function m(g){return g.length&&"function"==typeof g[g.length-1]?g.pop():p}Z.exports=function M(){for(var g=arguments.length,E=new Array(g),R=0;R<g;R++)E[R]=arguments[R];var T=m(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new w("streams");var k,I=E.map(function(U,V){var W=V<E.length-1;return v(U,W,V>0,function(K){k||(k=K),K&&I.forEach(h),!W&&(I.forEach(h),T(k))})});return E.reduce(d)}},7102:(Z,q,N)=>{"use strict";var x=N(891).q.ERR_INVALID_OPT_VALUE;Z.exports={getHighWaterMark:function _(w,o,p,y){var v=function O(w,o,p){return null!=w.highWaterMark?w.highWaterMark:o?w[p]:null}(o,y,p);if(null!=v){if(!isFinite(v)||Math.floor(v)!==v||v<0)throw new x(y?p:"highWaterMark",v);return Math.floor(v)}return w.objectMode?16:16384}}},4970:(Z,q,N)=>{Z.exports=N(9069).EventEmitter},5685:(Z,q,N)=>{(q=Z.exports=N(3154)).Stream=q,q.Readable=q,q.Writable=N(520),q.Duplex=N(1339),q.Transform=N(6025),q.PassThrough=N(6071),q.finished=N(7542),q.pipeline=N(954)},5634:(Z,q,N)=>{"use strict";var x=N(3172).Buffer,O=N(3894),_=N(9650),w=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function m(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function M(I,U){return I<<U|I>>>32-U}function g(I,U,V,W,J,K,P,S){return M(I+(U^V^W)+K+P|0,S)+J|0}function E(I,U,V,W,J,K,P,S){return M(I+(U&V|~U&W)+K+P|0,S)+J|0}function R(I,U,V,W,J,K,P,S){return M(I+((U|~V)^W)+K+P|0,S)+J|0}function T(I,U,V,W,J,K,P,S){return M(I+(U&W|V&~W)+K+P|0,S)+J|0}function k(I,U,V,W,J,K,P,S){return M(I+(U^(V|~W))+K+P|0,S)+J|0}O(m,_),m.prototype._update=function(){for(var I=w,U=0;U<16;++U)I[U]=this._block.readInt32LE(4*U);for(var V=0|this._a,W=0|this._b,J=0|this._c,K=0|this._d,P=0|this._e,S=0|this._a,z=0|this._b,u=0|this._c,t=0|this._d,n=0|this._e,a=0;a<80;a+=1){var i,s;a<16?(i=g(V,W,J,K,P,I[o[a]],h[0],y[a]),s=k(S,z,u,t,n,I[p[a]],d[0],v[a])):a<32?(i=E(V,W,J,K,P,I[o[a]],h[1],y[a]),s=T(S,z,u,t,n,I[p[a]],d[1],v[a])):a<48?(i=R(V,W,J,K,P,I[o[a]],h[2],y[a]),s=R(S,z,u,t,n,I[p[a]],d[2],v[a])):a<64?(i=T(V,W,J,K,P,I[o[a]],h[3],y[a]),s=E(S,z,u,t,n,I[p[a]],d[3],v[a])):(i=k(V,W,J,K,P,I[o[a]],h[4],y[a]),s=g(S,z,u,t,n,I[p[a]],d[4],v[a])),V=P,P=K,K=M(J,10),J=W,W=i,S=n,n=t,t=M(u,10),u=z,z=s}var l=this._b+J+t|0;this._b=this._c+K+n|0,this._c=this._d+P+S|0,this._d=this._e+V+z|0,this._e=this._a+W+u|0,this._a=l},m.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=x.alloc?x.alloc(20):new x(20);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I.writeInt32LE(this._e,16),I},Z.exports=m},3502:(Z,q,N)=>{var x=N(3172),O=x.Buffer;function _(o,p){for(var y in o)p[y]=o[y]}function w(o,p,y){return O(o,p,y)}O.from&&O.alloc&&O.allocUnsafe&&O.allocUnsafeSlow?Z.exports=x:(_(x,q),q.Buffer=w),_(O,w),w.from=function(o,p,y){if("number"==typeof o)throw new TypeError("Argument must not be a number");return O(o,p,y)},w.alloc=function(o,p,y){if("number"!=typeof o)throw new TypeError("Argument must be a number");var v=O(o);return void 0!==p?"string"==typeof y?v.fill(p,y):v.fill(p):v.fill(0),v},w.allocUnsafe=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return O(o)},w.allocUnsafeSlow=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return x.SlowBuffer(o)}},2038:(Z,q,N)=>{"use strict";var w,x=N(3172),O=x.Buffer,_={};for(w in x)!x.hasOwnProperty(w)||"SlowBuffer"===w||"Buffer"===w||(_[w]=x[w]);var o=_.Buffer={};for(w in O)!O.hasOwnProperty(w)||"allocUnsafe"===w||"allocUnsafeSlow"===w||(o[w]=O[w]);if(_.Buffer.prototype=O.prototype,(!o.from||o.from===Uint8Array.from)&&(o.from=function(p,y,v){if("number"==typeof p)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof p);if(p&&void 0===p.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);return O(p,y,v)}),o.alloc||(o.alloc=function(p,y,v){if("number"!=typeof p)throw new TypeError('The "size" argument must be of type number. Received type '+typeof p);if(p<0||p>=2*(1<<30))throw new RangeError('The value "'+p+'" is invalid for option "size"');var h=O(p);return y&&0!==y.length?"string"==typeof v?h.fill(y,v):h.fill(y):h.fill(0),h}),!_.kStringMaxLength)try{_.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(p){}_.constants||(_.constants={MAX_LENGTH:_.kMaxLength},_.kStringMaxLength&&(_.constants.MAX_STRING_LENGTH=_.kStringMaxLength)),Z.exports=_},6692:(Z,q,N)=>{var x=N(3502).Buffer;function O(_,w){this._block=x.alloc(_),this._finalSize=w,this._blockSize=_,this._len=0}O.prototype.update=function(_,w){"string"==typeof _&&(_=x.from(_,w=w||"utf8"));for(var o=this._block,p=this._blockSize,y=_.length,v=this._len,h=0;h<y;){for(var d=v%p,m=Math.min(y-h,p-d),M=0;M<m;M++)o[d+M]=_[h+M];h+=m,(v+=m)%p==0&&this._update(o)}return this._len+=y,this},O.prototype.digest=function(_){var w=this._len%this._blockSize;this._block[w]=128,this._block.fill(0,w+1),w>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=8*this._len;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var p=(4294967295&o)>>>0;this._block.writeUInt32BE((o-p)/4294967296,this._blockSize-8),this._block.writeUInt32BE(p,this._blockSize-4)}this._update(this._block);var v=this._hash();return _?v.toString(_):v},O.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Z.exports=O},5244:(Z,q,N)=>{var x=Z.exports=function(_){_=_.toLowerCase();var w=x[_];if(!w)throw new Error(_+" is not supported (we accept pull requests)");return new w};x.sha=N(8932),x.sha1=N(7736),x.sha224=N(5044),x.sha256=N(5014),x.sha384=N(6540),x.sha512=N(117)},8932:(Z,q,N)=>{var x=N(3894),O=N(6692),_=N(3502).Buffer,w=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function p(){this.init(),this._w=o,O.call(this,64,56)}function y(d){return d<<5|d>>>27}function v(d){return d<<30|d>>>2}function h(d,m,M,g){return 0===d?m&M|~m&g:2===d?m&M|m&g|M&g:m^M^g}x(p,O),p.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},p.prototype._update=function(d){for(var m=this._w,M=0|this._a,g=0|this._b,E=0|this._c,R=0|this._d,T=0|this._e,k=0;k<16;++k)m[k]=d.readInt32BE(4*k);for(;k<80;++k)m[k]=m[k-3]^m[k-8]^m[k-14]^m[k-16];for(var I=0;I<80;++I){var U=~~(I/20),V=y(M)+h(U,g,E,R)+T+m[I]+w[U]|0;T=R,R=E,E=v(g),g=M,M=V}this._a=M+this._a|0,this._b=g+this._b|0,this._c=E+this._c|0,this._d=R+this._d|0,this._e=T+this._e|0},p.prototype._hash=function(){var d=_.allocUnsafe(20);return d.writeInt32BE(0|this._a,0),d.writeInt32BE(0|this._b,4),d.writeInt32BE(0|this._c,8),d.writeInt32BE(0|this._d,12),d.writeInt32BE(0|this._e,16),d},Z.exports=p},7736:(Z,q,N)=>{var x=N(3894),O=N(6692),_=N(3502).Buffer,w=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function p(){this.init(),this._w=o,O.call(this,64,56)}function y(m){return m<<1|m>>>31}function v(m){return m<<5|m>>>27}function h(m){return m<<30|m>>>2}function d(m,M,g,E){return 0===m?M&g|~M&E:2===m?M&g|M&E|g&E:M^g^E}x(p,O),p.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},p.prototype._update=function(m){for(var M=this._w,g=0|this._a,E=0|this._b,R=0|this._c,T=0|this._d,k=0|this._e,I=0;I<16;++I)M[I]=m.readInt32BE(4*I);for(;I<80;++I)M[I]=y(M[I-3]^M[I-8]^M[I-14]^M[I-16]);for(var U=0;U<80;++U){var V=~~(U/20),W=v(g)+d(V,E,R,T)+k+M[U]+w[V]|0;k=T,T=R,R=h(E),E=g,g=W}this._a=g+this._a|0,this._b=E+this._b|0,this._c=R+this._c|0,this._d=T+this._d|0,this._e=k+this._e|0},p.prototype._hash=function(){var m=_.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},Z.exports=p},5044:(Z,q,N)=>{var x=N(3894),O=N(5014),_=N(6692),w=N(3502).Buffer,o=new Array(64);function p(){this.init(),this._w=o,_.call(this,64,56)}x(p,O),p.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},p.prototype._hash=function(){var y=w.allocUnsafe(28);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y},Z.exports=p},5014:(Z,q,N)=>{var x=N(3894),O=N(6692),_=N(3502).Buffer,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function p(){this.init(),this._w=o,O.call(this,64,56)}function y(g,E,R){return R^g&(E^R)}function v(g,E,R){return g&E|R&(g|E)}function h(g){return(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10)}function d(g){return(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7)}function m(g){return(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3}function M(g){return(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10}x(p,O),p.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},p.prototype._update=function(g){for(var E=this._w,R=0|this._a,T=0|this._b,k=0|this._c,I=0|this._d,U=0|this._e,V=0|this._f,W=0|this._g,J=0|this._h,K=0;K<16;++K)E[K]=g.readInt32BE(4*K);for(;K<64;++K)E[K]=M(E[K-2])+E[K-7]+m(E[K-15])+E[K-16]|0;for(var P=0;P<64;++P){var S=J+d(U)+y(U,V,W)+w[P]+E[P]|0,z=h(R)+v(R,T,k)|0;J=W,W=V,V=U,U=I+S|0,I=k,k=T,T=R,R=S+z|0}this._a=R+this._a|0,this._b=T+this._b|0,this._c=k+this._c|0,this._d=I+this._d|0,this._e=U+this._e|0,this._f=V+this._f|0,this._g=W+this._g|0,this._h=J+this._h|0},p.prototype._hash=function(){var g=_.allocUnsafe(32);return g.writeInt32BE(this._a,0),g.writeInt32BE(this._b,4),g.writeInt32BE(this._c,8),g.writeInt32BE(this._d,12),g.writeInt32BE(this._e,16),g.writeInt32BE(this._f,20),g.writeInt32BE(this._g,24),g.writeInt32BE(this._h,28),g},Z.exports=p},6540:(Z,q,N)=>{var x=N(3894),O=N(117),_=N(6692),w=N(3502).Buffer,o=new Array(160);function p(){this.init(),this._w=o,_.call(this,128,112)}x(p,O),p.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},p.prototype._hash=function(){var y=w.allocUnsafe(48);function v(h,d,m){y.writeInt32BE(h,m),y.writeInt32BE(d,m+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),y},Z.exports=p},117:(Z,q,N)=>{var x=N(3894),O=N(6692),_=N(3502).Buffer,w=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function p(){this.init(),this._w=o,O.call(this,128,112)}function y(T,k,I){return I^T&(k^I)}function v(T,k,I){return T&k|I&(T|k)}function h(T,k){return(T>>>28|k<<4)^(k>>>2|T<<30)^(k>>>7|T<<25)}function d(T,k){return(T>>>14|k<<18)^(T>>>18|k<<14)^(k>>>9|T<<23)}function m(T,k){return(T>>>1|k<<31)^(T>>>8|k<<24)^T>>>7}function M(T,k){return(T>>>1|k<<31)^(T>>>8|k<<24)^(T>>>7|k<<25)}function g(T,k){return(T>>>19|k<<13)^(k>>>29|T<<3)^T>>>6}function E(T,k){return(T>>>19|k<<13)^(k>>>29|T<<3)^(T>>>6|k<<26)}function R(T,k){return T>>>0<k>>>0?1:0}x(p,O),p.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},p.prototype._update=function(T){for(var k=this._w,I=0|this._ah,U=0|this._bh,V=0|this._ch,W=0|this._dh,J=0|this._eh,K=0|this._fh,P=0|this._gh,S=0|this._hh,z=0|this._al,u=0|this._bl,t=0|this._cl,n=0|this._dl,a=0|this._el,i=0|this._fl,s=0|this._gl,l=0|this._hl,b=0;b<32;b+=2)k[b]=T.readInt32BE(4*b),k[b+1]=T.readInt32BE(4*b+4);for(;b<160;b+=2){var c=k[b-30],r=k[b-30+1],f=m(c,r),L=M(r,c),C=g(c=k[b-4],r=k[b-4+1]),H=E(r,c),ne=k[b-32],fe=k[b-32+1],te=L+k[b-14+1]|0,oe=f+k[b-14]+R(te,L)|0;oe=(oe=oe+C+R(te=te+H|0,H)|0)+ne+R(te=te+fe|0,fe)|0,k[b]=oe,k[b+1]=te}for(var le=0;le<160;le+=2){oe=k[le],te=k[le+1];var de=v(I,U,V),A=v(z,u,t),$=h(I,z),j=h(z,I),ue=d(J,a),Pe=d(a,J),pe=w[le],me=w[le+1],Be=y(J,K,P),re=y(a,i,s),D=l+Pe|0,se=S+ue+R(D,l)|0;se=(se=(se=se+Be+R(D=D+re|0,re)|0)+pe+R(D=D+me|0,me)|0)+oe+R(D=D+te|0,te)|0;var ie=j+A|0,ae=$+de+R(ie,j)|0;S=P,l=s,P=K,s=i,K=J,i=a,J=W+se+R(a=n+D|0,n)|0,W=V,n=t,V=U,t=u,U=I,u=z,I=se+ae+R(z=D+ie|0,D)|0}this._al=this._al+z|0,this._bl=this._bl+u|0,this._cl=this._cl+t|0,this._dl=this._dl+n|0,this._el=this._el+a|0,this._fl=this._fl+i|0,this._gl=this._gl+s|0,this._hl=this._hl+l|0,this._ah=this._ah+I+R(this._al,z)|0,this._bh=this._bh+U+R(this._bl,u)|0,this._ch=this._ch+V+R(this._cl,t)|0,this._dh=this._dh+W+R(this._dl,n)|0,this._eh=this._eh+J+R(this._el,a)|0,this._fh=this._fh+K+R(this._fl,i)|0,this._gh=this._gh+P+R(this._gl,s)|0,this._hh=this._hh+S+R(this._hl,l)|0},p.prototype._hash=function(){var T=_.allocUnsafe(64);function k(I,U,V){T.writeInt32BE(I,V),T.writeInt32BE(U,V+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),T},Z.exports=p},295:(Z,q,N)=>{Z.exports=_;var x=N(9069).EventEmitter;function _(){x.call(this)}N(3894)(_,x),_.Readable=N(3154),_.Writable=N(520),_.Duplex=N(1339),_.Transform=N(6025),_.PassThrough=N(6071),_.finished=N(7542),_.pipeline=N(954),_.Stream=_,_.prototype.pipe=function(w,o){var p=this;function y(E){w.writable&&!1===w.write(E)&&p.pause&&p.pause()}function v(){p.readable&&p.resume&&p.resume()}p.on("data",y),w.on("drain",v),!w._isStdio&&(!o||!1!==o.end)&&(p.on("end",d),p.on("close",m));var h=!1;function d(){h||(h=!0,w.end())}function m(){h||(h=!0,"function"==typeof w.destroy&&w.destroy())}function M(E){if(g(),0===x.listenerCount(this,"error"))throw E}function g(){p.removeListener("data",y),w.removeListener("drain",v),p.removeListener("end",d),p.removeListener("close",m),p.removeListener("error",M),w.removeListener("error",M),p.removeListener("end",g),p.removeListener("close",g),w.removeListener("close",g)}return p.on("error",M),w.on("error",M),p.on("end",g),p.on("close",g),w.on("close",g),w.emit("pipe",p),w}},3054:(Z,q,N)=>{"use strict";var x=N(858).Buffer,O=x.isEncoding||function(I){switch((I=""+I)&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(I){var U;switch(this.encoding=function w(I){var U=function _(I){if(!I)return"utf8";for(var U;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(U)return;I=(""+I).toLowerCase(),U=!0}}(I);if("string"!=typeof U&&(x.isEncoding===O||!O(I)))throw new Error("Unknown encoding: "+I);return U||I}(I),this.encoding){case"utf16le":this.text=M,this.end=g,U=4;break;case"utf8":this.fillLast=h,U=4;break;case"base64":this.text=E,this.end=R,U=3;break;default:return this.write=T,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=x.allocUnsafe(U)}function p(I){return I<=127?0:I>>5==6?2:I>>4==14?3:I>>3==30?4:I>>6==2?-1:-2}function h(I){var U=this.lastTotal-this.lastNeed,V=function v(I,U,V){if(128!=(192&U[0]))return I.lastNeed=0,"\ufffd";if(I.lastNeed>1&&U.length>1){if(128!=(192&U[1]))return I.lastNeed=1,"\ufffd";if(I.lastNeed>2&&U.length>2&&128!=(192&U[2]))return I.lastNeed=2,"\ufffd"}}(this,I);return void 0!==V?V:this.lastNeed<=I.length?(I.copy(this.lastChar,U,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,U,0,I.length),void(this.lastNeed-=I.length))}function M(I,U){if((I.length-U)%2==0){var V=I.toString("utf16le",U);if(V){var W=V.charCodeAt(V.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",U,I.length-1)}function g(I){var U=I&&I.length?this.write(I):"";return this.lastNeed?U+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):U}function E(I,U){var V=(I.length-U)%3;return 0===V?I.toString("base64",U):(this.lastNeed=3-V,this.lastTotal=3,1===V?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",U,I.length-V))}function R(I){var U=I&&I.length?this.write(I):"";return this.lastNeed?U+this.lastChar.toString("base64",0,3-this.lastNeed):U}function T(I){return I.toString(this.encoding)}function k(I){return I&&I.length?this.write(I):""}q.s=o,o.prototype.write=function(I){if(0===I.length)return"";var U,V;if(this.lastNeed){if(void 0===(U=this.fillLast(I)))return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<I.length?U?U+this.text(I,V):this.text(I,V):U||""},o.prototype.end=function m(I){var U=I&&I.length?this.write(I):"";return this.lastNeed?U+"\ufffd":U},o.prototype.text=function d(I,U){var V=function y(I,U,V){var W=U.length-1;if(W<V)return 0;var J=p(U[W]);return J>=0?(J>0&&(I.lastNeed=J-1),J):--W<V||-2===J?0:(J=p(U[W]))>=0?(J>0&&(I.lastNeed=J-2),J):--W<V||-2===J?0:(J=p(U[W]))>=0?(J>0&&(2===J?J=0:I.lastNeed=J-3),J):0}(this,I,U);if(!this.lastNeed)return I.toString("utf8",U);this.lastTotal=V;var W=I.length-(V-this.lastNeed);return I.copy(this.lastChar,0,W),I.toString("utf8",U,W)},o.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length}},858:(Z,q,N)=>{var x=N(3172),O=x.Buffer;function _(o,p){for(var y in o)p[y]=o[y]}function w(o,p,y){return O(o,p,y)}O.from&&O.alloc&&O.allocUnsafe&&O.allocUnsafeSlow?Z.exports=x:(_(x,q),q.Buffer=w),w.prototype=Object.create(O.prototype),_(O,w),w.from=function(o,p,y){if("number"==typeof o)throw new TypeError("Argument must not be a number");return O(o,p,y)},w.alloc=function(o,p,y){if("number"!=typeof o)throw new TypeError("Argument must be a number");var v=O(o);return void 0!==p?"string"==typeof y?v.fill(p,y):v.fill(p):v.fill(0),v},w.allocUnsafe=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return O(o)},w.allocUnsafeSlow=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return x.SlowBuffer(o)}},4364:Z=>{function N(x){try{if(!global.localStorage)return!1}catch(_){return!1}var O=global.localStorage[x];return null!=O&&"true"===String(O).toLowerCase()}Z.exports=function q(x,O){if(N("noDeprecation"))return x;var _=!1;return function w(){if(!_){if(N("throwDeprecation"))throw new Error(O);N("traceDeprecation")?console.trace(O):console.warn(O),_=!0}return x.apply(this,arguments)}}},950:()=>{},6601:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{},4946:Z=>{"use strict";Z.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},5207:Z=>{"use strict";Z.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:Z=>{"use strict";Z.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:Z=>{"use strict";Z.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:Z=>{"use strict";Z.exports={i8:"6.5.4"}},2562:Z=>{"use strict";Z.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}}]);